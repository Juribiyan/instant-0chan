{"version":3,"sources":["es6/src/kusaba.new.js"],"names":["style_cookie","style_cookie_txt","style_cookie_site","ispage","kumod_set","is_entering","_messages","en","noLocalStorage","oops","blankResponse","expandingThread","newThread","NewThread","replyTo","cancel","update","updatingCounts","couldntFetch","noNewPosts","replies","settings_fxEnabled","settings_showReplies","settings_sfwMode","settings_expandImgFull","settings_constrainWidth","enterCaptcha","selectText","dcls","watchOn","captcharot","threadUpdationAutomatically","stopFuckingDolls","del","delandban","ban","stickthread","unstickthread","lockthread","unlockthread","returnDesktop","returnTouch","forceDesktop","okay","captchalang","reply","imageDownscaledBy","videoDownscaledBy","toFit","newReplies","newThreadsAvailable","loading","anonymous","sortBy","bumpOrder","lastReply","creationDate","replyCount","doStick","showHidden","doNotStick","hideHidden","search","threadOnPage","goToThread","smallPics","largePics","legacyMode","threads","comments","active_since","last_active","active_on","tryAgain","xhrError","details","thread","post","posts","deleted","deletedMulti","report","reported","reportedMulti","fileRemoved","file","files","collapse","asMod","asOP","historyEmpty","noDataLoaded","unable_load_20","captchaLangChanged","found","links","selectMultiple","selected","directLink","quoteLink","maxAttNumReached","unsupportedFileType","hideName","removeFile","spoilerOnOff","hidePost","unhidePost","settings_hideCompletely","pinUnpin","hideForm","collapseExpand","notEmpty","showName","showSubject","showEmbeds","showPassword","showTTL","attachFile","classicSimplifiedForm","showMarkup","refreshCatalog","cancelTimer","saved","savedMulti","password","captcha","captchaImage","refreshCaptcha","showCaptcha","captchaExpired","ru","odc","_l","locale","hasOwnProperty","Array","prototype","indexOf","elt","len","length","from","arguments","Math","ceil","floor","Utf8","encode","string","String","fromCharCode","replace","c","utftext","n","charCodeAt","decode","i","c2","c3","Cookie","name","regexp","RegExp","hit","exec","document","cookie","unescape","replaceAll","value","days","expires","date","Date","setTime","getTime","toGMTString","str","to","idx","_lastActiveForm","Object","defineProperty","window","get","getClientRects","updateActiveForm","set","el","querySelectorAll","forEach","a","classList","remove","form","_findParent","add","contains","toggleFormCollapse","floating","querySelector","lastActiveForm","findClosest","selector","height","innerHeight","list","closest","map","call","rect","offset","abs","y","filter","sort","e1","e2","insert","text","breakBefore","breakAfter","textarea","start","selectionStart","end","selectionEnd","pre","substr","charBefore","charAfter","selectionRange","setSelectionRange","focus","markup","$target","istart","iend","element","find","startPos","endPos","substring","bullets","bullet","$area","val","split","newtxt","quotes","type","areaVal","tag","quote","b","v","eval","checkhighlight","match","location","toString","$","highlight","id","offTimeout","removeClass","$post","parents","addClass","setTimeout","bcr","getBoundingClientRect","docHeight","documentElement","clientHeight","bottom","top","postX","scrollTop","spaceAround","scrollTo","password_length","get_password","pass","getCookie","randomString","togglePassword","passwordbox_html","html","toLowerCase","newhtml","show","set_cookie","Styles","all","titles","init","_","each","getElementsByTagName","link","getAttribute","push","_default","hasAttribute","custom","current","customBypass","this_board_dir","in_array","initiated","decide","testingCSS","LSfetchJSON","title","addStyle","url","setStyle","$clink","click","ev","preventDefault","quitTest","parent","slideUp","$cancelLink","append","setCustom","sc","setDefault","change","stylename","removeBypass","addBypass","oldcookie","newcookie","brd","join","scrollAnchor","save","sheet","disabled","restore","onTest","m","capitalize","escape","$link","testStyle","pups","succ","time","confirmLongTermTest","localStorage","setItem","JSON","stringify","removeItem","HiddenItems","hideCompletely","ls","kind","lists","write","buildCSS","unhide","hide","idb","updateCSS","injector","inject","isHidden","hideItem","saveList","unhideItem","hideThread","slideDown","$thread","$form","promise","done","toggleFormFloating","unhideThread","toggleblotter","slideToggle","is","hideblotter","expandthread","threadid","board","expandFrom","expandTo","$omitted","$msg","prependTo","HTMLoader","getThread","err","replaceWith","replyMap","showReplies","newposts","busy","options","defaults","expectedPost","silent","onError","onSuccess","timestamp","pushTask","execute","task","next","replies_container","$newposts_get","$lastQrl","last","lastpost","data","insertAdjacentHTML","unreadCounter","refreshTimestamp","info","stack","shift","flyTo","dest","destBox","destX","x","width","destY","elBox","style","transformOrigin","Promise","resolve","getComputedStyle","transition","oldBox","offRight","right","innerWidth","toggle","box","newWidth","left","toggleFormRow","btn","dataset","row","rem","isRowEmpty","_originalTitle","focal","inputs","checked","trim","updateReminders","float","pinner","getParentPost","f","then","drags","mousedown","e","stopPropagation","dragsOff","prop","hidePostForm","_preview","_pinned","toggleFormSimplify","simplify","simplified","clonePostForm","anchorID","preview","oldForm","Captcha","enabled","state","newForm","cloneNode","innerText","blotter","onclick","uniqueId","l","newid","input","setAttribute","resetForm","richFileInput","initForm","maybePost","_findPrevious","matches","skip","anchor","pinned","ondragstart","ondrop","quickreply","$this","boardName","fromExternalBoard","threadID","postID","$preview","needInsert","_findNext","formExists","formHidden","formFloating","quotation","getPostQuotation","parentElement","insertAdjacentElement","existingForm","_getSelection","getSelection","selection","selectedText","node","anchorNode","getLocalSelection","sel","_isChildOf","popupMessage","content","delay","console","warn","forceEnable","captchaTimeout","addImgLoadListener","onClick","bind","addEventListener","evt","onFieldClick","onload","onImageLoad","evType","onAnimationEnd","_state","s","offsetWidth","clear","refresh","ctrlKey","altKey","target","switch_lang","cColor","css","slice","ku_boardspath","random","img","src","formatFileSize","bytes","round","handleFiles","fromClipboard","slotsLeft","maxfiles","filesLeft","fileAttached","handleFile","fx","ns","ext","pop","allowed_filetypes","fname","sizeFormatted","size","reader","FileReader","result","addFile","readAsDataURL","extra","index","store","recalcForm","thisEl","updateInfo","toUpperCase","naturalWidth","naturalHeight","onerror","_ext","updateTitle","count","innerHTML","$el","hasClass","serialize","fd","fe","postform","_this","on","$entry","toggleClass","select","item","items","clipboardData","originalEvent","arr","getAsFile","nodeName","dataTransfer","Sortable","create","animation","handle","removeAttribute","area","previousElementSibling","clearStore","handleCtrlEnter","activeElement","Ajax","submitPost","sage","alertsToRemove","clone","shownErrors","closeByID","showError","captchafield","showWarning","FormData","xr","XMLHttpRequest","postToken","open","action","status","res","parse","response","error","error_verbose","error_type","ku_cgipath","badatt","error_data","attachmenttype","position","noko","thread_replyto","href","post_id","reload","send","reportPost","callback","forms","delform","postsReported","postErrors","success","msg","message","timerToken","postsSaved","$reply","modThread","$a","$li","$posthead","$extrabtns","prepend","makeIcon","deleteItems","has","delToken","inspectFormData","formData","pair","entries","log","classes","bare","addCaptchaToMenu","$menu","keydown","key","expandimg","postnum","imgurl","thumburl","imgw","imgh","thumbw","thumbh","getElementById","fc_width","$element","$postbody","$fc_filename","event","which","Settings","expandImgFull","max_w","clientWidth","body","offset_el","offsetLeft","offsetParent","new_w","ratio","zoom","notice","createElement","textDecoration","textNode","createTextNode","appendChild","insertBefore","maxWidth","PostPreviews","zindex","_parseURL","_mouseover","isCatalog","parsedURL","parentid","postid","previewid","children","first","before","mouseleave","_mouseout","mouseover","mouseOverPreview","attr","clientY","pageY","clientX","pageX","zIndex","cursor","getPost","ebtns","pin","$pre","clearTimeout","fadeout","nodelay","predelay","_timings","fade","set_inputs","savedName","em","postpassword","set_delpass","special","load","nodeType","tagName","complete","readyState","handler","apply","trigger","jQuery","_checkbox","clicked","settingName","defaultValue","perBoard","settingNameGeneral","removeAttr","fxEnabled","changed","off","is_catalog","sfwMode","constrainWidth","rswap","swap","after","setCaptchaLang","lang","offClick","readyset","isTouch","chpok","LatexIT","checkgotothread","checknamesave","bnrs","processNodeInsertion","add_mob_menu","menu_show","cloud20","mouseenter","fn","head","js","OpenLatexEditor","expandVideo","xl","animate","htm","stripHTML","ref","postnode","postBody","qoutation","unwrapEmbed","wrapEmbed","countries","$fig","$fsz","pause","itemCount","$postnode","isOP","opmod","visible","$boundTo","ofs","offsetTop","outerHeight","outerWidth","__menuProps","fileid","isFile","$md","isShown","menu","$item","$pass","$c","special_error","errors","cssLink","styleName","isTrip","resize","$fileMenu","textbox","onfocus","onblur","animationName","catalog","appendTo","trip","getJSON","formatDate","fadeIn","fail","liveupd_ena","io","updater","doubletap","bindType","delegateType","handleObj","targetData","now","delta","lastTouch","touches","origType","property","changedTouches","NTP","calc","t0","t1","t2","t3","sync","pending","valueOf","ajax","servertime","synced","timeWithOffset","getServerTime","externallyResolvingPromise","promiseResolve","promiseReject","reject","$node","prettyPrint","render","iv","updateTTL","ms_left","srvTime","min_left","h_left","padLeft","markOnly","clearInterval","setInterval","audio","play","catch","noop","newThreads","socket","connect","liveupd_api","subscribeTo","liveupd_sitename","thr","dispatch","emit","writable","configurable","token","notifyAboutNewThreads","notifyAboutNewRepliesOnBoardPage","showNewReplies","hasFocus","new_thread_id","showNewThreads","repliesOnBoardPage","room","reply_id","refreshNewRepliesCount","$counter","clearCounter","loadNewReplies","$freshReplies","freshReplies","__alreadyLoading","$wta","bySelf","postsDeleted","insideDeletedThread","filesDeleted","fileErrors","deletedClasses","by_op","by_mod","itemtype","prev","thread_id","kumod","$mov","movieurl","dt","uid","video","checkd","doc","navigatepages","docloc","keyCode","page","docloc_trimmed","lastIndexOf","docloc_valid","relativepost","maxthreads","getElementsByName","newrelativepost","attachEvent","NodeList","Element","parentNode","nextElementSibling","Node","root","repliesContainer","container","linkData","className","linkN","includes","elements","dimensions","scrollY","_top","mid","elMap","parentBCR","elems","pos","relativeVisibleWidth","relativeVisibleHeight","dx","dy","primaryVisibility","secondaryVisibility","primaryOffset","secondaryOffset","bcrBefore","loaded","requestAnimationFrame","bcrAfter","scrollBy","lastTime","vendors","cancelAnimationFrame","currTime","timeToCall","max","menu_current","menu_last","dl","queue","clearQueue","menu_pin","toggle_oldmenu","mode","implementation","hasFeature","eqn","txt","atxt","extxt","r","g","replaceWithSrc","$scope","scope","normalizergb","toFixed","normalizergba","needle","haystack","opt","extend","$drag","z_idx","drg_h","drg_w","pos_y","pos_x","onMove","$iw","paddingBottom","code","enccode","encodeURI","$ew","empty","isClone","fields","field","onchange","indicator","embedLinks","process","site","nextCheckbox","exp","onmouseleave","hideTimeout","onmouseenter","cms","areaID","ro","readOnly","sub","ttl","min","fileButton","alias","existing","styleSheet","cssText","removeChild","chars","mm","$mmw","cats","boards10","getBoards","order","boards","b20","cat","ix","dir","desc","R","sqrt","scale","allboards","o","toexpand","sd","sect","section","rs","rj","query","display","opts","ku_boardsfolder","reduced","bnr","path","toDisplay","randomItem","getRandomInt","array","sites","rx","fruit","conf","layout","respectStickied","expandOnHover","saveConfig","myConf","refreshBtn","sortBtns","v_d_i","pinBtns","hideBtns","layoutBtns","searchInput","$card","getEmbedThumb","currentTarget","threadIX","findIndex","model","hidden","rendered","$group","build","gallery","fileTypes","image","jpgThumb","iconsAvailable","embed","authorities","short","Dow","dateLocal","dows","getDay","yy","getFullYear","mo","getMonth","Mon","mons","dd","getDate","hh","getHours","getMinutes","ss","getSeconds","entry","sortByOrder","sby","repeat","buildEntry","thumbnail_url","outerHTML","thumbnail_medium","processed","embeds","smallThumb","file_type","thumb_w","thumb_h","ftype","thumbURL","vartype","bigThumb","smallSrc","expandable","op","repliesLabel","reply_count","last_reply","images","countersCombined","posterauthority","nameDatePriority","tripcode","poster","this_board_defaultName","dateCompact","searchData","subject","buildIndicators","layouts","stickied","lock","locked","deathmark","deleted_timestamp","indicatorsCombined","tmp","createHTMLDocument","textContent","built","lastvisits","last_ts","boardid","parseInt","dataType","valstr","$brd","loadThread","boardID","force_html_nocache","thrno","postMap","cached","threadMaps","secondTry","cachedPost","range","force","threadMap","reduce","switchFileType","exts","buildAlert","marginTop","timeout","onHold","old","reverse","ar","ae","holdOffTimeout","scheduleClose","aid","byID","cooldown","upd","cls","contentsOnly","contents","iconMap","historyToggle","destroy","overflow","defaultTimeout","container_id","pupclass","historySize","cloneDeep","junkProperty"],"mappings":"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","file":"kusaba.new.js","sourcesContent":["'use strict';\n\nvar style_cookie;\nvar style_cookie_txt;\nvar style_cookie_site;\nvar kumod_set=false;\nvar ispage;\nvar is_entering=false;\n\nvar _messages = {\n  en: {\n    noLocalStorage: \"Your browser does not support LocalStorage\",\n    oops: \"Something went wrong...\",\n    blankResponse: \"blank response\",\n    expandingThread: \"Expanding thread...\",\n    newThread: \"new thread\",\n    NewThread: \"New thread\",\n    replyTo: \"reply to\",\n    cancel: \"Cancel\",\n    update: \"Update\",\n    updatingCounts: \"Updating...\",\n    couldntFetch: \"Could not fetch this post\",\n    noNewPosts: \"No new posts\",\n    replies: \"Replies\",\n    settings_fxEnabled: \"Animation effects\",\n    settings_showReplies: \"Show replies inside posts\",\n    settings_sfwMode: \"NSFW mode\",\n    settings_expandImgFull: \"Expand images to full size\",\n    settings_constrainWidth: \"Constrain content width\",\n    enterCaptcha: \"Please enter captcha.\",\n    selectText: \"Select some text\",\n    dcls: \"Double click to show source\",\n    watchOn: \"Watch on\",\n    captcharot: \"Captcha has rotted\",\n    threadUpdationAutomatically: \"Tread is being updated automatically.\",\n    stopFuckingDolls: \"<b> AJAX-   AJAX- .</b><br />(,  )\",\n    del: \"Delete\",\n    delandban: \"Delete and ban\",\n    ban: \"Ban\",\n    stickthread: \"Stick thread\",\n    unstickthread: \"Unstick thread\",\n    lockthread: \"Lock thread\",\n    unlockthread: \"Unlock thread\",\n    returnDesktop: \"Switch to desktop interface\",\n    returnTouch: \"Switch to touch interface\",\n    forceDesktop: \"Force Desktop interface\",\n    okay: \"Okay\",\n    captchalang: \"Captcha language\",\n    reply: \"Reply\",\n    imageDownscaledBy: \"Image was downscaled by\",\n    videoDownscaledBy: \"Video was downscaled by\",\n    toFit: \"to feet screen\",\n    newReplies: \"New replies\",\n    newThreadsAvailable: \"New threads available.\",\n    loading: \"Loading\",\n    anonymous: \"Anonymous\",\n    sortBy: \"Sort by\",\n    bumpOrder: \"Bump order\",\n    lastReply: \"Last reply\",\n    creationDate: \"Creation date\",\n    replyCount: \"Reply count\",\n    doStick: \"Respect stickied\",\n    showHidden: \"Show hidden\",\n    doNotStick: \"Ignore stickied\",\n    hideHidden: \"Hide hidden\",\n    search: \"Search\",\n    threadOnPage: \"Thread is on page\",\n    goToThread: \"Go to thread\",\n    smallPics: \"Small pictures\",\n    largePics: \"Large pictures\",\n    legacyMode: \"Legacy mode\",\n    threads: \"Threads\",\n    comments: \"Replies\",\n    active_since: \"Active since\",\n    last_active: \"Last seen\",\n    active_on: \"Active on\",\n    tryAgain: \"Try again\",\n    xhrError: \"XHR error\",\n    details: \"details\",\n    thread: \"Thread\",\n    post: 'Post',\n    posts: \"Posts\",\n    deleted:'has been deleted',\n    deletedMulti: 'have been deleted',\n    report: 'Report',\n    reported:'has been reported',\n    reportedMulti: 'have been reported',\n    fileRemoved: 'File<br>removed.',\n    file: 'File',\n    files: 'Files',\n    collapse: 'Collapse',\n    asMod: 'as Mod',\n    asOP: 'as OP',\n    historyEmpty: 'History is empty',\n    noDataLoaded: 'No data was loaded',\n    unable_load_20: 'Unable to load 2.0 boards list',\n    captchaLangChanged: 'Captcha laguage changed',\n    found: 'Found',\n    links: 'Links',\n    selectMultiple: 'Select multiple',\n    selected: 'Selected',\n    directLink: 'Direct link',\n    quoteLink: 'Quote link',\n    maxAttNumReached: 'Attachments number limit reached.',\n    unsupportedFileType: 'unsupported file type',\n    hideName:'Hide file name',\n    removeFile: 'Remove file',\n    spoilerOnOff: 'Spoier On/Off',\n    hidePost: 'Hide post',\n    unhidePost: 'Unhide post',\n    settings_hideCompletely: 'Hide items completely',\n    pinUnpin: 'Pin/Unpin',\n    hideForm: 'Hide form',\n    collapseExpand: 'Collapse/Expand',\n    notEmpty: 'Not empty',\n    showName: 'Show/hide name/trip field',\n    showSubject: 'Show/hide subject field',\n    showEmbeds: 'Show/hide embeds',\n    showPassword: 'Show/hide password field',\n    showTTL: 'Show/hide time-to-live field',\n    attachFile: 'Attach file...',\n    classicSimplifiedForm: 'Classic/simplified form',\n    showMarkup: 'Show/hide markup',\n    refreshCatalog: 'Refresh catalog',\n    cancelTimer: 'Cancel timer',\n    saved:'saved from deletion',\n    savedMulti: 'saved from deletion',\n    password: 'Password',\n    captcha: 'Captcha',\n    captchaImage: 'Captcha image',\n    refreshCaptcha: 'Refresh captcha',\n    showCaptcha: 'Show captcha',\n    captchaExpired: 'Captcha has expired.'\n  },\n  ru: {\n    noLocalStorage: \"localStorage   \",\n    oops: \"-   ...\",\n    blankResponse: \" \",\n    expandingThread: \" ...\",\n    newThread: \" \",\n    NewThread: \" \",\n    replyTo: \" \",\n    cancel: \"\",\n    update: \"\",\n    updatingCounts: \"  ...\",\n    couldntFetch: \"    \",\n    noNewPosts: \"  \",\n    replies: \"\",\n    settings_fxEnabled: \" \",\n    settings_showReplies: \"   \",\n    settings_sfwMode: \"  \",\n    settings_expandImgFull: \"    \",\n    settings_constrainWidth: \"  \",\n    enterCaptcha: \",  .\",\n    selectText: \"  \",\n    dcls: \"Double click to show source\",\n    watchOn: \" \",\n    odc: \"javascript:LatexIT.replaceWithSrc(this);\",\n    captcharot: \" \",\n    threadUpdationAutomatically: \"  \",\n    stopFuckingDolls: \"<b> AJAX-   AJAX- .</b><br />(,  )\",\n    del: \"\",\n    delandban: \"  \",\n    ban: \"\",\n    stickthread: \" \",\n    unstickthread: \" \",\n    lockthread: \" \",\n    unlockthread: \" \",\n    returnDesktop: \"   \",\n    returnTouch: \"  -\",\n    forceDesktop: \"Force Desktop interface\",\n    okay: \"\",\n    captchalang: \" \",\n    reply: \"\",\n    imageDownscaledBy: \"  \",\n    videoDownscaledBy: \"  \",\n    toFit: \"  \",\n    newReplies: \" \",\n    newThreadsAvailable: \"  .\",\n    loading: \"\",\n    anonymous: \"\",\n    sortBy: \" \",\n    bumpOrder: \"\",\n    lastReply: \" \",\n    creationDate: \" \",\n    replyCount: \" \",\n    doStick: \"\",\n    showHidden: \" \",\n    doNotStick: \" \",\n    hideHidden: \" \",\n    search: \"\",\n    threadOnPage: \"   \",\n    goToThread: \"  \",\n    smallPics: \" \",\n    largePics: \" \",\n    legacyMode: \" \",\n    threads: \"\",\n    comments: \"\",\n    active_since: \"\",\n    last_active: \" \",\n    active_on: \" \",\n    tryAgain: \" \",\n    xhrError: \" XHR\",\n    details: \"\",\n    thread: \"\",\n    post: '',\n    posts: '',\n    deleted:'',\n    deletedMulti: '',\n    report: '',\n    reported:':  ',\n    reportedMulti: ':  ',\n    fileRemoved: '<br>.',\n    file: '',\n    files: '',\n    collapse: '',\n    asMod: '  ',\n    asOP: '  ',\n    historyEmpty: ' ',\n    noDataLoaded: '  ',\n    unable_load_20: 'Unable to load 2.0 boards list',\n    captchaLangChanged: '  ',\n    found: '',\n    links: '',\n    selectMultiple: ' ',\n    selected: '',\n    directLink: '   ',\n    quoteLink: '  ',\n    maxAttNumReached: '   .',\n    unsupportedFileType: '  ',\n    hideName:'  ',\n    removeFile: ' ',\n    spoilerOnOff: ' /',\n    hidePost: ' ',\n    unhidePost: ' ',\n    settings_hideCompletely: '    ',\n    pinUnpin: '/',\n    hideForm: ' ',\n    collapseExpand: '/',\n    notEmpty: ' ',\n    showName: '/  ',\n    showSubject: '/  ',\n    showEmbeds: '/ ',\n    showPassword: '/   ',\n    showTTL: '/  ',\n    attachFile: ' ...',\n    classicSimplifiedForm: '/ ',\n    showMarkup: '/ ',\n    refreshCatalog: ' ',\n    cancelTimer: ' ',\n    saved:'  ',\n    savedMulti: '  ',\n    password: '',\n    captcha: 'Captcha',\n    captchaImage: 'Captcha image',\n    refreshCaptcha: ' ',\n    showCaptcha: ' ',\n    captchaExpired: ' .'\n  }\n}\nvar _l = (typeof locale !== 'undefined' && _messages.hasOwnProperty(locale)) ? _messages[locale] : _messages.ru;\n\n/* IE/Opera fix, because they need to go learn a book on how to use indexOf with arrays */ // Is this still relevant tho?\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function(elt /*, from*/) {\n  var len = this.length;\n\n  var from = Number(arguments[1]) || 0;\n  from = (from < 0)\n     ? Math.ceil(from)\n     : Math.floor(from);\n  if (from < 0)\n    from += len;\n\n  for (; from < len; from++) {\n    if (from in this &&\n      this[from] === elt)\n    return from;\n  }\n  return -1;\n  };\n}\n\n/* Utf8 strings de-/encoder */\nvar Utf8 = {\n  // public method for url encoding\n  encode : function (string) {\n    string = string.replace(/\\r\\n/g,\"\\n\");\n    var utftext = \"\";\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      }\n      else if((c > 127) && (c < 2048)) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n      else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n    return utftext;\n  },\n  // public method for url decoding\n  decode : function (utftext) {\n    var string = \"\", i = 0, c = 0, c1 = 0, c2 = 0, c3 = 0\n    while ( i < utftext.length ) {\n      c = utftext.charCodeAt(i);\n      if (c < 128) {\n        string += String.fromCharCode(c);\n        i++;\n      }\n      else if((c > 191) && (c < 224)) {\n        c2 = utftext.charCodeAt(i+1);\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n        i += 2;\n      }\n      else {\n        c2 = utftext.charCodeAt(i+1);\n        c3 = utftext.charCodeAt(i+2);\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n        i += 3;\n      }\n    }\n    return string;\n  }\n}\n\nfunction Cookie(name) {\n  if (arguments.length == 1) {\n    // with(document.cookie) {\n      var regexp=new RegExp(\"(^|;\\\\s+)\"+name+\"=(.*?)(;|$)\");\n      var hit=regexp.exec(document.cookie);\n      if(hit&&hit.length>2) return Utf8.decode(unescape(replaceAll(hit[2],'+','%20')));\n      else return '';\n    // }\n  } else {\n    var value = arguments[1]\n    , days = arguments[2]\n    , expires=\"\"\n    if(days) {\n      var date=new Date();\n      date.setTime(date.getTime()+(days*24*60*60*1000));\n      expires=\"; expires=\"+date.toGMTString();\n    }\n    document.cookie=name+\"=\"+value+expires+\"; path=/\";\n  }\n}\n\nfunction replaceAll(str, from, to) {\n  var idx = str.indexOf( from );\n  while ( idx > -1 ) {\n    str = str.replace( from, to );\n    idx = str.indexOf( from );\n  }\n  return str;\n}\n\nvar _lastActiveForm = false\nObject.defineProperty(window, 'lastActiveForm', {\n  get: function() {\n    if (!_lastActiveForm || !_lastActiveForm.getClientRects().length) {\n      updateActiveForm()\n    }\n    return _lastActiveForm\n  },\n  set: function(el) {\n    document.querySelectorAll('.qrf-active').forEach(a => a.classList.remove('qrf-active'))\n    if (el) {\n      let form = el._findParent('form') // _findParent retuns element itself if in matches the selector\n      form.classList.add('qrf-active')\n      if (form.classList.contains('collapsed')) {\n        toggleFormCollapse(form, false/* uncollapse*/, false/* no focus*/)\n      }\n      _lastActiveForm  = form\n    }\n    else\n      _lastActiveForm = false\n  }\n})\nfunction updateActiveForm() {\n  let floating = document.querySelector('.qrf-floating:not(.collapsed)')\n  if (floating) {\n    lastActiveForm = floating\n    return\n  }\n  lastActiveForm = findClosest('.qrf-floating.collapsed, .quick-reply-form textarea')\n  return\n}\n\nfunction findClosest(selector) {\n  let height = window.innerHeight\n  , hh = height / 2\n  , list = document.querySelectorAll(selector)\n  if (!list) return false\n  let closest = [].map.call(list, el => {\n    let rect = el.getClientRects()\n    , offset = rect.length\n      ? Math.abs(hh - (rect[0].y + rect[0].height/2))\n      : null\n    return { el: el, offset: offset }\n  })\n  .filter(a => a.offset !== null)\n  .sort((e1, e2) => e1.offset < e2.offset ? -1 : 1)\n  return closest.length ? closest[0].el : false\n}\n\nfunction insert(text, breakBefore=true, breakAfter=true) {\n  let form = lastActiveForm || document.querySelector('#postform')\n  , textarea = form && form.querySelector('textarea')\n  if(textarea) {\n    if (form.classList.contains('collapsed')) {\n      toggleFormCollapse(form, false/* uncollapse*/, false/* no focus*/)\n    }\n    let start = textarea.selectionStart\n    , end = textarea.selectionEnd\n    , pre = textarea.value.substr(0,start)\n    , post = textarea.value.substr(end)\n    , charBefore = pre[pre.length-1]\n    , charAfter = post[0]\n    if (breakBefore && text[0] !== \"\\n\" && charBefore && charBefore !== \"\\n\")\n      text = \"\\n\"+text\n    if (breakAfter && text[text.length-1] !== \"\\n\" && charAfter !== \"\\n\")\n      text += \"\\n\"\n    let selectionRange = start + text.length\n    textarea.value = pre + text + post\n    textarea.setSelectionRange(selectionRange, selectionRange)\n    textarea.focus()\n  }\n}\n\nfunction markup($target, start, end, istart, iend) {\n  let element = $target.find('textarea').get(0);\n  if (element.selectionStart || element.selectionStart == '0') {\n    element.focus();\n    let startPos = element.selectionStart\n    , endPos = element.selectionEnd\n    , selected = element.value.substring(startPos, endPos);\n    if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\n      start = istart; end = iend;\n    }\n    element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + end + element.value.substring(endPos, element.value.length);\n  } else {\n    element.value += start + end;\n  }\n}\n\nfunction bullets($target, bullet, istart, iend) {\n  let $area = $target.find('textarea')\n  , element = $area[0]\n  , startPos = element.selectionStart\n  , endPos = element.selectionEnd\n  , selected = $area.val().substring(startPos, endPos)\n  if(!~selected.indexOf('\\n') && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\n    element.value = element.value.substring(0, startPos) + istart + element.value.substring(startPos, endPos) + iend + element.value.substring(endPos, element.value.length);\n  }\n  else {\n    selected = $area.val().substring(startPos, endPos).split('\\n');\n    var newtxt = \"\";\n    for(var i=0; i<selected.length; i++) {\n      newtxt += (bullet + selected[i]);\n      if(i < (selected.length - 1)) newtxt += '\\n';\n    }\n    $area.val(\n      $area.val().substring(0, startPos)\n      + newtxt +\n      $area.val().substring(endPos)\n    );\n  }\n}\n\nfunction quotes($target, type) {\n  let $area = $target.find('textarea')\n  , areaVal = $area.val()\n  , element = $area[0]\n  , startPos = element.selectionStart\n  , endPos = element.selectionEnd\n  , selected = areaVal.substring(startPos, endPos)\n  , newtxt = \"\"\n  if (~selected.indexOf('\\n')) { // multiline quoting\n    selected = areaVal.substring(startPos, endPos).split('\\n')\n    for(var i=0; i<selected.length; i++) {\n      let bullet = (type=='g') ? '>'\n        : (type=='r') ? '<'\n          : (i%2) ? '<'\n            : '>'\n      newtxt += (bullet + ' ' + selected[i])\n      if(i < (selected.length - 1)) newtxt += '\\n'\n    }\n  }\n  else { // inline quoting\n    let tag = type=='r' ? 'rq' : 'q'\n    newtxt = `[${tag}]${selected}[/${tag}]`\n  }\n  element.value =\n    areaVal.substring(0, startPos)\n    + newtxt +\n    areaVal.substring(endPos)\n}\n\nfunction quote(b, a) {\n  var v = eval(\"document.\" + a + \".message\");\n  v.value += \">>\" + b + \"\\n\";\n  v.focus();\n}\n\nfunction checkhighlight() {\n  var match;\n  if(match=/#i([0-9]+)/.exec(document.location.toString()))\n    if(!$('#postform textarea').val())\n      insert(\">>\"+match[1]);\n  if(match=/#([0-9]+)/.exec(document.location.toString()))\n    highlight(match[1]);\n}\n\nfunction highlight(id, offTimeout=5000) {\n  $('.highlight').removeClass('highlight');\n  let $post = $(`#delform a[name=\"${id}\"]`).parents('.reply, .op')\n  , post = $post[0]\n  if (! post) return false;\n  $post.addClass('highlight');\n  if (offTimeout) {\n    setTimeout(() => $post.removeClass('highlight'), offTimeout)\n  }\n  // Scroll to post\n  let bcr = post.getBoundingClientRect()\n  , docHeight = document.documentElement.clientHeight\n  if (bcr.bottom > docHeight || bcr.top < 0) {\n    let postX = bcr.top + document.documentElement.scrollTop\n    , spaceAround = docHeight - bcr.height\n    window.scrollTo(0, postX - (spaceAround ? Math.ceil(spaceAround/2) : 0))\n  }\n  return true\n}\n\nconst password_length = 20;\n\nfunction get_password(name) {\n  let pass = getCookie(name);\n  if(pass) return pass;\n  pass = randomString(password_length)\n  Cookie(name, pass, 365);\n  return(pass);\n}\n\nfunction togglePassword() {\n  var passwordbox_html = $(\"#passwordbox\").html().toLowerCase();\n  var newhtml = '<td></td><td></td>';\n  if (passwordbox_html == newhtml) {\n    newhtml = '<td class=\"postblock\">Mod</td><td><input type=\"text\" name=\"modpassword\" size=\"28\" maxlength=\"75\">&nbsp;<acronym title=\"Display staff status (Mod/Admin)\">D</acronym>:&nbsp;<input type=\"checkbox\" name=\"displaystaffstatus\" checked>&nbsp;<acronym title=\"Lock\">L</acronym>:&nbsp;<input type=\"checkbox\" name=\"lockonpost\">&nbsp;&nbsp;<acronym title=\"Sticky\">S</acronym>:&nbsp;<input type=\"checkbox\" name=\"stickyonpost\">&nbsp;&nbsp;<acronym title=\"Raw HTML\">RH</acronym>:&nbsp;<input type=\"checkbox\" name=\"rawhtml\">&nbsp;&nbsp;<acronym title=\"Name\">N</acronym>:&nbsp;<input type=\"checkbox\" name=\"usestaffname\"></td>';\n  }\n  $(\"#passwordbox\").html(newhtml).show();\n  return false;\n}\n\n// proxied functions\nfunction getCookie(name)                {   return Cookie(name)                     }\nfunction set_cookie(name,value,days)    {   return Cookie(name,value,days)          }\n\nvar Styles = {\n  all: [], titles: [],\n  init: function() {\n    _.each(document.getElementsByTagName(\"link\"), function(link) {\n      if(link.getAttribute(\"rel\").indexOf(\"style\")!=-1 && link.getAttribute(\"title\")) {\n        this.all.push(link);\n        this.titles.push(link.getAttribute(\"title\"));\n        if(link.getAttribute(\"rel\").indexOf(\"alternate\")===-1) {\n          this._default = link.getAttribute(\"title\");\n        }\n        if(link.hasAttribute(\"data-custom\")) {\n          this.custom = link.getAttribute(\"title\");\n        }\n      }\n    }, this);\n    this.current = this._default;\n    var customBypass = getCookie('bypasscustom');\n    this.customBypass = (customBypass.length && typeof this_board_dir !== 'undefined' && in_array(this_board_dir, customBypass.split('|'))) ? true : false;\n    this.initiated = true\n  },\n  decide: function() {\n    this.init();\n    var testingCSS = LSfetchJSON('testing-css')\n    if(testingCSS) {\n      let title = this.addStyle(testingCSS.url, testingCSS.title)\n      this.setStyle(title)\n      var $clink = $('<a href=\"#\">  '+title+'.css</a>')\n      $clink.click(function(ev) {\n        ev.preventDefault()\n        Styles.quitTest()\n        $(this).parent().slideUp()\n      })\n      this.$cancelLink = $('<div style=\"font-weight: bold\"></div>').append($clink)\n      return\n    }\n    if(this.hasOwnProperty('custom') && !this.customBypass)\n      return this.setCustom();\n    var sc = getCookie(style_cookie);\n    if(sc && in_array(sc, this.titles))\n      this.setStyle(sc);\n    else {\n      this.setDefault();\n      set_cookie(\"kustyle_site\",this._default,365);\n      set_cookie(\"kustyle\",this._default,365);\n    }\n  },\n  change: function(stylename) {\n    if(!in_array(stylename, this.titles) || this.current === stylename) return;\n    this.setStyle(stylename);\n    if(this.hasOwnProperty('custom') && this.custom === stylename) {\n      this.removeBypass();\n    }\n    else {\n      if(this.hasOwnProperty('custom'))\n        this.addBypass();\n      set_cookie(\"kustyle_site\",stylename,365);\n      set_cookie(\"kustyle\",stylename,365);\n    }\n  },\n  removeBypass: function() {\n    if(!this.customBypass || typeof this_board_dir === 'undefined') return;\n    this.customBypass = false;\n    var oldcookie = getCookie('bypasscustom').split('|'), newcookie = [];\n    _.each(oldcookie, function(brd) {\n      if(brd !== this_board_dir) newcookie.push(brd);\n    });\n    newcookie = newcookie.length ? newcookie.join('|') : '';\n    set_cookie(\"bypasscustom\",newcookie,365);\n  },\n  addBypass: function() {\n    if(this.customBypass || typeof this_board_dir === 'undefined') return;\n    this.customBypass = true;\n    var cookie = getCookie('bypasscustom').split('|');\n    if(!in_array(this_board_dir, cookie)) {\n      cookie.push(this_board_dir);\n      set_cookie(\"bypasscustom\",cookie.join('|'),365);\n    }\n  },\n  setDefault: function() {\n    if(this.hasOwnProperty('_default') && this.current !== this._default)\n      this.setStyle(this._default);\n  },\n  setCustom: function() {\n    if(this.hasOwnProperty('custom'))\n      this.setStyle(this.custom);\n  },\n  setStyle: function(stylename) {\n    if(!in_array(stylename, this.titles)) return;\n    if (scrollAnchor && scrollAnchor.save)\n      scrollAnchor.save('setstyle', '.postnode')\n    _.each(this.all, function(sheet) {\n      sheet.disabled=true;    // Hello IE\n      if(sheet.getAttribute(\"title\") === stylename)\n        sheet.disabled=false;\n    });\n    if (scrollAnchor && scrollAnchor.restore)\n      scrollAnchor.restore('setstyle')\n    this.current = stylename;\n  },\n  onTest: null,\n  addStyle: function(url, title='') {\n    if (! title) {\n      let m = /(?:.+\\/)?(.+)\\.css/i.exec(url)\n      if(!m) return;\n      title = m[1]\n    }\n    title = _.capitalize(_.escape(title))\n    if(!in_array(title, this.titles)) {\n      var $link = $('<link rel=\"stylesheet\" type=\"text/css\" href=\"'+url+'\" title=\"'+title+'\" disabled>')\n      $('head').append($link);\n      this.titles.push(title)\n      this.all.push($link[0])\n    }\n    return title\n  },\n  testStyle: function(url, title) {\n    title = this.addStyle(url, title)\n    this.setStyle(title)\n    this.onTest = {\n      url: url,\n      title: title\n    }\n    pups.succ(`  ${title}.\n      <div class=\"styletest-form\">\n        <button onclick=\"Styles.confirmLongTermTest()\">OK</button>\n        <button onclick=\"Styles.quitTest()\">${_l.cancel}</button>\n      </div>`, {time: 0, save: true})\n  },\n  confirmLongTermTest: function() {\n    if(this.onTest)\n      localStorage.setItem('testing-css', JSON.stringify(this.onTest))\n  },\n  quitTest: function() {\n    localStorage.removeItem('testing-css')\n    this.decide()\n  }\n}\nif(style_cookie) Styles.decide();\n\nvar HiddenItems = {\n  init: function() {\n    this.hideCompletely = localStorage['hideCompletely.'+this_board_dir]=='true'\n    ;['posts', 'threads'].forEach(kind => {\n      let ls = localStorage[`hidden${_.capitalize(kind)}.${this_board_dir}`]\n      , list = ls ? ls.split(',').filter(a => a) : []\n      this.lists[kind] = list\n    })\n    document.write(`<style id=\"injector:hideitems\">${this.buildCSS()}</style>`)\n  },\n  buildCSS: function() {\n    let unhide = [], hide = []\n    ;['posts', 'threads'].forEach(kind => {\n      this.lists[kind].forEach(id => {\n        let idb = id + this_board_dir\n        if (kind==\"posts\") {\n          if (this.hideCompletely)\n            hide.push(`#postnode${idb}`)\n          else\n            hide.push(`#postbody${idb}`)\n        }\n        else if(ispage) {\n          hide.push(`#thread${idb}`)\n          if (this.hideCompletely) {\n            hide.push(`#unhidethread${idb}`)\n            hide.push(`#thread${idb} + br`)\n            hide.push(`#thread${idb} + br + hr`)\n          }\n          else {\n            unhide.push(`#unhidethread${idb}`)\n          }\n        }\n      })\n    })\n    return (hide.length ? hide.join(',') + '{ display: none }' : '') +\n      (unhide.length ? unhide.join(',') + '{ display: inline-block }' : '')\n  },\n  updateCSS: function() {\n    injector.inject('hideitems', this.buildCSS())\n  },\n  hideCompletely: false,\n  lists: {},\n  isHidden: function(kind, id) {\n    return this.lists[kind+'s'].indexOf(id.toString()) != -1 \n  },\n  hideItem: function(kind, id) {\n    if (this.isHidden(kind, id)) return;\n    this.lists[kind+'s'].push(id)\n    this.saveList(kind)\n  },\n  unhideItem: function(kind, id) {\n    if (!this.isHidden(kind, id)) return;\n    this.lists[kind+'s'] = this.lists[kind+'s'].filter(a => a!=id)\n    this.saveList(kind)\n  },\n  hideThread: function(id, inCatalog=false) {\n    this.hideItem('thread', id)\n    $('#unhidethread' + id + this_board_dir).slideDown()\n    let $thread = $('#thread' + id + this_board_dir)\n    , $form = $thread.find('.qrf-floating')\n    $thread.slideUp().promise().done(updateActiveForm)\n    if ($form.length)\n      toggleFormFloating($form[0], false /*  float=off*/, false /*  no focus*/)\n  },\n  unhideThread: function(id, inCatalog=false) {\n    this.unhideItem('thread', id)\n    $('#thread' + id + this_board_dir).slideDown()\n    $('#unhidethread' + id + this_board_dir).slideUp()\n  },\n  hidePost: function(id) {\n    this.hideItem('post', id)\n    $('#postbody' + id + this_board_dir).slideUp('fast')\n  },\n  unhidePost: function(id) {\n    this.unhideItem('post', id)\n    $('#postbody' + id + this_board_dir).slideDown('fast')\n  },\n  saveList: function(kind) {\n    localStorage[`hidden${_.capitalize(kind)}s.${this_board_dir}`] = this.lists[kind+'s'].join(',')\n  }\n}\nHiddenItems.init()\n\nfunction toggleblotter() { // [!]\n  $('.blotter-entries').each(function(index,element) {\n    $(this).slideToggle(function() {\n      if($(this).is(\":hidden\")) {\n        Cookie('ku_showblotter', '0', 365);\n      } else {\n        Cookie('ku_showblotter', '1', 365);\n      }\n    });\n  });\n}\n\nfunction hideblotter() {\n   $('.blotter-entries').each(function(index,element) {\n    $(this).hide();\n  });\n}\n\nfunction expandthread(threadid, board, ev) {\n  ev.preventDefault()\n  let $thread = $(`#thread${threadid}${board}`)\n  if ($thread.length) {\n    let expandFrom = + $thread.find('.postnode.op').find('input[type=checkbox]').val()\n    , expandTo = + $thread.find('.postnode:not(.op):first').find('input[type=checkbox]').val()\n    , $omitted = $thread.find('.omittedposts')\n    $omitted.find('a').hide()\n    let $msg = $omitted.find('span')\n    if (!$msg.length) {\n      $msg = $(`<div class=\"spinner\"></div><span>${_l.loading}...</span>`).prependTo($omitted)\n    }\n    HTMLoader.getThread(board, +threadid, [expandFrom, expandTo], (err, posts) => {\n      if (posts) {\n        $thread.find('.omittedposts').replaceWith(posts)\n        replyMap.showReplies()\n      }\n      else {\n        $msg.text(_l.oops + (err !== false ? ` (${err})` : ''))\n        $omitted.find('a').text(_l.tryAgain).show()\n      }\n    })\n  }\n  return false;\n}\n\nvar newposts = {\n  busy: false,\n  get: function(options={}) {\n    options = _.defaults(options, {\n      threadid: null,\n      expectedPost: null,\n      silent: false,\n      onError: err => pups.err(`Error geting new posts (${err})`),\n      onSuccess: null,\n      timestamp: null\n    })\n    if (!options.threadid) {\n      if (ispage)\n        return options.onError()\n      options.threadid = +$('input[name=replythread]').val()\n    }\n    this.pushTask(options)\n    return false\n  },\n  execute: function(task) {\n    this.busy = true\n    let threadid = +task.threadid\n    , expectedPost = task.expectedPost\n    , onError = err => {\n      this.next()\n      task.onError(err)\n    }\n    let replies_container, $newposts_get\n    if (!ispage) {\n      $newposts_get = $('#newposts_get')\n      $newposts_get.removeClass('upd-counting').addClass('upd-updating')\n      replies_container = document.querySelector('.replies')\n    }\n    else {\n      replies_container = document.querySelector(`#thread${threadid}${this_board_dir} .replies`)\n      if (!replies_container) return onError('No replies container!');\n    }\n    // If post is already there, skip the entire thing\n    if (expectedPost && highlight(expectedPost)) {\n      $newposts_get.removeClass('upd-updating')\n      this.next()\n      return\n    }\n    let $lastQrl = $(`.qrl[data-parent=\"${threadid}\"]`).last()\n    , lastpost = +($lastQrl.data('postnum') || $lastQrl.data('parent'))\n    if (! lastpost) return onError();\n    \n    HTMLoader.getThread(this_board_dir, threadid, [lastpost,Infinity], (err, posts) => {\n      if (!ispage) {\n        $newposts_get.removeClass('upd-updating')\n      }\n      if (posts) {\n        replies_container.insertAdjacentHTML('beforeend', posts)\n        replyMap.showReplies()\n        unreadCounter.refreshTimestamp(task.timestamp || null)\n        if (task.onSuccess)\n          task.onSuccess()\n      }\n      else {\n        if (!task.silent) {\n          pups.info(posts === '' ? _l.noNewPosts : _l.oops + (err !== false ? ` (${err})` : ''), {time: 1})\n        }\n      }\n      if (expectedPost && !highlight(expectedPost)) {\n        return onError('No target reply!');\n      }\n      this.next()\n    }, false, true)\n  },\n  pushTask: function(task) {\n    if (this.busy)\n      this.stack.push(task)\n    else\n      this.execute(task)\n  },\n  next: function() {\n    let next = this.stack.shift()\n    if (next)\n      this.execute(next)\n    else\n      this.busy = false\n  }, \n  stack: []\n}\n\n// Hiding animation\nfunction flyTo(el, dest) {\n  let destBox = dest.getBoundingClientRect()\n  , destX = destBox.x + (destBox.width / 2)\n  , destY = destBox.y + (destBox.height / 2)\n  , elBox = el.getBoundingClientRect()\n  el.style.transformOrigin = `${(destX - elBox.x) + 'px'} ${(destY - elBox.y) + 'px'}`\n  el.classList.add('fly-to-zero')\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      el.classList.remove('fly-to-zero')\n      el.style.transformOrigin = null\n      resolve(el)\n    }, (+getComputedStyle(el).transition.match(/transform ([0-9\\.]+)/)[1] * 1000) + 100 )\n  })\n}\n\nfunction toggleFormCollapse(form, collapse = !form.classList.contains('collapsed'), focus = !collapse) {\n  let oldBox = form.getBoundingClientRect()\n  , offRight = oldBox.right - (window.innerWidth - 32)\n  form.classList.toggle('collapsed', collapse)\n  let box = form.getBoundingClientRect()\n  , newWidth = box.width\n  form.style.left = \n    box.left \n    + (oldBox.width - newWidth) \n    - (offRight > 0 ? offRight : 0) \n    + 'px'\n  form.querySelector('.collapser').classList.toggle('collapsed', collapse)\n  if (focus) {\n    form.querySelector('textarea').focus()\n  }\n}\n\nfunction toggleFormRow(form, btn) {\n  let id = btn.dataset.toggle\n  , row = form.querySelector(`.${btn.dataset.toggle}-row`)\n  if (! row) return;\n  let show = row.classList.toggle('row-shown')\n  btn.querySelector('svg').classList.toggle('pressed', show)\n  let rem = show ? 0 : isRowEmpty(row, id)\n  btn.classList.toggle('button-with-reminder', rem)\n  if (rem) {\n    if (! btn._originalTitle)\n      btn._originalTitle = btn.title\n    btn.title = `${btn._originalTitle} (${_l.notEmpty})`\n  }\n  else if (btn._originalTitle)\n    btn.title = btn._originalTitle\n  if (show) { // focus on field\n    let focal = null\n    if (id == 'subject-send') {\n      let i = form.querySelector('input[name=subject]')\n      if (!i.value)\n        focal = i\n    }\n    if (id == 'name') {\n      let i = form.querySelector('input[name=name]')\n      if (!i.value && !i.disabled)\n        focal = i\n    }\n    if (id == 'embed') {\n      let inputs = [].filter.call(form.querySelectorAll('input[type=text][name^=embed]'), \n        el => el.getClientRects().length && !el.value)\n      if (inputs.length)\n        focal = inputs[0]\n    }\n    if (focal)\n      focal.focus()\n  }\n}\n\nfunction isRowEmpty(row, id) {\n  return !!(\n    (id == 'name' &&\n      row.querySelector('input[name=name]').value != ''\n      &&\n      !row.querySelector('input[name=disable_name]').checked\n    ) ||\n    (id == 'subject-send' &&\n      row.querySelector('input[name=subject]').value != ''\n    ) ||\n    (id == 'embed' &&\n      [].find.call(row.querySelectorAll('input[type=text]'), i => i.value.trim())\n    ) ||\n    (id == 'ttl' &&\n      row.querySelector('input[name=ttl-enable]').checked\n    )\n  )\n}\n\nfunction updateReminders(form) {\n  ['name', 'subject-send', 'embed', 'ttl'].forEach(id => {\n    let row = form.querySelector(`.${id}-row:not(.row-shown)`)\n    , btn = row && form.querySelector(`.simplified-toggle[data-toggle=\"${id}\"]`)\n    if (btn)\n      btn.classList.toggle('button-with-reminder', isRowEmpty(row, id))\n  })\n}\n\nfunction toggleFormFloating(form, float, focus=true) {\n  let pinner = form.querySelector('.pinner')\n  pinner.classList.toggle('pinned', !float)\n  pinner.classList.toggle('unpinned', float)\n  if (float) { // Make the form floating\n    // Pin other forms\n    scrollAnchor.save('toggleFormFloating', form.getParentPost())\n    document.querySelectorAll('.qrf-floating').forEach(f => toggleFormFloating(f, false))\n    scrollAnchor.restore('toggleFormFloating')\n    .then(() => { // When all scrolling is settled\n      let box = form.getBoundingClientRect()\n      form.classList.add('qrf-floating')\n      form.classList.remove('qrf-builtin', 'qrf-builtin-back')\n      form.style.top = box.top + 'px'\n      form.style.left = box.left + 'px'\n      $(form).drags()\n      .find('input, textarea, select, label, .fe-sort-wrapper, button, .b-icon').mousedown(function(e) {\n        e.stopPropagation()\n      })\n    })\n  }\n  else { // Build the form back in\n    form.classList.remove('qrf-floating', 'collapsed')\n    form.querySelector('.collapser').classList.remove('collapsed')\n    form.classList.add('qrf-builtin', 'qrf-builtin-back')\n    $(form).dragsOff()\n    ;['top', 'left', 'zIndex'].forEach(prop => form.style[prop] = null)\n  }\n  if (focus)\n    form.querySelector('textarea').focus()\n}\n\nfunction hidePostForm(form) {\n  form.classList.add('hidden')\n  toggleFormFloating(form, false)\n  toggleFormCollapse(form, false)\n  setTimeout(() => {\n    form.classList.remove('qrf-builtin-back')\n  }, 200)\n  if (form._preview) {\n    let pinner = form._preview.querySelector('.pinner')\n    if (pinner) {\n      pinner.classList.remove('pinned')\n      pinner.classList.add('unpinned')\n    }\n    form._preview._pinned = false\n  }\n  updateActiveForm()\n}\n\nfunction toggleFormSimplify(form, simplify) {\n  let simplified = form.classList.toggle('postform-simplified', simplify)\n  if (simplified)\n    updateReminders(form)\n}\n\nfunction clonePostForm(anchorID, preview) {\n  let oldForm = document.querySelector('#postform')\n  if (Captcha.enabled)\n    Captcha.state = 'init' // Destroy old captcha because it will be inevitably reloaded at form cloning\n  let newForm = oldForm.cloneNode(true)\n  newForm.id = anchorID + '_qrf'\n  newForm.dataset.anchorID = anchorID\n  newForm.classList.remove('main-reply-form')\n  newForm.querySelector('.simplified-send-row .primary span').innerText = _l.reply\n  newForm.querySelector('input[name=\"postpassword\"]').value = get_password('postpassword')\n  newForm.querySelector('input.primary').value = _l.reply\n  let blotter = newForm.querySelector('.blotter-row')\n  if (preview)\n    newForm._preview = preview\n  blotter.insertAdjacentHTML('afterend', `\n    <span class=\"extrabtns simplified-extras\">\n      ${newForm.querySelector('.name-row') ? `\n        <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"name\" title=\"${_l.showName}\">\n          <svg class=\"icon b-icon\"><use xlink:href=\"#i-name\"></use></svg>\n        </a>\n      ` : ''}\n      <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"subject-send\" title=\"${_l.showSubject}\">\n        <svg class=\"icon b-icon\"><use xlink:href=\"#i-subject\"></use></svg>\n      </a>\n      <a href=\"#\" class=\"s-markup\" data-toggle=\"password\" title=\"${_l.showMarkup}\">\n        <svg class=\"icon b-icon\"><use xlink:href=\"#i-markup\"></use></svg>\n      </a>\n      ${newForm.querySelector('.embed-row') ? `\n        <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"embed\" title=\"${_l.showEmbeds}\">\n          <svg class=\"icon b-icon\"><use xlink:href=\"#i-embed\"></use></svg>\n        </a>\n      ` : ''}\n      <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"password\" title=\"${_l.showPassword}\">\n        <svg class=\"icon b-icon\"><use xlink:href=\"#i-password\"></use></svg>\n      </a>\n      ${newForm.querySelector('.ttl-row') ? `\n        <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"ttl\" title=\"${_l.showTTL}\">\n          <svg class=\"icon b-icon\"><use xlink:href=\"#i-timer\"></use></svg>\n        </a>\n      ` : ''}\n    </span>`)\n  // Name reminder\n  updateReminders(newForm)\n  // Enabling extra inputs in simplified form\n  newForm.querySelectorAll('.simplified-toggle').forEach(a => {\n    a.onclick = ev => {\n      ev.preventDefault()\n      toggleFormRow(newForm, a)\n    }\n  })\n  newForm.querySelector('.s-markup').onclick = function(ev) {\n    ev.preventDefault()\n    this.querySelector('.icon').classList.toggle('pressed')\n    newForm.querySelector('.message-row').classList.toggle('markup-enabled')\n  }\n  blotter.remove()\n  // Rename label[for]s and corresponding inputs\n  let add = '_'+_.uniqueId()\n  // newForm.id = 'postform'+add\n  newForm.querySelectorAll('label').forEach(l => {\n    let id = l.getAttribute('for')\n    , newid = id + add\n    , input = newForm.querySelector('#'+id)\n    if (input)\n      input.id = newid\n    l.setAttribute('for', newid)\n  })\n  newForm.classList.add('quick-reply-form') // New general class to tell qr form apart from the main form\n  newForm.classList.add('postform-simplified')\n  // Clear fields\n  resetForm(newForm, true /*  isClone */)\n  // Init rich file input\n  richFileInput.initForm(newForm)\n  // Add extra buttons\n  newForm.insertAdjacentHTML('beforeend', `\n    <span class=\"extrabtns postboxcontrol\">\n      <svg class=\"icon form-handle-icon\"><use xlink:href=\"#i-handle\"></use></svg>\n      <a href=\"#\" title=\"${_l.classicSimplifiedForm}\" class=\"simplify-qr-form\">\n        <svg class=\"icon b-icon\">\n          <use class=\"use-simplify\" xlink:href=\"#i-simplify\"></use>\n          <use class=\"use-complicate\" xlink:href=\"#i-complicate\"></use>\n        </svg>\n      </a>\n      <a href=\"#\" title=\"${_l.collapseExpand}\" class=\"collapse-qr-form collapser\">\n        <svg class=\"icon b-icon\">\n          <use class=\"use-collapse\" xlink:href=\"#i-collapse\"></use>\n          <use class=\"use-uncollapse\" xlink:href=\"#i-uncollapse\"></use>\n        </svg>\n      </a>\n      <a href=\"#\" class=\"pinner\" title=\"${_l.pinUnpin}\">\n        <svg class=\"icon b-icon\">\n          <use class=\"use-pin\" xlink:href=\"#i-float\"></use>\n          <use class=\"use-unpin\" xlink:href=\"#i-unfloat\"></use>\n        </svg>\n      </a>\n      &nbsp;\n      <a href=\"#\" title=\"${_l.hideForm}\" class=\"hide-qr-form\">\n        <svg class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg>\n      </a>\n    </span>`)\n  // Form button actions\n  newForm.getParentPost = () => {\n    let maybePost = newForm._findPrevious('*:not(.i0svcel)')\n    return maybePost.matches('.postnode') ? maybePost : null\n  }\n  newForm.querySelector('.hide-qr-form').onclick = ev => {\n    ev.preventDefault()\n    let skip = false\n    if (newForm.classList.contains('qrf-floating')) {\n      let anchor = newForm.getParentPost()\n      if (anchor) {\n        flyTo(newForm, anchor.querySelector('a.qrl .b-icon')).then(hidePostForm)\n        skip = true\n      }\n    }\n    if (!skip) {\n      hidePostForm(newForm)\n    }\n  }\n  newForm.querySelector('.simplify-qr-form').onclick = ev => {\n    ev.preventDefault()\n    toggleFormSimplify(newForm)\n  }\n  newForm.querySelector('.pinner').onclick = function(ev) {\n    ev.preventDefault()\n    let pinned = newForm.classList.contains('qrf-builtin')\n    toggleFormFloating(newForm, pinned)\n  }\n  newForm.querySelector('.collapse-qr-form').onclick = ev => {\n    ev.preventDefault()\n    toggleFormCollapse(newForm)\n  }\n  // Prevent dragging of links\n  newForm.querySelectorAll('a').forEach(a => {\n    a.ondragstart = ev => false\n    a.ondrop = ev => false\n  })\n  // Extra hooks for the new form\n  initForm(newForm)\n\n  return newForm\n}\n\nfunction quickreply() {\n  let $this = $(this)\n  , boardName = $this.data('boardname')\n  , fromExternalBoard = (boardName === this_board_dir)\n  , threadID = $this.data('parent')\n  , postID = $(this).data('postnum') || threadID\n  , $post = $this.parents('.postnode')\n  , post = $post[0]\n  , $preview = $post.parents('.reflinkpreview')\n  , isPreview = !!$preview\n  , needInsert = true\n  , form = post._findNext('*:not(.i0svcel)')\n  , formExists = form && form.getAttribute('name') == 'postform'\n  , formHidden = formExists && form.classList.contains('hidden')\n  , formFloating = formExists && form.classList.contains('qrf-floating')\n  , isOpen = true\n  , preview = post._findParent('.reflinkpreview')\n  , quotation = needInsert ? getPostQuotation(post.querySelector('.postbody')) : ''\n  if (formExists) {\n    if (formFloating) {\n      toggleFormCollapse(form, false)\n      toggleFormFloating(form, false)\n    }\n    else {\n      if (!formHidden) {\n        hidePostForm(form)\n        formHidden = true\n      }\n      else {\n        form.classList.remove('hidden')\n      }\n      formHidden = !formHidden\n    }\n    needInsert = false\n  }\n  else {\n    form = clonePostForm(post.id || post.parentElement.id, preview)\n    form.classList.add('qrf-builtin')\n    form.querySelector('.pinner').classList.toggle('pinned')\n    form.querySelector('input[name=replythread]').value = threadID\n    post.insertAdjacentElement('afterend', form)\n    formHidden = false\n  }\n  if (!formHidden) {\n    document.querySelectorAll('.qrf-floating:not(.collapsed)')\n    .forEach(existingForm => toggleFormCollapse(existingForm))\n    form.querySelector('textarea').focus()\n    if (needInsert) {\n      insert(`>>${fromExternalBoard ? `/${boardName}/` : ''}${postID}\\n${quotation}`)\n    }\n    // Pin the post if it is in preview\n    if (preview && !preview._pinned) {\n      post.querySelector('.pinner').click()\n    }\n  }\n  // post.classList.toggle('reply-with-form-open', isOpen)\n  return false\n}\n\nfunction _getSelection() {\n  if (! window.getSelection) return null\n  let selection = window.getSelection()\n  if (selection.type !== \"Range\") return null\n  let selectedText = selection.toString()\n  if (! selectedText) return null\n  return {\n    text: selectedText,\n    node: selection.anchorNode\n  }\n}\n\n// get the selected text within the given element\nfunction getLocalSelection(parent) {\n  let sel = _getSelection()\n  return sel && sel.node._isChildOf(parent)  \n    ? sel.text \n    : null\n}\n\nfunction getPostQuotation(post) {\n  let text = getLocalSelection(post)\n  if (!text) return ''\n  text = text\n    .replace(/^\\s/, '').replace(/\\s$/, '') // remove leading and trailing whitespaces\n    .replace(/^>/gm, ' >').replace(/^/gm, '> ') // add quotation marks\n  return text/*+'\\n'*/ || ''\n}\n\nfunction popupMessage(content, delay=1000) {\n  pups.info(content, {time: delay/1000})\n  console.warn('popupMessage() is deprecated. Please use YOBA alerts instead.')\n}\n\nvar Captcha = {\n  init: function(forceEnable=false) {\n    let captchaImage = document.querySelector('.captchaimage')\n    this.enabled = forceEnable || !!captchaImage\n    if (!this.enabled) return;\n    injector.inject('captcha-rotting',\n    `.cw-running .rotting-indicator {\n      -webkit-animation-duration: ${captchaTimeout}s;\n              animation-duration: ${captchaTimeout}s;\n    }\n    .cw-running .captchaimage,\n    .cw-running .rotten-msg {\n      -webkit-animation-delay: ${captchaTimeout}s;\n              animation-delay: ${captchaTimeout}s;}`)\n    if (captchaImage) {\n      this.addImgLoadListener(captchaImage)\n    }\n  },\n  initForm: function(form) {\n    form.querySelector('.captchawrap').onclick = this.onClick.bind(this)\n    ;['click', 'focus'].forEach(evt => {\n      form.querySelector('input[name=captcha]').addEventListener(evt, this.onFieldClick.bind(this))\n    })\n    let captchaImage = form.querySelector('.captchaimage')\n    if (captchaImage) {\n      this.addImgLoadListener(captchaImage)\n    }\n  },\n  addImgLoadListener: function(captchaImage) {\n    captchaImage.onload = this.onImageLoad.bind(this)\n    ;['animationend', 'webkitAnimationEnd', 'msAnimationEnd'].forEach(evType => {\n      captchaImage.addEventListener(evType, this.onAnimationEnd.bind(this))\n    })\n  },\n  _state: 'init',\n  get state() {\n    return this._state\n  },\n  set state(s) { // Capthca state machine\n    document.querySelectorAll('.captchawrap').forEach(c => {\n      if (s == 'init') {\n        c.classList.remove('cw-running')\n        c.classList.add('cw-initial')\n      }\n      if (s == 'init' || s == 'load') {\n        c.classList.add('captchaimage-invisible')\n      }\n      if (s == 'load') {\n        c.classList.remove('cw-initial', 'cw-running')\n        void c.offsetWidth //trigger a reflow\n        c.classList.add('cw-running', 'cw-loading')\n      }\n      else {\n        c.classList.remove('cw-loading')\n      }\n      if (s == 'run') {\n        c.classList.remove('captchaimage-invisible')\n      }\n    })\n    if (s !== 'run')\n      this.clear()\n    this._state = s\n  },\n  onClick: function(ev) {\n    this.refresh(ev.ctrlKey || ev.altKey)\n    ev.target._findParent('form').querySelector('input[name=captcha]').focus()\n  },\n  onFieldClick: function() {\n    if (this.state == 'init' || this.state == 'expired')\n      this.refresh()\n  },\n  onImageLoad: function() {\n    if (this.state == 'load')\n      this.state = 'run'\n  },\n  onAnimationEnd: function() {\n    this.state = 'expired'\n  },\n  clear: function() {\n    document.querySelectorAll('input[name=\"captcha\"]').forEach(i => i.value = '')\n  },\n  refresh: function(switch_lang=false) {\n    let cColor = $('.captchawrap').css('color').match(/([0-9]+(?:\\.[0-9]+)?)/g)\n    cColor = (cColor.length >= 3) ? '&color='+cColor.slice(0, 3).join(',') : ''\n    let url = ku_boardspath+'/captcha.php?'+Math.random()+cColor+(switch_lang ? '&switch' : '')\n    document.querySelectorAll('.captchaimage').forEach(img => img.src = url)\n    this.state = 'load'\n  }\n}\n\nfunction formatFileSize(bytes) {\n  if (bytes < 1000) {\n    return `${bytes}B`\n  }\n  else if (bytes < 1000000) {\n    return `${Math.round(bytes/1000)}KB`\n  }\n  else {\n    return `${Math.round(bytes/100000)/10}MB`\n  }\n}\n\nconst richFileInput = {\n  handleFiles: function(files, form, fromClipboard=false) {\n    let slotsLeft = maxfiles - $(form).find('.file-entry').length\n    , filesLeft = files.length\n    , i = 0\n    for (; slotsLeft && filesLeft; i++) {\n      let fileAttached = this.handleFile(files[i], form, fromClipboard)\n      slotsLeft -= fileAttached\n      filesLeft--\n    }\n    if (slotsLeft <= 0 && filesLeft)\n      pups.warn(_l.maxAttNumReached)\n  },\n  handleFile: function(file, form, fromClipboard=false) {\n    let fx = {}\n    // Determine the file extension\n    let ns = file.name.split('.')\n    fx.ext = (ns.length) > 1 ? ns.pop().toLowerCase() : \"\"\n    if (fx.ext == 'jpeg') fx.ext = 'jpg'\n    if (!_.contains(allowed_filetypes, fx.ext)) {\n      pups.err(`${file.name}: ${_l.unsupportedFileType}.`)\n      return 0\n    }\n    fx.fname = ns.join('.')\n\n    fx.sizeFormatted = formatFileSize(file.size)\n    \n    if (file.type.indexOf(\"image\") != -1) {\n      let reader = new FileReader()\n      reader.onload = ev => {\n        fx.img = ev.target.result\n        this.addFile(file, fx, form, fromClipboard)\n      }\n      reader.readAsDataURL(file, fx, form)\n    }\n    else {\n      this.addFile(file, fx, form, fromClipboard)\n    }\n    return 1\n  },\n  addFile: function(file, extra, form, fromClipboard=false) {\n    let index = this.store.push(file)-1\n    form.querySelector('.fe-sort-wrapper').insertAdjacentHTML('beforeEnd', `\n      <div class=\"file-entry${fromClipboard ? ' fe-name-hidden' : ''}\" data-index=\"${index}\" title=\"${file.name}\">\n        <div class=\"fe-thumb\">\n          ${extra.img ? `<img src=${extra.img}>` :  `<div class=\"fe-noimg\">${extra.ext}</div>`}\n        </div>\n        <input type=\"text\" value=\"${extra.fname}\" class=\"fe-fn\" ${fromClipboard ? ' disabled' : ''}>\n        <button class=\"clear-filename fe-pop-button icon-wraping-button\" title=\"${_l.hideName}\"><svg class=\"icon b-icon\">\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-hide-name\"></use>\n        </svg></button>\n        <button class=\"remove-file fe-pop-button icon-wraping-button\" title=\"${_l.removeFile}\"><svg class=\"icon b-icon\">\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-x\"></use>\n        </svg></button>\n        <button class=\"spoiler-file fe-pop-button icon-wraping-button\" title=\"${_l.spoilerOnOff}\"><svg class=\"icon b-icon\">\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-spoiler\"></use>\n        </svg></button>\n        <div class=\"fe-info\"></div>\n      </div>\n    `)\n    this.recalcForm(form)\n    let thisEl = form.querySelector(`.file-entry[data-index=\"${index}\"]`)\n    , img = false\n    , updateInfo = () => thisEl.querySelector(`.fe-info`).innerText = \n        `${extra.ext.toUpperCase()}${(img ? `, ${img.naturalWidth}${img.naturalHeight}`: '')}, ${extra.sizeFormatted}`\n    if (extra.img) {\n      img = thisEl.querySelector('img')\n      img.onload = updateInfo\n      img.onerror = updateInfo\n    }\n    else updateInfo()\n    thisEl._ext = extra.ext\n    this.updateTitle($(thisEl))\n  },\n  recalcForm: function(form) {\n    let count = form.querySelectorAll('.file-entry').length\n    form.classList.toggle('fda-non-empty', count > 0)\n    form.classList.toggle('fda-form-full', count >= maxfiles)\n    form.querySelector('.file-count').innerHTML = count > 0\n      ? `${_l.files}<br>(${count}/${maxfiles})`\n      : `${_l.file}`\n  },\n  updateTitle: function($el) {\n    let v = $el.find('.fe-fn').val()\n    , fname = !$el.hasClass('fe-name-hidden') && v ? v : '*****'\n    $el[0].title = `${fname}.${$el[0]._ext}`\n  },\n  serialize: function(form, fd) {\n    form.querySelectorAll('.file-entry').forEach((fe, i) => {\n      fd.append('imagefile[]', this.store[+fe.dataset.index])\n      if (fe.classList.contains('fe-spoiler'))\n        fd.append(`spoiler-${i}`, 1)\n      let fname = fe.querySelector('.fe-fn').value\n      if (fe.classList.contains('fe-name-hidden') || fname==='')\n        fd.append(`hidename-${i}`, 1)\n      else\n        fd.append(`filename-${i}`, fname)\n    } )\n  },\n  store: [],\n  init: function() {\n    let postform = document.querySelector('#postform')\n    if (!postform) return;\n    this.enabled = document.querySelector('.file-row') && 'FileReader' in window\n    if (this.enabled) {\n      let _this = this\n      $('body')\n      .on('click', '.remove-file', function(ev) {\n        ev.preventDefault()\n        ev.stopPropagation()\n        let $entry = $(this).parents('.file-entry')\n        _this.store[+$entry.data('index')] = null\n        let $form = $entry.parents('form[name=postform]')\n        $entry.remove()\n        _this.recalcForm($form[0])\n      })\n      .on('click', '.file-entry', function(ev) {\n        $(this).toggleClass('fe-expanded')\n        setTimeout(() => $(this).find('input').select(), 450)\n      })\n      .on('click', '.file-entry input', function(ev) {\n        ev.stopPropagation()\n      })\n      .on('click', '.spoiler-file', function(ev) {\n        ev.preventDefault()\n        ev.stopPropagation()\n        $(this).parents('.file-entry').toggleClass('fe-spoiler')\n      })\n      .on('click', '.clear-filename', function(ev) {\n        ev.preventDefault()\n        ev.stopPropagation()\n        let $entry = $(this).parents('.file-entry')\n        $entry.find('.fe-fn').prop('disabled', !$entry.hasClass('fe-name-hidden'))\n        $entry.toggleClass('fe-name-hidden')\n        _this.updateTitle($entry)\n      })\n      .on('change', '.fe-fn', function(ev) {\n        _this.updateTitle($(this).parents('.file-entry'))\n      })\n      .on('change', 'input[type=file]', function(ev) {\n        let form = $(this).parents('form[name=postform]')[0]\n        _this.handleFiles(ev.target.files, form)\n        this.value = null\n      })\n      .on('click', '.add-files', function(ev) {\n        ev.preventDefault()\n        $(this).parents('form[name=postform]').find('input[type=file]')[0].click()\n      })\n      .on('paste', 'form[name=postform]', function(ev) {\n        let items = (ev.clipboardData || ev.originalEvent.clipboardData).items\n        , arr = [];\n        for (var i = 0 ; i < items.length ; i++) {\n          var item = items[i];\n          if (item.kind == 'file') {\n            arr.push(item.getAsFile())\n          }\n        }\n        _this.handleFiles(arr, this, true)\n      })\n    }\n    else {\n      $('body')\n      .on('click', '.remove-file', function(ev) {\n        ev.preventDefault()\n        $(this).parent().find('input[type=file]')\n          .val(null)\n          .removeClass('non-empty-file-input')\n      })\n      .on('change', 'input[type=file]', function() {\n        $(this).toggleClass('non-empty-file-input', this.value)\n      })\n    }\n    this.initForm(postform)\n  },\n  initForm: function(form) {\n    let _this = this\n    if (this.enabled) {\n      // Drag and drop events\n      $(form) // I tried using plain JS, doesn't work, sorry\n      .on('dragenter dragend dragover drop dragleave', function(ev) {\n        ev.originalEvent.stopPropagation()\n        if (!(ev.target.nodeName == 'TEXTAREA' || ev.target.nodeName == 'INPUT')) \n          ev.preventDefault()\n      })\n      .on('drop', function(ev) {\n        ev.originalEvent.stopPropagation()\n        if (ev.originalEvent.dataTransfer && ev.originalEvent.dataTransfer.files.length) {\n          ev.originalEvent.preventDefault() \n          _this.handleFiles(ev.originalEvent.dataTransfer.files, this)\n        }\n      })\n      // File entry sorting\n      if(form.querySelector('.fe-sort-wrapper')) {\n        Sortable.create(form.querySelector('.fe-sort-wrapper'), {\n          animation: 150,\n          handle: '.fe-thumb'\n        })\n      }\n      // Prevent legacy file inputs from being serialized\n      form.querySelectorAll('input[name^=imagefile]').forEach(i => i.removeAttribute('name'))\n    }\n    else {\n      let area = form.querySelector('.drop-area')\n      if (!area) return;\n      area.previousElementSibling.classList.remove('noscript')\n      area.remove()\n    }\n  },\n  clear: function(form, clearStore=false) {\n    if (this.enabled) {\n      form.querySelectorAll('.file-entry').forEach(fe => {\n        if (clearStore)\n          this.store[fe.dataset.index] = null\n        fe.remove()\n      })\n      this.recalcForm(form)\n    }\n  }\n}\n\nfunction handleCtrlEnter(ev) {\n  ev.preventDefault()\n  let area = document.activeElement\n  , form = area._findParent('form[name=postform]')\n  if (form) {\n    Ajax.submitPost(form)\n  }\n}\n\nconst Ajax = {\n  submitPost: function(form, sage) {\n    let alertsToRemove = _.clone(this.shownErrors)\n    setTimeout(() => {\n      alertsToRemove.forEach(a => {\n        pups.closeByID(a)\n      })\n    }, 300)\n    this.shownErrors = []\n    let showError = (a, b={}) => this.shownErrors.push(pups.err(a, b))\n    let showWarning = (a, b={}) => this.shownErrors.push(pups.warn(a, b))\n\n    let captchafield = form.captcha\n    if (captchafield && !captchafield.value.length) {\n      captchafield.focus()\n      return showWarning(_l.enterCaptcha)\n    }\n    \n    form.classList.add('form-sending')\n    let fd = new FormData(form)\n\n    if (typeof sage !== 'undefined')\n      fd.append('sagebtn', sage)\n\n    if (richFileInput.enabled)\n      richFileInput.serialize(form, fd)\n    let xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n\n    // Token for live updates\n    this.postToken = randomString()\n    fd.append('token', this.postToken)\n\n    xr.open('POST', form.action)\n    xr.onload = e => {\n      form.classList.remove('form-sending')\n      if (xr.status !== 200) {\n        showError(_l.xhrError)\n        return\n      }\n      ;[].forEach.call(form.querySelectorAll('.error-in-attachment'), el => el.classList.remove('error-in-attachment'))\n      if (Captcha.enabled)\n        Captcha.state = 'init'\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        showError(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        if (res.error_type) {\n          if (res.error_type == 'ban') {\n            showError(`${res.error} (<a href=\"${ku_cgipath}/banned.php\" target=\"_blank\">${_l.details}</a>)`, {time: 0, save: true})\n          }\n          if (res.error_type == 'duplicate_file') {\n            showError(res.error, {time: 0})\n            form.querySelector('input[name=\"imagefile\"]').value = null\n          }\n          if (res.error_type == 'upload_error') {\n            showError(res.error, {time: 0})\n            let badatt = form.querySelector(`.multiembedwrap[data-pos=\"${res.error_data.attachmenttype}-${res.error_data.position+1}\"]`)\n            if (badatt) {\n              badatt.classList.add('error-in-attachment')\n            }\n          }\n        }\n        else {\n          showError(res.error, {time: 0})\n        }\n        return\n      }\n      else {\n        resetForm(form)\n        if (form.classList.contains('quick-reply-form')) {\n          hidePostForm(form) // TODO: tumbach pinning?\n        }\n        /*else {\n        }*/\n        let noko = form.querySelector('input[name=\"redirecttothread\"]').checked\n        if (res.thread_replyto != 0) {\n          newposts.get({\n            threadid: ispage ? res.thread_replyto : null,\n            expectedPost: +res.post_id,\n            onError: (err) => {\n              console.error(err)\n              document.location.href = `${ku_boardspath}/${res.board}/res/${res.thread_replyto}.html#${res.post_id}`\n              if (! ispage)\n                document.location.reload()\n            },\n            onSuccess: () => $(`#delform div[id^=thread${res.thread_replyto}] .fresh-replies`).remove()\n          })\n        }\n        else {\n          if (noko) {\n            document.location.href = `${ku_boardspath}/${res.board}/res/${res.post_id}.html`\n          }\n          else {\n            document.location.href = `${ku_boardspath}/${res.board}`\n          }\n        }\n      }\n    }\n    xr.send(fd)\n  },\n  shownErrors: [],\n  reportPost: function(fd, callback=null) {\n    let xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    fd.append('reportpost', 1)\n    xr.open('POST', document.forms.delform.action)\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return callback(false)\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return callback(false)\n      }\n      if (callback)\n        callback(res.data)\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        $('body').removeClass('select-multiple')\n        $('.userdelete').removeClass('ud-active')\n        let postsReported = []\n        , postErrors = []\n        res.data.forEach(item => {\n          if (!item.success) {\n            postErrors.push(item)\n            return\n          }\n          postsReported.push(item.id)\n          if (! $('input[name=\"post[]\"]:checked').length)\n            $('.userdelete').removeClass('ud-active');\n        })\n        let msg = ''\n        if (postsReported.length) {\n          postsReported = postsReported.map(post => '#'+post)\n          msg += postsReported.length > 1 ?\n            `${_l.posts} ${postsReported.join(', ')} ${_l.reportedMulti}.`\n           :`${_l.post} ${postsReported[0]} ${_l.reported}.`\n          pups.succ(msg, {time: 2 + postsReported.length})\n        }\n        postErrors.forEach(err => {\n          pups.err(`${_l.post} #${err.id}: ${err.message}`)\n        })\n      }\n    }\n    xr.send(fd)\n  },\n  cancelTimer: function(fd, callback=null) {\n    let xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    fd.append('cancel_timer', 1)\n\n    // Token for live updates\n    this.timerToken = randomString()\n    fd.append('token', this.timerToken)\n\n    xr.open('POST', document.forms.delform.action)\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return callback(false)\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return callback(false)\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return callback(false)\n      }\n      else {\n        $('body').removeClass('select-multiple')\n        $('.userdelete').removeClass('ud-active')\n        let postsSaved = []\n        , postErrors = []\n        res.data.forEach(item => {\n          if (!item.success) {\n            postErrors.push(item)\n            return\n          }\n          postsSaved.push(item.id)\n          if (! $('input[name=\"post[]\"]:checked').length)\n            $('.userdelete').removeClass('ud-active');\n        })\n        let msg = ''\n        if (postsSaved.length) {\n          postsSaved.forEach(id => {\n            let $reply = $(`.postnode[data-id=${id}]`)\n            $reply.find('.post-ttl').remove()\n            $reply.find('.post-menu').hide()\n          } )\n          msg += postsSaved.length > 1 ?\n            `${_l.posts} #${postsSaved.join(', #')} ${_l.savedMulti}.`\n           :`${_l.post} #${postsSaved[0]} ${_l.saved}.`\n          pups.succ(msg, {time: 2 + postsSaved.length})\n        }\n        postErrors.forEach(err => {\n          pups.err(`${_l.post} #${err.id}: ${err.message}`)\n        })\n        callback(postErrors)\n      }\n    }\n    xr.send(fd)\n  },\n  modThread: function(a, action) {\n    let $a = $(a)\n    , fd = new FormData()\n    , xr = new XMLHttpRequest()\n    , $li = $a.find('li')\n    $li.addClass('spin-around')\n    fd.append('AJAX', 1)\n    xr.open('POST', a.getAttribute('href'))\n    xr.onload = e => {\n      $li.removeClass('spin-around')\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        let $posthead = $a.parents('.posthead')\n        , $extrabtns = $posthead.find('.extrabtns')\n        if (action == 'stickypost') {\n          $extrabtns.prepend(makeIcon('pin', 'i-icon i-pin'));\n          $posthead.addClass('thread-stickied')\n        }\n        if (action == 'unstickypost') {\n          $extrabtns.find('svg.i-icon.i-pin').remove()\n          $posthead.removeClass('thread-stickied')\n        }\n        if (action == 'lockpost') {\n          $extrabtns.prepend(makeIcon('lock', 'i-icon i-lock'));\n          $posthead.addClass('thread-locked')\n        }\n        if (action == 'unlockpost') {\n          $extrabtns.find('svg.i-icon.i-lock').remove()\n          $posthead.removeClass('thread-locked')\n        }\n        pups.succ(res.message)\n      }\n    }\n    xr.send(fd)\n  },\n  deleteItems: function(fd, callback=null) {\n    let kind = 'Items'\n    if (fd.has) {\n      if (fd.has('post[]')) {\n        if (!fd.has('delete-file[]'))\n          kind = 'Posts'\n        fd.append('deletepost', 1)\n      }\n      else if (fd.has('delete-file[]'))\n        kind = 'Files'\n      else return;\n    }\n    else { // FormData.has() is not supported\n      fd.append('deletepost', 1)\n    }\n    \n    let xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n\n    // Token for live updates\n    this.delToken = randomString()\n    fd.append('token', this.delToken)\n\n    xr.open('POST', document.forms.delform.action)\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return callback(null)\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return callback(null)\n      }\n      if (callback)\n        callback(res.data)\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        deleteItems(res.data)\n      }\n    }\n    xr.send(fd)\n  }\n}\n\nfunction inspectFormData(formData) {\n  for (var pair of formData.entries()) {\n    console.log(pair[0]+ ', ' + pair[1]);\n  }\n}\n\nfunction makeIcon(i, classes=\"\", bare=false) {\n  return `${bare ? '' : `<svg class=\"icon ${classes}\">`}\n    <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-${i}\"></use>\n  ${bare ? '' : '</svg>'}`\n}\n\nfunction addCaptchaToMenu($menu) {\n  if ($menu.find('.captchawrap').length) {\n    Captcha.state = 'init';\n    return;\n  }\n  if (!Captcha.enabled) {\n    Captcha.init('only-access')\n  }\n  $menu.prepend(`<li class=\"menu-captcha\">\n    <div class=\"captchawrap cw-initial captchaimage-invisible\" title=\"${_l.refreshCaptcha}\">\n      <div class=\"captcha-show msg\">${_l.showCaptcha}</div>\n      <img class=\"captchaimage\" valign=\"middle\" border=\"0\" alt=\"${_l.captchaImage}\">\n      <div class=\"rotting-indicator\"></div>\n      <div class=\"rotten-msg msg\">${_l.captchaExpired}</div>\n    </div>\n    <input type=\"text\" name=\"captcha\" placeholder=\"${_l.captcha}\" autocomplete=\"off\">\n  </li>`)\n  Captcha.initForm($menu[0])\n  $menu.find('input[name=captcha]').keydown(ev => {\n    if (ev.key == 'Enter') {\n      ev.preventDefault()\n      ev.stopPropagation()\n    }\n  })\n}\n\nfunction expandimg(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh) {\n  let element = document.getElementById(\"thumb\" + postnum);\n  if (element == null) return false;\n  let $element = $(element)\n  , $postbody = $element.parents('.postbody')\n  , $fc_filename = $element.parents('figure').find('.fc-filename')\n  , fc_width\n  if(typeof event !== 'undefined' && event.which === 2) return true;\n  if (element.getElementsByTagName('img')[0].getAttribute('alt').substring(0,4)!='full') {\n    $element.html('<img src=\"'+imgurl+'\" alt=\"full'+postnum+'\" class=\"thumb\" height=\"'+imgh+'\" width=\"'+imgw+'\">');\n    if (! Settings.expandImgFull()) {\n      let img = element.getElementsByTagName('img')[0]\n      , max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth\n      , offset = 50\n      , offset_el = img\n\n      while (offset_el != null) {\n        offset += offset_el.offsetLeft;\n        offset_el = offset_el.offsetParent;\n      }\n      var new_w = max_w - offset;\n      if (img.width > new_w) {\n        var ratio = img.width / img.height;\n        var zoom = 1 - new_w / img.width;\n        var new_h = new_w / ratio;\n        var notice = document.createElement('div');\n        notice.setAttribute('class', 'filesize');\n        notice.style.textDecoration = 'underline';\n        var textNode = document.createTextNode(_l.imageDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit);\n        notice.appendChild(textNode);\n        element.insertBefore(notice, img);\n        $(img).width(new_w);\n        $(img).height(new_h);\n      }\n      fc_width = new_w\n    }\n    else\n      fc_width = imgw\n    if ($postbody) $postbody.addClass('postbody-expanded')\n  }\n  else {\n    element.innerHTML = '<img src=\"' + thumburl + '\" alt=\"' + postnum + '\" class=\"thumb\" height=\"' + thumbh + '\" width=\"' + thumbw + '\">';\n    fc_width = thumbw\n    if ($postbody) $postbody.removeClass('postbody-expanded')\n  }\n  $fc_filename[0].style.maxWidth = `${fc_width - 50}px`\n  return false;\n}\n\n// YOBA previews\nvar PostPreviews = {\n  zindex:  3,\n  parent: {},\n\n  _parseURL: function(url) {\n    let matches = url.match(/\\/(.+)\\/res\\/([0-9]+)\\.html#([0-9]+)|postbynumber\\.php\\?b=(.+)&p=([0-9]+)/i)\n    if (!matches) return null;\n    return {\n      board: matches[1] || matches[4],\n      parent: matches[2] || '?',\n      post: matches[3] || matches[5],\n    }\n  },\n\n  _mouseover: function(e) {\n    e.stopPropagation();\n    var href = this.getAttribute(\"href\")\n    , isCatalog = $(this).hasClass('catalog-entry')\n    , parsedURL = PostPreviews._parseURL(href)\n    if (!parsedURL) return false;\n    let board = parsedURL['board']\n    , parentid = parsedURL['parent']\n    , postid = parsedURL['post']\n    , previewid = 'preview_'+board+'_'+postid\n    , $preview = $('#' + previewid)\n    if ($preview.length == 0) {\n      $('body').children().first().before('<div id=\"'+previewid+'\"></div>');\n      $preview = $('#' + previewid);\n      $preview.addClass('reflinkpreview content-background pre-hidden actual-reflinkpreview');\n      $preview.mouseleave(PostPreviews._mouseout);\n      $preview.mouseover(PostPreviews.mouseOverPreview);\n    }\n    else {\n      if ($preview[0]._pinned)\n        return false // No need to recreate a preview in this case\n    }\n    var parent = $(this).parents('div[id^=preview]');\n    if (parent.length > 0) {\n      if (previewid == parent.attr('id')) return; // anti-recursion\n      for (var id in PostPreviews.parent) { \n        if (id == previewid || PostPreviews.parent[id] == previewid) \n          return\n      }\n      PostPreviews.parent[previewid] = parent.attr('id');\n    }\n    /*else {\n      PostPreviews.parent = [];\n    }*/\n    let transformOrigin;\n    if(e.clientY < ($(window).height() / 1.5)) {\n      $preview.css({top:e.pageY+5});\n      transformOrigin = \"top \"\n    } else {\n      $preview.css({bottom:$(window).height()-e.pageY+5});\n      transformOrigin = \"bottom \"\n    }\n    if(e.clientX < ($(window).width() / 1.5)) {\n      $preview.css({left:e.pageX+15});\n      transformOrigin += \"left\"\n    } else {\n      $preview.css({right:$(window).width()-e.pageX+15});\n      transformOrigin += \"right\"\n    }\n    $preview.css({zIndex: PostPreviews.zindex++, \"transform-origin\": transformOrigin});\n    this.style.cursor = \"progress\"\n    let preview = $preview[0]\n    HTMLoader.getPost(board, parentid, postid, (err, post) => {\n      window.setTimeout(() => {\n        preview.getBoundingClientRect() // force reflow or how is this thing called\n        $preview.html(post ? post : (_l.oops + (err !== false ? ` (${err})` : '')))\n        .removeClass('pre-hidden')\n        this.style.cursor = \"pointer\"\n        // Add pin button\n        let ebtns = preview.querySelector('.extrabtns')\n        if (!ebtns) return;\n        ebtns.insertAdjacentHTML('beforeEnd', `\n        <a href=\"#\" class=\"pin-preview pinner unpinned\" title=\"${_l.pinUnpin}\">\n          <svg class=\"icon b-icon\">\n            <use class=\"use-pin\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-pin\"></use>\n            <use class=\"use-unpin\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unpin\"></use>\n          </svg>\n        </a>`)\n        let pinner = ebtns.querySelector('.pinner')\n        pinner.onclick = (ev) => {\n          ev.preventDefault()\n          ev.stopPropagation()\n          let pin = !pinner.classList.contains('pinned')\n          pinner.classList.toggle('pinned', pin)\n          pinner.classList.toggle('unpinned', !pin)\n          let $pre = $preview\n          while ($pre.length > 0) {\n            $pre[0]._pinned = pin\n            $pre = $('#' + PostPreviews.parent[$pre.attr('id')])\n          }\n        }\n      }, 0)\n    })\n    e.preventDefault();\n  },\n\n  mouseOverPreview: function() {\n    var preview = $(this);\n    if ($(this).is('a')) {\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\n      if (!parsedURL) return;\n      let board = parsedURL['board']\n      , postid = parsedURL['post']\n      preview = $('#preview_'+board+\"_\"+postid).first();\n    }\n    while (preview.length > 0) {\n      clearTimeout(preview[0].fadeout)\n      preview = $('#' + PostPreviews.parent[preview.attr('id')])\n    }\n  },\n\n  _mouseout: function(ev, nodelay=false) {\n    var preview = $(this);\n    if ($(this).is('a')) {\n      if (this.predelay) {\n        clearTimeout(this.predelay)\n      }\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\n      if (!parsedURL) return;\n      let board = parsedURL['board']\n      , postid = parsedURL['post']\n      preview = $('#preview_'+board+\"_\"+postid).first();\n    }\n    while (preview.length > 0) {\n      clearTimeout(preview[0].fadeout)\n      let pre = preview\n      if (pre[0]._pinned) return;\n\n      preview[0].fadeout = setTimeout(() => {\n        pre.addClass('pre-hidden')\n        setTimeout(() => {\n          delete PostPreviews.parent[pre.attr('id')];\n          pre.remove();\n        }, PostPreviews._timings.transition)\n      }, nodelay ? 0 : PostPreviews._timings.fade)\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);\n    }\n  },\n\n  _timings: {\n    predelay: 50,\n    transition: 200,\n    fade: 400\n  }\n}\n\nfunction set_inputs(id) {\n  let form = document.getElementById(id)\n  if (form) {\n    let name = form.querySelector('input[name=name]')\n    if(name && !name.value) {\n      let savedName = getCookie(\"name\")\n      if (~savedName.indexOf('#'))\n        name.type = 'password'\n      name.value = savedName\n    }\n    if(!form.em.value) form.em.value = getCookie(\"email\");\n    if(!form.postpassword.value) form.postpassword.value = get_password(\"postpassword\");\n  }\n}\n\nfunction set_delpass(id) {\n  let form = document.getElementById(id)\n  if (! form) return;\n  let postpassword = form.postpassword\n  if (postpassword && !postpassword.value) {\n    postpassword.value = get_password(\"postpassword\");\n  }\n}\n\n(function ($) { // [!] What the fuck is this?\n  $.event.special.load = {\n    add: function (callback) {\n      if ( this.nodeType === 1 && this.tagName.toLowerCase() === 'img' && this.src !== '' ) {\n        if ( this.complete || this.readyState === 4 ) {\n          callback.handler.apply(this);\n        }\n        else if ( this.readyState === 'uninitialized' && this.src.indexOf('data:') === 0 ) {\n          $(this).trigger('error');\n        }\n\n        else {\n          $(this).bind('load', callback.handler);\n        }\n      }\n    }\n  };\n}(jQuery));\n\nvar Settings = {\n  _checkbox: function(clicked, settingName, defaultValue, perBoard=false) {\n    let settingNameGeneral = settingName\n    if (perBoard)\n      settingName = settingName+'.'+this_board_dir\n    if (localStorage == null) {\n      pups.err(_l.noLocalStorage);\n      return;\n    }\n    if (localStorage[settingName] == null) {\n      localStorage[settingName] = defaultValue;\n    }\n    if (clicked == true) {\n      // save it\n      localStorage[settingName] = $('#settings_' + settingNameGeneral).is(\":checked\");\n    } else {\n      // update checkbox (called on load)\n      if (localStorage[settingName] == 'true')\n        $('#settings_' + settingNameGeneral).attr(\"checked\",\"checked\");\n      else\n        $('#settings_' + settingNameGeneral).removeAttr(\"checked\");\n    }\n    return (localStorage[settingName] == 'true') || (localStorage[settingName] == true) ;\n  },\n\n  fxEnabled: function(changed) {\n    var enabled = Settings._checkbox(changed, 'fxEnabled', true);\n    if (changed != null) {\n      $.fx.off = !enabled;\n    }\n    return enabled;\n  },\n\n  showReplies: function(changed) {\n    var enabled = Settings._checkbox(changed, 'showReplies', true);\n    if (changed != null && (typeof is_catalog === 'undefined' || !is_catalog)) {\n      scrollAnchor.save('replymap', '.postnode')\n      if (enabled) {\n        replyMap.showReplies()\n        injector.remove('hide-replies')\n      }\n      else {\n        injector.inject('hide-replies', '.replieslist {display: none}')\n      }\n      scrollAnchor.restore('replymap')\n    }\n    return enabled;\n  },\n\n  sfwMode: function(changed) {\n    var enabled = Settings._checkbox(changed, 'sfwMode', false);\n    if (enabled) {\n      injector.inject('sfwMode', 'figure > *, .emoji { opacity: 0.05;} figure:hover > *, .postbody:hover .emoji { opacity: 1;}');\n    }\n    else {\n      injector.remove('sfwMode');\n    }\n    return enabled;\n  },\n\n  hideCompletely: function(changed) {\n    var enabled = Settings._checkbox(changed, 'hideCompletely', false, true);\n    if (changed) {\n      HiddenItems.hideCompletely = enabled\n      HiddenItems.updateCSS()\n    }\n    return enabled;\n  },\n\n  expandImgFull: function(changed) {\n    return Settings._checkbox(changed, 'expandImgFull', false);\n  },\n\n  constrainWidth: function(changed) {\n    var enabled = Settings._checkbox(changed, 'constrainWidth', false);\n    if (enabled) {\n      injector.inject('constrainWidth', `body {\n        max-width: 960px;\n        margin: 0px auto;\n      }`)\n    }\n    else {\n      injector.remove('constrainWidth')\n    }\n  }\n}\n\nvar rswap = {\n  i: true,\n  swap: function() {\n    if(this.i) $('#delform').before($('#rswapper')).after($('.postarea'));\n    else $('#delform').before($('.postarea')).after($('#rswapper'));\n    this.i = !this.i;\n  }\n}\n\nvar captchalang = getCookie('captchalang') || 'ru';\nfunction setCaptchaLang(lang) {\n  if(!in_array(lang, ['ru', 'en', 'num'])) return;\n  captchalang = lang;\n  set_cookie('captchalang', lang, 365);\n  pups.succ(_l.captchaLangChanged)\n}\n\nconst offClick = []\n\nfunction readyset() {\n  $('.make-me-readonly').each(function() {\n    $(this).attr('readonly', true)\n    .on('focus', function() {\n      $(this).removeAttr('readonly')\n    })\n  })\n\n  if(!ispage) $('.mgoback').show();\n  if(isTouch)\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'desktop\\'); location.reload();\">'+_l.returnDesktop+'</a><br>');\n  else\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'touch\\'); location.reload();\">'+_l.returnTouch+'</a><br>');\n\n  $('#js_settings').prepend(_l.captchalang+': <a href=\"javascript:setCaptchaLang(\\'ru\\');\">Cyrillic</a> | <a href=\"javascript:setCaptchaLang(\\'en\\');\">Latin</a> | <a href=\"javascript:setCaptchaLang(\\'num\\');\">Numeral</a><br />');\n\n  if(Styles.$cancelLink)\n    $('#js_settings').prepend(Styles.$cancelLink)\n\n  richFileInput.init()\n\n  pups.init();\n  chpok.init(true)\n\n  LatexIT.init();\n  checkhighlight();\n  checkgotothread();\n  checknamesave();\n\n  bnrs.init();\n\n  if(getCookie('ku_menutype')) {\n    var c = Cookie('ku_menutype');\n    if(c != 'default' && c != '')\n      document.getElementById('overlay_menu').style.position = c;\n  }\n\n  //initial post-process\n  processNodeInsertion()\n\n  if(!isTouch) {\n    cloud20.init();\n    $('.sect-exr').mouseenter(function() { menu_show('ms-'+$(this).data('toexpand')); });\n    $('#overlay_menu').mouseleave(function() { menu_show('_off_'); });\n    $('body').on('mouseenter', \"a[class^='ref']\", function(ev) {\n      this.predelay = setTimeout(() => PostPreviews._mouseover.bind(this)(ev), PostPreviews._timings.predelay)\n    })\n    .on('mouseleave', \"a[class^='ref']\", PostPreviews._mouseout)\n    .on('click', \"a[class^='ref']\", function(e) {\n      e.preventDefault()\n      let href = this.getAttribute('href')\n      if (!highlight(href.split('#')[1], 0)) {\n        document.location.href = href\n      }\n    })\n  }\n  else {\n    add_mob_menu();\n    $('body').addClass('touch-mode');\n    $('.sect-exr:not([data-toexpand=\"_options\"])').parent().hide();\n    $('.sect-exr').click(function() {\n      if($('#js_settings').is(':visible')) {\n        menu_show('_off_');\n      }\n      else {\n        menu_show('ms-_options');\n      }\n      return false;\n    });\n    offClick.push(ev => {\n      menu_show('_off_');\n      document.querySelectorAll('[id^=preview]').forEach(pre => PostPreviews._mouseout.bind(pre)(null, true))\n    })\n    $('body').on('click', \"a[class^='ref']\", PostPreviews._mouseover)\n    .on('doubletap', '.postnode', function(ev) {\n      ev.stopPropagation()\n      ev.preventDefault()\n      this.querySelector('.qrl').click()\n    })\n  }\n\n  $('html').click(ev => offClick.forEach(fn => fn(ev)))\n\n  /* ---------- All delegated events on body ---------- */\n  $('body')\n  .on('click', '.uib-mup', function() {\n    markup($(this).parents('form'), $(this).data('mups'), $(this).data('mupe'), $(this).data('imups'), $(this).data('imupe'));\n    return false;\n  })\n  .on('click', '.uib-bul', function() {\n    bullets($(this).parents('form'), $(this).data('bul'), $(this).data('imups'), $(this).data('imupe'));\n    return false;\n  })\n  .on('click', '.uib-tx', function() {\n    var target = $(this).data('target');\n    head.js('http://latex.codecogs.com/editor3.js', function() {\n      OpenLatexEditor(target,'phpBB','en-us', false, '','full');\n    });\n    return false;\n  })\n  //Video expanding\n  .on('click', '.movie', function(event) {expandVideo($(this), event)})\n  //new quick reply\n  .on('click', '.qrl', quickreply)\n  // ID highlighting\n  .on('click', '.hashpic', function() {\n    $('.highlight').removeClass('highlight')\n    let found = $(`.hashpic[alt=${$(this).attr('alt')}]`).each(function() {\n      $(this).parents('.posthead').parent().addClass('highlight')\n    }).length\n    pups.info(_l.found+': '+found, {time: 1.5})\n  })\n  .on('click', '.posttypeindicator a', function() { // TODO: what is this?\n    var xl = $(this);\n    var offset = $('[name=\"' + xl.attr('href').substr(1) + '\"]').offset() || $('[name=\"' + xl.text().split('>>')[1] + '\"]').offset() || false;\n    if(offset) {\n      $('html, body').animate({\n        scrollTop: offset.top - ( $('#overlay_menu').height() + 10 )\n      }, 250);\n    }\n    return false;\n  })\n  .on('click', '.dice', function() {\n    if(typeof $(this).data('html') === 'undefined') $(this).data('html', $(this).html());\n    var htm = stripHTML($(this).html());\n    $(this).html($(this).attr('title'));\n    $(this).attr('title', htm);\n  })\n  .on('click', '.reflink a', function(ev) {\n    ev.preventDefault()\n    let ref = this.parentElement\n    , postnode = ref._findParent('.postnode')\n    if (!lastActiveForm) {\n      quickreply.bind(postnode.querySelector('.qrl'))()\n    }\n    else {\n      let postBody = postnode.querySelector('.postbody')\n      , qoutation = getPostQuotation(postBody)\n      insert(`>>${ref.dataset.b == this_board_dir ? '' : `/${ref.dataset.b}/`}${ref.dataset.id}\\n${qoutation}`)\n    }\n  })\n  //Ultimate YOBA Youtube embeds\n  .on('click','.embed-play-button', function(ev) {\n    ev.preventDefault()\n    unwrapEmbed($(this).parents('figure'))\n  })\n  .on('click','.collapse-video', function(ev) {\n    ev.preventDefault()\n    wrapEmbed($(this).parents('figure'))\n  })\n  .on('mouseenter', '._country_', function() {\n    if(typeof $(this).attr('title') === \"undefined\") {\n      $(this).attr('title', countries[$(this).attr('src').split('flags/')[1].split('.png')[0].toUpperCase()]);\n    }\n  })\n  .on('click', '.audiowrap', function(ev) {\n    ev.preventDefault();\n    let $this = $(this)\n    var src = $this.attr('href');\n    let $fig = $this.parents('figure')\n    if (! $fig.hasClass('unwrapped')) {\n      $fig.addClass('unwrapped unwrapped-audio')\n    }\n    let $fsz = $fig.find('.filesize');\n    if (! $fsz.find('.collapse-btn').length)\n      $fsz.append(`\n        <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\n          ${makeIcon('shrink', 'b-icon')}\n        </button>`);\n    if (! $this.find('audio').length)\n      $this.append('<audio src=\"'+src+'\" controls autoplay=\"true\"></audio>')\n    $fsz.find('.collapse-video').click(function() {\n      $fig.removeClass('unwrapped unwrapped-audio')\n      .find('audio')[0].pause()\n    })\n  })\n  .on('change', '.multidel', function() {\n    let itemCount = $('.multidel:checked').length\n\n    if (! $('.item-count').length) {\n      $('.userdelete tbody').prepend(`<tr><td>\n        ${_l.selected}: <span class=\"item-count\"></span>\n        <button class=\"close-multisel icon-wraping-button\" title=\"${_l.cancel}\">${makeIcon('x', 'b-icon ', false)}</button>\n      </td></tr>`)\n      $('.close-multisel').click(function(ev) {\n        ev.preventDefault()\n        $('.multidel').prop('checked', false)\n        $('body').removeClass('select-multiple')\n        $('.userdelete').removeClass('ud-active')\n      })\n    }\n\n    if (itemCount > 0) {\n      $('.item-count').text(itemCount)\n    }\n    else {\n      $('.userdelete').removeClass('ud-active')\n      $('body').removeClass('select-multiple')\n    }\n  })\n  /* Post menu */ \n  .on('click', 'label.postinfo', function(ev) {\n    if (! $(this).find('.multidel').is(':visible')) {\n      ev.stopPropagation()\n      ev.preventDefault()\n      let $this = $(this)\n      , $menu = $this.parent().find('.post-menu')\n      let on = !$menu.is(':visible')\n      $('.post-menu').hide()\n      if (! $menu.length) {\n        let $postnode = $(this).parents('.postnode')\n        , board = $postnode.data('board')\n        , id = $postnode.data('id')\n        , isOP = $postnode.hasClass('op')\n        if (!isOP)\n          $postnode.toggleClass('post-hidden', HiddenItems.isHidden('post', id))\n        this.insertAdjacentHTML('afterend', `<div class=\"content-background post-menu\" style=\"display: none\"> \n          <ul>\n            <li class=\"menu-delete\">${makeIcon('x')}<span>${_l.del}</span></li>\n            ${!isOP ? `\n              ${+opmod ? `<li class=\"menu-delete menu-delete-op\">${makeIcon('x')}<span>${_l.del} ${_l.asOP}</span></li>`: ''}\n              <li class=\"menu-hide\">${makeIcon('hide')}<span>${_l.hidePost}</span></li>\n              <li class=\"menu-unhide\">${makeIcon('unhide')}<span>${_l.unhidePost}</span></li>\n            `: ''}\n            <li class=\"menu-report\">${makeIcon('warning')}<span>${_l.report}</span></li>\n            <li class=\"menu-link-share\">${makeIcon('link')}<span>${_l.links}</span></li>\n            ${$postnode.find('.post-ttl').length ? `\n              <li class=\"menu-cancel-timer\">${makeIcon('untimer')}<span>${_l.cancelTimer}</span></li>\n            `: ''}\n            <li class=\"menu-select-multiple\">${makeIcon('select-multiple')}<span>${_l.selectMultiple}</span></li>\n            ${kumod_set ? `\n              <li class=\"menu-delete menu-delete-mod\">${makeIcon('x')}<span>${_l.del} ${_l.asMod}</span></li>\n              <a href=\"${ku_cgipath}/manage_page.php?action=bans&amp;banboard=${board}&amp;banpost=${id}\">\n                <li class=\"menu-ban\">${makeIcon('ban')}<span>${_l.ban}...<span></li>\n              </a>\n              ${isOP ? `\n                <a class=\"stickypost-btn\" onclick=\"Ajax.modThread(this, 'stickypost'); return false\"\n                href=\"${ku_cgipath}/manage_page.php?action=stickypost&amp;board=${board}&amp;postid=${id}\">\n                  <li>${makeIcon('pin')}<span>${_l.stickthread}<span></li>\n                </a>\n                <a class=\"unstickypost-btn\" onclick=\"Ajax.modThread(this, 'unstickypost'); return false\"\n                href=\"${ku_cgipath}/manage_page.php?action=unstickypost&amp;board=${board}&amp;postid=${id}\">\n                  <li>${makeIcon('unpin')}<span>${_l.unstickthread}<span></li>\n                </a>\n                <a class=\"lockpost-btn\" onclick=\"Ajax.modThread(this, 'lockpost'); return false\"\n                href=\"${ku_cgipath}/manage_page.php?action=lockpost&amp;board=${board}&amp;postid=${id}\">\n                  <li>${makeIcon('lock')}<span>${_l.lockthread}<span></li>\n                </a>\n                <a class=\"unlockpost-btn\" onclick=\"Ajax.modThread(this, 'unlockpost'); return false\"\n                href=\"${ku_cgipath}/manage_page.php?action=unlockpost&amp;board=${board}&amp;postid=${id}\">\n                  <li>${makeIcon('unlock')}<span>${_l.unlockthread}<span></li>\n                </a>`\n              : ''}`\n            : ''}\n          </ul>\n        </div>`)\n        $menu = $this.parent().find('.post-menu')\n      }\n      $menu.toggle(on)\n    }\n  })\n  // Figure menu is global because of FUCKING overflow\n  .on('click', '.file-menu-toggle', function(ev) {\n    ev.stopPropagation()\n    ev.preventDefault()\n    let $menu = $('.file-menu')\n    , $this = $(this)\n    , $fsz = $this.parent()\n    , visible = $menu.is(':visible')\n    $('.post-menu').hide()\n    if (visible && $menu[0].$boundTo[0] == $fsz[0]) return;\n    let ofs = $fsz.offset()\n    , offsetTop = $fsz.hasClass('embed-wrap') ? 22 : $fsz.outerHeight()\n    $menu.css({\n      'left': `${ofs.left}px`,\n      'top': `${ofs.top + offsetTop}px`,\n      'min-width': `${$fsz.outerWidth()}px`\n    }).show()\n    $menu[0].__menuProps = {\n      fileid: $fsz.parents('figure').data('fileid'),\n      board: $fsz.parents('.postnode').data('board')\n    }\n    $menu[0].$boundTo = $fsz\n  })\n  .on('click', '.post-menu li', ev => ev.stopPropagation())\n  .on('click', '.menu-select-multiple', function(ev) {\n    $('.post-menu').hide()\n    let $menu = $(this).parents('.post-menu')\n    , isFile = $menu.hasClass('file-menu')\n    , $md = (isFile ? $menu[0].$boundTo : $(this).parents('.posthead'))\n    .find('.multidel')\n    if (! $md.length) return;\n    $md.prop('checked', true).trigger('change')\n    $('.userdelete').addClass('ud-active')\n    $('body').addClass('select-multiple')\n  })\n  .on('click', '.menu-link-share', function(ev) {\n    let $this = $(this)\n    , isShown = $this.find('input').length\n    if (! isShown) {\n      let $postnode = $this.parents('.postnode')\n      , board = $postnode.data('board')\n      , id = $postnode.data('id')\n      , directLink = ku_boardspath + $postnode.find('.shl').attr('href')\n      $this.find('span').html(`<input class=\"pm-direct-link pm-link\" type=\"text\" value=\"${directLink}\" title=\"${_l.directLink}\">&nbsp;\n        <input class=\"pm-quote-link pm-link\" type=\"text\" value=\"&gt;&gt;/${board}/${id}\" title=\"${_l.quoteLink}\">`)\n      .css({'font-size': 0})\n      .find('.pm-direct-link').click()\n    }\n    else\n      $this.toggleClass('direct-or-quote')\n  })\n  .on('click', '.pm-link', function(ev) {\n    ev.stopPropagation()\n    let $this = $(this)\n    $('.pm-link').removeClass('selected')\n    $this.focus().select().addClass('selected')\n  })\n  .on('click', '.menu-delete', function() {\n    let $this = $(this)\n    , $menu = $this.parents('.post-menu')\n    , menu = $menu[0]\n    , isFile = $menu.hasClass('file-menu')\n    , $item = isFile ? $menu[0].$boundTo : $this.parents('.posthead')\n    , $pass = $menu.find('.menu-password')\n    $this.addClass('spin-around')\n    let fd = new FormData()\n    if ($menu.find('.menu-captcha').length) {\n      let $c = $menu.find('input[name=captcha]')\n      if (!$c.val()) {\n        $c.focus()\n        pups.warn(_l.enterCaptcha)\n        $this.removeClass('spin-around')\n        return;\n      }\n      fd.append('captcha', $c.val())\n    }\n    if (isFile)\n      fd.append('delete-file[]', menu.__menuProps.fileid)\n    else\n      fd.append('post[]', $item.parents('.postnode').data('id'))\n    let asMod = $this.hasClass('menu-delete-mod')\n    fd.append('moddelete', asMod)\n    fd.append('opdelete', +$this.hasClass('menu-delete-op'))\n    fd.append('board', isFile \n      ? menu.__menuProps.board\n      : $item.parents('.postnode').data('board'))\n    fd.append('postpassword', $pass.length\n      ? $pass.find('input').val()\n      : $(`#delform input[name=\"postpassword\"]`).val())\n    Ajax.deleteItems(fd, data => {\n      $this.removeClass('spin-around')\n      if (!data) return;\n      let result = data[0]\n      if(!result.success && $item.is(':visible')) {\n        if (asMod) return;\n        if (!$pass.length) {\n          $menu.prepend(`<li class=\"menu-password\">${makeIcon('password')}\n            <input value=\"${get_password(\"postpassword\")}\" class=\"make-me-readonly\" type=\"password\" placeholder=\"${_l.password}\" readonly onfocus=\"this.readOnly=false\"></li>`)\n        }\n        if (result.special_error && result.special_error == 'captchalocked') {\n          addCaptchaToMenu($menu)\n        }\n        else {\n          $menu.find('.menu-password input').select()\n          .keydown(ev => {\n            if (ev.key == 'Enter') {\n              ev.preventDefault()\n              ev.stopPropagation()\n            }\n          })\n        }\n      }\n      else if (isFile)\n        $('.file-menu').hide()\n    })\n  })\n  .on('click', '.menu-report', function() {\n    let $this = $(this)\n    , $postnode = $this.parents('.postnode')\n    $this.addClass('spin-around')\n    let fd = new FormData()\n    fd.append('post[]', $postnode.data('id'))\n    fd.append('board', $postnode.data('board'))\n    Ajax.reportPost(fd, data => {\n      $this.removeClass('spin-around')\n    })\n  })\n  .on('click', '.menu-hide', function() {\n    let $postnode = $(this).parents('.postnode')\n    HiddenItems.hidePost($postnode.data('id'))\n    $postnode.addClass('post-hidden')\n    .find('.post-menu').hide()\n  })\n  .on('click', '.menu-unhide', function() {\n    let $postnode = $(this).parents('.postnode')\n    HiddenItems.unhidePost($postnode.data('id'))\n    $postnode.removeClass('post-hidden')\n  })\n  .on('click', '.menu-cancel-timer', function() {\n    let $this = $(this)\n    , $menu = $this.parents('.post-menu')\n    , menu = $menu[0]\n    , $pass = $menu.find('.menu-password')\n    , $postnode = $this.parents('.postnode')\n    $this.addClass('spin-around')\n    let fd = new FormData()\n    if ($menu.find('.menu-captcha').length) {\n      let $c = $menu.find('input[name=captcha]')\n      if (!$c.val()) {\n        $c.focus()\n        pups.warn(_l.enterCaptcha)\n        $this.removeClass('spin-around')\n        return;\n      }\n      fd.append('captcha', $c.val())\n    }\n    fd.append('post[]', $postnode.data('id'))\n    fd.append('board', $postnode.data('board'))\n    fd.append('modsave', $this.hasClass('menu-delete-mod'))\n    fd.append('opsave', $this.hasClass('menu-delete-op'))\n    fd.append('postpassword', $pass.length\n      ? $pass.find('input').val()\n      : $(`#delform input[name=\"postpassword\"]`).val())\n    Ajax.cancelTimer(fd, errors => {\n      $this.removeClass('spin-around')\n      if (errors.length) {\n        let result = errors[0]\n        if (!$pass.length) {\n          $menu.prepend(`<li class=\"menu-password\">${makeIcon('password')}\n            <input value=\"${get_password(\"postpassword\")}\" class=\"make-me-readonly\" type=\"password\" placeholder=\"${_l.password}\" readonly onfocus=\"this.readOnly=false\"></li>`)\n        }\n        if (result.special_error && result.special_error == 'captchalocked') {\n          addCaptchaToMenu($menu)\n        }\n        else {\n          $menu.find('.menu-password input').select()\n          .keydown(ev => {\n            if (ev.key == 'Enter') {\n              ev.preventDefault()\n              ev.stopPropagation()\n            }\n          })\n        }\n      }\n      else {\n        $menu.find('.menu-password, .menu-captcha').remove()\n      }\n    })\n  })\n  .on('click', '.csswrap', function(ev) {\n    ev.preventDefault()\n    let cssLink = $(this).attr('href')\n    , styleName = $(this).parent().find('.fc-filename').text()\n    Styles.testStyle(cssLink, styleName)\n  })\n  .on('blur', 'input[name=\"name\"]', function() {\n    let isTrip = ~this.value.indexOf('#')\n    this.type = isTrip ? 'password' : 'text'\n  })\n  .on('focus', 'input[name=\"name\"]', function() {\n    this.type ='text'\n  })\n\n  offClick.push(ev => {\n    $('.post-menu').hide()\n  })\n\n  $(window).resize(() => {\n    let $fileMenu = $('.file-menu')\n    if (! $fileMenu.is(':visible')) return;\n    let $fsz = $fileMenu[0].$boundTo\n    , ofs = $fsz.offset()\n    , offsetTop = $fsz.hasClass('embed-wrap') ? 22 : $fsz.outerHeight()\n    $fileMenu.css({\n      'left': `${ofs.left}px`,\n      'top': `${ofs.top + offsetTop}px`,\n      'min-width': `${$fsz.outerWidth()}px`\n    })\n  })\n\n  $('#delform').on('submit', function(e) {\n    e.preventDefault()\n    Ajax.deleteItems(new FormData(this))\n    return false\n  })\n\n  $('.userdelete input[type=submit]').click(function(e) {\n    e.preventDefault()\n    e.stopPropagation()\n    let fd = new FormData($(this).parents('form')[0])\n    if (this.name == 'deletepost') {\n      Ajax.deleteItems(fd)\n    }\n    if (this.name == 'cancel_timer') {\n      Ajax.cancelTimer(fd)\n    }\n    if (this.name == 'reportpost') {\n      Ajax.reportPost(fd)\n    }\n  })\n\n  /*$('input[name=reportpost]').click(function(e) {\n    e.preventDefault()\n    Ajax.reportPost(new FormData($(this).parents('form')[0]))\n  })*/\n\n  $('#delform').after('<div id=\"rswapper\">[<a onclick=\"javascript:rswap.swap();return false;\" href=\"#\">'+(ispage ? _l.NewThread : _l.reply)+'</a>]<hr /></div>');\n\n  Settings.sfwMode(false);\n  if (localStorage) {\n    for(var s in Settings) {\n      if (s.substring(0,1) == \"_\") continue;\n      $(\"#js_settings\").append('<label><input type=\"checkbox\" onchange=\"javascript:Settings.'+s+'(true)\" name=\"settings_'+s+'\" id=\"settings_'+s+'\" value=\"true\"> '+_l['settings_'+s]+'</label><br />');\n      Settings[s](false);\n    }\n  } else {\n    $(\"#js_settings\").append(\"<span style=\\\"color:#F00\\\">\"+_l.noLocalStorage+\"</span><br />   .  <a href=\\\"/web/20110329072959/http://google.com/chrome\\\" target=\\\"_blank\\\">Chome</a>, .\");\n  }\n\n  var textbox = document.getElementById('message');\n  if(textbox) {\n    textbox.onfocus=function(){is_entering = true;}\n    textbox.onblur=function(){is_entering = false;}\n  }\n\n  // Figure menu is global because of FUCKING overflow\n  $('body').append(`\n    <div class=\"content-background post-menu file-menu\" style=\"display: none\"> \n      <ul>\n        <li class=\"menu-delete\">${makeIcon('x')}<span>${_l.del}</span></li>\n        <li class=\"menu-select-multiple\">${makeIcon('select-multiple')}<span>${_l.selectMultiple}</span></li>\n        ${kumod_set ? `<li class=\"menu-delete menu-delete-mod\">${makeIcon('x')}<span>${_l.del} ${_l.asMod}</span></li>` : ''}\n      </ul>\n    </div>\n  `)\n  \n  //animation hooks  \n  $(document).on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', function(event) {\n    var $target = $(event.target)\n    //detect node insertions and process them\n    if (event.originalEvent.animationName == \"nodeInserted\" && !$target.hasClass('_inserted_'))\n      processNodeInsertion($target)\n    //detect window resize\n    if (event.originalEvent.animationName == \"windowSmall\") {\n      document.querySelectorAll('.quick-reply-form').forEach(f => {\n        toggleFormFloating(f, false)\n        toggleFormSimplify(f, true)\n      })\n    }\n  });\n\n  Captcha.init()\n\n  initForm(document.querySelector('#postform'))\n\n  if(typeof is_catalog !== 'undefined' && is_catalog) catalog.init();\n\n  $('.userdelete').addClass('content-background reflinkpreview');\n\n  $('<div id=\"tripinfo\"></div>').addClass('content-background reflinkpreview qreplyform').hide().appendTo('body');\n\n  $('#delform').on('click', '.postertrip', function(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    var trip = $(this).text().split('!')[1]\n    , offset = $(this).offset(), height = $(this).height()\n    $.getJSON('/tripinfo.php', { trip: trip })\n    .done(function(data) {\n      var active_on = [];\n      _.each(data.active_on, function(board) {\n        active_on.push('<a target=\"_blank\" href=\"'+ku_boardspath+'/'+board+'/\">'+'/'+board+'/</a>');\n      })\n      $('#tripinfo')\n      .html(\n        '<div><b class=\"postertrip\">!'+trip+'</b> ['+'<a href=\"https://www.google.com/search?q=!'+trip+'\" target=\"_blank\">G</a>]</div>'+\n        '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#tripinfo\\').hide();return false;\"><svg style=\"position: absolute; top: 3px; right: 3px;\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n        '<div class=\"trip-info-line\">'+_l.threads+': '+data.threads+', '+_l.comments+': '+data.comments+'</div>'+\n        '<div class=\"trip-info-line\">'+_l.active_since+': '+catalog.formatDate(data.active_since, true)+'</div>'+\n        '<div class=\"trip-info-line\">'+_l.last_active+': '+catalog.formatDate(data.last_active, true)+'</div>'+\n        (active_on.length ? '<div class=\"trip-info-line\">'+_l.active_on+': '+active_on.join(', ')+'</div>' : '')\n      )\n      .css({\n         top: offset.top + height,\n         left: offset.left\n       })\n      .fadeIn('fast');\n    })\n    .fail(function(error) {\n      console.error(error)\n    })\n  })\n\n  unreadCounter.update()\n\n  if(liveupd_ena && typeof io !== 'undefined')\n    updater.init()\n}\n\n/*\n * jQuery Double Tap https://gist.github.com/attenzione/7098476\n * Developer: Sergey Margaritov (github.com/attenzione)\n * License: MIT\n * Date: 22.10.2013\n * Based on jquery documentation http://learn.jquery.com/events/event-extensions/\n */\n(function($){\n  $.event.special.doubletap = {\n    bindType: 'touchend',\n    delegateType: 'touchend',\n\n    handle: function(event) {\n      var handleObj   = event.handleObj,\n          targetData  = jQuery.data(event.target),\n          now         = new Date().getTime(),\n          delta       = targetData.lastTouch ? now - targetData.lastTouch : 0,\n          delay       = delay == null ? 300 : delay,\n          e           = event.originalEvent\n\n      if (delta < delay && delta > 30 && !(e.touches && e.touches.length > 1)) {\n        targetData.lastTouch = null;\n        event.type = handleObj.origType;\n        ['clientX', 'clientY', 'pageX', 'pageY'].forEach(function(property) {\n          event[property] = event.originalEvent.changedTouches[0][property];\n        })\n\n        // let jQuery handle the triggering of \"doubletap\" event handlers\n        handleObj.handler.apply(this, arguments);\n      } else {\n        targetData.lastTouch = now;\n      }\n    }\n  };\n})(jQuery)\n\n\nconst NTP = {\n  calc: (t0, t1, t2, t3) => ((t1 - t0) + (t2 - t3)) / 2,\n  sync: function(force) {\n    this.pending = true\n    let _this = this\n    , t0 = (new Date()).valueOf()\n    $.ajax({\n      url: '/ntp.php',\n      success: function(servertime) {\n        let t1 = servertime,\n            t2 = servertime,\n            t3 = (new Date()).valueOf()\n\n        _this.offset = _this.calc(t0, t1, t2, t3)\n      },\n      error: function() {\n        pups.err('Failed to synchronize time with the server')\n      },\n      complete: function() {\n        _this.synced = true\n\n        while (_this.stack.length) {\n          _this.stack.shift().resolve(_this.timeWithOffset)\n        }\n      }\n    });\n  },\n  offset: 0,\n  stack: [],\n  get timeWithOffset() {\n    return new Date(new Date().getTime() + this.offset).getTime()\n  },\n  getServerTime: function() {\n    if (this.synced)\n      return Promise.resolve(this.timeWithOffset)\n\n    let promise = externallyResolvingPromise()\n    if (! this.pending)\n      this.sync()\n    this.stack.push(promise)\n    return promise.promise\n  }\n}\n\nfunction externallyResolvingPromise() {\n  let promiseResolve, promiseReject\n  , promise = new Promise((resolve, reject) => {\n    promiseResolve = resolve\n    promiseReject = reject\n  });\n\n  return {\n    promise: promise,\n    resolve: promiseResolve,\n    reject: promiseReject\n  }\n}\n\n// this will be applied to every new inserted node (post)\nfunction processNodeInsertion($node) {\n  if(typeof $node === 'undefined')\n    $node = $('body');\n  else {\n    $node.addClass('_inserted_');\n    $node = $node.parents(\":eq(1)\");\n  }\n  if($node.find('.prettyprint').length)\n    prettyPrint.apply(window);\n  LatexIT.render($node);\n\n  // Post time-to-live updating\n  $node.find('.post-ttl:not(._inserted_)').each(function() {\n    let $this = $(this)\n    $this.addClass('_inserted_')\n    let iv\n    , updateTTL = () => {\n      if ($this.length) {\n        NTP.getServerTime().then(srvTime => {\n          let ms_left = $this.data('deleted-timestamp')*1000 - srvTime\n          if (ms_left >= 0) {\n            let min_left = Math.round(ms_left / 60000)\n            , h_left = Math.floor(min_left / 60)\n            min_left -= h_left * 60\n            $this.text(`${_.padLeft(h_left, 2, '0')}:${_.padLeft(min_left, 2, '0')}`)\n          }\n          else {\n            $.get(document.forms.delform.action) // call board.php to force delete posts\n            deleteItems([{action: 'delete_post', id: $this.parents('.postnode').data('id')}], false, updater.markOnly)\n            clearInterval(iv)\n          }\n        })\n      }\n      else\n        clearInterval(iv)\n    }\n    iv = setInterval(updateTTL, 30 * 1000)\n    updateTTL()\n  })\n}\n\nconst chpok = {\n  init: function(atLoad = false) {\n    document.body.insertAdjacentHTML('beforeend', `<audio id=\"chpok-audio\" style=\"display:none\">\n      <source src=\"${ku_boardspath}/images/chpok.mp3\">\n      <source src=\"${ku_boardspath}/images/chpok.ogg\">\n    </audio>`)\n    this.initiated = true\n    this.audio = document.querySelector('#chpok-audio')\n  },\n  play: function() {\n    if (! this.initiated)\n      this.init()\n    // In chrome the sound won't play, causing a DOM exception, if a user hasn't clicked a page at least once (and it's unfixable)\n    this.audio.play().catch(e => _.noop)\n  }\n}\n\nconst updater = {\n  newThreads: [],\n  init: function () {\n    this.socket = io.connect(liveupd_api);\n    let subscribeTo\n    if(ispage) {\n      subscribeTo = [liveupd_sitename+this_board_dir+':threads']\n      document.querySelectorAll('.postnode.op').forEach(thr => subscribeTo.push(liveupd_sitename+this_board_dir+':'+thr.dataset.id))\n    }\n    else {\n      subscribeTo = [liveupd_sitename+this_board_dir+':'+$('input[name=replythread]').val()];\n      _l.noNewPosts += (\"<br>\" + _l.threadUpdationAutomatically)\n    }\n    this.socket\n    .on('update', this.dispatch.bind(this))\n    .emit('subscribe', subscribeTo)\n    Object.defineProperty(this, 'markOnly', {\n      value: true,\n      writable: false,\n      configurable: false\n    })\n  },\n  dispatch: function(data) {\n    if (! data.action) {\n      pups.warn('Event with unspecified action, see console')\n      console.warn(data)\n      return\n    }\n    if (data.action == 'new_thread') {\n      // Do nothing if it is my post\n      if (data.token && Ajax.postToken && data.token==Ajax.postToken) return;\n      this.notifyAboutNewThreads(data)\n    }\n    if (data.action == 'new_reply') {\n      // Do nothing if it is my post\n      if (data.token && Ajax.postToken && data.token==Ajax.postToken) return;\n      if (ispage) {\n        this.notifyAboutNewRepliesOnBoardPage(data)\n      }\n      else {\n        this.showNewReplies(data)\n      }\n    }\n    if (data.action == 'delete') {\n      // Do nothing if it is my post\n      if (data.token && Ajax.delToken && data.token==Ajax.delToken) return;\n      deleteItems(data.items, false, this.markOnly)\n    }\n    if (data.action == 'cancel_timer') {\n      // Do nothing if it is my post\n      if (data.token && Ajax.timerToken && data.token==Ajax.timerToken) return;\n      let postsSaved = [], msg = ''\n      data.items.forEach(item => {\n        $(`.postnode[data-id=${item.id}] .post-ttl`).remove()\n        postsSaved.push(item.id)\n      })\n      if(postsSaved.length) {\n        msg = postsSaved.length > 1 ?\n          `${_l.posts} #${postsSaved.join(', #')} ${_l.savedMulti}.`\n         :`${_l.post} #${postsSaved[0]} ${_l.saved}.`\n        pups.info(msg, {time: 2 + postsSaved.length})\n      }\n    }\n  },\n  showNewReplies: function(data) {\n    newposts.get({\n      silent: true,\n      timestamp: data.timestamp,\n      onSuccess: () => {\n        if (! document.hasFocus())\n          chpok.play()\n      }\n    })\n  },\n  notifyAboutNewThreads: function(data) {\n    this.newThreads.push(data.new_thread_id);\n    if (! document.hasFocus()) {\n      scrollAnchor.save('autoload', '.postnode')\n      this.showNewThreads(() => scrollAnchor.restore('autoload'))\n      chpok.play()\n    }\n    else if(!$('#wild_thread_appeared').length) {\n      $('.postarea').after('<a class=\"xlink\" onclick=\"updater.showNewThreads();return false\" id=\"wild_thread_appeared\"><span class=\"salient\">'+_l.newThreadsAvailable+'</span><hr /></a>')\n    }\n  },\n  notifyAboutNewRepliesOnBoardPage: function(data) {\n    if (! this.repliesOnBoardPage[data.room])\n      this.repliesOnBoardPage[data.room] = [data.reply_id]\n    else\n      this.repliesOnBoardPage[data.room].push(data.reply_id)\n    this.refreshNewRepliesCount(data.room, data.timestamp)\n  },\n  refreshNewRepliesCount(thread, timestamp=null) {\n    let count = (this.repliesOnBoardPage[thread] || []).length\n    , $target = $('[id^=replies'+thread+']')\n    , $counter = $target.find('.fresh-replies')\n    let clearCounter = () => this.repliesOnBoardPage[thread] = []\n    if (count) {\n      if (! $counter.length) {\n        function loadNewReplies(callback) {\n          newposts.get({\n            threadid: thread,\n            onSuccess: () => {\n              clearCounter()\n              if (callback)\n                callback()\n            },\n            onError: (e) => {\n              console.error(e)\n              pups.err(_l.oops)\n            },\n            silent: true,\n            timestamp: timestamp\n          })\n          // var after = /\\d+/.exec($target.find('.reply').last().attr('id')); // What was this for?\n        }\n        if (! document.hasFocus()) {\n          scrollAnchor.save('autoload', '.postnode')\n          loadNewReplies(() => scrollAnchor.restore('autoload'))\n          chpok.play()\n        }\n        else {\n          let $freshReplies = $target.append('<br class=\"fresh-replies-breaker\"><a href=\"/'+ this_board_dir +'/res/'+thread+'.html\" class=\"salient fresh-replies\">'+_l.newReplies+': <span class=\"fresh-replies-number\"></span></a>')\n          .find('.fresh-replies')\n          , freshReplies = $freshReplies[0]\n          $freshReplies.click(function(e) {\n            e.preventDefault()\n            if ($freshReplies.__alreadyLoading)\n              return;\n            freshReplies.__alreadyLoading = true\n            freshReplies.insertAdjacentHTML('afterBegin', '<div class=\"spinner\"></div>')\n            loadNewReplies(() => $(freshReplies).remove())\n          })\n        }\n      }\n      $target.find('.fresh-replies-number').text(count)\n    }\n    else if($counter.length) {\n      $counter.remove()\n      clearCounter()\n    }\n  },\n  repliesOnBoardPage: {},\n  showNewThreads: function(callback) {\n    let $wta = $('#wild_thread_appeared')\n    if ($wta.length)\n    $wta.find('span')[0].insertAdjacentHTML('afterBegin', '<div class=\"spinner\"></div>')\n    this.newThreads.forEach(thr => {\n      HTMLoader.getThread(this_board_dir, thr, null, (err, posts) => {\n        if (err)\n          return pups.err(_l.noDataLoaded)\n        $wta.remove()\n        document.querySelector('#delform').insertAdjacentHTML('afterBegin', `\n            ${posts}\n            <div id=\"replies${thr}${this_board_dir}\" class=\"replies\"></div>\n          </div>\n          <br clear=\"left\" />\n          <hr>`);\n        this.socket.emit('subscribe', liveupd_sitename+this_board_dir+':'+thr)\n        if (callback) \n          callback()\n      })\n    })\n    this.newThreads = [];\n  }\n}\n\nfunction deleteItems(items, bySelf=true, markOnly=false) {\n  let postsDeleted = []\n  , postErrors = []\n  , insideDeletedThread\n  , filesDeleted = []\n  , fileErrors = []\n\n  items.forEach(item => {\n    let deletedClasses = 'deleted'\n      + (item.by_op ? ' op-deleted' : '')\n      + (item.by_mod ? ' mod-deleted' : '')\n\n    if (item.action == 'delete_post' || item.itemtype == 'post') {\n      if (bySelf && !item.success) {\n        postErrors.push(item)\n        return\n      }\n      insideDeletedThread = false\n      let $thread = $(`#delform [id^=thread${item.id}]`)\n      , $reply = $(`#delform [id^=reply${item.id}]`)\n      if ($thread.length) {\n        if (markOnly || !ispage) {\n          $thread.addClass('deleted')\n          .find('.reply, figure').addClass(deletedClasses)\n          if (!ispage) {\n            insideDeletedThread = true\n            $('form[name=postform], .qrl, #rswapper').remove()\n            pups.warn(`${_l.thread} ${_l.deleted}!`, {time: 0})\n          }\n        }\n        else {\n          $thread.prev().remove() //unhidethread\n          $thread.next().remove() //br\n          $thread.next().remove() //hr\n          $thread.remove()\n        }\n      }\n      else if ($reply.length) {\n        if (markOnly)\n          $reply.addClass(deletedClasses)\n        else {\n          let $reply = $(`#delform [id^=reply${item.id}]`)\n          if ($reply.length) {\n            $reply.parents('.postnode').remove()\n          }\n        }\n      }\n      else {\n        if (updater.repliesOnBoardPage[item.thread_id])\n          updater.repliesOnBoardPage[item.thread_id] = updater.repliesOnBoardPage[item.thread_id].filter(i => i!=item.id)\n        updater.refreshNewRepliesCount(item.thread_id)\n      }\n      if (!insideDeletedThread)\n        postsDeleted.push('#'+item.id)\n    }\n\n    if (item.action == 'delete_file'  || item.itemtype == 'file') {\n      if (bySelf && !item.success) {\n        fileErrors.push(item)\n        return\n      }\n      let $fig = $(`figure[data-fileid=${item.id}]`)\n      if (markOnly)\n        $fig.addClass(deletedClasses)\n      else\n        $fig.replaceWith(`<div class=\"nothumb\">${_l.fileRemoved}</div>`)\n      filesDeleted.push('#'+item.id)\n    }\n\n    if (item.action == 'delete_thread') { // A notification about deleted\n      updater.newThreads = updater.newThreads.filter(i => i!=item.id)\n      if (! updater.newThreads.length)\n        $('#wild_thread_appeared').remove();\n      pups.info(`${_l.thread} ${item.id} ${_l.deleted}.`)\n    }\n  })\n\n  if (! $('.multidel').is(\":checked\") && ! $('.multidel.delete-file').is(\":checked\")) {\n    $('.userdelete').removeClass('ud-active')\n    $('body').removeClass('select-multiple')\n  }\n    \n  if (postsDeleted.length) {\n    let msg = postsDeleted.length > 1\n      ? `${_l.posts} ${postsDeleted.join(', ')} ${_l.deletedMulti}.`\n      : `${_l.post} ${postsDeleted[0]} ${_l.deleted}.`\n    pups[bySelf ? 'succ' : 'info'](msg, {time: 2 + postsDeleted.length})\n  }\n  if (filesDeleted.length) {\n    let msg = filesDeleted.length > 1\n      ? `${_l.files} ${filesDeleted.join(', ')} ${_l.deletedMulti}.`\n      : `${_l.file} ${filesDeleted[0]} ${_l.deleted}.`\n    pups[bySelf ? 'succ' : 'info'](msg, {time: 2 + filesDeleted.length})\n  }\n  if (postErrors.length)\n    pups.err(postErrors.map(err => `${_l.post} #${err.id}: ${err.message}`).join('<br>'), \n      {time: 2 + postErrors.length})\n  if (fileErrors.length) {\n    pups.err(fileErrors.map(err => `${_l.file} #${err.id}: ${err.message}`).join('<br>'), \n      {time: 2 + fileErrors.length})\n  }\n}\n\nif (+localStorage['localmod']) {\n  kumod_set = true\n}\nelse {\n  let kumod = getCookie('kumod');\n  if (kumod !== '') {\n    if (kumod === 'allboards')\n      kumod_set = true\n    else\n      kumod_set = in_array(this_board_dir, kumod.split('|'));\n  }\n}\n\nfunction expandVideo($mov, ev) {\n  //good luck understanding this shitcode :^)\n  let $reply = $mov.parents('.reply')\n  if($mov.data('expanded') !== '1') {\n    ev.preventDefault();\n    var movieurl = $mov.attr('href'), imgh = $mov.data('height'), imgw = $mov.data('width'), dt = $mov.data('thumb'), postnum = $mov.data('id');\n    var uid = '_vframe_'+randomString(5)+(new Date().getTime());\n    $mov.replaceWith(function() {\n      return '<span id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" data-href=\"'+movieurl+'\">'+this.innerHTML + '</span>';\n    });\n    $mov = $(\"#\"+uid);\n    $mov.find('img').hide();\n    var video = $mov.find('video').show(), notice = '';\n    if(!video.length) {\n      $mov.find('.playable-thumb').append('<video class=\"thumb\" src=\"'+movieurl+'\" controls loop autoplay height=\"'+imgh+'\" width=\"'+imgw+'\"></video>').promise().done(function() {\n        video = $mov.find('video');\n      });\n    }\n    else video.get(0).play();\n    if(!Settings.expandImgFull()) {\n      var offset = 50, offset_el = video[0];\n      var max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth;\n      while (offset_el != null) {\n        offset += offset_el.offsetLeft;\n        offset_el = offset_el.offsetParent;\n      }\n      var new_w = max_w - offset;\n      if(imgw > new_w) {\n        var ratio = imgw / imgh;\n        var zoom = 1 - new_w / imgw;\n        var new_h = new_w / ratio;\n        video.width(new_w);\n        video.height(new_h);\n        notice = _l.videoDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit;\n      }\n    }\n    let $fig = $mov.parents('figure');\n    if (! $fig.hasClass('unwrapped')) {\n      $fig.addClass('unwrapped')\n    }\n    let $fsz = $mov.parent().find('.filesize');\n    if (! $fsz.find('.collapse-btn').length) {\n      $fsz.append(`\n        <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\n          ${makeIcon('shrink', 'b-icon')}\n        </button>`);\n      $mov.parent().find('.collapse-video').click(function() {\n        $fig.removeClass('unwrapped')\n        var uid = '_vframe_'+randomString(5)+(new Date().getTime());\n        $mov.replaceWith(function() {\n          return '<a class=\"movie\" id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" href=\"'+movieurl+'\">'+this.innerHTML + '</a>';\n        }).data('expanded', '0');\n        $mov = $(\"#\"+uid);\n        $mov.find('video').hide()[0].pause();\n        $mov.find('img').show();\n        $(this).remove();\n        $mov.parents('.reply').removeClass('reply-expanded')\n        return false;\n      });\n    }\n    $mov.parents('.reply').addClass('reply-expanded')\n  }\n}\n\nfunction checknamesave() {\n  var checkd;\n  if(getCookie('name') != '') {\n    checkd = true;\n  } else {\n    checkd = false;\n  }\n  var doc = document.getElementById('save');\n  if (doc != null) doc.checked = checkd;\n}\nfunction checkgotothread() {\n  var checkd;\n  if(getCookie('tothread') == 'on') {\n    checkd = true;\n  } else {\n    checkd = false;\n  }\n  $(\"#gotothread\").attr('checked', checkd);\n}\n\nfunction navigatepages (event) {\n  if (!document.getElementById) return;\n    if (is_entering) return;\n  if (window.event) event = window.event;\n\n  if (event.ctrlKey) {\n    var link = null;\n    var href = null;\n\n    var docloc = document.location.toString();\n    if (docloc.indexOf('/res/') != -1) {\n      if( (event.keyCode ? event.keyCode : event.which ? event.which : null) == 13 ) {\n        handleCtrlEnter(event)\n      }\n    }\n    else {\n      if (docloc.indexOf('.html') == -1 || docloc.indexOf('board.html') != -1) {\n        var page = 0;\n        var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\n      } else {\n        var page = docloc.substr((docloc.lastIndexOf('/') + 1));\n        page = (+page.substr(0, page.indexOf('.html')));\n        var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\n      }\n      if (page == 0) {\n        var docloc_valid = docloc_trimmed;\n      } else {\n        var docloc_valid  = docloc_trimmed + page + '.html';\n      }\n      let match;\n      if(match=/#s([0-9]+)/.exec(docloc)) {\n        var relativepost = (+match[1]);\n      } else {\n        var relativepost = -1;\n      }\n      var maxthreads = 0;\n      while(document.getElementsByName('s'+(++maxthreads)).length>0){}\n      switch (event.keyCode ? event.keyCode : event.which ? event.which : null)\n      {\n        case 13: // ctrl+Enter\n          handleCtrlEnter(event)\n          break;\n\n        case 0x25: // ctrl+left\n          link = document.getElementById('prevPage');\n          break;\n        case 0x27: // ctrl+right\n          link = document.getElementById('nextPage');\n          break;\n\n        case 0x28: // ctrl+down\n          if (relativepost == maxthreads - 1) {\n            break; //var newrelativepost = 0;\n          } else {\n            var newrelativepost = relativepost + 1;\n          }\n          href = docloc_valid + '#s' + newrelativepost;\n          break;\n\n        case 0x26: // ctrl+up\n          if (relativepost == -1 || relativepost == 0) {\n            break; //var newrelativepost = maxthreads - 1;\n          } else {\n            var newrelativepost = relativepost - 1;\n          }\n          href = docloc_valid + '#s' + newrelativepost;\n          break;\n\n        case 0x24: // ctrl+home\n          document.location = docloc_trimmed;\n          break;\n      }\n\n      if (link && link.action) document.location = link.action;\n      if (href) document.location.href = href;\n    }\n  }\n}\nif (window.document.addEventListener) {\n   window.document.addEventListener(\"keydown\", navigatepages, false);\n} else {\n   window.document.attachEvent(\"onkeydown\", navigatepages);\n}\n\nNodeList.prototype.forEach = Array.prototype.forEach;\nNodeList.prototype.map = Array.prototype.map;\n\n// More efficient parent finder\nElement.prototype._findParent = function(selector) {\n  let node = this\n  while(node && !node.matches(selector)) {\n    node = node.parentNode\n    if (! node.matches) return null;\n  }\n  return node\n}\nElement.prototype._findNext = function(selector) {\n  let node = this.nextElementSibling\n  while(node && !node.matches(selector)) {\n    node = node.nextElementSibling\n    if (! node) return null\n  }\n  return node\n}\nElement.prototype._findPrevious = function(selector) {\n  let node = this.previousElementSibling\n  while(node && !node.matches(selector)) {\n    node = node.previousElementSibling\n    if (! node) return null\n  }\n  return node\n}\nNode.prototype._isChildOf = function(parent) {\n  let node = this.parentNode\n  while (node) {\n    if (node == parent) {\n      return true\n    }\n    node = node.parentNode\n  }\n  return false\n}\n\nvar replyMap = {\n  showReplies: function(root=document) {\n    root.querySelectorAll('.postnode').forEach(post => {\n      let n = post.dataset.id\n      , msg = post.querySelector('.postmessage')\n      , repliesContainer = post.querySelector('.replieslist')\n      if (this.posts[n]) {\n        this.posts[n].container = repliesContainer\n      }\n      else {\n        this.posts[n] = {\n          container: repliesContainer,\n          replies: []\n        }\n      }\n      let links = msg.querySelectorAll(`a[class^=ref\\\\|${this_board_dir}]`)\n      if (links.length) links.forEach(link => {\n        let linkData = link.className.split(' ')[0].split('|')\n        , linkN = linkData[3]\n        , thread = link._findParent('div[id^=thread]')\n        , threadID = thread && thread.dataset['threadid']\n        , href = `/${linkData[1]}/res/${threadID}.html#${n}`\n        , htm = `<a class=\"ref-reply\" href=\"${href}\">&gt;&gt;${n}</a>`\n        // if (! threadID) console.warn('what?')\n        if (this.posts[linkN]) {\n          if (! _.includes(this.posts[linkN].replies, htm)) {\n            this.posts[linkN].replies.push(htm)\n          }\n        }\n        else {\n          this.posts[linkN] = {\n            replies: [htm]\n          }\n        }\n        this.posts[linkN].skip = false\n      })\n    })\n    _.each(this.posts, post => {\n      if (!post.skip && post.replies.length && post.container) {\n        post.container.innerHTML = `${_l.replies}: ${post.replies.join(', ')}`\n        post.skip = true\n      }\n    })\n  },\n  posts: {}\n}\n\nvar scrollAnchor = {\n  save: function(id, elements, parent=window, dimensions='v') {\n    if (!window.scrollY) {\n      this.saved[id] = {_top: true}\n      return\n    }\n    let mid = [window.innerWidth / 2, window.innerHeight / 2]\n    , elMap = []\n    , parentBCR = (parent != window)\n      ? parent.getBoundingClientRect()\n      : {\n        left: 0,\n        top: 0,\n        right: window.innerWidth,\n        bottom: window.innerHeight\n      }\n    if (\n      parent != window\n      &&\n      (\n        (parentBCR.left <= 0 && parentBCR.right <= 0)\n        ||\n        (parentBCR.top <= 0 && parentBCR.bottom <= 0)\n        ||\n        parentBCR.left >= window.innerWidth\n        ||\n        parentBCR.top >= window.innerHeight\n      )\n    ) {\n      mid = [parentBCR.left + parentBCR.width/2, parentBCR.top + parentBCR.height/2]\n    }\n    let elems = elements instanceof Node\n      ? [elements]\n      : elements instanceof NodeList\n        ? elements\n        : ((parent == window ? document : parent).querySelectorAll(elements))\n    if (! elems.length) return;\n    elems.forEach(function (el) {\n      let bcr = el.getBoundingClientRect()\n      , relativeVisibleWidth = Math.pos(bcr.width - (Math.pos(parentBCR.left - bcr.left) + Math.pos(bcr.right - parentBCR.right))) / bcr.width\n      , relativeVisibleHeight = Math.pos(bcr.height - (Math.pos(parentBCR.top - bcr.top) + Math.pos(bcr.bottom - parentBCR.bottom))) / bcr.height\n      , dx = Math.abs(mid[0] - (bcr.left + bcr.width/2))\n      , dy = Math.abs(mid[1] - (bcr.top + bcr.height/2))\n      elMap.push({\n        el: el,\n        primaryVisibility: dimensions[0] == 'h' ? relativeVisibleWidth : relativeVisibleHeight,\n        secondaryVisibility: dimensions[0] == 'v' ? relativeVisibleWidth : relativeVisibleHeight,\n        primaryOffset: dimensions[0] == 'h' ? dx : dy,\n        secondaryOffset: dimensions[0] == 'v' ? dx : dy\n      })\n    })\n    elMap.sort((a, b) => {\n      if (b.primaryVisibility !== a.primaryVisibility) {\n        return b.primaryVisibility - a.primaryVisibility\n      }\n      else if (dimensions.length > 1 && b.secondaryVisibility !== a.secondaryVisibility) {\n        return b.secondaryVisibility - a.secondaryVisibility\n      }\n      else if (a.primaryOffset !== b.primaryOffset) {\n        return a.primaryOffset - b.primaryOffset\n      }\n      else if (dimensions.length > 1) {\n        return a.secondaryOffset - b.secondaryOffset\n      }\n    })\n    let anchor = elMap[0].el\n    , bcrBefore = anchor.getBoundingClientRect()\n    this.saved[id] = {\n      anchor: anchor,\n      left: bcrBefore.left,\n      top: bcrBefore.top,\n      parent: parent,\n      dimensions: dimensions\n    }\n  },\n  restore: function(id) {\n    return new Promise((resolve, reject) => {\n      let loaded = this.saved[id]\n      if (loaded) window.requestAnimationFrame(() => {\n        if (loaded._top) {\n          window.scrollTo(0,0)\n          resolve()\n          return\n        }\n        let bcrAfter = loaded.anchor.getBoundingClientRect()\n        loaded.parent.scrollBy(\n          loaded.dimensions.indexOf('h') !== (-1) \n            ? bcrAfter.left - loaded.left \n            : 0, \n          loaded.dimensions.indexOf('v') !== (-1) \n            ? bcrAfter.top - loaded.top \n            : 0\n        )\n        resolve()\n      })\n      else reject()\n    })\n  },\n  saved: {}\n}\nMath.pos = x => x >= 0 ? x : 0;\n\n// requestAnimationFrame polyfill https://gist.github.com/paulirish/1579671\n(function() {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame)\n    window.requestAnimationFrame = function(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n\n  if (!window.cancelAnimationFrame)\n    window.cancelAnimationFrame = function(id) {\n      clearTimeout(id);\n    };\n}());\n\n/// overlay menu\nvar menu_current = '';\nvar menu_last = '';\nfunction menu_show(id)\n{\n  if(menu_current != '')\n  {\n    var dl = (id == '_off_') ? 125 : 0;\n    $('#'+menu_current).delay(dl).slideUp(100);\n    menu_last = menu_current;\n  }\n  if (id != '') {\n    if (menu_last == id && typeof $('#' + id).queue() !== 'undefined' && $('#' + id).queue().length > 0) {\n      $('#' + id).clearQueue();\n    } else {\n      $('#' + id).slideDown(150);\n    }\n  }\n  menu_current = id;\n}\nfunction menu_pin() {\n  if(document.getElementById('overlay_menu').style.position == 'absolute') {\n    document.getElementById('overlay_menu').style.position = 'fixed';\n    Cookie('ku_menutype', 'fixed', 365);\n  } else {\n    document.getElementById('overlay_menu').style.position = 'absolute';\n    Cookie('ku_menutype', 'absolute', 365);\n  }\n}\n\nfunction toggle_oldmenu(on=null) {\n  if (on===null)\n    on = getCookie('ku_oldmenu') != 'yes'\n  injector.inject('oldmenu', `#${on ? 'overlay_menu' : 'head_oldmenu'} { display: none }`)\n  if (on && !document.getElementById('head_oldmenu')) {\n    document.getElementById('boardlist_header').insertAdjacentHTML('afterBegin', `<div id=\"head_oldmenu\" class=\"boardlist\">\n      ${document.getElementById('ns_oldmenu').innerText}\n      <a href=\\\"#\\\" onclick=\\\"javascript:toggle_oldmenu();\\\" class=\"bl-sect\" style=\"order:1\">[overlay]</a>\n    </div>`)\n  }\n  Cookie('ku_oldmenu', on ? 'yes' : 'no', 90); \n}\n\nvar LatexIT = {\n  mode : 'gif',\n  init : function() {\n  if(document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"))\n    this.mode='svg';\n  },\n  odc: \"javascript:LatexIT.replaceWithSrc(this);\",\n  dcls: \"Double click to show source\",\n\n  pre : function(eqn) {\n    var txt=eqn.innerHTML;\n    if ( !txt.match(/<img.*?>/i) && !txt.match(/<object.*?>/i))\n    {\n      //Clean code\n      txt=txt.replace(/<br>/gi,\"\").replace(/<br \\/>/gi,\"\").replace(/&amp;/mg,'&');\n      var atxt = \"[tex]\"+txt+\"[/tex]\";\n      txt=escape(txt.replace(/\\\\/mg,'\\\\'));\n      // Add coloring according to style of text\n      var c = eval(\"LatexIT.normalize\"+$(eqn).parent().css('color'));\n      var extxt = \"{\\\\color[rgb]{\"+c.r+','+c.g+','+c.b+\"}\"+txt+\"}\";\n      txt = \" <img src=\\\"http://latex.codecogs.com/\"+this.mode+\".latex?\"+ extxt +\"\\\" title=\\\"\"+this.dcls+\"\\\" alt=\\\"\"+atxt+\"\\\" ondblclick=\\\"\"+this.odc+\"\\\" border=\\\"0\\\" class=\\\"latex\\\" /> \";\n    }\n    return txt;\n  },\n\n  replaceWithSrc: function(eqn) {\n    var txt = $(eqn).attr('alt');\n    $(eqn).parent().html(txt);\n  },\n\n  render : function($scope) {\n    var scope = (typeof $scope === 'undefined') ? window.document : $scope[0];\n    var eqn = scope.getElementsByTagName(\"*\");\n    for (var i=0; i<eqn.length; i++) {\n      if(eqn[i].getAttribute(\"lang\") == \"latex\" || eqn[i].getAttribute(\"xml:lang\") == \"latex\")\n      eqn[i].innerHTML = this.pre(eqn[i]);\n    }\n  },\n\n  normalizergb : function(r, g, b) {\n    return {r: (r/255).toFixed(3), g: (g/255).toFixed(2), b: (b/255).toFixed(2) }\n  },\n  normalizergba : function(r, g, b, a) {\n    return this.normalizergb(r, g, b);\n  }\n};\n\nfunction in_array(needle, haystack) {\n  return (typeof haystack !== 'object') ? (needle === haystack) : _.includes(haystack, needle)\n}\n\n(function($) {\n  $.fn.drags = function(opt) {\n    opt = $.extend({handle:\"\",cursor:\"move\"}, opt);\n\n    if(opt.handle === \"\") {\n      var $el = this;\n    } else {\n      var $el = this.find(opt.handle);\n    }\n\n    return $el.css('cursor', opt.cursor).on(\"mousedown\", function(e) {\n      if(opt.handle === \"\") {\n        var $drag = $(this).addClass('draggable');\n      } else {\n        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');\n      }\n      var z_idx = $drag.css('z-index'),\n        drg_h = $drag.outerHeight(),\n        drg_w = $drag.outerWidth(),\n        pos_y = $drag.offset().top + drg_h - e.pageY,\n        pos_x = $drag.offset().left + drg_w - e.pageX;\n      $drag.css('z-index', 1000).parents().on(\"mousemove\", function(e) {\n        if (opt.onMove)\n          opt.onMove()\n        $('.draggable').offset({\n          top:e.pageY + pos_y - drg_h,\n          left:e.pageX + pos_x - drg_w\n        }).on(\"mouseup\", function() {\n          $(this).removeClass('draggable').css('z-index', z_idx);\n        });\n      });\n      e.preventDefault(); // disable selection\n    }).on(\"mouseup\", function() {\n      if(opt.handle === \"\") {\n        $(this).removeClass('draggable');\n      } else {\n        $(this).removeClass('active-handle').parent().removeClass('draggable');\n      }\n    });\n  }\n  $.fn.dragsOff = function(opt) {\n    opt = $.extend({handle:\"\",cursor:\"default\"}, opt);\n\n    if(opt.handle === \"\") {\n     var $el = this;\n     $(this).removeClass('draggable');\n    } else {\n     var $el = this.find(opt.handle);\n     $(this).removeClass('active-handle')\n        .parent()\n        .removeClass('draggable');\n    }\n    return $el.css('cursor', \"default\")\n      .off(\"mousedown\")\n      .off(\"mouseup\")\n      .off(\"mousemove\");\n  }\n  /*$.fn.pin = function() {\n    if(this.css('position') !== 'fixed') {\n      var abs = {\n        top: this.position().top - $(document).scrollTop(),\n        left: this.position().left - $(document).scrollLeft()\n      }\n      this.css({\n        position: 'fixed',\n        left: abs.left,\n        top: abs.top\n      });\n      this.find('.pinner').removeClass('pinned').addClass('unpinned');\n      localStorage['pinForm'] = 0;\n    }\n    else {\n      var abs = {\n        top: this.position().top + $(document).scrollTop(),\n        left: this.position().left + $(document).scrollLeft()\n      }\n      this.css({\n        position: 'absolute',\n        left: abs.left,\n        top: abs.top\n      });\n      this.find('.pinner').removeClass('unpinned').addClass('pinned');\n      localStorage['pinForm'] = 1;\n    }\n  }*/\n})(jQuery);\n\nfunction unwrapEmbed($fig) {\n  $fig.addClass('unwrapped')\n  let $iw = $fig.find('.emb-iframe-wrapper')\n  if ($iw.data('h') > $iw.data('w'))\n    $iw.addClass('vertical-video')\n  if ($iw.data('site') == \"Soundcloud\")\n    $iw.addClass('soundcloud-embed')\n  $iw.css({\n    paddingBottom: `${($iw.data('h')/$iw.data('w'))*100}%`\n  })\n  let code = $iw.data('code')\n  , iframeOptions = `frameborder=\"0\" scrolling=\"no\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"`\n  if ($iw.data('site') == \"Youtube\") {\n    let start = $iw.data('startraw')\n    $iw.append(`<iframe src=\"https://www.youtube-nocookie.com/embed/${code}?autoplay=1${start ? `&start=${start}` : ''}\" ${iframeOptions}></iframe>`)\n  }\n  if ($iw.data('site') == \"Vimeo\") {\n    let start = $iw.data('start')\n    $iw.append(`<iframe src=\"//player.vimeo.com/video/${code}?badge=0&autoplay=1${start ? `#t=${start}` : ''}\" ${iframeOptions}></iframe>`)\n  }\n  if ($iw.data('site') == \"Soundcloud\") {\n    let enccode = encodeURI(code)\n    let start = $iw.data('start')\n    $iw.append(`<iframe src=\"https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F${enccode}\" ${iframeOptions}></iframe>`)\n  }\n  if ($iw.data('site') == \"Coub\")\n    $iw.append(`<iframe src=\"http://coub.com/embed/${code}?muted=false&autostart=true&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false\" ${iframeOptions}></iframe>`)\n  let $ew = $fig.find('.embed-wrap')\n  if (! $ew.find('.collapse-video').length)\n    $fig.find('.embed-wrap').append(`\n      <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\n        ${makeIcon('shrink')}\n      </button>`)\n}\n\nfunction wrapEmbed($fig) {\n  $fig.removeClass('unwrapped')\n  $fig.find('.emb-iframe-wrapper').empty()\n}\n\nfunction resetForm(form, isClone=false) {\n  let fields = form.querySelectorAll('input[type=text]:not([name=name]), input[type=file], textarea')\n  fields.forEach(field => field.value = null)\n  form.querySelectorAll('.site-indicator').forEach(i => i.remove())\n  richFileInput.clear(form, !isClone)\n  // Remove extra inputs\n  form.querySelectorAll('input[name^=addembed], input[name^=addfile], input[name=ttl-enable]').forEach(i => {\n    i.checked = false\n    if (i.name == 'ttl-enable' && i.onchange)\n      i.onchange()\n  })\n}\n\nfunction initForm(form) {\n  if (!form)\n    return\n  let $form = $(form)\n  form.querySelectorAll('input[name^=embed]').forEach(i => {\n    i.addEventListener('input', function() {\n      let indicator = this.parentElement.querySelector('.site-indicator')\n      if (indicator) \n        indicator.remove()\n      let match = embedLinks.process(this.value)\n      if(match)\n        this.insertAdjacentHTML('afterend', `<img src=\"${ku_boardspath}/images/site-logos/${match.site}.png\" class=\"site-indicator\">`)\n    })\n  })\n  form.querySelectorAll('input[name^=imagefile]').forEach(i => {\n    i.addEventListener('change', function() {\n      if (this.value) {\n        let nextCheckbox = this.parentElement.nextElementSibling\n        if (nextCheckbox)\n          nextCheckbox.checked = true\n      }\n    })\n  })\n  // Markup\n  form.querySelectorAll('.opt-exp').forEach(exp => {\n    exp.onclick = function(ev) {\n      ev.preventDefault()\n      this.querySelector('.expandee').classList.toggle('expanded')\n    }\n    exp.onmouseleave = function(ev) {\n      this.hideTimeout = setTimeout(() => this.querySelector('.expandee').classList.remove('expanded'), 250)\n    }\n    exp.onmouseenter = function() {\n      clearTimeout(this.hideTimeout)\n    }\n  })\n  let cms = form.querySelector('.code_markup_select')\n  if (cms) {\n    cms.onchange = function() {\n      markup($form, `[code=${this.value}]`, '[/code]')\n    }\n  }\n  form.querySelector('.quote_select').onchange = function() {\n    quotes($form, this.value)\n  }\n  // for TeX\n  let areaID = form.id + '_textarea'\n  form.querySelector('textarea').id = areaID\n  form.querySelector('.uib-tx').dataset.target = areaID\n  // captcha\n  if (Captcha.enabled && Captcha.enabled!=='only-access')\n    Captcha.initForm(form)\n  // readonly stuff\n  form.querySelectorAll('.make-me-readonly').forEach(ro => {\n    ro.readOnly = true\n    ro.addEventListener('focus', () => ro.readOnly = false)\n  })\n  // Name disabling\n  let name = form.querySelector('input[name=disable_name]')\n  if (name) {\n    name.onchange = function() {\n      let off = this.checked\n      form.querySelector('input[name=name]').disabled = off\n      localStorage.setItem('post_anonymously', +off)\n    }\n    name.checked = !!+localStorage['post_anonymously']\n    name.onchange()\n  }\n  // Submitting\n  form.addEventListener('submit', function(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    Ajax.submitPost(this)\n  })\n  form.querySelectorAll('.simplified-send-row button[type=\"submit\"]').forEach(sub => {\n    sub.onclick = function(ev) {\n      ev.preventDefault()\n      ev.stopPropagation()\n      let sage = +(this.name == 'sagebtn')\n      Ajax.submitPost(form, sage)\n    }\n  })\n  // TTL\n  let ttl = form.querySelector('input[name=\"ttl-enable\"]')\n  if (ttl) {\n    ttl.onchange = function() {\n      let on = this.checked\n      , input = form.ttl\n      input.disabled = !on\n      input.min = on ? 1 : 0\n      if (on && input.value == 0) {\n        input.value = 1\n      }\n    }\n    ttl.onchange()\n  }\n  // Detecting last active textarea\n  form.querySelectorAll('textarea, input[type=text]').forEach(el => {\n    el.onfocus = () => {\n      lastActiveForm = form\n    }\n  })\n  // Add file button\n  let fileButton = form.querySelector('.s-file')\n  if (fileButton) {\n    fileButton.onclick = ev => {\n      ev.preventDefault()\n      form.querySelector('input[type=file]').click()\n    }\n  }\n}\n\nvar injector = {\n  inject: function(alias, css) {\n    var id = `injector:${alias}`\n    var existing = document.getElementById(id)\n    if (existing) {\n      existing.innerHTML = css\n      return\n    }\n    var head = document.head || document.getElementsByTagName('head')[0]\n    , style = document.createElement('style')\n    style.type = 'text/css'\n    style.id = id\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css\n    } else {\n      style.appendChild(document.createTextNode(css))\n    }\n    head.appendChild(style)\n  },\n  remove: function(alias) {\n    var id = `injector:${alias}`\n    var style = document.getElementById(id)\n    if (style) {\n      var head = document.head || document.getElementsByTagName('head')[0]\n      if (head)\n        head.removeChild(document.getElementById(id))\n    }\n  }\n}\n\nfunction randomString(length=10, chars='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ') {\n  let result = ''\n  for (let i = length; i > 0; --i) \n    result += chars[Math.round(Math.random() * (chars.length - 1))]\n  return result\n}\n\nfunction add_mob_menu() {\n  let r = 20\n  , pos = 10\n  , delay = 300\n  $('#overlay_menu').hide()\n  document.body.insertAdjacentHTML('afterbegin', `<div id=\"mobile-menu\"><div id=\"mobile-menu-contents\"></div></div>`)\n  let mm = document.querySelector('#mobile-menu-contents')\n  , $mmw = $('#mobile-menu')\n  , htm = ''\n  $('<div id=\"mmb-_options\" style=\"display: none\"></div>').append($('#ms-_options')).appendTo($(mm))\n  $mmw.append(`<div id=\"mm-toggle\">\n    <div class=\"mm-bars\"></div>\n    <div id=\"mm-circle\"></div>\n  </div>`)\n  let cats = boards10.list\n  cloud20.getBoards().then(b20 => {\n    cats.sort((a,b) => +a.order > +b.order)\n    .push({\n      id: '20',\n      name: '2.0',\n      boards: b20\n    })\n    cats.forEach((cat, ix) => {\n      if (cat.boards) {\n        htm += `<a href=\"#\" class=\"mm-item mm-cat\" data-mmbx=\"${ix}\">${cat.name}</a>\n          <span class=\"mm-boards\" id=\"mmb-${ix}\">`\n        cat.boards.forEach(b => {\n          b.dir = b.dir || b.name\n          htm += `<a class=\"mm-item mm-brd\" href=\"/${b.dir}\">/${b.dir}/  ${b.desc}</a>`\n        })\n        htm += '</span>'\n      }\n    })\n    htm += `<a href=\"#\" class=\"mm-item mm-toggle-options\" onclick=\"\n      $('.mm-boards').toggle(false); \n      $('#mmb-_options').slideToggle('fast');\n      $('.mmc-expanded').removeClass('mmc-expanded')\n      return false\n    \">Options</a>`\n    mm.insertAdjacentHTML('afterBegin', `${htm}`)\n    $('#mm-toggle').click(function() {\n      if ($mmw.hasClass('mm-expanded')) return;\n      $mmw.addClass('mm-expanded')\n      let bcr = $mmw[0].getBoundingClientRect()\n      , x = bcr.width - r - pos  // - radius/2, -position\n      , y = bcr.height - r - pos // - radius/2, -position\n      , R = Math.sqrt(x*x + y*y) // See, math is not useless after all\n      , scale = Math.ceil(R / r)\n      $('#mm-circle').css({'transform': `scale(${scale})`})\n      $(mm).css({\n        'visibility': 'visible',\n        'opacity': 1\n      })\n      $mmw.addClass('bars-away')\n      setTimeout(() => {\n        $mmw.addClass('mm-expanded-full')\n      }, delay)\n    })\n\n    offClick.push(() => {\n      if (! $mmw.hasClass('mm-expanded-full')) return;\n      $mmw.removeClass('mm-expanded-full bars-away')\n      setTimeout(() => {\n        $(mm).css({'visibility': 'hidden'})\n        $mmw.removeClass('mm-expanded')\n      }, delay)\n      $(mm).css({\n        'visibility': 'visible',\n        'opacity': 0\n      })\n      $('#mm-circle').css({'transform': `scale(1)`})\n    })\n  })\n  $mmw.click(function(ev) {\n    ev.stopPropagation()\n  })\n  .on('click', '.mm-cat[data-mmbx]', function() {\n    let $target = $(`#mmb-${$(this).data('mmbx')}`)\n    if ($target.is(':visible')) {\n      $target.toggle(false)\n      $(this).removeClass('mmc-expanded')\n    }\n    else {\n      $('.mm-boards').toggle(false)\n      $('#mmb-_options').slideUp('fast');\n      $target.toggle(true)\n      $('.mmc-expanded').removeClass('mmc-expanded')\n      $(this).addClass('mmc-expanded')\n    }\n    return false\n  })\n}\n\nvar boards10 = {\n  get list() {\n    if (!this.allboards) {\n      this.allboards = []\n      document.querySelectorAll('.olm-link').forEach(o => {\n        o = o.querySelector('a')\n        if (!o) return;\n        let s = o.dataset.toexpand\n        , sd = o.innerText\n        , sect = document.querySelector(`#ms-${s}`)\n        if (!s || s=='20' || s=='_options') return;\n        let section = {\n          id: s,\n          name: sd,\n          boards: []\n        }\n        sect.querySelectorAll('a').forEach(a => {\n          let m = a.innerText.match(/\\/(.+?)\\/ - (.+)/)\n          if (m) \n            section.boards.push({\n              dir: m[1],\n              desc: m[2]\n            })\n        })\n        this.allboards.push(section)\n      })\n    }\n    return this.allboards\n  }\n}\n\nvar cloud20 = {\n  init: function() {\n    this.getBoards().then(() => this.filter('')).catch(_.noop)\n    $('#boardselect').on('input', function() {\n      cloud20.filter($(this).val());\n    });\n  },\n  getBoards: function() {\n    return new Promise((rs, rj) => {\n      if (this.allboards)\n        rs(this.allboards)\n      else {\n        $.getJSON(ku_cgipath + '/boards20.json', data => {\n          this.allboards = data\n          rs(data)\n        })\n        .fail(e => {\n          pups.err(_l.unable_load_20)\n          rj(e)\n        })\n      }\n    })\n  },\n  filter: function(query) {\n    var res = [];\n    if(typeof this.allboards === \"undefined\") return;\n    if(query == '') res = this.allboards;\n    else {\n      query = query.toLowerCase();\n      _.each(this.allboards, function(board) {\n        if(board.name.toLowerCase().search(query) !== -1 || board.desc.toLowerCase().search(query) !== -1)\n          res.push(board);\n      });\n    }\n    this.display(res);\n  },\n  display: function(list) {\n    var newhtml = '', opts = '';\n    _.each(list, function(item) {\n      newhtml += '<a class=\"menu-item\" title=\"'+ item.desc +'\" href=\"'+ku_boardsfolder+item.name+'/\">/'+item.name+'/ - '+ item.desc +'</a>';\n      opts += '<option value=\"'+item.name+'\">/'+item.name+'/ - '+ item.desc +'</option>';\n    });\n    $('#boards20').html(newhtml);\n    $('.boardsel20').append(opts);\n  }\n}\n\nvar countries = {\n  'A1': \"Anonymous Proxy\",\n  'A2': \"Satellite Provider\",\n  'O1': \"Other Country\",\n  'AD': \"Andorra\",\n  'AE': \"United Arab Emirates\",\n  'AF': \"Afghanistan\",\n  'AG': \"Antigua and Barbuda\",\n  'AI': \"Anguilla\",\n  'AL': \"Albania\",\n  'AM': \"Armenia\",\n  'AO': \"Angola\",\n  'AP': \"Asia/Pacific Region\",\n  'AQ': \"Antarctica\",\n  'AR': \"Argentina\",\n  'AS': \"American Samoa\",\n  'AT': \"Austria\",\n  'AU': \"Australia\",\n  'AW': \"Aruba\",\n  'AX': \"Aland Islands\",\n  'AZ': \"Azerbaijan\",\n  'BA': \"Bosnia and Herzegovina\",\n  'BB': \"Barbados\",\n  'BD': \"Bangladesh\",\n  'BE': \"Belgium\",\n  'BF': \"Burkina Faso\",\n  'BG': \"Bulgaria\",\n  'BH': \"Bahrain\",\n  'BI': \"Burundi\",\n  'BJ': \"Benin\",\n  'BL': \"Saint Bartelemey\",\n  'BM': \"Bermuda\",\n  'BN': \"Brunei Darussalam\",\n  'BO': \"Bolivia\",\n  'BQ': \"Bonaire, Saint Eustatius and Saba\",\n  'BR': \"Brazil\",\n  'BS': \"Bahamas\",\n  'BT': \"Bhutan\",\n  'BV': \"Bouvet Island\",\n  'BW': \"Botswana\",\n  'BY': \"Belarus\",\n  'BZ': \"Belize\",\n  'CA': \"Canada\",\n  'CC': \"Cocos (Keeling) Islands\",\n  'CD': \"Congo, The Democratic Republic of the\",\n  'CF': \"Central African Republic\",\n  'CG': \"Congo\",\n  'CH': \"Switzerland\",\n  'CI': \"Cote d'Ivoire\",\n  'CK': \"Cook Islands\",\n  'CL': \"Chile\",\n  'CM': \"Cameroon\",\n  'CN': \"China\",\n  'CO': \"Colombia\",\n  'CR': \"Costa Rica\",\n  'CU': \"Cuba\",\n  'CV': \"Cape Verde\",\n  'CW': \"Curacao\",\n  'CX': \"Christmas Island\",\n  'CY': \"Cyprus\",\n  'CZ': \"Czech Republic\",\n  'DE': \"Germany\",\n  'DJ': \"Djibouti\",\n  'DK': \"Denmark\",\n  'DM': \"Dominica\",\n  'DO': \"Dominican Republic\",\n  'DZ': \"Algeria\",\n  'EC': \"Ecuador\",\n  'EE': \"Estonia\",\n  'EG': \"Egypt\",\n  'EH': \"Western Sahara\",\n  'ER': \"Eritrea\",\n  'ES': \"Spain\",\n  'ET': \"Ethiopia\",\n  'EU': \"Europe\",\n  'FI': \"Finland\",\n  'FJ': \"Fiji\",\n  'FK': \"Falkland Islands (Malvinas)\",\n  'FM': \"Micronesia, Federated States of\",\n  'FO': \"Faroe Islands\",\n  'FR': \"France\",\n  'GA': \"Gabon\",\n  'GB': \"United Kingdom\",\n  'GD': \"Grenada\",\n  'GE': \"Georgia\",\n  'GF': \"French Guiana\",\n  'GG': \"Guernsey\",\n  'GH': \"Ghana\",\n  'GI': \"Gibraltar\",\n  'GL': \"Greenland\",\n  'GM': \"Gambia\",\n  'GN': \"Guinea\",\n  'GP': \"Guadeloupe\",\n  'GQ': \"Equatorial Guinea\",\n  'GR': \"Greece\",\n  'GS': \"South Georgia and the South Sandwich Islands\",\n  'GT': \"Guatemala\",\n  'GU': \"Guam\",\n  'GW': \"Guinea-Bissau\",\n  'GY': \"Guyana\",\n  'HK': \"Hong Kong\",\n  'HM': \"Heard Island and McDonald Islands\",\n  'HN': \"Honduras\",\n  'HR': \"Croatia\",\n  'HT': \"Haiti\",\n  'HU': \"Hungary\",\n  'ID': \"Indonesia\",\n  'IE': \"Ireland\",\n  'IL': \"Israel\",\n  'IM': \"Isle of Man\",\n  'IN': \"India\",\n  'IO': \"British Indian Ocean Territory\",\n  'IQ': \"Iraq\",\n  'IR': \"Iran, Islamic Republic of\",\n  'IS': \"Iceland\",\n  'IT': \"Italy\",\n  'JE': \"Jersey\",\n  'JM': \"Jamaica\",\n  'JO': \"Jordan\",\n  'JP': \"Japan\",\n  'KE': \"Kenya\",\n  'KG': \"Kyrgyzstan\",\n  'KH': \"Cambodia\",\n  'KI': \"Kiribati\",\n  'KM': \"Comoros\",\n  'KN': \"Saint Kitts and Nevis\",\n  'KP': \"Korea, Democratic People's Republic of\",\n  'KR': \"Korea, Republic of\",\n  'KW': \"Kuwait\",\n  'KY': \"Cayman Islands\",\n  'KZ': \"Kazakhstan\",\n  'LA': \"Lao People's Democratic Republic\",\n  'LB': \"Lebanon\",\n  'LC': \"Saint Lucia\",\n  'LI': \"Liechtenstein\",\n  'LK': \"Sri Lanka\",\n  'LR': \"Liberia\",\n  'LS': \"Lesotho\",\n  'LT': \"Lithuania\",\n  'LU': \"Luxembourg\",\n  'LV': \"Latvia\",\n  'LY': \"Libyan Arab Jamahiriya\",\n  'MA': \"Morocco\",\n  'MC': \"Monaco\",\n  'MD': \"Moldova, Republic of\",\n  'ME': \"Montenegro\",\n  'MF': \"Saint Martin\",\n  'MG': \"Madagascar\",\n  'MH': \"Marshall Islands\",\n  'MK': \"Macedonia\",\n  'ML': \"Mali\",\n  'MM': \"Myanmar\",\n  'MN': \"Mongolia\",\n  'MO': \"Macao\",\n  'MP': \"Northern Mariana Islands\",\n  'MQ': \"Martinique\",\n  'MR': \"Mauritania\",\n  'MS': \"Montserrat\",\n  'MT': \"Malta\",\n  'MU': \"Mauritius\",\n  'MV': \"Maldives\",\n  'MW': \"Malawi\",\n  'MX': \"Mexico\",\n  'MY': \"Malaysia\",\n  'MZ': \"Mozambique\",\n  'NA': \"Namibia\",\n  'NC': \"New Caledonia\",\n  'NE': \"Niger\",\n  'NF': \"Norfolk Island\",\n  'NG': \"Nigeria\",\n  'NI': \"Nicaragua\",\n  'NL': \"Netherlands\",\n  'NO': \"Norway\",\n  'NP': \"Nepal\",\n  'NR': \"Nauru\",\n  'NU': \"Niue\",\n  'NZ': \"New Zealand\",\n  'OM': \"Oman\",\n  'PA': \"Panama\",\n  'PE': \"Peru\",\n  'PF': \"French Polynesia\",\n  'PG': \"Papua New Guinea\",\n  'PH': \"Philippines\",\n  'PK': \"Pakistan\",\n  'PL': \"Poland\",\n  'PM': \"Saint Pierre and Miquelon\",\n  'PN': \"Pitcairn\",\n  'PR': \"Puerto Rico\",\n  'PS': \"Palestinian Territory\",\n  'PT': \"Portugal\",\n  'PW': \"Palau\",\n  'PY': \"Paraguay\",\n  'QA': \"Qatar\",\n  'RE': \"Reunion\",\n  'RO': \"Romania\",\n  'RS': \"Serbia\",\n  'RU': \"Russian Federation\",\n  'RW': \"Rwanda\",\n  'SA': \"Saudi Arabia\",\n  'SB': \"Solomon Islands\",\n  'SC': \"Seychelles\",\n  'SD': \"Sudan\",\n  'SE': \"Sweden\",\n  'SG': \"Singapore\",\n  'SH': \"Saint Helena\",\n  'SI': \"Slovenia\",\n  'SJ': \"Svalbard and Jan Mayen\",\n  'SK': \"Slovakia\",\n  'SL': \"Sierra Leone\",\n  'SM': \"San Marino\",\n  'SN': \"Senegal\",\n  'SO': \"Somalia\",\n  'SR': \"Suriname\",\n  'SS': \"South Sudan\",\n  'ST': \"Sao Tome and Principe\",\n  'SV': \"El Salvador\",\n  'SX': \"Sint Maarten\",\n  'SY': \"Syrian Arab Republic\",\n  'SZ': \"Swaziland\",\n  'TC': \"Turks and Caicos Islands\",\n  'TD': \"Chad\",\n  'TF': \"French Southern Territories\",\n  'TG': \"Togo\",\n  'TH': \"Thailand\",\n  'TJ': \"Tajikistan\",\n  'TK': \"Tokelau\",\n  'TL': \"Timor-Leste\",\n  'TM': \"Turkmenistan\",\n  'TN': \"Tunisia\",\n  'TO': \"Tonga\",\n  'TR': \"Turkey\",\n  'TT': \"Trinidad and Tobago\",\n  'TV': \"Tuvalu\",\n  'TW': \"Taiwan\",\n  'TZ': \"Tanzania, United Republic of\",\n  'UA': \"Ukraine\",\n  'UG': \"Uganda\",\n  'UM': \"United States Minor Outlying Islands\",\n  'US': \"United States\",\n  'UY': \"Uruguay\",\n  'UZ': \"Uzbekistan\",\n  'VA': \"Holy See (Vatican City State)\",\n  'VC': \"Saint Vincent and the Grenadines\",\n  'VE': \"Venezuela\",\n  'VG': \"Virgin Islands, British\",\n  'VI': \"Virgin Islands, U.S.\",\n  'VN': \"Vietnam\",\n  'VU': \"Vanuatu\",\n  'WF': \"Wallis and Futuna\",\n  'WS': \"Samoa\",\n  'YE': \"Yemen\",\n  'YT': \"Mayotte\",\n  'ZA': \"South Africa\",\n  'ZM': \"Zambia\",\n  'ZW': \"Zimbabwe\",\n  'XX': \"OMCK\",\n  'T1': \"Tor\"\n}\n\nvar bnrs = {\n  initiated: false,\n  init: function() {\n    $.getJSON(ku_boardspath+'/bnrs.json', function(data) {\n      var reduced = [];\n      if(data.length > 1) {\n        _.each(data, function(bnr) {\n          if(bnr.link !== this_board_dir) reduced.push(bnr);\n        });\n      }\n      else reduced = data;\n      bnrs.data = reduced;\n      bnrs.initiated = true;\n      bnrs.display();\n    });\n  },\n  display: function() {\n    if(!this.initiated) return;\n    if(!this.data.length) return;\n    var reduced = [];\n    if(typeof this.current !== 'undefined') {\n      _.each(this.data, function(item) {\n        if(item.path !== bnrs.current) reduced.push(item)\n      });\n    }\n    else reduced = this.data;\n    var toDisplay = randomItem(reduced);\n    this.current = toDisplay.path;\n    var link = (toDisplay.link.indexOf('http') === (-1)) ? ku_boardspath+'/'+toDisplay.link : toDisplay.link;\n    var newhtml = '<a class=\"bnrsupdate\" href=\"#\" onclick=\"javascript:bnrs.display();return false;\"></a><a href=\"'+link+'\"><img src=\"'+ku_boardspath+'/images/bnrs/'+toDisplay.path+'\" /></a>';\n    if($('.bnr').length) {\n      $('.bnr').html(newhtml);\n    }\n    else $('.logo').before('<div class=\"bnr-wrap\"><div class=\"bnr\">'+newhtml+'</div></div>');\n  },\n}\n\nfunction getRandomInt (min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction randomItem(array) {\n  return array[getRandomInt(0, array.length-1)];\n}\n\nvar embedLinks = {\n  sites: [\n    {id: 'youtube', rx: /(?:youtu(?:\\.be|be\\.com)\\/(?:.*v(?:\\/|=)|(?:.*\\/)?)([\\w'-]+))/i },\n    {id: 'vimeo', rx: /[\\w\\W]*vimeo\\.com\\/(?:.*?)([0-9]+)(?:.*)?/ },\n    {id: 'coub', rx: /[\\w\\W]*coub\\.com\\/view\\/([\\w\\W]*)[\\w\\W]*/ },\n    {id: 'soundcloud', rx: /[\\w\\W]*soundcloud.com\\/([\\w\\W]*)[\\w\\W]*/i },\n  ],\n  process: function(val) {\n    var result = null;\n    _.find(this.sites, function(site) {\n      var fruit = site.rx.exec(val);\n      if(fruit != null) {\n        result = {\n          site: site.id,\n          code: fruit[1]\n        }\n      }\n    })\n    return result;\n  }\n}\n\nvar catalog = {\n  conf: {\n    sortBy: 'bumped',\n    layout: 'text',\n    respectStickied: true,\n    showHidden: true,\n    expandOnHover: true\n  },\n  saveConfig: function() {\n    localStorage['catalogSettings'] = JSON.stringify(this.conf);\n  },\n  init: function() {\n    document.body.classList.add('is-catalog')\n    // apply settings\n    if(localStorage['catalogSettings']) {\n      try {\n        var myConf = JSON.parse(localStorage['catalogSettings']);\n        _.each(myConf, function(val, key) {\n          this.conf[key] = val\n        }, this)\n      }\n      catch(e) {\n        console.error('Invalid catalog config');\n        localStorage.removeItem('catalogSettings');\n      }\n    }\n\n    /*var sortOptionElements = '';\n    _.each([\n      ['bumped', 'bumpOrder'],\n      ['replied', 'lastReply'],\n      ['timestamp', 'creationDate'],\n      ['reply_count', 'replyCount']\n    ], (function(val_desc) {\n      sortOptionElements += '<option value=\"'+val_desc[0]+'\"'+(val_desc[0]==this.conf.sortBy ? ' selected' : '')+'>'+_l[val_desc[1]]+'</option>';\n    }).bind(this));*/\n    // Catalog refresh button\n    var refreshBtn = `<div class=\"refresh-catalog\" title=\"${_l.refreshCatalog}\"><svg class=\"icon i-16in20\"><use xlink:href=\"#i-refresh\"></use></svg></div>`\n    // catalog control buttons\n    var sortBtns = '<div class=\"button-group\" data-select=\"sortBy\">';\n    _.each([\n      ['bumped', 'bumpOrder', 'bump', 'i-20'],\n      ['timestamp', 'creationDate', 'creation', 'i-20'],\n      ['replied', 'lastReply', 'reply', 'i-16in20'],\n      ['reply_count', 'replyCount', 'replies', 'i-20']\n    ], (function(v_d_i) {\n      sortBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.sortBy ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l.sortBy+' '+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    sortBtns += '</div>';\n    var pinBtns = '<div class=\"button-group'+(this.conf.sortBy !== 'bumped' ? ' disabled' : '')+'\" data-select=\"respectStickied\" id=\"pinControl\">';\n    _.each([\n      [1, 'doStick', 'pin', 'i-16in20'],\n      [0, 'doNotStick', 'unpin', 'i-16in20']\n    ], (function(v_d_i) {\n      pinBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.respectStickied ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    pinBtns += '</div>';\n    var hideBtns = '<div class=\"button-group\" data-select=\"showHidden\">';\n    _.each([\n      [0, 'hideHidden', 'hide', 'i-16in20'],\n      [1, 'showHidden', 'unhide', 'i-16in20']\n    ], (function(v_d_i) {\n      hideBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.showHidden ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    hideBtns += '</div>';\n    var layoutBtns = '<div class=\"button-group\" data-select=\"layout\">';\n    _.each([\n      ['text', 'smallPics', 'grid-small', 'i-20'],\n      ['gallery', 'largePics', 'gallery-grid', 'i-20'],\n      /*['legacy', 'legacyMode', 'legacy-grid', 'i-20']*/\n    ], (function(v_d_i) {\n      layoutBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.layout ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    layoutBtns += '</div>';\n    // searck input\n    var searchInput = '<input name=\"subject\" autocomplete=\"false\" class=\"button-group\" type=\"text\" id=\"cat-search\" placeholder=\"'+_l.search+'...\" /><input type=\"text\" name=\"FUCKYOUCHROMEFUCKYOU\" style=\"display:none;\"/>'\n\n    $('#catalog-controls').html(\n      refreshBtn+sortBtns+pinBtns+searchInput+hideBtns+layoutBtns\n    );\n    this.load();\n    if(this.conf.expandOnHover)\n      $('#catalog-contents').addClass('expand-on-hover-enabled');\n    // Card events\n    $('#catalog-contents')\n    .on('click', '.namedate-overlay', function() {\n      $(this).toggleClass('date-on name-on');\n    })\n    .on('click', '.ce-text .bigThumb', function(ev) {\n      ev.stopPropagation(); ev.preventDefault();\n      var $card = $(this).parents('.cat-entry');\n      $card.toggleClass('thumbExpanded');\n    })\n    .on('click', '.bigThumb audio, .bigThumb video', function(ev) {\n      ev.stopPropagation();\n    })\n    .on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', (function(event) {\n      var $target = $(event.target);\n      if (event.originalEvent.animationName == \"embed-image-insert\" && !$target.hasClass('_inserted_'))\n        this.getEmbedThumb($target);\n    }).bind(this))\n    .on('mousedown', '.cat-prv', function(ev) {\n      ev.preventDefault();\n      PostPreviews._mouseover.bind(this)(ev);\n    })\n    .on('click', '.cat-prv', function(ev) {\n      ev.stopPropagation();\n      ev.preventDefault();\n    })\n    .on('mouseleave', '.cat-prv', function(ev) {\n      PostPreviews._mouseout.bind(this)(/*ev*/);\n    })\n    .on('click', '.i-hide', (function(ev) {\n      var $target = $(ev.currentTarget)\n      , $card = $target.parents('.cat-entry')\n      , threadID = $card.data('id')\n      , threadIX = _.findIndex(this.model, {'id': threadID})\n      , thread = this.model[threadIX];\n      thread.hidden = !thread.hidden;\n      // addClass won't work here for some reason\n      if(thread.hidden) {\n        $target[0].classList.add('pressed');\n        $target.html(makeIcon('unhide', '', true));\n        HiddenItems.hideItem('thread', threadID);\n        $card.addClass('thread-hidden')\n      }\n      else {\n        $target[0].classList.remove('pressed');\n        $target.html(makeIcon('hide', '', true));\n        HiddenItems.unhideItem('thread', threadID);\n        $card.removeClass('thread-hidden')\n      }\n      //invalidate rendered cache\n      this.model[threadIX] = thread;\n      delete this.rendered[this.conf.layout][threadID];\n    }).bind(this))\n    // catalog configuration\n    $('.bg-button').click((function(ev) {\n      var $target = $(ev.currentTarget);\n      if($target.hasClass('bgb-selected')) return;\n      var $group = $target.parent()\n      , val = $target.data('val')\n      , key = $group.data('select');\n      $group.find('.bg-button').removeClass('bgb-selected');\n      $target.addClass('bgb-selected');\n      if(key !== 'sortBy' && key !== 'layout') val = !!val;\n      else {\n        if(val == 'bumped') $('#pinControl').removeClass('disabled');\n        else $('#pinControl').addClass('disabled');\n      }\n      this.conf[key] = val;\n      this.saveConfig();\n      if(key !== 'showHidden') this.build();\n      else {\n        if(val) $('#catalog-contents').removeClass('hideHidden');\n        else $('#catalog-contents').addClass('hideHidden');\n      }\n    }).bind(this))\n    $('.refresh-catalog').click((function(ev) {\n      ev.preventDefault();\n      this.load();\n    }).bind(this));\n    //search\n    $('#cat-search').on('input', function() {\n      var query = $(this).val().toLowerCase().replace(/\\\"/, '\\\\\"');\n      try {\n        injector.remove('cat-search');\n      } catch(e) {}\n      if(query.length)\n        injector.inject('cat-search', '#catalog-contents .cat-entry:not([data-search *= \"'+query+'\"]) { display:none; }');\n      else injector.remove('cat-search');\n    }).trigger('input');\n  },\n  load: function() {\n    // clear data\n    this.rendered = {text: {}, gallery: {}};\n    this.model = null;\n    // get contents\n    $.getJSON('catalog.json?v='+(new Date().getTime()))\n    .done(this.build.bind(this))\n    .fail(function(err) {\n      throw err;\n    })\n  },\n  fileTypes: {\n    image: ['jpg', 'gif', 'png'],\n    jpgThumb: ['webm', 'mp4', 'cob', 'vim', 'you'],\n    iconsAvailable: ['swf', 'mp3', 'ogg', 'css', 'flv'],\n    audio: ['mp3', 'ogg'],\n    embed: ['cob', 'vim', 'you']\n  },\n  authorities: ['', 'Admin', 'Mod', '?', 'God'],\n  formatDate: function(timestamp, short) {\n    if(typeof short === 'undefined') short = false;\n    var date = new Date(timestamp * 1000)\n    , Dow = this.dateLocal.dows.hasOwnProperty(locale) ? this.dateLocal.dows[locale][date.getDay()] : this.dateLocal.dows.en[date.getDay()]\n    , yy = _.padLeft(date.getFullYear() % 100, 2, 0)\n    , mo = _.padLeft(date.getMonth()+1, 2, 0)\n    , Mon = (locale === 'ru') ? this.dateLocal.mons.ru[date.getMonth()] : date.getMonth()+1\n    , dd = _.padLeft(date.getDate(), 2, 0)\n    , hh = _.padLeft(date.getHours(), 2, 0)\n    , mm = _.padLeft(date.getMinutes(), 2, 0)\n    , ss = _.padLeft(date.getSeconds(), 2, 0);\n    return (short\n      ? ( (locale === 'ru')\n        ? (dd+'.'+mo+'.'+yy+'  ')\n        : (mo+'/'+dd+'/'+yy+' @ ') )\n      : ( (locale === 'ru')\n        ? (Dow+' '+dd+' '+Mon+''+yy+'  ')\n        : (mo+'/'+dd+'/'+yy+' ('+Dow+') @ ') )\n    ) + hh+':'+mm+':'+ss;\n  },\n  dateLocal: {\n    dows: {\n      ru: ['','','','','','',''],\n      en: ['Sun','Mon','Tue','Wen','Thu','Fri','Sat']\n    },\n    mons: {\n      ru: ['','','','','','','','','','','','']\n    }\n  },\n  build: function(data) {\n    if(typeof data === 'undefined') data = this.model;\n    if(!data) return;\n    // normalize\n    _.each(data, function(entry, i) {\n      _.each(['id', 'reply_count', 'bumped', 'replied', 'reply_count', 'timestamp', 'page', 'locked', 'stickied', 'deleted_timestamp'], function(prop) {\n        entry[prop] = ~~entry[prop];\n      })\n      data[i] = entry;\n    })\n    // Sort threads\n    if(this.conf.sortBy === 'bumped' && this.conf.respectStickied)\n      this.model = _.sortByOrder(data, ['stickied', 'bumped'], ['desc', 'desc']);\n    else {\n      var sby = [this.conf.sortBy];\n      if(this.conf.sortBy !== 'bumped')\n        sby.push('bumped')\n      this.model = _.sortByOrder(data, sby, _.repeat('desc', sby.length));\n    }\n\n    var html = '';\n\n    _.each(this.model, function(thread) {\n      html += this.buildEntry(thread);\n    }, this);\n\n    $('#catalog-contents').html(html);\n  },\n  getEmbedThumb: function($el) {\n    var site = $el.data('site'), id = $el.data('id'), img\n    , $thread = $el.parents('.cat-entry')\n    , threadID = $thread.data('id');\n    if(site == 'cob')\n      $.get(ku_boardspath+'/corpsy.php?code='+id, (function(res) {\n        $el.replaceWith('<img src=\"'+res.thumbnail_url+'\">');\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML;\n      }).bind(this));\n    if(site == 'vim')\n      $.get('http://vimeo.com/api/v2/video/'+id+'.json', (function(res) {\n        $el.replaceWith('<img src=\"'+res[0].thumbnail_medium+'\">');\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML\n      }).bind(this));\n  },\n\n  buildEntry: function(thread) {\n    if(this.rendered[this.conf.layout].hasOwnProperty(thread.id))\n      return this.rendered[this.conf.layout][thread.id];\n\n    if(!thread.processed) {\n      thread.url = '/'+this_board_dir+'/res/'+thread.id+'.html';\n      // --- Building blocks ---\n      // Thumbnails\n      var expanderBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-expand\"></use></svg>',\n      playerBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-play\"></use></svg>';\n      // Find first non-deleted file\n      let embed = thread.embeds ? (thread.embeds.find(e => e.file != 'removed') || 'removed') : null\n      //  for images\n      if(!embed || embed === 'removed') {\n        thread.smallThumb =\n        '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n          <div class=\"nofile-removed ctx\">'+(embed === 'removed' ? '' : 'No File')+'</div>'\n        +'</a>';\n      }\n      else {\n        if (\n          _.includes(this.fileTypes.image, embed.file_type)\n          ||\n          _.includes(this.fileTypes.jpgThumb, embed.file_type)\n          ||\n          (\n            _.includes(this.fileTypes.audio, embed.file_type)\n            &&\n            (+embed.thumb_w) > 0\n            &&\n            (+embed.thumb_h) > 0\n          )\n        ) {\n          let ftype = _.includes(this.fileTypes.image, embed.file_type)\n            ? embed.file_type\n            : 'jpg'\n          , thumbURL = _.includes(this.fileTypes.embed, embed.file_type)\n            ? `${embed.file_type}-${embed.file}-`\n            : embed.file\n          , vartype = embed.file_type == 'mp3' ? ' onerror=\"switchFileType(this)\" extset=\"jpg,png,gif\"' : ''\n          thread.smallThumb =\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"thumb/'+thumbURL+'c.'+ftype+'\"'+vartype+'>'\n          +'</a>';\n          thread.bigThumb =\n          '<img src=\"thumb/'+thumbURL+'s.'+ftype+'\"'+vartype+'>';\n        }\n        /*if(_.includes(this.fileTypes.image, thread.file_type)) {\n          thread.fileTypeClass = 'image';\n          thread.smallThumb =\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"thumb/'+thread.file+'c.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">'\n          +'</a>';\n          thread.bigThumb =\n          '<img src=\"thumb/'+thread.file+'s.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">';\n        }*/\n        //  small thumbnail for embeds and generic files\n        else {\n          var smallSrc = (_.includes(this.fileTypes.iconsAvailable, embed.file_type))\n          ? '/inc/filetypes/'+embed.file_type+'.png'\n          : '/inc/filetypes/generic'+(_.includes(this.fileTypes.embed, embed.file_type) ? '-embed' : '')+'.png';\n          var expandable = _.includes(this.fileTypes.embed, embed.file_type) || _.includes(this.fileTypes.audio, embed.file_type);\n          thread.smallThumb =\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"'+smallSrc+'\">' +\n            /*+ ''+(expandable ? playerBtn : '') +*/\n          '</a>';\n          //  for audios\n          if(_.includes(this.fileTypes.audio, embed.file_type)) {\n            thread.bigThumb =\n            '<audio src=\"src/'+embed.file+'.'+embed.file_type+'\" controls></audio>';\n          }\n        }\n        /*//  for embeds\n        if(_.includes(this.fileTypes.embed, thread.file_type)) {\n          thread.bigThumb = (thread.file_type == 'you')\n          ? '<img src=\"http://i.ytimg.com/vi/'+thread.file+'/mqdefault.jpg\">'\n          : '<div class=\"cat-bt-embed\" data-site=\"'+thread.file_type+'\" data-id=\"'+thread.file+'\"></div>';\n        }\n        //  for audios\n        if(_.includes(this.fileTypes.audio, thread.file_type)) {\n          thread.bigThumb =\n          '<audio src=\"src/'+thread.file+'.'+thread.file_type+'\" controls></audio>';\n        }*/\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';\n      }\n      /*if(!embed || embed === 'removed')\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';*/\n\n      //OP\n      thread.op = '<a target=\"_blank\" title=\"'+_l.goToThread+'\" target=\"_blank\" href=\"'+thread.url+'\" class=\"op-number ctx\">#'+thread.id+'</a>';\n\n      //preview\n      thread.preview =\n      '<a href=\"'+thread.url+'#'+thread.id+'\" class=\"actor cat-prv\">\\\n        <svg class=\"icon\"><use xlink:href=\"#i-eye\"></use></svg>\\\n      </a>';\n\n      //counters\n      var repliesLabel =\n      '<svg class=\"icon\"><use xlink:href=\"#i-reply\"></use></svg>\\\n      <span class=\"ctx reply-count\">'+thread.reply_count+'</span>';\n      if(thread.last_reply)\n        repliesLabel = '<a href=\"'+thread.url+'#'+thread.last_reply+'\" class=\"actor cat-prv\">'+repliesLabel+'</a>';\n      var replies =\n      '<div class=\"infolabel\">'+repliesLabel+'</div>',\n      images =\n      '<div class=\"infolabel\">\\\n        <svg class=\"icon\"><use xlink:href=\"#i-picture\"></use></svg>\\\n        <span class=\"ctx image-count\">'+thread.images+'</span>\\\n      </div>',\n      page =\n      '<div class=\"infolabel il-page\">\\\n        <a title=\"'+_l.threadOnPage+' '+thread.page+'\" target=\"_blank\" href=\"/'+this_board_dir+'/' + ((thread.page > 0) ? thread.page+'.html' : '')+'#'+thread.id+'\" class=\"actor\">\\\n          <svg class=\"icon\"><use xlink:href=\"#i-page\"></use></svg>\\\n          <span class=\"ctx page-number\">'+thread.page+'</span>\\\n        </a>\\\n      </div>';\n      thread.countersCombined = replies+images+page;\n\n      //Poster name+date\n      thread.posterauthority = +thread.posterauthority;\n      thread.nameDatePriority = 'date';\n      if(localStorage['cat_nameDatePriority'] == 'name' ||\n          (localStorage['cat_nameDatePriority'] != 'date' &&\n            (thread.name || thread.tripcode || thread.posterauthority)\n          )\n        ) thread.nameDatePriority = 'name';\n\n      // Poster name\n      var poster =\n      (thread.name ? '<span class=\"ctx postername\">'+thread.name+'</span>' : '') +\n      (thread.tripcode ? '<span class=\"ctx postertrip\">!'+thread.tripcode+'</span>' : '') +\n      (thread.posterauthority ? '<span class=\"ctx admin\">&nbsp;##'+this.authorities[thread.posterauthority]+'##</span>' : '');\n      thread.poster = '<div class=\"cat-poster\"><span class=\"ctx\">by&nbsp;</span>'+ (poster || '<span class=\"ctx c-postername\">'+(this_board_defaultName || _l.anonymous)+'</span>')+'</div>';\n\n      // Date\n      var dn = ' style=\"display:none\"';\n      thread.date = '<div class=\"ctx cat-date cat-date-long\">'+this.formatDate(thread.timestamp)+'</div>';\n      thread.dateCompact = '<div class=\"ctx cat-date cat-date-short\">'+this.formatDate(thread.timestamp, 1)+'</div>';\n\n      //search data\n      thread.searchData = _.escape(stripHTML(thread.subject + ' ' + thread.message).toLowerCase());\n\n      thread.message = thread.message.replace(/\\\\\"/mg, '\"');\n\n      thread.processed = true;\n      this.model[_.findIndex(this.model, {id: thread.id})] = thread;\n    }\n    //indicators\n    thread = this.buildIndicators(thread);\n\n    var html = this.layouts[this.conf.layout].bind(this)(thread);\n    this.rendered[this.conf.layout][thread.id] = html;\n    return html\n  },\n  buildIndicators: function(thread) {\n    thread.hidden =  HiddenItems.isHidden('thread', thread.id)\n    var pin = thread.stickied ? '<svg class=\"foradmin-act icon i-layer-1 i-pin\"><use xlink:href=\"#i-pin\"></use></svg>' : '',\n    lock = thread.locked ? '<svg class=\"foradmin-act icon i-layer-1 i-lock\"><use xlink:href=\"#i-lock\"></use></svg>' : '',\n    deathmark = thread.deleted_timestamp ? '<svg class=\"foradmin-act icon i-layer-1 i-deathmark\"><use xlink:href=\"#i-skull\"></use></svg>' : '',\n    hide = '<svg class=\"actor icon i-layer-1 i-hide'+(thread.hidden ? ' pressed' : '')+'\"><use xlink:href=\"#i-'+(thread.hidden ? 'unhide' : 'hide')+'\"></use></svg>',\n    burger = '<svg class=\"actor icon i-burger foradmin-show\"><use xlink:href=\"#i-burger\"></use></svg>',\n    del = '<svg class=\"actor icon i-layer-2 i-delete foradmin-show\"><use xlink:href=\"#i-x\"></use></svg>',\n    and = '<svg class=\"actor icon i-layer-2 i-dnb foradmin-show\"><use xlink:href=\"#i-and\"></use></svg>',\n    ban = '<svg class=\"actor icon i-layer-2 i-ban foradmin-show\"><use xlink:href=\"#i-ban\"></use></svg>';\n    thread.indicatorsCombined = '<div class=\"indicators\">'+burger+'<span class=\"i-layer-1\">'+deathmark+pin+lock+hide+'</span><span class=\"i-layer-2\">'+del+and+ban+'</span></div>';\n    return thread;\n  },\n  layouts: {\n    text: function(thread) {\n      return ''+\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-text'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\n        <div class=\"cat-card\">\\\n          <div class=\"ce-heda\">'\n            +thread.smallThumb+\n            '<div class=\"cat-infoline ci-op-link\">'\n              +thread.op\n              +thread.indicatorsCombined+\n            '</div>\\\n            <div class=\"cat-infoline namedate-overlay '+thread.nameDatePriority+'-on\">'\n              +thread.poster\n              +thread.date\n            +'</div>\\\n            <div class=\"cat-infoline\">'\n              +thread.preview\n              +thread.countersCombined+\n            '</div>\\\n          </div>\\\n          <div class=\"ce-opcontent ctx\">\\\n            <h5>'+thread.subject+'</h5>'+\n            thread.message+\n          '</div>\\\n        </div>'\n        +thread.bigThumb+\n      '</div>'\n    },\n    gallery: function(thread) {\n      return ''+\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-gallery'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\n        <div class=\"cat-card\">'+\n          thread.bigThumb+\n          '<div class=\"cat-infoline\">\\\n            <div class=\"ci-op-link\">'+thread.op+'</div>\\\n            <div class=\"counters\">'+thread.countersCombined+'</div>\\\n          </div>\\\n          <div class=\"cat-infoline\">'\n            +thread.preview+\n            '<div class=\"namedate-overlay '+thread.nameDatePriority+'-on\">'\n              +thread.poster\n              +thread.dateCompact\n            +'</div>'\n            +thread.indicatorsCombined+\n          '</div>\\\n          <div class=\"ce-opcontent ctx\">\\\n            <h5>'+thread.subject+'</h5>'+\n            thread.message+\n          '</div>\\\n        </div>\\\n      </div>'\n    }\n  }\n}\n\nfunction stripHTML(html) {\n  var tmp = document.implementation.createHTMLDocument(\"New\").body;\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText || \"\";\n}\n\nvar unreadCounter = {\n  init: function(built) {\n    if (!built) {\n      built = + document.querySelector('meta[property=\"i0:buildtime\"]').content\n    }\n    this.lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { }\n    let last_ts = this.lastvisits.hasOwnProperty(boardid) ? parseInt(this.lastvisits[boardid]) : 0;\n    if(last_ts < built) {\n      this.lastvisits[boardid] = built\n      localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\n    }\n  },\n  refreshTimestamp: function(timestamp = Math.round(new Date().getTime() / 1000)) { // PHP standard timestamp length\n    if (!this.lastvisits)\n      this.init()\n    this.lastvisits[boardid] = timestamp\n    localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\n  },\n  update: function() {\n    if (!this.lastvisits)\n      this.init()\n    $.ajax({\n      url: '/newpostscount.php',\n      data: this.lastvisits,\n      dataType: 'json',\n      success: function(data) {\n        $('.newposts-counter').remove()\n        $('.got-updates').removeClass('got-updates')\n        _.each(data, function(val, brd) {\n          if ((+val) > 0) {\n            let valstr = `<span class=\"newposts-counter\">(${val})</span>`\n            , $brd = $(`.menu-item[href=\"/${brd}/\"]`)\n            if ($brd.length) {\n              $brd.append(valstr)\n              $(`.sect-exr[data-toexpand=\"${$brd.parents('.menu-sect').attr('id').split('ms-')[1]}\"]`).parent().addClass('got-updates')\n            }\n            $(`.mobile-nav option[value=\"${brd}\"]`).append(valstr)\n          }\n        })\n      }\n    });\n  }\n}\n\nvar HTMLoader = {\n  loadThread: function(boardID, threadID, done, postID) {\n    $.get(threadID === '?'\n      ? `${ku_boardspath}/postbynumber.php?b=${boardID}&p=${postID}`\n      : `${ku_boardspath}/${boardID}/res/${threadID}.html?${force_html_nocache ? Math.random() : ''}`)\n    .then(data => {\n      let posts = data.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd:[0-9]+\\s*?<\\/div\\s*?>[\\s\\S]+?<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd-end\\s*?<\\/div\\s*?>/gi)\n      .map(match => {\n        let res = match.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd:([0-9]+)\\s*?<\\/div\\s*?>([\\s\\S]+?)<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd-end\\s*?<\\/div\\s*?>/i);\n        return {\n          id: +res[1],\n          body: res[2]\n        }\n      })\n      if (threadID === '?') {\n        let thrno = data.match(/<!--i0:thrno=([0-9]+)-->/) //wtf\n        if (thrno)\n          threadID = thrno[1]\n      }\n      if (posts.length) {\n        let postMap = posts.map(post => {\n          this.cached[`${boardID}_${post.id}`] = post.body\n          return post.id\n        })\n        if (threadID !== '?') {\n          this.threadMaps[`${boardID}_${threadID}`] = postMap\n        }\n      }\n      done()\n    })\n    .fail(err => {\n      done(err.status || 'null')\n    })\n  },\n  getPost: function(boardID, threadID, postID, callback, secondTry) {\n    let cachedPost = this.cached[`${boardID}_${postID}`]\n    if (cachedPost) {\n      callback(false, cachedPost)\n      return\n    }\n    else {\n      if (!secondTry) {\n        let found = false\n        if (boardID === this_board_dir) {\n          let $post = $(`a[name=${postID}]`)\n          if ($post.length) {\n            let post = $post.parents('.postnode')[0].outerHTML\n            this.cached[`${boardID}_${postID}`] = post\n            found = true\n            callback(false, post)\n          }\n        }\n        if (!found) {\n          this.loadThread(boardID, threadID, err => {\n            if (err) {\n              callback(err)\n            }\n            else {\n              this.getPost(boardID, threadID, postID, callback, true)\n            }\n          }, postID)\n        }\n      }\n      else {\n        callback(null)\n      }\n    }\n  },\n  getThread: function(boardID, threadID, range, callback, secondTry, force) {\n    let threadMap = force ? false : this.threadMaps[`${boardID}_${threadID}`]\n    if (threadMap) {\n      if (range) {\n        threadMap = threadMap.filter(n => n > range[0] && n < range[1])\n      }\n      callback(false, threadMap.reduce((htm, postID) => htm + this.cached[`${boardID}_${postID}`], ''))\n    }\n    else {\n      if (!secondTry) {\n        this.loadThread(boardID, threadID, err => {\n          if (err) {\n            callback(err)\n          }\n          else {\n            this.getThread(boardID, threadID, range, callback, true)\n          }\n        })\n      }\n      else {\n        callback(null)\n      }\n    }\n  },\n  cached: {},\n  threadMaps: {}\n}\n\nfunction switchFileType(el) {\n  let exp = /\\.([a-z0-9]+)(?=$|\\?)/i\n  , match = el.src.match(exp)\n  if (!match) return;\n  let exts = el.getAttribute('extset').toLowerCase().split(',')\n  if (!exts.length) return;\n  let i = exts.indexOf(match[1].toLowerCase())\n  if (i == -1 || i >= (exts.length-1)) return;\n  el.src = el.src.replace(exp, `.${exts[i+1]}`)\n}\n\nfunction LSfetchJSON(key) {\n  let val = null, data = localStorage[key]\n  if (typeof data !== 'undefined') {\n    try {\n      val = JSON.parse(data)\n    }\n    catch(e) {\n      console.error(e)\n      localStorage.removeItem(key)\n    }\n  }\n  return val\n}\n\n// YOBA alerts\nvar pups = {\n  push: function(a) {\n    // generate a unique alert ID\n    a.id = (+_.uniqueId(_.now())).toString(16)\n    this.container.insertAdjacentHTML('afterBegin', this.buildAlert(a))\n    a.el = document.getElementById(`pup_${a.id}`)\n    // Add the popup to the animation queue\n    a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n    a.el.getBoundingClientRect() // This forces browser to respect the element's updated position for future animations (no idea why but it works)\n    // Close on click\n    a.el.onclick = () => {\n      delete a.timeout\n      a.onHold = false\n      a.old = true\n      a.el.classList.add('pup-away')\n      a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n    }\n    // Do not close if mouse is over\n    a.el.onmouseenter = () => {\n      // iterate stack from end to start\n      this.stack.slice(0).reverse().find(ar => {\n        ar.onHold = true\n        return (ar.id == a.id) // break\n      })\n    }\n    // Close after mouse leave\n    a.el.onmouseleave = () => {\n      this.stack.forEach(ae => {\n        ae.onHold = false\n      })\n      this.holdOffTimeout = setTimeout(() => {\n        this.stack.forEach(ae => {\n          if (!ae.onHold && ae.old && ae.el) {\n            ae.el.classList.add('pup-away')\n            ae.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n          }\n        })\n      }, 200)\n    }\n    this.queue.add(() => {\n      this.scheduleClose(a)\n      a.el.classList.remove('pup-pre')\n      a.el.style.marginTop = null\n      a.el.classList.remove('pup-noshadow')\n    })\n    this.stack.push(a)\n    this.save()\n    return a.id\n  },\n  closeByID: function(aid) {\n    let a = this.byID(aid)\n    if (a)\n      a.el.onclick()\n  },\n  queue: {\n    stack: [],\n    busy: false,\n    add: function(fn) {\n      return new Promise((resolve, reject) => {\n        if (! this.busy) {\n          this.timeout = setTimeout(this.next.bind(this), this.cooldown * 1000)\n          this.busy = true\n          resolve(fn())\n        }\n        else {\n          this.stack.push(() => resolve(fn()))\n        }\n      })\n    },\n    next: function() {\n      let next = this.stack.shift()\n      if (! next)\n        this.busy = false\n      else {\n        next()\n        this.timeout = setTimeout(this.next.bind(this), this.cooldown * 1000)\n      }\n    },\n    cooldown: .3\n  },\n  byID: function(aid) {\n    return this.stack.find(a => a.id == aid)\n  },\n  update: function(aid, upd) {\n    let a = this.byID(aid)\n    if (typeof upd !== 'object')\n      a = {msg: upd}\n    _.extend(a, upd)\n    // reset timeout\n    this.scheduleClose(a)\n    a.el.setAttribute('pupclass', a.cls)\n    a.el.querySelector('.pup-wrapped').innerHTML = this.buildAlert(a, 1)\n    this.save()\n  },\n  buildAlert: function(a, contentsOnly=false) {\n    let contents = `\n      <div class=\"alert-icon\">\n        <svg class=\"icon\"><use xlink:href=\"#i-${this.iconMap[a.cls]}\"></use></svg>\n      </div>\n      <div class=\"alert-msg\">${a.msg}</div>`\n    if (contentsOnly)\n      return contents\n    return `<div class=\"pup ${a.old ? 'pup-away pup-away-full' : 'pup-pre pup-noshadow'}\" pupclass=\"${a.cls}\" id=\"pup_${a.id}\">\n      <div class=\"pup-wrapped\">\n        ${contents}\n      </div>\n    </div>`\n  },\n  iconMap: {\n    succ: 'success',\n    err: 'error',\n    info: 'info',\n    warn: 'warning'\n  },\n  historyToggle: function() {\n    if (!this.stack.length) {\n      this.push({cls: 'info', msg: _l.historyEmpty, destroy: true})\n      return\n    }\n    let on = this.container.classList.toggle('history-mode')\n    setTimeout(() => this.container.style.overflow = (on ? 'auto' : null), on ? 300 : 0)\n  },\n  scheduleClose: function(a) {\n    if (a.timeout)\n      clearTimeout(a.timeout)\n    if (a.onHold)\n      a.onHold = false\n    let time = (a.time || a.time === 0) ? a.time : this.defaultTimeout\n    if (time) // If time is 0 it means no timeout\n      a.timeout = setTimeout(() => {\n        a.old = true\n        if (! a.onHold) {\n          a.el.classList.add('pup-away')\n          a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n        }\n      }, time * 1000)\n  },\n  defaultTimeout: 3.5, // in seconds\n  init: function(container_id=\"pups-container\") {\n    document.body.insertAdjacentHTML('beforeEnd', `<div id=\"${container_id}\"><div class=\"pup-history-shadow\"></div></div>`)\n    this.container = document.getElementById(container_id)\n    if (! this.container) {\n      console.error('No popup container found')\n      return;\n    }\n    this.container.onclick = () => {\n      if (this.container.classList.contains('history-mode')) {\n        return this.historyToggle()\n      }\n    }\n    // make aliases for error classes\n    ['err', 'warn', 'info', 'succ', 'wait'].forEach(pupclass => {\n      this[pupclass] = function(a, options={}) {\n        if (typeof a !== 'object')\n          a = {msg: a}\n        a.cls = pupclass\n        _.extend(a, options)\n        return this.push(a)\n      }\n    })\n    // load history from LS\n    let log = LSfetchJSON('I0_event_log') || []\n    log.forEach(a => {\n      a.old = true\n      this.container.insertAdjacentHTML('afterBegin', this.buildAlert(a))\n      this.stack.push(a)\n    })\n  },\n  historySize: 10,\n  save: function() {\n    let ss = [] \n    _.cloneDeep(this.stack).forEach(a => {\n      if (a.save) {\n        // Clear stack from the properties that don't need to be saved\n        ['old', 'onHold', 'timeout', 'el', 'save'].forEach(junkProperty => delete a[junkProperty])\n        ss.push(a)\n      }\n    })\n    while (ss.length > this.historySize) {\n      ss.shift()\n    }\n    localStorage['I0_event_log'] = JSON.stringify(ss)\n  },\n  stack: []\n}\n"]}