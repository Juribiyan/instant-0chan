{"version":3,"sources":["es6/src/kusaba.new.js"],"names":["style_cookie","style_cookie_txt","style_cookie_site","kumod_set","ispage","is_entering","_messages","en","noLocalStorage","oops","blankResponse","watchlistAdd","expandingThread","newThread","NewThread","replyTo","cancel","update","updatingCounts","couldntFetch","noNewPosts","replies","settings_fxEnabled","settings_showReplies","settings_sfwMode","settings_expandImgFull","deletePost","deleteAndBan","enterCaptcha","selectText","dcls","watchOn","captcharot","threadUpdationAutomatically","stopFuckingDolls","del","delandban","ban","stickthread","unstickthread","lockthread","unlockthread","returnDesktop","returnTouch","forceDesktop","okay","captchalang","reply","imageDownscaledBy","videoDownscaledBy","toFit","newReplies","newThreadsAvailable","loading","anonymous","sortBy","bumpOrder","lastReply","creationDate","replyCount","doStick","showHidden","doNotStick","hideHidden","search","threadOnPage","goToThread","smallPics","largePics","legacyMode","threads","comments","active_since","last_active","active_on","tryAgain","xhrError","details","ru","watchlistRemove","odc","_l","locale","hasOwnProperty","trace","console","log","f","arguments","callee","caller","path","re","fname","exec","toString","args","i","length","push","join","Array","prototype","indexOf","elt","len","from","Math","ceil","floor","Utf8","encode","string","replace","c","utftext","n","charCodeAt","String","fromCharCode","decode","c2","c3","Cookie","name","regexp","RegExp","hit","document","cookie","unescape","replaceAll","value","days","expires","date","Date","setTime","getTime","toGMTString","str","to","idx","insert","text","textarea","$","css","find","createTextRange","caretPos","charAt","setSelectionRange","start","selectionStart","end","selectionEnd","substr","focus","markup","$target","istart","iend","element","get","startPos","endPos","selected","substring","bullets","bullet","$area","val","split","newtxt","quote","b","a","v","eval","checkhighlight","match","location","highlight","id","offTimeout","removeClass","$post","parents","post","addClass","setTimeout","bcr","getBoundingClientRect","docHeight","documentElement","clientHeight","bottom","top","postX","scrollTop","spaceAround","height","window","scrollTo","get_password","pass","getCookie","chars","rnd","random","togglePassword","passwordbox_html","html","toLowerCase","newhtml","show","toggleOptions","set_cookie","Styles","all","titles","init","_","each","getElementsByTagName","link","getAttribute","_default","hasAttribute","custom","current","customBypass","this_board_dir","in_array","initiated","decide","testingCSS","localStorage","title","addStyle","setStyle","$clink","click","ev","preventDefault","quitTest","parent","slideUp","$cancelLink","append","setCustom","sc","setDefault","change","stylename","removeBypass","addBypass","oldcookie","newcookie","brd","scrollAnchor","save","sheet","disabled","restore","onTest","url","m","capitalize","escape","$link","testStyle","popupMessage","$confirm","confirmLongTermTest","bind","$reject","$btns","setItem","removeItem","delandbanlinks","$scope","force","dnbinfo","attr","ku_cgipath","delPost","HiddenThreads","list","getItem","isHidden","threadid","hide","alert","newlist","unhide","slice","concat","togglethread","slideDown","toggleblotter","slideToggle","is","hideblotter","expandthread","board","$thread","expandFrom","expandTo","$omitted","$msg","prependTo","HTMLoader","getThread","err","posts","replaceWith","replyMap","showReplies","getnewposts","scrollToID","onError","$lastQrl","last","lastpost","data","replies_container","$newposts_get","querySelector","Infinity","insertAdjacentHTML","allPosts","querySelectorAll","targetReply","call","showLinks","href","ku_boardspath","offset","left","fadeIn","goingExternal","quickreply","externalBoard","preferUnpinned","appearsNew","isTouch","position","opacity","round","width","getwatchedthreads","ajax","success","error","xhr","status","content","delay","children","after","fadeOut","addtowatchedthreads","removefromwatchedthreads","hidewatchedthreads","showwatchedthreads","reload","Captcha","refresh","injector","inject","captchaTimeout","shownOnce","cColor","offsetWidth","forEach","input","refreshOnce","checkcaptcha","formid","handleSubmit","form","captchafield","ffdata","Ajax","submitPost","fd","FormData","xr","XMLHttpRequest","open","action","onload","res","JSON","parse","response","e","error_type","error_verbose","resetForm","noko","checked","thread_replyto","post_id","send","expandimg","postnum","imgurl","thumburl","imgw","imgh","thumbw","thumbh","getElementById","$reply","event","which","Settings","expandImgFull","img","max_w","clientWidth","body","offset_el","offsetLeft","offsetParent","new_w","ratio","zoom","notice","createElement","setAttribute","style","textDecoration","textNode","createTextNode","appendChild","insertBefore","innerHTML","PostPreviews","zindex","cached","_parseURL","matches","_mouseover","stopPropagation","isCatalog","hasClass","parsedURL","parentid","postid","previewid","preview","first","before","mouseleave","_mouseout","mouseover","onMouseOver","transformOrigin","clientY","pageY","clientX","pageX","right","zIndex","cursor","getPost","clearTimeout","fadeout","predelay","pre","remove","_timings","transition","fade","postpreview","set_inputs","em","postpassword","set_delpass","special","load","add","callback","nodeType","tagName","src","complete","readyState","handler","apply","trigger","jQuery","_checkbox","clicked","settingName","defaultValue","removeAttr","fxEnabled","changed","enabled","fx","off","sfwMode","rswap","swap","DocumentTouch","setCaptchaLang","lang","readyset","prepend","LatexIT","checkgotothread","checknamesave","bnrs","cloud20","on","filter","processNodeInsertion","menu_show","mouseenter","toggleClass","target","head","js","OpenLatexEditor","expandwebm","newid","hover","dragsOff","drags","pinnerState","pinner","appendTo","s","textbox","onfocus","onblur","xl","animate","htm","strip","select","unwrap","originalEvent","animationName","countries","toUpperCase","dcxt","performTasks","embedLinks","process","code","site","is_catalog","catalog","trip","getJSON","done","formatDate","fail","cssLink","prop","unreadCounter","$node","prettyPrint","render","processEmbeds","tries","tasks","openSettings","closeSettings","addTask","fn","task","updater","ajaxPosting","newThreads","showNewThreads","thread","token","clearfields","lastvisits","timestamp","boardid","stringify","bpageNotify","room","newthread","$label","$form","xsend","tmp","textContent","innerText","container","vidID","ku_youtube_apikey","items","videotitle","snippet","thumbnail","thumbnail_large","thumbnail_url","kumod","mp3playerid","expandmp3","display","swfplayerid","expandswf","w","h","$mov","movieurl","dt","uid","makeid","video","play","promise","pause","possible","checkd","doc","navigatepages","ctrlKey","docloc","keyCode","submit","page","docloc_trimmed","lastIndexOf","docloc_valid","relativepost","maxthreads","getElementsByName","newrelativepost","addEventListener","attachEvent","NodeList","root","msg","repliesContainer","links","linkData","className","linkN","includes","skip","elements","dimensions","mid","innerWidth","innerHeight","elMap","parentBCR","elems","el","relativeVisibleWidth","pos","relativeVisibleHeight","dx","abs","dy","primaryVisibility","secondaryVisibility","primaryOffset","secondaryOffset","sort","anchor","bcrBefore","saved","loaded","requestAnimationFrame","bcrAfter","scrollBy","x","lastTime","vendors","cancelAnimationFrame","currTime","timeToCall","max","menu_current","menu_last","dl","queue","clearQueue","menu_pin","set_oldmenu","mode","implementation","hasFeature","eqn","txt","atxt","extxt","r","g","replaceWithSrc","scope","normalizergb","toFixed","normalizergba","needle","haystack","triggerNativeEvent","eventName","fireEvent","evt","createEvent","initEvent","dispatchEvent","opt","extend","handle","$el","$drag","z_idx","drg_h","outerHeight","drg_w","outerWidth","pos_y","pos_x","pin","scrollLeft","empty","vid","youtube","vimeo","coub","triggerNative","ajaxSubmit","beforeSubmit","responseText","resp","onlycaptcha","randomString","stop","rottencaptcha","rotCaptcha","fields","field","alias","existing","type","styleSheet","cssText","removeChild","result","allboards","query","desc","opts","item","ku_boardsfolder","reduced","bnr","toDisplay","randomItem","getRandomInt","min","array","savedOn","savedon","unload","key","sites","rx","fruit","onbeforeunload","conf","layout","respectStickied","expandOnHover","saveConfig","myConf","val_desc","sortBtns","v_d_i","pinBtns","hideBtns","layoutBtns","searchInput","$card","getEmbedThumb","currentTarget","threadID","threadIX","findIndex","model","hidden","classList","rendered","$group","build","gallery","fileTypes","image","iconsAvailable","audio","embed","authorities","short","Dow","dateLocal","dows","getDay","yy","padLeft","getFullYear","mo","getMonth","Mon","mons","dd","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","entry","sortByOrder","sby","repeat","buildEntry","outerHTML","thumbnail_medium","processed","file","smallThumb","file_type","fileTypeClass","bigThumb","smallSrc","expandable","op","repliesLabel","reply_count","last_reply","images","countersCombined","posterauthority","nameDatePriority","tripcode","poster","this_board_defaultName","dateCompact","searchData","stripHTML","subject","message","buildIndicators","layouts","stickied","lock","locked","deathmark","deleted_timestamp","indicatorsCombined","createHTMLDocument","localMod","built","last_ts","parseInt","dataType","valstr","$brd","loadThread","boardID","postID","then","map","thrno","postMap","threadMaps","secondTry","cachedPost","found","range","threadMap","reduce"],"mappings":"AAAA,a,oOAEIA,Y,CACAC,gB,CACAC,iB,CACAC,Y,CACAC,M,CACAC,c,CAEAC,UAAY,CACdC,GAAI,CACFC,eAAgB,4CADd,CAEFC,KAAM,yBAFJ,CAGFC,cAAe,gBAHb,CAIFC,aAAc,+KAJZ,CAKFC,gBAAiB,qBALf,CAMFC,UAAW,YANT,CAOFC,UAAW,YAPT,CAQFC,QAAS,UARP,CASFC,OAAQ,QATN,CAUFC,OAAQ,QAVN,CAWFC,eAAgB,aAXd,CAYFC,aAAc,0BAZZ,CAaFC,WAAY,cAbV,CAcFC,QAAS,SAdP,CAeFC,mBAAoB,mBAflB,CAgBFC,qBAAsB,2BAhBpB,CAiBFC,iBAAkB,WAjBhB,CAkBFC,uBAAwB,4BAlBtB,CAmBFC,WAAY,aAnBV,CAoBFC,aAAc,4BApBZ,CAqBFC,aAAc,uBArBZ,CAsBFC,WAAY,kBAtBV,CAuBFC,KAAM,6BAvBJ,CAwBFC,QAAS,UAxBP,CAyBFC,WAAY,oBAzBV,CA0BFC,4BAA6B,uCA1B3B,CA2BFC,iBAAkB,sYA3BhB,CA4BFC,IAAK,QA5BH,CA6BFC,UAAW,gBA7BT,CA8BFC,IAAK,KA9BH,CA+BFC,YAAa,cA/BX,CAgCFC,cAAe,gBAhCb,CAiCFC,WAAY,aAjCV,CAkCFC,aAAc,eAlCZ,CAmCFC,cAAe,6BAnCb,CAoCFC,YAAa,2BApCX,CAqCFC,aAAc,yBArCZ,CAsCFC,KAAM,MAtCJ,CAuCFC,YAAa,kBAvCX,CAwCFC,MAAO,OAxCL,CAyCFC,kBAAmB,yBAzCjB,CA0CFC,kBAAmB,yBA1CjB,CA2CFC,MAAO,gBA3CL,CA4CFC,WAAY,aA5CV,CA6CFC,oBAAqB,wBA7CnB,CA8CFC,QAAS,SA9CP,CA+CFC,UAAW,WA/CT,CAgDFC,OAAQ,SAhDN,CAiDFC,UAAW,YAjDT,CAkDFC,UAAW,YAlDT,CAmDFC,aAAc,eAnDZ,CAoDFC,WAAY,aApDV,CAqDFC,QAAS,kBArDP,CAsDFC,WAAY,aAtDV,CAuDFC,WAAY,iBAvDV,CAwDFC,WAAY,aAxDV,CAyDFC,OAAQ,QAzDN,CA0DFC,aAAc,mBA1DZ,CA2DFC,WAAY,cA3DV,CA4DFC,UAAW,gBA5DT,CA6DFC,UAAW,gBA7DT,CA8DFC,WAAY,aA9DV,CA+DFC,QAAS,SA/DP,CAgEFC,SAAU,SAhER,CAiEFC,aAAc,cAjEZ,CAkEFC,YAAa,WAlEX,CAmEFC,UAAW,WAnET,CAoEFC,SAAU,WApER,CAqEFC,SAAU,WArER,CAsEFC,QAAS,SAtEP,CADU,CAyEdC,GAAI,CACFtE,eAAgB,uKADd,CAEFC,KAAM,mGAFJ,CAGFC,cAAe,qEAHb,CAIFC,aAAc,+KAJZ,CAKFoE,gBAAiB,yKALf,CAMFnE,gBAAiB,4GANf,CAOFC,UAAW,yDAPT,CAQFC,UAAW,qEART,CASFC,QAAS,6CATP,CAUFC,OAAQ,sCAVN,CAWFC,OAAQ,kDAXN,CAYFC,eAAgB,2FAZd,CAaFC,aAAc,kKAbZ,CAcFC,WAAY,wFAdV,CAeFC,QAAS,sCAfP,CAgBFC,mBAAoB,2HAhBlB,CAiBFC,qBAAsB,uKAjBpB,CAkBFC,iBAAkB,kFAlBhB,CAmBFC,uBAAwB,gPAnBtB,CAoBFC,WAAY,qEApBV,CAqBFC,aAAc,wKArBZ,CAsBFC,aAAc,0IAtBZ,CAuBFC,WAAY,wFAvBV,CAwBFC,KAAM,6BAxBJ,CAyBFC,QAAS,+DAzBP,CA0BFiD,IAAK,0CA1BH,CA2BFhD,WAAY,iFA3BV,CA4BFC,4BAA6B,4KA5B3B,CA6BFC,iBAAkB,sYA7BhB,CA8BFC,IAAK,4CA9BH,CA+BFC,UAAW,oGA/BT,CAgCFC,IAAK,kDAhCH,CAiCFC,YAAa,uFAjCX,CAkCFC,cAAe,2EAlCb,CAmCFC,WAAY,qEAnCV,CAoCFC,aAAc,qEApCZ,CAqCFC,cAAe,iNArCb,CAsCFC,YAAa,uKAtCX,CAuCFC,aAAc,yBAvCZ,CAwCFC,KAAM,0BAxCJ,CAyCFC,YAAa,yDAzCX,CA0CFC,MAAO,kDA1CL,CA2CFC,kBAAmB,8FA3CjB,CA4CFC,kBAAmB,4EA5CjB,CA6CFC,MAAO,kFA7CL,CA8CFC,WAAY,2EA9CV,CA+CFC,oBAAqB,iHA/CnB,CAgDFC,QAAS,wDAhDP,CAiDFC,UAAW,sCAjDT,CAkDFC,OAAQ,iFAlDN,CAmDFC,UAAW,sCAnDT,CAoDFC,UAAW,qEApDT,CAqDFC,aAAc,2EArDZ,CAsDFC,WAAY,2EAtDV,CAuDFC,QAAS,oEAvDP,CAwDFC,WAAY,yGAxDV,CAyDFC,WAAY,iFAzDV,CA0DFC,WAAY,6FA1DV,CA2DFC,OAAQ,gCA3DN,CA4DFC,aAAc,uKA5DZ,CA6DFC,WAAY,4EA7DV,CA8DFC,UAAW,uFA9DT,CA+DFC,UAAW,6FA/DT,CAgEFC,WAAY,uFAhEV,CAiEFC,QAAS,sCAjEP,CAkEFC,SAAU,4CAlER,CAmEFC,aAAc,gFAnEZ,CAoEFC,YAAa,+DApEX,CAqEFC,UAAW,yDArET,CAsEFC,SAAU,mGAtER,CAuEFC,SAAU,0CAvER,CAwEFC,QAAS,oEAxEP,CAzEU,C,CAqJZI,GAAwB,WAAlB,QAAOC,OAAP,EAAiC5E,UAAU6E,cAAV,CAAyBD,MAAzB,CAAlC,CAAsE5E,UAAU4E,MAAV,CAAtE,CAA0F5E,UAAUwE,E,CAE7G,QAASM,MAAT,EAAiB,CACf,GAAKC,QAAQC,GAAb,EAEA,GAAIC,GAAIC,UAAUC,MAAV,CAAiBC,MAAzB,CACIC,EAAOH,UAAU,CAAV,CADX,CAFA,IAIY,EAAR,GAJJ,GAIgBG,GAAQ,SAJxB,EAMY,IAAL,GANP,EAMkB,CAChB,GAAIC,GAAK,mBAAT,CACIC,EAAQD,EAAGE,IAAH,CAAQP,EAAEQ,QAAF,EAAR,CADZ,CAEmBF,CAHH,CAGH,IAAT,GAHY,CAGW,EAHX,CAG4BA,EAAM,CAAN,CAH5B,CAKhB,IAAK,GADDG,KACC,CAAIC,EAAI,CAAb,CAAgBA,EAAIV,EAAEC,SAAF,CAAYU,MAAhC,CAAwCD,GAAxC,CAA6CD,EAAKG,IAAL,CAAUZ,EAAEC,SAAF,CAAYS,CAAZ,CAAV,EAC7CJ,GAAS,IAAMG,EAAKI,IAAL,CAAU,IAAV,CAAN,CAAwB,GANjB,CAOhBT,GAAQ,OAASE,CAPD,CAQhBN,EAAIA,EAAEG,MACP,CACDL,QAAQC,GAAR,CAAYK,CAAZ,CAhBA,CAiBD,CAGIU,MAAMC,SAAN,CAAgBC,O,GACnBF,MAAMC,SAAN,CAAgBC,OAAhB,CAA0B,SAASC,CAAT,CAAyB,CACnD,GAAIC,GAAM,KAAKP,MAAf,CAEIQ,EAAO,CAAOlB,UAAU,CAAV,CAAP,EAAwB,CAFnC,CASA,IANAkB,EAAe,CAAP,EAAD,CACFC,KAAKC,IAAL,CAAUF,CAAV,CADE,CAEFC,KAAKE,KAAL,CAAWH,CAAX,CAIL,CAHW,CAAP,EAGJ,GAFEA,GAAQD,CAEV,EAAOC,EAAOD,CAAd,CAAmBC,GAAnB,CACE,GAAIA,IAAQ,KAAR,EACF,KAAKA,CAAL,IAAeF,CADjB,CAEA,MAAOE,EAAP,CAEF,MAAO,CAAC,CACP,C,EAIH,GAAII,MAAO,CAETC,OAAS,gBAAUC,CAAV,CAAkB,CACzBA,EAASA,EAAOC,OAAP,CAAe,OAAf,CAAuB,IAAvB,CADgB,CAGzB,IAAK,GACCC,EADD,CADDC,EAAU,EACT,CAAIC,EAAI,CAAb,CAAgBA,EAAIJ,EAAOd,MAA3B,CAAmCkB,GAAnC,CACMF,CADN,CACUF,EAAOK,UAAP,CAAkBD,CAAlB,CADV,CAEU,GAAJ,EAFN,CAGID,GAAWG,OAAOC,YAAP,CAAoBL,CAApB,CAHf,CAKe,GAAJ,EAAD,EAAkB,IAAJ,EALxB,EAMIC,GAAWG,OAAOC,YAAP,CAA+B,GAAX,CAACL,GAAK,CAA1B,CANf,CAOIC,GAAWG,OAAOC,YAAP,CAA+B,GAAX,CAAK,EAAJ,EAArB,CAPf,GAUIJ,GAAWG,OAAOC,YAAP,CAAgC,GAAZ,CAACL,GAAK,EAA1B,CAVf,CAWIC,GAAWG,OAAOC,YAAP,CAAsC,GAAlB,CAAY,EAAX,CAACL,GAAK,CAA3B,CAXf,CAYIC,GAAWG,OAAOC,YAAP,CAA+B,GAAX,CAAK,EAAJ,EAArB,CAZf,EAeA,MAAOJ,EACR,CArBQ,CAuBTK,OAAS,gBAAUL,CAAV,CAAmB,KAC1B,GAAIH,GAAS,EAAb,CAAiBf,EAAI,CAArB,CAAwBiB,EAAI,CAA5B,CAAuCO,EAAK,CAA5C,CAA+CC,EAAK,CAD1B,CAElBzB,EAAIkB,EAAQjB,MAFM,EAGxBgB,EAAIC,EAAQE,UAAR,CAAmBpB,CAAnB,CAHoB,CAIhB,GAAJ,EAJoB,EAKtBe,GAAUM,OAAOC,YAAP,CAAoBL,CAApB,CALY,CAMtBjB,GANsB,EAQX,GAAJ,EAAD,EAAkB,GAAJ,EARE,EAStBwB,EAAKN,EAAQE,UAAR,CAAmBpB,EAAE,CAArB,CATiB,CAUtBe,GAAUM,OAAOC,YAAP,CAAqB,CAAK,EAAJ,EAAD,GAAY,CAAb,CAAwB,EAAL,EAAvC,CAVY,CAWtBtB,GAAK,CAXiB,GActBwB,EAAKN,EAAQE,UAAR,CAAmBpB,EAAE,CAArB,CAdiB,CAetByB,EAAKP,EAAQE,UAAR,CAAmBpB,EAAE,CAArB,CAfiB,CAgBtBe,GAAUM,OAAOC,YAAP,CAAqB,CAAK,EAAJ,EAAD,GAAY,EAAb,CAAoB,CAAM,EAAL,EAAD,GAAa,CAAjC,CAA4C,EAAL,EAA3D,CAhBY,CAiBtBtB,GAAK,CAjBiB,EAoB1B,MAAOe,EACR,CA5CQ,CAAX,CA+CA,QAASW,OAAT,CAAgBC,CAAhB,CAAsB,CACpB,GAAwB,CAApB,YAAU1B,MAAd,CAA2B,CAEvB,GAAI2B,GAAO,GAAIC,OAAJ,CAAW,YAAYF,CAAZ,CAAiB,aAA5B,CAAX,CACIG,EAAIF,EAAO/B,IAAP,CAAYkC,SAASC,MAArB,CADR,CAFuB,MAIpBF,IAAgB,CAAX,GAAI7B,MAJW,CAIMY,KAAKU,MAAL,CAAYU,SAASC,WAAWJ,EAAI,CAAJ,CAAX,CAAkB,GAAlB,CAAsB,KAAtB,CAAT,CAAZ,CAJN,CAKX,EAEf,CACC,GAAIK,GAAQ5C,UAAU,CAAV,CAAZ,CACE6C,EAAO7C,UAAU,CAAV,CADT,CAEE8C,EAAQ,EAFV,CAGA,GAAGD,CAAH,CAAS,CACP,GAAIE,GAAK,GAAIC,KAAb,CACAD,EAAKE,OAAL,CAAaF,EAAKG,OAAL,GAAgB,KAAW,EAAX,EAAQ,EAAR,EAAK,EAAL,KAA7B,CAFO,CAGPJ,EAAQ,aAAaC,EAAKI,WAAL,EACtB,CACDX,SAASC,MAAT,CAAgBL,EAAK,GAAL,CAASQ,CAAT,CAAeE,CAAf,CAAuB,UAE1C,CAGD,QAASH,WAAT,CAAoBS,CAApB,CAAyBlC,CAAzB,CAA+BmC,CAA/B,CAAmC,KACjC,GAAIC,GAAMF,EAAIrC,OAAJ,CAAaG,CAAb,CADuB,CAEnB,CAAC,CAAP,EAFyB,EAG/BkC,EAAMA,EAAI3B,OAAJ,CAAaP,CAAb,CAAmBmC,CAAnB,CAHyB,CAI/BC,EAAMF,EAAIrC,OAAJ,CAAaG,CAAb,CAJyB,CAMjC,MAAOkC,EACR,CAGD,QAASG,OAAT,CAAgBC,CAAhB,CAAsB,CACpB,GAAIC,GAAW,CAAEC,EAAE,YAAF,EAAgBhD,MAAhB,EAA6D,MAAnC,KAAE,YAAF,EAAgBiD,GAAhB,CAAoB,SAApB,CAA3B,CAAwED,EAAE,YAAF,CAAxE,CAA0FA,EAAE,WAAF,CAA3F,EAA2GE,IAA3G,CAAgH,UAAhH,EAA4H,CAA5H,CAAf,CACA,GAAGH,CAAH,CAAa,CACX,GAAGA,EAASI,eAAT,EAA4BJ,EAASK,QAAxC,CAAkD,CAChD,GAAIA,GAASL,EAASK,QAAtB,CACAA,EAASN,IAAT,CAA4D,GAA9C,IAASA,IAAT,CAAcO,MAAd,CAAqBD,EAASN,IAAT,CAAc9C,MAAd,CAAqB,CAA1C,EAAkD8C,EAAK,GAAvD,CAA2DA,CAC1E,CAHD,IAGO,IAAGC,EAASO,iBAAZ,CAA+B,CACpC,GAAIC,GAAMR,EAASS,cAAnB,CACIC,EAAIV,EAASW,YADjB,CAEAX,EAASb,KAAT,CAAea,EAASb,KAAT,CAAeyB,MAAf,CAAsB,CAAtB,CAAwBJ,CAAxB,EAA+BT,CAA/B,CAAoCC,EAASb,KAAT,CAAeyB,MAAf,CAAsBF,CAAtB,CAHf,CAIpCV,EAASO,iBAAT,CAA2BC,EAAMT,EAAK9C,MAAtC,CAA6CuD,EAAMT,EAAK9C,MAAxD,CACD,CALM,IAML+C,GAASb,KAAT,EAAgBY,EAAK,GANhB,CAQPC,EAASa,KAAT,EACD,CAfmB,MAgBkB,MAAnC,KAAE,YAAF,EAAgBX,GAAhB,CAAoB,SAApB,CAhBiB,QAiBrB,CAED,QAASY,OAAT,CAAgBC,CAAhB,CAAyBP,CAAzB,CAAgCE,CAAhC,CAAqCM,CAArC,CAA6CC,CAA7C,CAAmD,CACjD,GAAIC,GAAUH,EAAQZ,IAAR,CAAa,UAAb,EAAyBgB,GAAzB,CAA6B,CAA7B,CAAd,CACA,GAAID,EAAQT,cAAR,EAAoD,GAA1B,IAAQA,cAAtC,CAA6D,CAC3DS,EAAQL,KAAR,EAD2D,CAE3D,GAAIO,GAAWF,EAAQT,cAAvB,CACEY,EAASH,EAAQP,YADnB,CAEEW,EAAWJ,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwBH,CAAxB,CAAkCC,CAAlC,CAFb,CAG+B,CAAC,CAA7B,KAAS/D,OAAT,CAAiB,IAAjB,GAAqD,WAAlB,QAAO0D,EAA1C,EAAoF,WAAhB,QAAOC,EALnB,GAMzDT,EAAQQ,CANiD,CAMzCN,EAAMO,CANmC,EAQ3DC,EAAQ/B,KAAR,CAAgB+B,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwB,CAAxB,CAA2BH,CAA3B,EAAuCZ,CAAvC,CAA+CU,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwBH,CAAxB,CAAkCC,CAAlC,CAA/C,CAA2FX,CAA3F,CAAiGQ,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwBF,CAAxB,CAAgCH,EAAQ/B,KAAR,CAAclC,MAA9C,CAClH,CATD,IAUEiE,GAAQ/B,KAAR,EAAiBqB,EAAQE,CAE5B,CAED,QAASc,QAAT,CAAiBT,CAAjB,CAA0BU,CAA1B,CAAkCT,CAAlC,CAA0CC,CAA1C,CAAgD,CAC9C,GAAIS,GAAQX,EAAQZ,IAAR,CAAa,UAAb,CAAZ,CACEe,EAAUQ,EAAMP,GAAN,CAAU,CAAV,CADZ,CAEEC,EAAWF,EAAQT,cAFrB,CAGEY,EAASH,EAAQP,YAHnB,CAIEW,EAAWI,EAAMC,GAAN,GAAYJ,SAAZ,CAAsBH,CAAtB,CAAgCC,CAAhC,CAJb,CAKA,GAA+B,CAAC,CAA7B,KAAS/D,OAAT,CAAiB,IAAjB,GAAqD,WAAlB,QAAO0D,EAA1C,EAAoF,WAAhB,QAAOC,EAA9E,CACEC,EAAQ/B,KAAR,CAAgB+B,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwB,CAAxB,CAA2BH,CAA3B,EAAuCJ,CAAvC,CAAgDE,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwBH,CAAxB,CAAkCC,CAAlC,CAAhD,CAA4FJ,CAA5F,CAAmGC,EAAQ/B,KAAR,CAAcoC,SAAd,CAAwBF,CAAxB,CAAgCH,EAAQ/B,KAAR,CAAclC,MAA9C,CADrH,KAGK,CACHqE,EAAWI,EAAMC,GAAN,GAAYJ,SAAZ,CAAsBH,CAAtB,CAAgCC,CAAhC,EAAwCO,KAAxC,CAA8C,IAA9C,CADR,CAGH,IAAI,GADAC,GAAS,EACT,CAAI7E,EAAE,CAAV,CAAaA,EAAEsE,EAASrE,MAAxB,CAAgCD,GAAhC,CACE6E,GAAWJ,EAASH,EAAStE,CAAT,CADtB,CAEKA,EAAKsE,EAASrE,MAAT,CAAkB,CAF5B,GAEgC4E,GAAU,IAF1C,EAIAH,EAAMC,GAAN,CACED,EAAMC,GAAN,GAAYJ,SAAZ,CAAsB,CAAtB,CAAyBH,CAAzB,EACES,CADF,CAEAH,EAAMC,GAAN,GAAYJ,SAAZ,CAAsBF,CAAtB,CAHF,CAKD,CACF,CAED,QAASS,MAAT,CAAeC,CAAf,CAAkBC,CAAlB,CAAqB,CACnB,GAAIC,GAAIC,KAAK,YAAcF,CAAd,CAAkB,UAAvB,CAAR,CACAC,EAAE9C,KAAF,EAAW,KAAO4C,CAAP,CAAW,IAFH,CAGnBE,EAAEpB,KAAF,EACD,CAED,QAASsB,eAAT,EAA0B,CACxB,GAAIC,EAAJ,CADwB,CAErBA,EAAM,aAAavF,IAAb,CAAkBkC,SAASsD,QAAT,CAAkBvF,QAAlB,EAAlB,CAFe,GAGnB,CAACmD,EAAE,oBAAF,EAAwB0B,GAAxB,EAHkB,EAIpB7B,OAAO,KAAKsC,EAAM,CAAN,CAAZ,CAJoB,EAKrBA,EAAM,YAAYvF,IAAZ,CAAiBkC,SAASsD,QAAT,CAAkBvF,QAAlB,EAAjB,CALe,GAMtBwF,UAAUF,EAAM,CAAN,CAAV,CACH,CAED,QAASE,UAAT,CAAmBC,CAAnB,CAAqC,IAAdC,EAAc,wDAAH,CAAG,CACnCvC,EAAE,YAAF,EAAgBwC,WAAhB,CAA4B,WAA5B,CADmC,CAEnC,GAAIC,GAAQzC,uBAAsBsC,CAAtB,QAA8BI,OAA9B,CAAsC,aAAtC,CAAZ,CACEC,EAAOF,EAAM,CAAN,CADT,CAEA,GAAI,CAAEE,CAAN,CAAY,MAAO,WAAP,CACZxG,QAAQC,GAAR,CAAYuG,CAAZ,CALmC,CAMnCF,EAAMG,QAAN,CAAe,WAAf,CANmC,CAO/BL,CAP+B,EAQjCM,WAAW,iBAAMJ,GAAMD,WAAN,CAAkB,WAAlB,CAAN,CAAX,CAAiDD,CAAjD,CARiC,CAWnC,GAAIO,GAAMH,EAAKI,qBAAL,EAAV,CACEC,EAAYlE,SAASmE,eAAT,CAAyBC,YADvC,CAEA,GAAIJ,EAAIK,MAAJ,CAAaH,CAAb,EAAoC,CAAV,GAAII,GAAlC,CAA2C,CACzC,GAAIC,GAAQP,EAAIM,GAAJ,CAAUtE,SAASmE,eAAT,CAAyBK,SAA/C,CACEC,EAAcP,EAAYF,EAAIU,MADhC,CAEAC,OAAOC,QAAP,CAAgB,CAAhB,CAAmBL,GAASE,EAAc9F,KAAKC,IAAL,CAAU6F,EAAY,CAAtB,CAAd,CAAyC,CAAlD,CAAnB,CACD,CACF,CAED,QAASI,aAAT,CAAsBjF,CAAtB,CAA4B,CAC1B,GAAIkF,GAAOC,UAAUnF,CAAV,CAAX,CACA,GAAGkF,CAAH,CAAS,MAAOA,EAAP,CAET,GAAIE,GAAM,gEAAV,CACAF,EAAK,EALqB,CAO1B,IAAI,GACEG,EADF,CAAIhH,EAAE,CAAV,CAAc,CAAF,EAAZ,CAAgBA,GAAhB,CACMgH,CADN,CACYtG,KAAKE,KAAL,CAAWF,KAAKuG,MAAL,GAAcF,EAAM9G,MAA/B,CADZ,CAEE4G,GAAQE,EAAMxC,SAAN,CAAgByC,CAAhB,CAAqBA,EAAI,CAAzB,CAFV,CAKA,MADAtF,QAAOC,CAAP,CAAakF,CAAb,CAAmB,GAAnB,CACA,CAAOA,CACR,CAED,QAASK,eAAT,EAA0B,CACxB,GAAIC,GAAmBlE,EAAE,cAAF,EAAkBmE,IAAlB,GAAyBC,WAAzB,EAAvB,CACIC,EAAU,oBADd,CAMA,MAJIH,IAAoBG,CAIxB,GAHEA,EAAU,yoBAGZ,EADArE,EAAE,cAAF,EAAkBmE,IAAlB,CAAuBE,CAAvB,EAAgCC,IAAhC,EACA,GACD,CAGD,QAASC,cAAT,EAA6B,CAAErI,MAAM,aAAN,CAAsB,CAGrD,QAAS2H,UAAT,CAAmBnF,CAAnB,CAAwC,CAAI,MAAOD,QAAOC,CAAP,CAAkC,CACrF,QAAS8F,WAAT,CAAoB9F,CAApB,CAAyBQ,CAAzB,CAA+BC,CAA/B,CAAwC,CAAI,MAAOV,QAAOC,CAAP,CAAYQ,CAAZ,CAAkBC,CAAlB,CAAkC,CAErF,GAAIsF,QAAS,CACXC,MADW,CACFC,SADE,CAEXC,KAAM,eAAW,CACfC,EAAEC,IAAF,CAAOhG,SAASiG,oBAAT,CAA8B,MAA9B,CAAP,CAA8C,SAASC,CAAT,CAAe,CACb,CAAC,CAA5C,IAAKC,YAAL,CAAkB,KAAlB,EAAyB5H,OAAzB,CAAiC,OAAjC,GAAiD2H,EAAKC,YAAL,CAAkB,OAAlB,CADO,GAEzD,KAAKP,GAAL,CAASzH,IAAT,CAAc+H,CAAd,CAFyD,CAGzD,KAAKL,MAAL,CAAY1H,IAAZ,CAAiB+H,EAAKC,YAAL,CAAkB,OAAlB,CAAjB,CAHyD,CAIN,CAAC,CAAjD,KAAKA,YAAL,CAAkB,KAAlB,EAAyB5H,OAAzB,CAAiC,WAAjC,CAJsD,GAKvD,KAAK6H,QAAL,CAAgBF,EAAKC,YAAL,CAAkB,OAAlB,CALuC,EAOtDD,EAAKG,YAAL,CAAkB,aAAlB,CAPsD,GAQvD,KAAKC,MAAL,CAAcJ,EAAKC,YAAL,CAAkB,OAAlB,CARyC,EAW5D,CAXD,CAWG,IAXH,CADe,CAaf,KAAKI,OAAL,CAAe,KAAKH,QAbL,CAcf,GAAII,GAAezB,UAAU,cAAV,CAAnB,CACA,KAAKyB,YAAL,CAAqBA,EAAatI,MAAb,EAAiD,WAA1B,QAAOuI,eAA9B,EAAgEC,SAASD,cAAT,CAAyBD,EAAa3D,KAAb,CAAmB,GAAnB,CAAzB,CAftE,CAgBf,KAAK8D,SAAL,GACD,CAnBU,CAoBXC,OAAQ,iBAAW,CACjB,KAAKd,IAAL,EADiB,CAEjB,GAAIe,GAAaC,aAAa,aAAb,GAA+B,IAAhD,CACA,GAAGD,CAAH,CAAe,CACb,GAAIE,GAAQ,KAAKC,QAAL,CAAcH,CAAd,CAAZ,CACA,KAAKI,QAAL,CAAcF,CAAd,CAFa,CAGb,GAAIG,GAAShG,EAAE,iJAAsC6F,CAAtC,CAA4C,UAA9C,CAAb,CAOA,MANAG,GAAOC,KAAP,CAAa,SAASC,CAAT,CAAa,CACxBA,EAAGC,cAAH,EADwB,CAExB1B,OAAO2B,QAAP,EAFwB,CAGxBpG,EAAE,IAAF,EAAQqG,MAAR,GAAiBC,OAAjB,EACD,CAJD,CAMA,MADA,KAAKC,WAAL,CAAmBvG,EAAE,yCAAF,EAA2CwG,MAA3C,CAAkDR,CAAlD,CACnB,CACD,CACD,GAAG,KAAK/J,cAAL,CAAoB,QAApB,GAAiC,CAAC,KAAKqJ,YAA1C,CACE,MAAO,MAAKmB,SAAL,EAAP,CACF,GAAIC,GAAK7C,UAAU/M,YAAV,CAAT,CACG4P,GAAMlB,SAASkB,CAAT,CAAa,KAAK/B,MAAlB,CAlBQ,CAmBf,KAAKoB,QAAL,CAAcW,CAAd,CAnBe,EAqBf,KAAKC,UAAL,EArBe,CAsBfnC,WAAW,cAAX,CAA0B,KAAKU,QAA/B,CAAwC,GAAxC,CAtBe,CAuBfV,WAAW,SAAX,CAAqB,KAAKU,QAA1B,CAAmC,GAAnC,CAvBe,CAyBlB,CA7CU,CA8CX0B,OAAQ,gBAASC,CAAT,CAAoB,CACtBrB,SAASqB,CAAT,CAAoB,KAAKlC,MAAzB,CAAD,EAAqC,KAAKU,OAAL,GAAiBwB,CAD/B,GAE1B,KAAKd,QAAL,CAAcc,CAAd,CAF0B,CAGvB,KAAK5K,cAAL,CAAoB,QAApB,GAAiC,KAAKmJ,MAAL,GAAgByB,CAH1B,CAIxB,KAAKC,YAAL,EAJwB,EAOrB,KAAK7K,cAAL,CAAoB,QAApB,CAPqB,EAQtB,KAAK8K,SAAL,EARsB,CASxBvC,WAAW,cAAX,CAA0BqC,CAA1B,CAAoC,GAApC,CATwB,CAUxBrC,WAAW,SAAX,CAAqBqC,CAArB,CAA+B,GAA/B,CAVwB,EAY3B,CA1DU,CA2DXC,aAAc,uBAAW,CACvB,GAAI,KAAKxB,YAAN,EAAgD,WAA1B,QAAOC,eAAhC,EACA,KAAKD,YAAL,GADA,CAEA,GAAI0B,GAAYnD,UAAU,cAAV,EAA0BlC,KAA1B,CAAgC,GAAhC,CAAhB,CAAsDsF,IAAtD,CACApC,EAAEC,IAAF,CAAOkC,CAAP,CAAkB,SAASE,CAAT,CAAc,CAC3BA,IAAQ3B,cADmB,EACH0B,EAAUhK,IAAV,CAAeiK,CAAf,CAC5B,CAFD,CAHA,CAMAD,EAAYA,EAAUjK,MAAV,CAAmBiK,EAAU/J,IAAV,CAAe,GAAf,CAAnB,CAAyC,EANrD,CAOAsH,WAAW,cAAX,CAA0ByC,CAA1B,CAAoC,GAApC,CAPA,CAQD,CApEU,CAqEXF,UAAW,oBAAW,CACpB,KAAG,KAAKzB,YAAL,EAA+C,WAA1B,QAAOC,eAA/B,GACA,KAAKD,YAAL,GADA,CAEA,GAAIvG,GAAS8E,UAAU,cAAV,EAA0BlC,KAA1B,CAAgC,GAAhC,CAAb,CACI6D,SAASD,cAAT,CAAyBxG,CAAzB,CAHJ,GAIEA,EAAO9B,IAAP,CAAYsI,cAAZ,CAJF,CAKEf,WAAW,cAAX,CAA0BzF,EAAO7B,IAAP,CAAY,GAAZ,CAA1B,CAA2C,GAA3C,CALF,EAOD,CA7EU,CA8EXyJ,WAAY,qBAAW,CAClB,KAAK1K,cAAL,CAAoB,UAApB,GAAmC,KAAKoJ,OAAL,GAAiB,KAAKH,QADvC,EAEnB,KAAKa,QAAL,CAAc,KAAKb,QAAnB,CACH,CAjFU,CAkFXuB,UAAW,oBAAW,CACjB,KAAKxK,cAAL,CAAoB,QAApB,CADiB,EAElB,KAAK8J,QAAL,CAAc,KAAKX,MAAnB,CACH,CArFU,CAsFXW,SAAU,kBAASc,CAAT,CAAoB,CACxBrB,SAASqB,CAAT,CAAoB,KAAKlC,MAAzB,CADwB,GAExBwC,cAAgBA,aAAaC,IAFL,EAG1BD,aAAaC,IAAb,CAAkB,UAAlB,CAA8B,WAA9B,CAA2C3D,MAA3C,CAAmD,GAAnD,CAH0B,CAI5BoB,EAAEC,IAAF,CAAO,KAAKJ,GAAZ,CAAiB,SAAS2C,CAAT,CAAgB,CAC/BA,EAAMC,QAAN,GAD+B,CAE5BD,EAAMpC,YAAN,CAAmB,OAAnB,IAAgC4B,CAFJ,GAG7BQ,EAAMC,QAAN,GAH6B,CAIhC,CAJD,CAJ4B,CASxBH,cAAgBA,aAAaI,OATL,EAU1BJ,aAAaI,OAAb,CAAqB,UAArB,CAV0B,CAW5B,KAAKlC,OAAL,CAAewB,CAXa,CAY7B,CAlGU,CAmGXW,OAAQ,IAnGG,CAoGX1B,SAAU,kBAAS2B,CAAT,CAAc,CACtB,GAAIC,GAAI,sBAAsB9K,IAAtB,CAA2B6K,CAA3B,CAAR,CACA,GAAIC,CAAJ,EACA,GAAI7B,GAAQhB,EAAE8C,UAAF,CAAa9C,EAAE+C,MAAF,CAASF,EAAE,CAAF,CAAT,CAAb,CAAZ,CACA,GAAG,CAAClC,SAASK,CAAT,CAAgB,KAAKlB,MAArB,CAAJ,CAAkC,CAChC,GAAIkD,GAAQ7H,EAAE,qDAAgDyH,CAAhD,CAAoD,aAApD,CAAgE5B,CAAhE,CAAsE,cAAxE,CAAZ,CACA7F,EAAE,MAAF,EAAUwG,MAAV,CAAiBqB,CAAjB,CAFgC,CAGhC,KAAKlD,MAAL,CAAY1H,IAAZ,CAAiB4I,CAAjB,CAHgC,CAIhC,KAAKnB,GAAL,CAASzH,IAAT,CAAc4K,EAAM,CAAN,CAAd,CACD,CACD,MAAOhC,EARP,CASD,CA/GU,CAgHXiC,UAAW,mBAASL,CAAT,CAAc,CACvB,KAAKD,MAAL,CAAcC,CADS,CAEvB,GAAI5B,GAAQ,KAAKC,QAAL,CAAc2B,CAAd,CAAZ,CACA,KAAK1B,QAAL,CAAcF,CAAd,CAHuB,CAIvBkC,aAAa,+FAAoBlC,CAApB,CAA0B,GAAvC,CAA4C,MAA5C,CAJuB,CAKvB,GAAImC,GAAWhI,EAAE,qBAAF,EAAyBiG,KAAzB,CAA+B,KAAKgC,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA/B,CAAf,CACEC,EAAUnI,EAAE,WAAWjE,GAAGjE,MAAd,CAAqB,WAAvB,EAAoCmO,KAApC,CAA0C,KAAKG,QAAL,CAAc8B,IAAd,CAAmB,IAAnB,CAA1C,CADZ,CAEEE,EAAQpI,EAAE,iCAAF,EAAmCwG,MAAnC,CAA0CwB,CAA1C,CAAoDG,CAApD,CAFV,CAGAnI,EAAE,eAAF,EAAmBwG,MAAnB,CAA0B4B,CAA1B,CACD,CAzHU,CA0HXH,oBAAqB,8BAAW,CAC3B,KAAKT,MADsB,EAE5B5B,aAAayC,OAAb,CAAqB,aAArB,CAAoC,KAAKb,MAAzC,CACH,CA7HU,CA8HXpB,SAAU,mBAAW,CACnBR,aAAa0C,UAAb,CAAwB,aAAxB,CADmB,CAEnB,KAAK5C,MAAL,EACD,CAjIU,CAAb,CAoIG5O,Y,EAAc2N,OAAOiB,MAAP,E,CAEjB,QAAS6C,eAAT,CAAwBC,CAAxB,CAAgCC,CAAhC,CAAuC,CACjB,WAAjB,QAAOA,EAD2B,GACJA,IADI,EAEjC,CAAExR,SAAD,EAAewR,CAAhB,GAA4C,WAAlB,QAAOD,EAFA,EAGrCA,EAAOtI,IAAP,CAAY,eAAZ,EAA6B4E,IAA7B,CAAkC,UAAwB,CACxD,GAAI4D,GAAU1I,EAAE,IAAF,EAAQ2I,IAAR,CAAa,IAAb,EAAmBhH,KAAnB,CAAyB,GAAzB,CAAd,CACE0C,EAAU,4CAAgDuE,UAAhD,CAA6D,4CAA7D,CAA4GF,EAAQ,CAAR,CAA5G,CAAyH,MADrI,CAEwBrE,CAHgC,EAGtC,GAAd,IAAQ,CAAR,CAHoD,CAGrB,QAHqB,CAGO,MAHP,CAIxDA,GAAW,MAAQqE,EAAQ,CAAR,CAAR,CAAqB,aAArB,CAAiC3M,GAAG9C,GAApC,CAAwC,+BAAxC,CAAuE8C,GAAG8M,OAA1E,CAAkF,kFAJrC,CAKxDxE,GAAW,aAAcuE,UAAd,CAA2B,4CAA3B,CAA0EF,EAAQ,CAAR,CAA1E,CAAuF,MAL1C,CAKyErE,CALzE,EAKmE,GAAd,IAAQ,CAAR,CALrD,CAKoF,QALpF,CAKgH,MALhH,CAMxDA,GAAU,MAAQqE,EAAQ,CAAR,CAAR,CAAqB,UAArB,CAAkCA,EAAQ,CAAR,CAAlC,CAA+C,aAA/C,CAA2D3M,GAAG7C,SAA9D,CAAwE,+BAAxE,CAAuG6C,GAAG8M,OAA1G,CAAkH,oFANpE,CAOxDxE,GAAU,aAAcuE,UAAd,CAA2B,wCAA3B,CAAsEF,EAAQ,CAAR,CAAtE,CAAmF,WAAnF,CAAiGA,EAAQ,CAAR,CAAjG,CAA8G,aAA9G,CAA0H3M,GAAG5C,GAA7H,CAAiI,6FAPnF,CAStC,GAAd,IAAQ,CAAR,CAToD,GAUtDkL,GAAW,sCAAqCuE,UAArC,CAAkD,2CAAlD,CAAgGF,EAAQ,CAAR,CAAhG,CAA6G,UAA7G,CAA0HA,EAAQ,CAAR,CAA1H,CAAuI,aAAvI,CAAmJ3M,GAAG3C,WAAtJ,CAAkK,2FAAlK,CAA2PwP,UAA3P,CAAwQ,6CAAxQ,CAAwTF,EAAQ,CAAR,CAAxT,CAAqU,UAArU,CAAkVA,EAAQ,CAAR,CAAlV,CAA+V,aAA/V,CAA2W3M,GAAG1C,aAA9W,CAA4X,gGAVjV,CAWtDgL,GAAW,sCAAqCuE,UAArC,CAAkD,yCAAlD,CAA8FF,EAAQ,CAAR,CAA9F,CAA2G,UAA3G,CAAwHA,EAAQ,CAAR,CAAxH,CAAqI,aAArI,CAAiJ3M,GAAGzC,UAApJ,CAA+J,4FAA/J,CAAyPsP,UAAzP,CAAsQ,2CAAtQ,CAAoTF,EAAQ,CAAR,CAApT,CAAiU,UAAjU,CAA8UA,EAAQ,CAAR,CAA9U,CAA2V,aAA3V,CAAuW3M,GAAGxC,YAA1W,CAAuX,2FAX5U,EAcxDyG,EAAE,IAAF,EAAQmE,IAAR,CAAaE,CAAb,CACD,CAfD,CAgBD,CAED,GAAIyE,eAAgB,CAClBC,KAAM,eAAW,CACf,GAAoB,IAAhB,cAAJ,CAEE,MADA7M,OAAMH,GAAGzE,cAAT,CACA,IAEF,GAAIyR,GAAOnD,aAAaoD,OAAb,CAAqB,iBAAmBzD,cAAxC,CAAX,CALe,MAMH,KAAR,GANW,IAORwD,EAAKpH,KAAL,CAAW,GAAX,CACR,CATiB,CAUlBsH,SAAU,kBAASC,CAAT,CAAmB,CAAE,MAAiD,CAAC,CAA3C,gBAAcH,IAAd,GAAqB1L,OAArB,CAA6B6L,CAA7B,CAA8C,CAVlE,CAWlBC,KAAM,cAASD,CAAT,CAAmB,CACvB,GAAoB,IAAhB,cAAJ,CAA0BE,MAAMrN,GAAGzE,cAAT,EAA1B,IACK,CACH,GAAI+R,GAAUP,cAAcC,IAAd,EAAd,CACAM,EAAQpM,IAAR,CAAaiM,EAASrM,QAAT,EAAb,CAFG,CAGH+I,aAAayC,OAAb,CAAqB,iBAAmB9C,cAAxC,CAAwD8D,EAAQnM,IAAR,CAAa,GAAb,CAAxD,CACD,CACF,CAlBiB,CAmBlBoM,OAAQ,gBAASJ,CAAT,CAAmB,CACzB,GAAoB,IAAhB,cAAJ,CAA0BE,MAAMrN,GAAGzE,cAAT,EAA1B,IACK,CACH,GAAIyR,GAAOD,cAAcC,IAAd,EAAX,CACIhM,EAAIgM,EAAK1L,OAAL,CAAa6L,EAASrM,QAAT,EAAb,CADR,CAEA,GAAS,CAAC,CAAN,GAAJ,CAAa,OACb,GAAIwM,GAAUN,EAAKQ,KAAL,CAAW,CAAX,CAAaxM,CAAb,CAAd,CACAsM,EAAUA,EAAQG,MAAR,CAAeT,EAAKQ,KAAL,CAAWxM,EAAE,CAAb,CAAf,CALP,CAMH6I,aAAayC,OAAb,CAAqB,iBAAmB9C,cAAxC,CAAwD8D,EAAQnM,IAAR,CAAa,GAAb,CAAxD,CACD,CACF,CA7BiB,CAApB,CAgCA,QAASuM,aAAT,CAAsBP,CAAtB,CAAgC,CAU9B,MATIJ,eAAcG,QAAd,CAAuBC,CAAvB,CASJ,EARElJ,EAAE,gBAAkBkJ,CAAlB,CAA6B3D,cAA/B,EAA+Ce,OAA/C,EAQF,CAPEtG,EAAE,UAAYkJ,CAAZ,CAAuB3D,cAAzB,EAAyCmE,SAAzC,EAOF,CANEZ,cAAcQ,MAAd,CAAqBJ,CAArB,CAMF,GAJElJ,EAAE,gBAAkBkJ,CAAlB,CAA6B3D,cAA/B,EAA+CmE,SAA/C,EAIF,CAHE1J,EAAE,UAAYkJ,CAAZ,CAAuB3D,cAAzB,EAAyCe,OAAzC,EAGF,CAFEwC,cAAcK,IAAd,CAAmBD,CAAnB,CAEF,IACD,CAED,QAASS,cAAT,EAAyB,CACvB3J,EAAE,kBAAF,EAAsB8E,IAAtB,CAA2B,UAAwB,CACjD9E,EAAE,IAAF,EAAQ4J,WAAR,CAAoB,UAAW,CAC1B5J,EAAE,IAAF,EAAQ6J,EAAR,CAAW,SAAX,CAD0B,CAE3BpL,OAAO,gBAAP,CAAyB,GAAzB,CAA8B,GAA9B,CAF2B,CAI3BA,OAAO,gBAAP,CAAyB,GAAzB,CAA8B,GAA9B,CAEH,CAND,CAOD,CARD,CASD,CAED,QAASqL,YAAT,EAAuB,CACpB9J,EAAE,kBAAF,EAAsB8E,IAAtB,CAA2B,UAAwB,CAClD9E,EAAE,IAAF,EAAQmJ,IAAR,EACD,CAFA,CAGF,CAED,QAASY,aAAT,CAAsBb,CAAtB,CAAgCc,CAAhC,CAAuC9D,CAAvC,CAA2C,CACzCA,EAAGC,cAAH,EADyC,CAEzC,GAAI8D,GAAUjK,YAAYkJ,CAAZ,CAAuBc,CAAvB,CAAd,CAsBA,MArBIC,GAAQjN,MAqBZ,aApBE,GAAIkN,GAAa,CAAED,EAAQ/J,IAAR,CAAa,cAAb,EAA6BA,IAA7B,CAAkC,sBAAlC,EAA0DwB,GAA1D,EAAnB,CACEyI,EAAW,CAAEF,EAAQ/J,IAAR,CAAa,0BAAb,EAAyCA,IAAzC,CAA8C,sBAA9C,EAAsEwB,GAAtE,EADf,CAEE0I,EAAWH,EAAQ/J,IAAR,CAAa,eAAb,CAFb,CAGAkK,EAASlK,IAAT,CAAc,GAAd,EAAmBiJ,IAAnB,EAiBF,CAhBE,GAAIkB,GAAOD,EAASlK,IAAT,CAAc,MAAd,CAAX,CACKmK,EAAKrN,MAeZ,GAdIqN,EAAOrK,mBAAmBsK,SAAnB,CAA6BF,CAA7B,CAcX,EAZEC,EAAKvK,IAAL,CAAa/D,GAAG5B,OAAhB,OAYF,CAXEoQ,UAAUC,SAAV,CAAoBR,CAApB,CAA2B,CAACd,CAA5B,CAAsC,CAACgB,CAAD,CAAaC,CAAb,CAAtC,CAA8D,SAACM,CAAD,CAAMC,CAAN,CAAgB,CACxEA,CADwE,EAE1ET,EAAQ/J,IAAR,CAAa,eAAb,EAA8ByK,WAA9B,CAA0CD,CAA1C,CAF0E,CAG1EE,SAASC,WAAT,EAH0E,GAM1ER,EAAKvK,IAAL,CAAU/D,GAAGxE,IAAH,EAAW,OAA8B,EAA9B,MAAqBkT,CAArB,IAAX,CAAV,CAN0E,CAO1EL,EAASlK,IAAT,CAAc,GAAd,EAAmBJ,IAAnB,CAAwB/D,GAAGN,QAA3B,EAAqC6I,IAArC,EAP0E,CAS7E,CATD,CAWF,MACD,CAED,QAASwG,YAAT,EAA8E,IAAzD5B,EAAyD,wDAAhD,IAAgD,CAA1C6B,CAA0C,wDAA/B,IAA+B,CAAzBC,CAAyB,wDAAf,iBAAM,OAAN,CAAe,CAC5E,GAAc,IAAX,IAAH,CAAoB,CAClB,GAAI9T,MAAJ,CAAY,MAAO8T,IAAP,CACZ9B,EAAWlJ,EAAE,yBAAF,EAA6B0B,GAA7B,EACZ,CACD,GAAIuJ,GAAWjL,wBAAuBkJ,CAAvB,QAAqCgC,IAArC,EAAf,CACEC,EAAWF,EAASG,IAAT,CAAc,SAAd,GAA4BH,EAASG,IAAT,CAAc,QAAd,CADzC,CAEA,GAAI,CAAED,CAAN,CAAgB,MAAOH,IAAP,CAChB,GAAIK,EAAJ,CAAuBC,CAAvB,CACA,GAAI,CAACpU,MAAL,CACEoU,EAAgBtL,EAAE,eAAF,CADlB,CAEEsL,EAAc9I,WAAd,CAA0B,cAA1B,EAA0CI,QAA1C,CAAmD,cAAnD,CAFF,CAGEyI,EAAoBvM,SAASyM,aAAT,CAAuB,UAAvB,CAHtB,KAOE,IADAF,EAAoBvM,SAASyM,aAAT,WAAiCrC,CAAjC,CAA4C3D,cAA5C,aACpB,CAAI,CAAC8F,CAAL,CAAwB,MAAOL,IAAP,CA2B1B,MAzBAT,WAAUC,SAAV,CAAoBjF,cAApB,CAAoC,CAAC2D,CAArC,CAA+C,CAAC,CAACiC,CAAF,CAAWK,QAAX,CAA/C,CAAqE,SAACf,CAAD,CAAMC,CAAN,CAAgB,CAInF,GAHKxT,MAGL,EAFEoU,EAAc9I,WAAd,CAA0B,cAA1B,CAEF,CAAIkI,CAAJ,CAAW,CAET,GADAW,EAAkBI,kBAAlB,CAAqC,WAArC,CAAkDf,CAAlD,CACA,CAAIK,CAAJ,CAAgB,CACd,GAAIW,GAAWL,EAAkBM,gBAAlB,CAAmC,QAAnC,CAAf,CACEC,EAA0B,MAAZ,IACZF,EAASA,EAAS1O,MAAT,CAAgB,CAAzB,CADY,CAEZG,MAAMC,SAAN,CAAgB8C,IAAhB,CAAqB2L,IAArB,CAA0BH,CAA1B,CAAoC,kBAAQ/I,GAAK4I,aAAL,aAA8BR,CAA9B,OAAR,CAApC,CAHJ,CAIA,GAAI,CAAEa,CAAN,CACE,MAAOZ,IAAP,CAEF3I,UAAU0I,CAAV,KACD,CACDH,SAASC,WAAT,EACD,CAbD,IAcK,CACH,GAAIE,CAAJ,CACE,MAAOC,IAAP,CAEFjD,aAAuB,EAAV,KAAehM,GAAG7D,UAAlB,CAA+B6D,GAAGxE,IAAH,EAAW,OAA8B,EAA9B,MAAqBkT,CAArB,IAAX,CAA5C,CACD,CACF,CAxBD,OAyBA,GACD,CAED,QAASqB,UAAT,EAAuB,CACrB,GAAIC,GAAO/L,EAAE,IAAF,EAAQ2I,IAAR,CAAa,MAAb,CAAX,CAOA,MANA3I,GAAE,aAAF,EAAiB0B,GAAjB,CAAqBsK,cAAcD,CAAnC,CAMA,CALA/L,EAAE,YAAF,EAAgB0B,GAAhB,CAAoB,KAAKqK,EAAKpK,KAAL,CAAW,OAAX,EAAoB,CAApB,CAAL,CAA4B,GAA5B,CAAgCoK,EAAKpK,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAApD,CAKA,CAJA3B,EAAE,WAAF,EAAeC,GAAf,CAAmB,CACjBmD,IAAKpD,EAAE,IAAF,EAAQiM,MAAR,GAAiB7I,GAAjB,CAAuBpD,EAAE,IAAF,EAAQwD,MAAR,EADX,CAEjB0I,KAAMlM,EAAE,IAAF,EAAQiM,MAAR,GAAiBC,IAFN,CAAnB,EAGGC,MAHH,CAGU,MAHV,CAIA,GACD,CACoC,QAAlC,6B,GACDvG,qBAA0B,C,EACS,UAAlC,6B,GACDA,qBAA0B,C,EAC5BA,aAAa0C,UAAb,CAAwB,eAAxB,C,CAEA,GAAI8D,iBAAJ,CACA,QAASC,WAAT,EAAwB,CACtB,GAAIC,GAAgBtM,EAAE,IAAF,EAAQoL,IAAR,CAAa,WAAb,CAApB,CACGkB,IAAkB/G,cAFC,GAEe+G,IAFf,EAGtB,GAAIjG,GAASrG,EAAE,IAAF,EAAQoL,IAAR,CAAa,QAAb,CAAb,CAAqC/F,EAAUrF,EAAE,IAAF,EAAQoL,IAAR,CAAa,SAAb,GAA2B/E,CAA1E,CACIkG,EAAiB,CAAC,CAAC,CAAC3G,oBADxB,CAEI4G,EAAiD,MAAnC,KAAE,YAAF,EAAgBvM,GAAhB,CAAoB,SAApB,CAFlB,CAqCA,MAlCAD,GAAE,YAAF,EAAgBsE,IAAhB,EAkCA,CAjCGmI,OAiCH,CAhCEzM,EAAE,YAAF,EAAgBC,GAAhB,CAAoB,CAClBkD,OAAQ,KADU,CAElB+I,KAAM,KAFY,CAGlBQ,SAAU,OAHQ,CAIlBC,QAAS,CAJS,CAApB,CAgCF,CAxBKJ,CAwBL,CAvBIvM,EAAE,YAAF,EAAgBC,GAAhB,CAAoB,CAClBmD,IAAKpD,EAAE,IAAF,EAAQiM,MAAR,GAAiB7I,GAAjB,CAAuBpD,EAAE,IAAF,EAAQwD,MAAR,EADV,CAElB0I,KAAMzO,KAAKmP,KAAL,CAAY5M,EAAEyD,MAAF,EAAUoJ,KAAV,GAAoB,CAArB,CAA2B7M,EAAE,YAAF,EAAgB6M,KAAhB,GAA0B,CAAhE,CAFY,CAGlBH,SAAU,UAHQ,CAApB,CAuBJ,CAjBUF,CAiBV,EAhBIxM,EAAE,YAAF,EAAgBC,GAAhB,CAAoB,CAClBmD,IAAKpD,EAAE,IAAF,EAAQiM,MAAR,GAAiB7I,GAAjB,CAAuBpD,EAAE,IAAF,EAAQwD,MAAR,EAAvB,CAA0CxD,EAAElB,QAAF,EAAYwE,SAAZ,EAD7B,CAElB4I,KAAMzO,KAAKmP,KAAL,CAAY5M,EAAEyD,MAAF,EAAUoJ,KAAV,GAAoB,CAArB,CAA2B7M,EAAE,YAAF,EAAgB6M,KAAhB,GAA0B,CAAhE,CAFY,CAGlBH,SAAU,OAHQ,CAApB,CAgBJ,CATA1M,EAAE,wCAAF,EAA0C0B,GAA1C,CAA8C2E,CAA9C,CASA,CARGiG,CAQH,EAPEtM,EAAE,kCAAF,EAAoC0B,GAApC,CAAwC4K,CAAxC,CAOF,CANEtM,EAAE,+BAAF,EAAmCmE,IAAnC,CAAwC,aAAY6H,aAAZ,CAA0B,GAA1B,CAA8BM,CAA9B,CAA4C,OAA5C,CAAoDjG,CAApD,CAA2D,UAA3D,CAAsEhB,CAAtE,CAA8E,eAA9E,CAA6FiH,CAA7F,CAA2G,GAA3G,CAA+GjG,CAA/G,CAAsH,MAA9J,CAMF,EAHErG,EAAE,+BAAF,EAAmCmE,IAAnC,CAAwC,8BAA2BkB,CAA3B,CAAmC,cAAnC,CAAiDgB,CAAjD,CAAwD,MAAhG,CAGF,CADAxG,OAAO,KAAKwF,CAAL,CAAa,IAApB,CACA,GACD,CAED,QAASyH,kBAAT,CAA2B5D,CAA3B,CAAqCc,CAArC,CAA4C,CACP,EAA/B,IAAE,oBAAF,EAAwB9I,GAAxB,EADsC,GAExClB,EAAE,oBAAF,EAAwBmE,IAAxB,CAA6BpI,GAAG5B,OAAH,CAAa,KAA1C,CAFwC,CAGxC6F,EAAE+M,IAAF,CAAO,CACLtF,IAAKuE,cAAgB,yBAAhB,CAA4ChC,CAA5C,CAAoD,YAApD,CAAmEd,CADnE,CAEL8D,QAAS,iBAAS5B,CAAT,CAAe,CACtBpL,EAAE,oBAAF,EAAwBmE,IAAxB,CAA6BiH,GAASrP,GAAGxE,IAAH,CAAU,IAAV,CAAewE,GAAGvE,aAAlB,CAAgC,GAAtE,CACD,CAJI,CAKLyV,MAAO,eAASC,CAAT,CAAcC,CAAd,CAAsB,CAC3BnN,EAAE,oBAAF,EAAwBmE,IAAxB,CAA6BpI,GAAGxE,IAAH,CAAU,IAAV,CAAiB4V,CAAjB,CAA0B,GAAvD,CACD,CAPI,CAAP,CAHwC,CAa3C,CAED,QAASpF,aAAT,CAAsBqF,CAAtB,CAA+BC,CAA/B,CAAsC,CACvB,IAAT,GADgC,GACjBA,KADiB,EAEJ,EAA5B,IAAE,eAAF,EAAmBnM,GAAnB,EAFgC,GAGlClB,EAAE,MAAF,EAAUsN,QAAV,GAAqBpC,IAArB,GAA4BqC,KAA5B,CAAkC,4DAAlC,CAHkC,CAIlCvN,EAAE,eAAF,EAAmBmJ,IAAnB,EAJkC,EAMpCnJ,EAAE,eAAF,EAAmBmE,IAAnB,CAAwBiJ,CAAxB,EAAiCjB,MAAjC,CAAwC,GAAxC,CANoC,CAOvB,MAAV,IAPiC,CAUlCnM,EAAE,eAAF,EAAmBiG,KAAnB,CAAyB,UAAW,CAClCjG,EAAE,IAAF,EAAQwN,OAAR,CAAgB,GAAhB,CACD,CAFD,CAVkC,CAQlCxN,EAAE,eAAF,EAAmBqN,KAAnB,CAAyBA,CAAzB,EAAgCG,OAAhC,CAAwC,GAAxC,CAKH,CAED,QAASC,oBAAT,CAA6BvE,CAA7B,CAAuCc,CAAvC,CAA8C,CACT,EAA/B,IAAE,oBAAF,EAAwB9I,GAAxB,EADwC,EAE1ClB,EAAE+M,IAAF,CAAO,CACLtF,IAAKuE,cAAgB,sCAAhB,CAAyDhC,CAAzD,CAAiE,YAAjE,CAAgFd,CADhF,CAEL8D,QAAS,kBAAe,CACtBjF,aAAahM,GAAGtE,YAAhB,CADsB,CAEtBqV,kBAAkB,GAAlB,CAAuB9C,CAAvB,CACD,CALI,CAMLiD,MAAO,eAASC,CAAT,CAAcC,CAAd,CAAsB,CAC3BpF,aAAahM,GAAGxE,IAAH,CAAU,IAAV,CAAiB4V,CAAjB,CAA0B,GAAvC,CACD,CARI,CAAP,CAWH,CAED,QAASO,yBAAT,CAAkCxE,CAAlC,CAA4Cc,CAA5C,CAAmD,CACd,EAA/B,IAAE,oBAAF,EAAwB9I,GAAxB,EAD6C,EAE/ClB,EAAE+M,IAAF,CAAO,CACLtF,IAAKuE,cAAgB,yCAAhB,CAA4DhC,CAA5D,CAAoE,YAApE,CAAmFd,CADnF,CAEL8D,QAAS,kBAAe,CACtBjF,aAAahM,GAAGF,eAAhB,CADsB,CAEtBiR,kBAAkB,GAAlB,CAAuB9C,CAAvB,CACD,CALI,CAMLiD,MAAO,eAASC,CAAT,CAAcC,CAAd,CAAsB,CAC3BpF,aAAahM,GAAGxE,IAAH,CAAU,IAAV,CAAiB4V,CAAjB,CAA0B,GAAvC,CACD,CARI,CAAP,CAWH,CAED,QAASQ,mBAAT,EAA8B,CAC5BlP,OAAO,oBAAP,CAA4B,GAA5B,CAAgC,EAAhC,CAD4B,CAE5BuB,EAAE,iBAAF,EAAqBwN,OAArB,EACD,CAED,QAASI,mBAAT,EAA8B,CAC5BnP,OAAO,oBAAP,CAA4B,GAA5B,CAAgC,EAAhC,CAD4B,CAE5BgF,OAAOrB,QAAP,CAAgByL,MAAhB,IACD,CAED,GAAIC,SAAU,CACZlJ,KAAM,eAAW,CACf5E,EAAE,cAAF,EAAkBiG,KAAlB,CAAwB,KAAK8H,OAAL,CAAa7F,IAAb,CAAkB,IAAlB,CAAxB,CADe,CAEf8F,SAASC,MAAT,CAAgB,iBAAhB,oEAE4BC,cAF5B,sCAG4BA,cAH5B,sCAI4BA,cAJ5B,8FAQyBA,cARzB,mCASyBA,cATzB,mCAUyBA,cAVzB,OAWD,CAdW,CAeZH,QAAS,kBAAW,CAClB,GAAK/N,EAAE,cAAF,EAAkBhD,MAAvB,EACA,KAAKmR,SAAL,GADA,CAEA,GAAIC,IAASpO,EAAE,cAAF,EAAkBC,GAAlB,CAAsB,OAAtB,EAA+BkC,KAA/B,CAAqC,wBAArC,CAAb,CACAiM,GAA2B,CAAjB,KAAOpR,MAAR,CAAuB,UAAUoR,GAAO7E,KAAP,CAAa,CAAb,CAAgB,CAAhB,EAAmBrM,IAAnB,CAAwB,GAAxB,CAAjC,CAAgE,EAHzE,CAIA8C,EAAE,eAAF,EAAmB2I,IAAnB,CAAwB,KAAxB,CAA+BqD,cAAc,eAAd,CAA8BvO,KAAKuG,MAAL,EAA9B,CAA4CoK,EAA3E,CAJA,CAKApO,EAAE,cAAF,EACCwC,WADD,CACa,uBADb,EAECsC,IAFD,CAEM,UAAW,CAAC,IAAK,MAAKuJ,WAAY,CAFxC,EAGCzL,QAHD,CAGU,YAHV,CALA,CASAzF,MAAMC,SAAN,CAAgBkR,OAAhB,CAAwBzC,IAAxB,CAA6B/M,SAAS6M,gBAAT,CAA0B,yBAA1B,CAA7B,CAAiF,kBAAS4C,GAAMrP,KAAN,CAAc,IAAvB,CAAjF,CATA,CAUD,CA1BW,CA2BZsP,YAAa,sBAAW,CAItB,MAHK,MAAKL,SAGV,EAFE,KAAKJ,OAAL,EAEF,GACD,CAhCW,CAiCZI,YAjCY,CAAd,CAoCA,QAASM,aAAT,CAAsBC,CAAtB,CAA8B,CAC5B,GAAqC,CAAlC,GAAE,qBAAF,EAAyB1R,MAA5B,CAAwC,CACtC,GAAgD,EAA7C,IAAE,IAAI0R,CAAJ,CAAW,sBAAb,EAAqChN,GAArC,EAAH,CAEE,MADAqG,cAAahM,GAAGrD,YAAhB,CACA,IAEF,GAAsC,CAAnC,EAACsH,EAAE,aAAF,EAAiBC,GAAjB,CAAqB,SAArB,CAAJ,CAEE,MADA8H,cAAahM,GAAGjD,UAAhB,CACA,GAEH,CACD,QACD,CAED,QAAS6V,aAAT,CAAsBC,CAAtB,CAA4B,CAC1B,GAAIC,GAAeD,EAAKrD,aAAL,CAAmB,qBAAnB,CAAnB,CAD0B,MAEtBsD,IAAgB,CAACA,EAAa3P,KAAb,CAAmBlC,MAFd,CAGjB+K,aAAahM,GAAGrD,YAAhB,CAHiB,MAIV,WAAZ,KAAK4J,EAJiB,EAKxBwM,OAAO1H,IAAP,EALwB,CAM1B2H,KAAKC,UAAL,CAAgBJ,CAAhB,CAN0B,CAO3B,CAED,GAAMG,MAAO,CACXC,WAAY,oBAASJ,CAAT,CAAe,CACzB,GAAIK,GAAK,GAAIC,SAAJ,CAAaN,CAAb,CAAT,CACEO,EAAK,GAAIC,eADX,CAEAH,EAAGzI,MAAH,CAAU,MAAV,CAAkB,CAAlB,CAHyB,CAIzB2I,EAAGE,IAAH,CAAQ,MAAR,CAAgBT,EAAKU,MAArB,CAJyB,CAKzBH,EAAGI,MAAH,CAAY,UAAK,CACf,GAAkB,GAAd,KAAGpC,MAAP,CAEE,WADApF,cAAahM,GAAGL,QAAhB,CACA,CAEFoS,QAAQC,OAAR,EALe,CAMf,GAAIyB,GAAM,IAAV,CACA,GAAI,CACFA,EAAMC,KAAKC,KAAL,CAAWP,EAAGQ,QAAd,CACP,CACD,MAAMC,CAAN,CAAS,CAGP,MAFA7H,cAAahM,GAAGL,QAAhB,CAEA,KADAS,SAAQ8Q,KAAR,CAAc,qCAAd,CAAqDkC,EAAGQ,QAAxD,CAED,CACD,GAAIH,EAAIvC,KAAR,CAaE,YAZIuC,EAAIK,UAYR,EAXwB,KAAlB,IAAIA,UAWV,EAVI9H,aAAgByH,EAAIvC,KAApB,gBAAuCrE,UAAvC,oCAAiF7M,GAAGJ,OAApF,SAAoG,MAApG,CAUJ,CARwB,gBAAlB,IAAIkU,UAQV,GAPI9H,aAAgByH,EAAIvC,KAApB,QAAgCuC,EAAIM,aAApC,CAAqD,MAArD,CAOJ,CANIlB,EAAKrD,aAAL,CAAmB,2BAAnB,EAA8CrM,KAA9C,CAAsD,IAM1D,GAFE6I,aAAayH,EAAIvC,KAAjB,CAEF,EAGA8C,UAAUnB,CAAV,CA/Ba,CAgCE,WAAX,IAAKtM,EAhCI,EAiCXtC,EAAE4O,CAAF,EAAQzF,IAAR,EAjCW,CAmCb,GAAI6G,GAAOpB,EAAKrD,aAAL,CAAmB,kCAAnB,EAAqD0E,OAAhE,CAC0B,CAAtB,IAAIC,cApCK,CA4CPF,CA5CO,CA6CTlR,SAASsD,QAAT,CAAkB2J,IAAlB,CAA4BC,aAA5B,KAA6CwD,EAAIxF,KAAjD,SAA8DwF,EAAIW,OAAlE,QA7CS,CAgDTrR,SAASsD,QAAT,CAAkB2J,IAAlB,CAA4BC,aAA5B,KAA6CwD,EAAIxF,KAhDxC,CAqCXc,YAAY5T,OAASsY,EAAIU,cAAb,CAA8B,IAA1C,CAAgD,CAACV,EAAIW,OAArD,CAA8D,UAAM,CAClErR,SAASsD,QAAT,CAAkB2J,IAAlB,CAA4BC,aAA5B,KAA6CwD,EAAIxF,KAAjD,SAA8DwF,EAAIU,cAAlE,UAAyFV,EAAIW,OAD3B,CAE5DjZ,MAF4D,EAGhE4H,SAASsD,QAAT,CAAkByL,MAAlB,EACH,CAJD,CAeL,CAzDwB,CA0DzBsB,EAAGiB,IAAH,CAAQnB,CAAR,CACD,CA5DU,CAAb,CA+DA,QAASoB,UAAT,CAAmBC,CAAnB,CAA4BC,CAA5B,CAAoCC,CAApC,CAA8CC,CAA9C,CAAoDC,CAApD,CAA0DC,CAA1D,CAAkEC,CAAlE,CAA0E,CACxE,GAAI3P,GAAUnC,SAAS+R,cAAT,CAAwB,QAAUP,CAAlC,CAAd,CACA,GAAe,IAAX,GAAJ,CAAqB,SACrB,GAAIQ,GAAS9Q,EAAEiB,CAAF,EAAWyB,OAAX,CAAmB,QAAnB,CAAb,CACA,GAAoB,WAAjB,QAAOqO,MAAP,EAAgD,CAAhB,SAAMC,KAAzC,CAAsD,SACtD,GAA+E,MAA3E,IAAQjM,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,EAAuCE,YAAvC,CAAoD,KAApD,EAA2D3D,SAA3D,CAAqE,CAArE,CAAuE,CAAvE,CAAJ,CAAuF,CAErF,GADAtB,EAAEiB,CAAF,EAAWkD,IAAX,CAAgB,cAAaoM,CAAb,CAAoB,eAApB,CAAkCD,CAAlC,CAA0C,8BAA1C,CAAqEI,CAArE,CAA0E,aAA1E,CAAsFD,CAAtF,CAA2F,KAA3G,CACA,CAAIQ,SAASC,aAAT,EAAJ,CAA8B,SAFuD,IAGrF,GAAIC,GAAMlQ,EAAQ8D,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,CAAV,CACEqM,EAAQtS,SAASmE,eAAT,CAAyBnE,SAASmE,eAAT,CAAyBoO,WAAlD,CAAgEvS,SAASwS,IAAT,CAAcD,WADxF,CAEEpF,EAAS,EAFX,CAGEsF,EAAYJ,CANuE,CAQjE,IAAb,GAR8E,EASnFlF,GAAUsF,EAAUC,UAT+D,CAUnFD,EAAYA,EAAUE,YAV6D,CAYrF,GAAIC,GAAQN,EAAQnF,CAApB,CACA,GAAIkF,EAAItE,KAAJ,CAAY6E,CAAhB,CAAuB,CACrB,GAAIC,GAAQR,EAAItE,KAAJ,CAAYsE,EAAI3N,MAA5B,CACIoO,EAAO,EAAIF,EAAQP,EAAItE,KAD3B,CAGIgF,EAAS/S,SAASgT,aAAT,CAAuB,KAAvB,CAHb,CAIAD,EAAOE,YAAP,CAAoB,OAApB,CAA6B,UAA7B,CALqB,CAMrBF,EAAOG,KAAP,CAAaC,cAAb,CAA8B,WANT,CAOrB,GAAIC,GAAWpT,SAASqT,cAAT,CAAwBpW,GAAGjC,iBAAH,CAAuB,GAAvB,CAA6B2D,KAAKmP,KAAL,CAAgB,GAAL,EAAX,CAA7B,CAAoD,IAApD,CAAyD7Q,GAAG/B,KAApF,CAAf,CACA6X,EAAOO,WAAP,CAAmBF,CAAnB,CARqB,CASrBjR,EAAQoR,YAAR,CAAqBR,CAArB,CAA6BV,CAA7B,CATqB,CAUrBnR,EAAEmR,CAAF,EAAOtE,KAAP,CAAa6E,CAAb,CAVqB,CAWrB1R,EAAEmR,CAAF,EAAO3N,MAAP,CARYkO,EAAQC,CAQpB,CACD,CACGb,CA1BiF,EA0BzEA,EAAOlO,QAAP,CAAgB,gBAAhB,CACb,CA3BD,IA6BE3B,GAAQqR,SAAR,CAAoB,cAAe9B,CAAf,CAA0B,WAA1B,CAAsCF,CAAtC,CAAgD,8BAAhD,CAA6EM,CAA7E,CAAsF,aAAtF,CAAoGD,CAApG,CAA6G,KA7BnI,CA8BMG,CA9BN,EA8BcA,EAAOtO,WAAP,CAAmB,gBAAnB,CA9Bd,CAiCA,QACD,CAGD,GAAI+P,cAAe,CACjBC,OAAS,CADQ,CAEjBC,SAFiB,CAGjBpM,SAHiB,CAKjBqM,UAAW,mBAASjL,CAAT,CAAc,CACvB,GAAIkL,GAAUlL,EAAItF,KAAJ,CAAU,4EAAV,CAAd,CADuB,MAElBwQ,EAFkB,CAGhB,CACL3I,MAAO2I,EAAQ,CAAR,GAAcA,EAAQ,CAAR,CADhB,CAELtM,OAAQsM,EAAQ,CAAR,GAAc,GAFjB,CAGLhQ,KAAMgQ,EAAQ,CAAR,GAAcA,EAAQ,CAAR,CAHf,CAHgB,CAEF,IAMtB,CAbgB,CAejBC,WAAY,oBAAShD,CAAT,CAAY,gBACtBA,EAAEiD,eAAF,EADsB,CAEtB,GAAI9G,GAAO,KAAK9G,YAAL,CAAkB,MAAlB,CAAX,CACE6N,EAAY9S,EAAE,IAAF,EAAQ+S,QAAR,CAAiB,eAAjB,CADd,CAEEC,EAAYT,aAAaG,SAAb,CAAuB3G,CAAvB,CAFd,CAGA,GAAI,CAACiH,CAAL,CAAgB,SAChB,GAAIhJ,GAAQgJ,OAAZ,CACEC,EAAWD,QADb,CAEEE,EAASF,MAFX,CAGEG,EAAY,WAAWnJ,CAAX,CAAiB,GAAjB,CAAqBkJ,CAHnC,CAIEE,EAAUpT,EAAE,IAAMmT,CAAR,CAJZ,CAKsB,CAAlB,IAAQnW,MAXU,GAYpBgD,EAAE,MAAF,EAAUsN,QAAV,GAAqB+F,KAArB,GAA6BC,MAA7B,CAAoC,aAAYH,CAAZ,CAAsB,WAA1D,CAZoB,CAapBC,EAAUpT,EAAE,IAAMmT,CAAR,CAbU,CAcpBC,EAAQxQ,QAAR,CAAiB,oEAAjB,CAdoB,CAepBwQ,EAAQG,UAAR,CAAmBhB,aAAaiB,SAAhC,CAfoB,CAgBpBJ,EAAQK,SAAR,CAAkBlB,aAAamB,WAA/B,CAhBoB,EAkBtB,GAAIrN,GAASrG,EAAE,IAAF,EAAQ0C,OAAR,CAAgB,kBAAhB,CAAb,CACA,GAAoB,CAAhB,GAAO1F,MAAX,CAAuB,CACrB,GAAImW,GAAa9M,EAAOsC,IAAP,CAAY,IAAZ,CAAjB,CAAoC,OACpC,IAAK,GAAIrG,EAAT,GAAeiQ,cAAalM,MAA5B,CAAsC,GAAI/D,GAAM6Q,CAAN,EAAmBZ,aAAalM,MAAb,CAAoB/D,CAApB,GAA2B6Q,CAAlD,CAA6D,OACnGZ,aAAalM,MAAb,CAAoB8M,CAApB,EAAiC9M,EAAOsC,IAAP,CAAY,IAAZ,CAClC,CAJD,IAME4J,cAAalM,MAAb,GANF,CAQA,GAAIsN,EAAJ,CACG/D,EAAEgE,OAAF,CAAa5T,EAAEyD,MAAF,EAAUD,MAAV,GAAqB,GA5Bf,EA6BpB4P,EAAQnT,GAAR,CAAY,CAACmD,IAAIwM,EAAEiE,KAAF,CAAQ,CAAb,CAAZ,CA7BoB,CA8BpBF,EAAkB,MA9BE,GAgCpBP,EAAQnT,GAAR,CAAY,CAACkD,OAAOnD,EAAEyD,MAAF,EAAUD,MAAV,GAAmBoM,EAAEiE,KAArB,CAA2B,CAAnC,CAAZ,CAhCoB,CAiCpBF,EAAkB,SAjCE,EAmCnB/D,EAAEkE,OAAF,CAAa9T,EAAEyD,MAAF,EAAUoJ,KAAV,GAAoB,GAnCd,EAoCpBuG,EAAQnT,GAAR,CAAY,CAACiM,KAAK0D,EAAEmE,KAAF,CAAQ,EAAd,CAAZ,CApCoB,CAqCpBJ,GAAmB,MArCC,GAuCpBP,EAAQnT,GAAR,CAAY,CAAC+T,MAAMhU,EAAEyD,MAAF,EAAUoJ,KAAV,GAAkB+C,EAAEmE,KAApB,CAA0B,EAAjC,CAAZ,CAvCoB,CAwCpBJ,GAAmB,OAxCC,EA0CtBP,EAAQnT,GAAR,CAAY,CAACgU,OAAQ1B,aAAaC,MAAb,EAAT,CAAgC,mBAAoBmB,CAApD,CAAZ,CA1CsB,CA2CtB,KAAK3B,KAAL,CAAWkC,MAAX,CAAoB,UA3CE,CA4CtB3J,UAAU4J,OAAV,CAAkBnK,CAAlB,CAAyBiJ,CAAzB,CAAmCC,CAAnC,CAA2C,SAACzI,CAAD,CAAM9H,CAAN,CAAe,CACxDc,OAAOZ,UAAP,CAAkB,UAAM,CACtBuQ,EAAQjP,IAAR,CAAaxB,EAAOA,CAAP,CAAe5G,GAAGxE,IAAH,EAAW,OAA8B,EAA9B,MAAqBkT,CAArB,IAAX,CAA5B,EACCjI,WADD,CACa,YADb,CADsB,CAGtB,MAAKwP,KAAL,CAAWkC,MAAX,CAAoB,SACrB,CAJD,CAIG,CAJH,CAKD,CAND,CA5CsB,CAmDtBtE,EAAEzJ,cAAF,EACD,CAnEgB,CAqEjBuN,YAAa,sBAAW,CACtB,GAAIN,GAAUpT,EAAE,IAAF,CAAd,CACA,GAAIA,EAAE,IAAF,EAAQ6J,EAAR,CAAW,GAAX,CAAJ,CAAqB,CACnB,GAAImJ,GAAYT,aAAaG,SAAb,CAAuB,KAAKzN,YAAL,CAAkB,MAAlB,CAAvB,CAAhB,CACA,GAAI,CAAC+N,CAAL,CAAgB,OAChB,GAAIhJ,GAAQgJ,OAAZ,CACEE,EAASF,MADX,CAEAI,EAAUpT,EAAE,YAAYgK,CAAZ,CAAkB,GAAlB,CAAsBkJ,CAAxB,EAAgCG,KAAhC,EACX,CARqB,KASE,CAAjB,GAAQrW,MATO,EAUpBoX,aAAahB,EAAQ,CAAR,EAAWiB,OAAxB,CAVoB,CAWpBjB,EAAUpT,EAAE,IAAMuS,aAAalM,MAAb,CAAoB+M,EAAQzK,IAAR,CAAa,IAAb,CAApB,CAAR,CAEb,CAlFgB,CAoFjB6K,UAAW,oBAAW,CACpB,GAAIJ,GAAUpT,EAAE,IAAF,CAAd,CACA,GAAIA,EAAE,IAAF,EAAQ6J,EAAR,CAAW,GAAX,CAAJ,CAAqB,CACf,KAAKyK,QADU,EAEjBF,aAAa,KAAKE,QAAlB,CAFiB,CAInB,GAAItB,GAAYT,aAAaG,SAAb,CAAuB,KAAKzN,YAAL,CAAkB,MAAlB,CAAvB,CAAhB,CACA,GAAI,CAAC+N,CAAL,CAAgB,OAChB,GAAIhJ,GAAQgJ,OAAZ,CACEE,EAASF,MADX,CAEAI,EAAUpT,EAAE,YAAYgK,CAAZ,CAAkB,GAAlB,CAAsBkJ,CAAxB,EAAgCG,KAAhC,EACX,CAXmB,yBAalBe,aAAahB,EAAQ,CAAR,EAAWiB,OAAxB,CAbkB,CAclB,GAAIE,GAAMnB,CAAV,CACAA,EAAQ,CAAR,EAAWiB,OAAX,CAAqBxR,WAAW,UAAM,CACpC0R,EAAI3R,QAAJ,CAAa,YAAb,CADoC,CAEpCC,WAAW,UAAM,CACf,MAAO0P,cAAalM,MAAb,CAAoBkO,EAAI5L,IAAJ,CAAS,IAAT,CAApB,CADQ,CAEf4L,EAAIC,MAAJ,EACD,CAHD,CAGGjC,aAAakC,QAAb,CAAsBC,UAHzB,CAID,CANoB,CAMlBnC,aAAakC,QAAb,CAAsBE,IANJ,CAfH,CAsBlBvB,EAAUpT,EAAE,IAAMuS,aAAalM,MAAb,CAAoB+M,EAAQzK,IAAR,CAAa,IAAb,CAApB,CAAR,CAtBQ,EAYI,CAAjB,GAAQ3L,MAZK,SAwBrB,CA5GgB,CA8GjByX,SAAU,CACRH,SAAU,EADF,CAERI,WAAY,GAFJ,CAGRC,KAAM,GAHE,CA9GO,CAAnB,CAsHA,QAASC,YAAT,EAA6B,CAAE,CAE/B,QAASC,WAAT,CAAoBvS,CAApB,CAAwB,CACtB,GAAIsM,GAAO9P,SAAS+R,cAAT,CAAwBvO,CAAxB,CAAX,CACA,GAAIsM,CAAJ,CAAU,CACR,GAAIlQ,GAAOkQ,EAAKrD,aAAL,CAAmB,kBAAnB,CAAX,CACG7M,GAAQ,CAACA,EAAKQ,KAFT,GAEgBR,EAAKQ,KAAL,CAAa2E,UAAU,MAAV,CAF7B,EAGJ+K,EAAKkG,EAAL,CAAQ5V,KAHJ,GAGW0P,EAAKkG,EAAL,CAAQ5V,KAAR,CAAgB2E,UAAU,OAAV,CAH3B,EAIJ+K,EAAKmG,YAAL,CAAkB7V,KAJd,GAIqB0P,EAAKmG,YAAL,CAAkB7V,KAAlB,CAA0ByE,aAAa,cAAb,CAJ/C,CAKT,CACF,CAED,QAASqR,YAAT,CAAqB1S,CAArB,CAAyB,CACvB,GAAIyS,GAAejW,SAAS+R,cAAT,CAAwBvO,CAAxB,EAA4ByS,YAA/C,CACIA,GAAgB,CAACA,EAAa7V,KAFX,GAGrB6V,EAAa7V,KAAb,CAAqByE,aAAa,cAAb,CAHA,CAKxB,CAEA,UAAU3D,CAAV,CAAa,CACZA,EAAE+Q,KAAF,CAAQkE,OAAR,CAAgBC,IAAhB,CAAuB,CACrBC,IAAK,aAAUC,CAAV,CAAoB,CACA,CAAlB,QAAKC,QAAL,EAAsD,KAA/B,QAAKC,OAAL,CAAalR,WAAb,EAAvB,EAA4E,EAAb,QAAKmR,GADlD,GAEhB,KAAKC,QAAL,EAAqC,CAApB,QAAKC,UAFN,CAGnBL,EAASM,OAAT,CAAiBC,KAAjB,CAAuB,IAAvB,CAHmB,CAKS,eAApB,QAAKF,UAAL,EAAqE,CAA9B,QAAKF,GAAL,CAASlY,OAAT,CAAiB,OAAjB,CAL5B,CAMnB2C,EAAE,IAAF,EAAQ4V,OAAR,CAAgB,OAAhB,CANmB,CAUnB5V,EAAE,IAAF,EAAQkI,IAAR,CAAa,MAAb,CAAqBkN,EAASM,OAA9B,CAVmB,CAaxB,CAdoB,CAgBxB,CAjBA,EAiBCG,MAjBD,C,CAmBD,GAAI5E,UAAW,CACb6E,UAAW,mBAASC,CAAT,CAAkBC,CAAlB,CAA+BC,CAA/B,CAA6C,OAClC,KAAhB,cADkD,KAEpD/Z,OAAMH,GAAGzE,cAAT,CAFoD,EAKrB,IAA7B,eAAa0e,CAAb,CALkD,GAMpDpQ,aAAaoQ,CAAb,EAA4BC,CANwB,EAQlD,KARkD,CAUpDrQ,aAAaoQ,CAAb,EAA4BhW,EAAE,aAAegW,CAAjB,EAA8BnM,EAA9B,CAAiC,UAAjC,CAVwB,CAanB,MAA7B,eAAamM,CAAb,CAbgD,CAclDhW,EAAE,aAAegW,CAAjB,EAA8BrN,IAA9B,CAAmC,SAAnC,CAA6C,SAA7C,CAdkD,CAgBlD3I,EAAE,aAAegW,CAAjB,EAA8BE,UAA9B,CAAyC,SAAzC,CAhBkD,CAkBjB,MAA7B,eAAaF,CAAb,CAAD,EAA0C,iBAAaA,CAAb,CAlBK,CAmBvD,CApBY,CAsBbG,UAAW,mBAASC,CAAT,CAAkB,CAC3B,GAAIC,GAAUpF,SAAS6E,SAAT,CAAmBM,CAAnB,CAA4B,WAA5B,IAAd,CAIA,MAHe,KAAX,GAGJ,GAFEpW,EAAEsW,EAAF,CAAKC,GAAL,CAAW,CAACF,CAEd,EAAOA,CACR,CA5BY,CA8BbxL,YAAa,qBAASuL,CAAT,CAAkB,CAC7B,GAAIC,GAAUpF,SAAS6E,SAAT,CAAmBM,CAAnB,CAA4B,aAA5B,IAAd,CAYA,MAXe,KAAX,GAWJ,GAVEjP,aAAaC,IAAb,CAAkB,UAAlB,CAA8B,WAA9B,CAA2C3D,MAA3C,CAAmD,GAAnD,CAUF,CATM4S,CASN,EARIzL,SAASC,WAAT,EAQJ,CAPImD,SAASwG,MAAT,CAAgB,cAAhB,CAOJ,EAJIxG,SAASC,MAAT,CAAgB,cAAhB,CAAgC,8BAAhC,CAIJ,CAFE9G,aAAaI,OAAb,CAAqB,UAArB,CAEF,EAAO8O,CACR,CA5CY,CA8CbG,QAAS,iBAASJ,CAAT,CAAkB,CACzB,GAAIC,GAAUpF,SAAS6E,SAAT,CAAmBM,CAAnB,CAA4B,SAA5B,IAAd,CAOA,MANIC,EAMJ,CALErI,SAASC,MAAT,CAAgB,SAAhB,CAA2B,sDAA3B,CAKF,CAFED,SAASwG,MAAT,CAAgB,SAAhB,CAEF,CAAO6B,CACR,CAvDY,CAyDbnF,cAAe,uBAASkF,CAAT,CAAkB,CAC/B,MAAOnF,UAAS6E,SAAT,CAAmBM,CAAnB,CAA4B,eAA5B,IACR,CA3DY,CAAf,CA8DIK,MAAQ,CACV1Z,IADU,CAEV2Z,KAAM,eAAW,CACZ,KAAK3Z,CADO,CACJiD,EAAE,UAAF,EAAcsT,MAAd,CAAqBtT,EAAE,WAAF,CAArB,EAAqCuN,KAArC,CAA2CvN,EAAE,WAAF,CAA3C,CADI,CAEVA,EAAE,UAAF,EAAcsT,MAAd,CAAqBtT,EAAE,WAAF,CAArB,EAAqCuN,KAArC,CAA2CvN,EAAE,WAAF,CAA3C,CAFU,CAGf,KAAKjD,CAAL,CAAS,CAAC,KAAKA,CAChB,CANS,CA9DZ,CAuEI0P,QAAY,gBAAkBhJ,OAAnB,EAA8BA,OAAOkT,aAAP,EAAwB7X,mBAAoB6X,cAA3E,IAvEd,CAwEoC,SAAjC,4B,GACDlK,U,EACkC,OAAjC,4B,GACDA,U,EAEF,GAAI7S,aAAciK,UAAU,aAAV,GAA4B,IAA9C,CACA,QAAS+S,eAAT,CAAwBC,CAAxB,CAA8B,CACxBrR,SAASqR,CAAT,mBADwB,GAE5Bjd,YAAcid,CAFc,CAG5BrS,WAAW,aAAX,CAA0BqS,CAA1B,CAAgC,GAAhC,CAH4B,CAI7B,CAED,QAASC,SAAT,EAAoB,CAwBlB,GAvBI5f,MAuBJ,EAvBY8I,EAAE,UAAF,EAAcsE,IAAd,EAuBZ,CAtBGmI,OAsBH,CArBEzM,EAAE,cAAF,EAAkB+W,OAAlB,CAA0B,gGAAkGhb,GAAGvC,aAArG,CAAmH,UAA7I,CAqBF,CAnBEwG,EAAE,cAAF,EAAkB+W,OAAlB,CAA0B,8FAAgGhb,GAAGtC,WAAnG,CAA+G,UAAzI,CAmBF,CAjBAuG,EAAE,cAAF,EAAkB+W,OAAlB,CAA0Bhb,GAAGnC,WAAH,CAAe,wLAAzC,CAiBA,CAfG6K,OAAO8B,WAeV,EAdEvG,EAAE,cAAF,EAAkB+W,OAAlB,CAA0BtS,OAAO8B,WAAjC,CAcF,CAZAyQ,QAAQpS,IAAR,EAYA,CAXA1C,gBAWA,CAVA+U,iBAUA,CATAC,eASA,CAPAC,KAAKvS,IAAL,EAOA,CALAwS,QAAQxS,IAAR,EAKA,CAJA5E,EAAE,cAAF,EAAkBqX,EAAlB,CAAqB,OAArB,CAA8B,UAAW,CACvCD,QAAQE,MAAR,CAAetX,EAAE,IAAF,EAAQ0B,GAAR,EAAf,CACD,CAFD,CAIA,CAAGmC,UAAU,aAAV,CAAH,CAA6B,CAC3B,GAAI7F,GAAIS,OAAO,aAAP,CAAR,CACQ,SAAL,KAAuB,EAAL,GAFM,GAGzBK,SAAS+R,cAAT,CAAwB,cAAxB,EAAwCmB,KAAxC,CAA8CtF,QAA9C,CAAyD1O,CAHhC,CAI5B,CAkFD,GA/EAuZ,sBA+EA,CA7EI9K,OA6EJ,EA5DEzM,EAAE,MAAF,EAAU4C,QAAV,CAAmB,YAAnB,CA4DF,CA3DE5C,EAAE,6CAAF,EAA+CqG,MAA/C,GAAwD8C,IAAxD,EA2DF,CA1DEnJ,EAAE,WAAF,EAAeiG,KAAf,CAAqB,UAAW,CAO9B,MANGjG,GAAE,cAAF,EAAkB6J,EAAlB,CAAqB,UAArB,CAMH,CALE2N,UAAU,OAAV,CAKF,CAFEA,UAAU,aAAV,CAEF,GACD,CARD,CA0DF,CAjDExX,EAAE,MAAF,EAAUiG,KAAV,CAAgB,UAAgB,CAC9BuR,UAAU,OAAV,CAD8B,CAE9BxX,EAAE,eAAF,EAAmB4C,QAAnB,CAA4B,YAA5B,CAF8B,CAG9BC,WAAW,UAAM,CACf7C,EAAE,eAAF,EAAmBwU,MAAnB,EACD,CAFD,CAEGjC,aAAakC,QAAb,CAAsBC,UAFzB,CAGD,CAND,CAiDF,CA1CE1U,EAAE,aAAF,EAAiBsE,IAAjB,EA0CF,CAzCEtE,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,iBAAtB,CAAyC9E,aAAaK,UAAtD,CAyCF,CAvCE5E,SAASC,MAAT,CAAgB,IAAhB,CAAsB,8BAAtB,CAuCF,GA5EEjO,EAAE,aAAF,EAAiBmJ,IAAjB,EA4EF,CA3EEnJ,EAAE,WAAF,EAAeyX,UAAf,CAA0B,UAAW,CAAED,UAAU,MAAMxX,EAAE,IAAF,EAAQoL,IAAR,CAAa,UAAb,CAAhB,CAA4C,CAAnF,CA2EF,CA1EEpL,EAAE,eAAF,EAAmBuT,UAAnB,CAA8B,UAAW,CAAEiE,UAAU,OAAV,CAAqB,CAAhE,CA0EF,CAzEExX,EAAE,MAAF,EAAUqX,EAAV,CAAa,YAAb,CAA2B,iBAA3B,CAA8C,SAASnR,CAAT,CAAa,iBACzD,KAAKoO,QAAL,CAAgBzR,WAAW,iBAAM0P,cAAaK,UAAb,CAAwB1K,IAAxB,SAAmChC,CAAnC,CAAN,CAAX,CAAyDqM,aAAakC,QAAb,CAAsBH,QAA/E,CACjB,CAFD,CAyEF,CAtEEtU,EAAE,MAAF,EAAUqX,EAAV,CAAa,YAAb,CAA2B,iBAA3B,CAA8C9E,aAAaiB,SAA3D,CAsEF,CArEExT,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,iBAAtB,CAAyC,SAASzH,CAAT,CAAY,CACnDA,EAAEzJ,cAAF,EADmD,CAEnD,GAAI4F,GAAO,KAAK9G,YAAL,CAAkB,MAAlB,CAAX,CACqC,WAAjC,YAAU8G,EAAKpK,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAV,CAH+C,GAIjD7C,SAASsD,QAAT,CAAkB2J,IAAlB,CAAyBA,CAJwB,CAMpD,CAND,CAqEF,EAnCA/L,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,UAAtB,CAAkC,UAAW,CAE3C,MADAxW,QAAOb,EAAE,IAAF,EAAQ0C,OAAR,CAAgB,MAAhB,CAAP,CAAgC1C,EAAE,IAAF,EAAQoL,IAAR,CAAa,MAAb,CAAhC,CAAsDpL,EAAE,IAAF,EAAQoL,IAAR,CAAa,MAAb,CAAtD,CAA4EpL,EAAE,IAAF,EAAQoL,IAAR,CAAa,OAAb,CAA5E,CAAmGpL,EAAE,IAAF,EAAQoL,IAAR,CAAa,OAAb,CAAnG,CACA,GACD,CAHD,CAmCA,CA/BApL,EAAE,UAAF,EAAciG,KAAd,CAAoB,UAAW,CAC7BjG,EAAE,IAAF,EAAQE,IAAR,CAAa,WAAb,EAA0BwX,WAA1B,CAAsC,UAAtC,CACD,CAFD,EAGCnE,UAHD,CAGY,UAAW,CACrBvT,EAAE,IAAF,EAAQE,IAAR,CAAa,WAAb,EAA0BsC,WAA1B,CAAsC,UAAtC,CACD,CALD,CA+BA,CAzBAxC,EAAE,qBAAF,EAAyB4G,MAAzB,CAAgC,UAAW,CACzC/F,OAAOb,EAAE,IAAF,EAAQ0C,OAAR,CAAgB,MAAhB,CAAP,CAAgC,SAAS1C,EAAE,IAAF,EAAQ0B,GAAR,EAAT,CAAuB,GAAvD,CAA4D,SAA5D,CACD,CAFD,CAyBA,CAtBA1B,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,UAAtB,CAAkC,UAAW,CAE3C,MADA9V,SAAQvB,EAAE,IAAF,EAAQ0C,OAAR,CAAgB,MAAhB,CAAR,CAAiC1C,EAAE,IAAF,EAAQoL,IAAR,CAAa,KAAb,CAAjC,CAAsDpL,EAAE,IAAF,EAAQoL,IAAR,CAAa,OAAb,CAAtD,CAA6EpL,EAAE,IAAF,EAAQoL,IAAR,CAAa,OAAb,CAA7E,CACA,GACD,CAHD,CAsBA,CAlBApL,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,SAAtB,CAAiC,UAAW,CAC1C,GAAIM,GAAS3X,EAAE,IAAF,EAAQoL,IAAR,CAAa,QAAb,CAAb,CAIA,MAHAwM,MAAKC,EAAL,CAAQ,sCAAR,CAAgD,UAAW,CACzDC,gBAAgBH,CAAhB,CAAuB,OAAvB,CAA+B,OAA/B,IAA+C,EAA/C,CAAkD,MAAlD,CACD,CAFD,CAGA,GACD,CAND,CAkBA,CAVA3X,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,QAAtB,CAAgC,SAAStG,CAAT,CAAgB,CAACgH,WAAW/X,EAAE,IAAF,CAAX,CAAoB+Q,CAApB,CAA2B,CAA5E,CAUA,CARA/Q,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,MAAtB,CAA8BhL,UAA9B,CAQA,CAPArM,EAAE,kBAAF,EAAsB8E,IAAtB,CAA2B,UAAW,CACpC,GAAIkT,GAAQhY,EAAE,IAAF,EAAQ2I,IAAR,CAAa,KAAb,EAAoB,QAAhC,CACA3I,EAAE,IAAF,EAAQ2I,IAAR,CAAa,KAAb,CAAoBqP,CAApB,CAFoC,CAGpChY,EAAE,IAAF,EAAQE,IAAR,CAAa,OAAb,EAAsByI,IAAtB,CAA2B,IAA3B,CAAiCqP,CAAjC,CACD,CAJD,CAOA,CAFAhY,EAAE,oBAAF,EAAwB2I,IAAxB,CAA6B,IAA7B,CAAmC,cAAnC,CAEA,CAFoD3I,EAAE,mBAAF,EAAuBoL,IAAvB,CAA4B,QAA5B,CAAsC,cAAtC,CAEpD,CADApL,EAAE,qBAAF,EAAyB2I,IAAzB,CAA8B,IAA9B,CAAoC,cAApC,CACA,CADqD3I,EAAE,oBAAF,EAAwBoL,IAAxB,CAA6B,QAA7B,CAAuC,cAAvC,CACrD,CAAG,CAACqB,OAAJ,CAAa,CACXzM,EAAE,gCAAF,EAAoCiY,KAApC,CAA0C,UAAW,CACnDjY,EAAE,YAAF,EAAgBkY,QAAhB,EACD,CAFD,CAEG,UAAW,CACZlY,EAAE,YAAF,EAAgBmY,KAAhB,EACD,CAJD,CADW,CAMX,GAAIC,GAAgB,CAACxS,oBAAH,CAA6B,QAA7B,CAAwC,UAA1D,CACIyS,EAAS,gCAA6BD,CAA7B,CAAyC,+UACvD,CARD,IAUE,IAAIC,GAAS,EAAb,CAmFF,GA/EAvJ,OAAOoG,IAAP,EA+EA,CA7EAlV,EAAE,4CAA2CqY,CAA3C,mNAAF,EAEWC,QAFX,CAEoB,YAFpB,CA6EA,CAbAtY,EAAE,MAAF,EAAUqX,EAAV,CAAa,QAAb,CAAuB,uBAAvB,CAAgD,SAASzH,CAAT,CAAY,CAC1DA,EAAEzJ,cAAF,EAD0D,CAE1DwI,aAAa,IAAb,CACD,CAHD,CAaA,CARA3O,EAAE,UAAF,EAAcuN,KAAd,CAAoB,0FAAoFrW,OAAS6E,GAAGnE,SAAZ,CAAwBmE,GAAGlC,KAA/G,EAAsH,mBAA1I,CAQA,CADAoX,SAASuF,OAAT,IACA,CAAI5Q,YAAJ,CACE,IAAI,GAAI2S,EAAR,GAAatH,SAAb,CAC0B,GAApB,IAAE3P,SAAF,CAAY,CAAZ,CAAc,CAAd,CADN,GAEEtB,EAAE,cAAF,EAAkBwG,MAAlB,CAAyB,kEAA+D+R,CAA/D,CAAiE,2BAAjE,CAA2FA,CAA3F,CAA6F,mBAA7F,CAA+GA,CAA/G,CAAiH,qBAAjH,CAAoIxc,GAAG,YAAYwc,CAAf,CAApI,CAAsJ,gBAA/K,CAFF,CAGEtH,SAASsH,CAAT,KAHF,EADF,IAOEvY,GAAE,cAAF,EAAkBwG,MAAlB,CAAyB,8BAA8BzK,GAAGzE,cAAjC,CAAgD,sSAAzE,CAPF,CAUA,GAAIkhB,GAAU1Z,SAAS+R,cAAT,CAAwB,SAAxB,CAAd,CACG2H,CAtNe,GAwNhBA,EAAQC,OAAR,CAAgB,UAAU,CAACthB,cAAoB,CAxN/B,CAyNhBqhB,EAAQE,MAAR,CAAe,UAAU,CAACvhB,cAAqB,CAzN/B,EA4NlB6I,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,sBAAtB,CAA8C,UAAW,CACvD,GAAIsB,GAAK3Y,EAAE,IAAF,CAAT,CACIiM,EAASjM,EAAE,WAAY2Y,EAAGhQ,IAAH,CAAQ,MAAR,EAAgBhI,MAAhB,CAAuB,CAAvB,CAAZ,CAAwC,KAA1C,EAAgDsL,MAAhD,IAA4DjM,EAAE,WAAY2Y,EAAG7Y,IAAH,GAAU6B,KAAV,CAAgB,IAAhB,EAAsB,CAAtB,CAAZ,CAAuC,KAAzC,EAA+CsK,MAA/C,EAA5D,IADb,CAOA,MALGA,EAKH,EAJEjM,EAAE,YAAF,EAAgB4Y,OAAhB,CAAwB,CACtBtV,UAAW2I,EAAO7I,GAAP,EAAepD,EAAE,eAAF,EAAmBwD,MAAnB,GAA8B,EAA7C,CADW,CAAxB,CAEG,GAFH,CAIF,GACD,CATD,CA5NkB,CAuOlBxD,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,OAAtB,CAA+B,UAAW,CACL,WAAhC,QAAOrX,GAAE,IAAF,EAAQoL,IAAR,CAAa,MAAb,CAD8B,EACQpL,EAAE,IAAF,EAAQoL,IAAR,CAAa,MAAb,CAAqBpL,EAAE,IAAF,EAAQmE,IAAR,EAArB,CADR,CAExC,GAAI0U,GAAMC,MAAM9Y,EAAE,IAAF,EAAQmE,IAAR,EAAN,CAAV,CACAnE,EAAE,IAAF,EAAQmE,IAAR,CAAanE,EAAE,IAAF,EAAQ2I,IAAR,CAAa,OAAb,CAAb,CAHwC,CAIxC3I,EAAE,IAAF,EAAQ2I,IAAR,CAAa,OAAb,CAAsBkQ,CAAtB,CACD,CALD,CAvOkB,CA+OlB7Y,EAAE,6BAAF,EAA+B4C,QAA/B,CAAwC,8CAAxC,EAAwFuB,IAAxF,6TAGEgF,IAHF,GAGSmP,QAHT,CAGkB,MAHlB,CA/OkB,CAmPlBtY,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,MAAtB,CAA8BvL,SAA9B,CAnPkB,CAoPlB9L,EAAE,yBAAF,EAA6BqX,EAA7B,CAAgC,OAAhC,CAAyC,UAAW,CAAErX,EAAE,IAAF,EAAQ+Y,MAAR,EAAmB,CAAzE,CApPkB,CAuPlB/Y,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAqB,QAArB,CAA+B,UAAW,CAACrX,EAAE,IAAF,EAAQgZ,MAAR,EAAkB,CAA7D,CAvPkB,CAyPlBhZ,EAAElB,QAAF,EAAYuY,EAAZ,CAAe,sEAAf,CAAuF,SAAStG,CAAT,CAAgB,CACrG,GAAIjQ,GAAUd,EAAE+Q,EAAM4G,MAAR,CAAd,CACyC,cAArC,IAAMsB,aAAN,CAAoBC,aAApB,EAAwDpY,EAAQiS,QAAR,CAAiB,YAAjB,CAFyC,EAETwE,qBAAqBzW,CAArB,CAC7F,CAHD,CAzPkB,CA6PlBd,EAAE,MAAF,EAAUqX,EAAV,CAAa,YAAb,CAA2B,YAA3B,CAAyC,UAAW,CACd,WAAjC,QAAOrX,GAAE,IAAF,EAAQ2I,IAAR,CAAa,OAAb,CADwC,EAEhD3I,EAAE,IAAF,EAAQ2I,IAAR,CAAa,OAAb,CAAsBwQ,UAAUnZ,EAAE,IAAF,EAAQ2I,IAAR,CAAa,KAAb,EAAoBhH,KAApB,CAA0B,QAA1B,EAAoC,CAApC,EAAuCA,KAAvC,CAA6C,MAA7C,EAAqD,CAArD,EAAwDyX,WAAxD,EAAV,CAAtB,CAEH,CAJD,CA7PkB,CAkQlBC,KAAKC,YAAL,EAlQkB,CAmQlBtZ,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,YAAtB,CAAoC,SAASnR,CAAT,CAAa,CAC/CA,EAAGC,cAAH,EAD+C,CAE/C,GAAIoP,GAAMvV,EAAE,IAAF,EAAQ2I,IAAR,CAAa,MAAb,CAAV,CACA3I,EAAE,IAAF,EAAQ2K,WAAR,CAAoB,gBAAe4K,CAAf,CAAmB,wCAAvC,CACD,CAJD,CAnQkB,CAyQlBvV,EAAE,mBAAF,EAAuBqX,EAAvB,CAA0B,OAA1B,CAAmC,UAAW,CAC5C,GAAIlV,GAAQoX,WAAWC,OAAX,CAAmBxZ,EAAE,IAAF,EAAQ0B,GAAR,EAAnB,CAAZ,CACGS,CAFyC,EAG1CnC,EAAE,IAAF,EAAQ0B,GAAR,CAAYS,EAAMsX,IAAlB,EACC/W,OADD,CACS,WADT,EACsBxC,IADtB,CAC2B,kBAD3B,EAC+CwB,GAD/C,CACmDS,EAAMuX,IADzD,CAGH,CAND,CAzQkB,CAgRO,WAAtB,QAAOC,WAAP,EAAqCA,UAhRtB,EAgRkCC,QAAQhV,IAAR,EAhRlC,CAkRlB5E,EAAE,aAAF,EAAiB4C,QAAjB,CAA0B,mCAA1B,CAlRkB,CAmRlB5C,EAAE,MAAF,EAAUqX,EAAV,CAAa,QAAb,CAAuB,wBAAvB,CAA+C,UAAW,CACnDrX,EAAE,aAAF,EAAiB+S,QAAjB,CAA0B,WAA1B,CADmD,CAG/C,CAAE/S,EAAE,wBAAF,EAA0B6J,EAA1B,CAA6B,UAA7B,CAH6C,EAItD7J,EAAE,aAAF,EAAiBwC,WAAjB,CAA6B,WAA7B,CAJsD,CAEtDxC,EAAE,aAAF,EAAiB4C,QAAjB,CAA0B,WAA1B,CAGH,CALD,CAnRkB,CA0RlB5C,EAAE,6BAAF,EAA+B4C,QAA/B,CAAwC,8CAAxC,EAAwFuG,IAAxF,GAA+FmP,QAA/F,CAAwG,MAAxG,CA1RkB,CA4RlBtY,EAAE,UAAF,EAAcqX,EAAd,CAAiB,OAAjB,CAA0B,aAA1B,CAAyC,SAASnR,CAAT,CAAa,CACpDA,EAAGC,cAAH,EADoD,CAEpD,GAAI0T,GAAO7Z,EAAE,IAAF,EAAQF,IAAR,GAAe6B,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAX,CACEsK,EAASjM,EAAE,IAAF,EAAQiM,MAAR,EADX,CAC6BzI,EAASxD,EAAE,IAAF,EAAQwD,MAAR,EADtC,CAEAxD,EAAE8Z,OAAF,CAAU,eAAV,CAA2B,CAAED,KAAMA,CAAR,CAA3B,EACCE,IADD,CACM,SAAS3O,CAAT,CAAe,CACnB,GAAI5P,KAAJ,CACAqJ,EAAEC,IAAF,CAAOsG,EAAK5P,SAAZ,CAAuB,SAASwO,CAAT,CAAgB,CACrCxO,EAAUyB,IAAV,CAAe,+BAA4B+O,aAA5B,CAA0C,GAA1C,CAA8ChC,CAA9C,SAA8DA,CAA9D,CAAoE,OAAnF,CACD,CAFD,CAFmB,CAKnBhK,EAAE,WAAF,EACCmE,IADD,CAEE,iCAA+B0V,CAA/B,qDAA0FA,CAA1F,0RAE+B9d,GAAGX,OAFlC,CAE0C,IAF1C,CAE+CgQ,EAAKhQ,OAFpD,CAE4D,IAF5D,CAEiEW,GAAGV,QAFpE,CAE6E,IAF7E,CAEkF+P,EAAK/P,QAFvF,wCAG+BU,GAAGT,YAHlC,CAG+C,IAH/C,CAGoDse,QAAQI,UAAR,CAAmB5O,EAAK9P,YAAxB,IAHpD,wCAI+BS,GAAGR,WAJlC,CAI8C,IAJ9C,CAImDqe,QAAQI,UAAR,CAAmB5O,EAAK7P,WAAxB,IAJnD,CAI8F,QAJ9F,EAKCC,EAAUwB,MAAV,CAAmB,iCAA+BjB,GAAGP,SAAlC,CAA4C,IAA5C,CAAiDA,EAAU0B,IAAV,CAAe,IAAf,CAAjD,CAAsE,QAAzF,CAAoG,EALrG,CAFF,EASC+C,GATD,CASK,CACFmD,IAAK6I,EAAO7I,GAAP,CAAaI,CADhB,CAEF0I,KAAMD,EAAOC,IAFX,CATL,EAaCC,MAbD,CAaQ,MAbR,CAcD,CApBD,EAqBC8N,IArBD,CAqBM,SAAShN,CAAT,CAAgB,CACpB9Q,QAAQ8Q,KAAR,CAAcA,CAAd,CACD,CAvBD,CAwBD,CA5BD,CA5RkB,CAyTlBjN,EAAE,MAAF,EAAUqX,EAAV,CAAa,OAAb,CAAsB,UAAtB,CAAkC,SAASnR,CAAT,CAAa,CAC7CA,EAAGC,cAAH,EAD6C,CAE7C,GAAI+T,GAAUla,EAAE,IAAF,EAAQ2I,IAAR,CAAa,MAAb,CAAd,CACAlE,OAAOqD,SAAP,CAAiBoS,CAAjB,CACD,CAJD,CAzTkB,CA+TlBla,EAAE,0BAAF,EAA8BqX,EAA9B,CAAiC,QAAjC,CAA2C,UAAW,CACpD,GAAId,GAAMvW,EAAE,IAAF,EAAQ6J,EAAR,CAAW,UAAX,CAAV,CACA7J,EAAE,IAAF,EAAQ0C,OAAR,CAAgB,MAAhB,EAAwBxC,IAAxB,CAA6B,kBAA7B,EAAiDyI,IAAjD,CAAsD,UAAtD,CAAkE4N,CAAlE,CAFoD,CAGpD3Q,aAAayC,OAAb,CAAqB,kBAArB,CAAyC,CAACkO,CAA1C,CACD,CAJD,EAKC4D,IALD,CAKM,SALN,CAKiB,CAAC,CAAC,CAACvU,6BALpB,EAKsDgQ,OALtD,CAK8D,QAL9D,CA/TkB,CAsUlBwE,cAAcriB,MAAd,EAtUkB,CAwUlB+V,QAAQlJ,IAAR,EACD,CAGD,QAAS2S,qBAAT,CAA8B8C,CAA9B,CAAqC,CACf,WAAjB,QAAOA,EADyB,CACFA,EAAQra,EAAE,GAAF,CADN,EAGjCqa,EAAMzX,QAAN,CAAe,YAAf,CAHiC,CAIjCyX,EAAQA,EAAM3X,OAAN,CAAc,QAAd,CAJyB,EAMhC2X,EAAMna,IAAN,CAAW,cAAX,EAA2BlD,MANK,EAOjCsd,YAAY3E,KAAZ,CAAkBlS,MAAlB,CAPiC,CAQnCuT,QAAQuD,MAAR,CAAeF,CAAf,CARmC,CASnCG,cAAcH,CAAd,CATmC,CAUnC9R,eAAe8R,CAAf,CACD,CAED,GAAIhB,MAAO,CACToB,MAAO,EADE,CAETpE,UAFS,CAGTqE,QAHS,CAITtE,QAAS,CAJA,CAKTuE,aAAc,uBAAW,CACpB3a,EAAE,iBAAF,EAAqBhD,MADD,GAEvBgR,SAASC,MAAT,CAAgB,WAAhB,CAA6B,wCAA7B,CAFuB,CAGvBjO,EAAE,kBAAF,EAAsB,CAAtB,EAAyBiG,KAAzB,EAHuB,CAIxB,CATQ,CAUT2U,cAAe,wBAAW,CACpB5a,EAAE,iBAAF,EAAqBhD,MADD,GAExBgD,EAAE,kBAAF,EAAsB,CAAtB,EAAyBiG,KAAzB,EAFwB,CAGxB+H,SAASwG,MAAT,CAAgB,WAAhB,CAHwB,CAIzB,CAdQ,CAeTqG,QAAS,iBAASC,CAAT,CAAa,CACjB,KAAKzE,OADY,CACHyE,GADG,CAEf,KAAKJ,KAAL,CAAWzd,IAAX,CAAgB6d,CAAhB,CACN,CAlBQ,CAmBTxB,aAAc,uBAAW,CACpB,CAAC,KAAKjD,OAAN,EAAiBrW,EAAE,kBAAF,EAAsBhD,MADnB,EAErB,KAAKqZ,OAAL,GAFqB,CAGrBrW,EAAE,aAAF,EAAiBma,IAAjB,CAAsB,SAAtB,IAHqB,CAIrBtV,EAAEC,IAAF,CAAO,KAAK4V,KAAZ,CAAmB,SAASK,CAAT,CAAe,CAChCA,GACD,CAFD,CAJqB,CAOrB,KAAKL,KAAL,GAPqB,CAQlB,KAAKtE,OARa,EAQJhU,SAASyL,MAAT,EARI,EAUf,KAAK4M,KAVU,GAWrB5X,WAAW,UAAW,CACpBwW,KAAKC,YAAL,EACD,CAFD,CAEG,GAFH,CAXqB,CAcrB,KAAKmB,KAAL,EAdqB,CAgBxB,CAnCQ,CAAX,CAsCIO,QAAU,CACZC,cADY,CAEZC,aAFY,CAGZC,eAAgB,yBAAW,CACzBnb,EAAE,uBAAF,EAA2BwU,MAA3B,EADyB,CAEzB3P,EAAEC,IAAF,CAAO,KAAKoW,UAAZ,CAAwB,SAASE,CAAT,CAAiB,CACvCpb,EAAEkB,GAAF,CAAM8K,cAAc,cAAd,CAA6BzG,cAA7B,CAA4C,KAA5C,CAAkDA,cAAlD,CAAiE,KAAjE,CAAuE6V,CAAvE,CAA8E,mBAApF,CAAyG,SAAShQ,CAAT,CAAe,CACtHpL,EAAE,UAAF,EAAc+W,OAAd,CAAsB3L,EAAK,6BAA3B,CACD,CAFD,CAGD,CAJD,CAFyB,CAOzB,KAAK8P,UAAL,GACD,CAXW,CAYZnjB,OAAQ,gBAASqT,CAAT,CAAe,CAClB,QAAOA,EAAKiQ,KAAZ,UADkB,GAEhBrb,EAAE,2BAA4BoL,EAAKiQ,KAAjC,CAAwC,GAA1C,EAA+Cre,MAF/B,EAIjBse,YAAYtb,EAAE,2BAA4BoL,EAAKiQ,KAAjC,CAAwC,GAA1C,EAA+C3Y,OAA/C,CAAuD,MAAvD,CAAZ,CAJiB,CAKd,CAAC,KAAKuY,WALQ,EAKKnQ,aALL,EAQjBA,aARiB,EAWrB,GAAIyQ,GAAa3V,wBAA8B6J,KAAKC,KAAL,CAAW9J,uBAAX,KAA9B,GAAjB,CAC6B,WAA1B,QAAOwF,GAAKoQ,SAZM,GAanBD,EAAWE,OAAX,EAAsBrQ,EAAKoQ,SAbR,CAcnB5V,aAAayC,OAAb,CAAqB,YAArB,CAAmCoH,KAAKiM,SAAL,CAAeH,CAAf,CAAnC,CAdmB,CAgBtB,CA5BW,CA6BZI,YAAa,qBAASvQ,CAAT,CAAe,CAC1B,IAAGpL,EAAE,2BAA4BoL,EAAKiQ,KAAjC,CAAwC,GAA1C,EAA+Cre,MAAlD,CACA,GAAgB,YAAb,IAAK4e,IAAR,CAA8B,CAC5B,GAAGvC,KAAKhD,OAAR,CAAiB,OACjB2E,QAAQE,UAAR,CAAmBje,IAAnB,CAAwBmO,EAAKyQ,SAA7B,CAF4B,CAGxB7b,EAAE,uBAAF,EAA2BhD,MAHH,EAI5BgD,EAAE,WAAF,EAAeuN,KAAf,CAAqB,6GAAuGxR,GAAG7B,mBAA1G,CAA8H,YAAnJ,CACD,CALD,IAMK,CACH,GAAI4G,GAAUd,EAAE,eAAeoL,EAAKwQ,IAApB,CAAyB,GAA3B,CAAd,CACI9a,EAAQZ,IAAR,CAAa,gBAAb,EAA+BJ,IAA/B,CAAoC/D,GAAG9B,UAAH,CAAc,IAAd,EAAoB,CAAQ6G,EAAQZ,IAAR,CAAa,gBAAb,EAA+BJ,IAA/B,GAAsC6B,KAAtC,CAA4C,GAA5C,EAAiD,CAAjD,CAAR,CAA8D,CAAlF,CAApC,EAA0H3E,MAF3H,EAGD8D,EAAQ0F,MAAR,CAAe,cAAcjB,cAAd,CAA8B,OAA9B,CAAsC6F,EAAKwQ,IAA3C,CAAgD,wCAAhD,CAAsF7f,GAAG9B,UAAzF,CAAoG,SAAnH,EAA8HiG,IAA9H,CAAmI,gBAAnI,EAAqJ+F,KAArJ,CAA2J,SAAS2J,CAAT,CAAY,CACrKA,EAAEzJ,cAAF,EADqK,CAErK,GAAI2V,GAAS9b,EAAE,IAAF,CAAb,CACIuN,EAAQ,MAAM3Q,IAAN,CAAWkE,EAAQZ,IAAR,CAAa,QAAb,EAAuBgL,IAAvB,GAA8BvC,IAA9B,CAAmC,IAAnC,CAAX,CADZ,CAEA3I,EAAE+M,IAAF,CAAO,CACLtF,IAAKuE,cAAgB,oBAAhB,CAAuCuB,CAAvC,CAA+C,SAA/C,CAA2DhI,cAA3D,CAA4E,YAA5E,CAA2F6F,EAAKwQ,IADhG,CAEL5O,QAAS,iBAAS5B,CAAT,CAAe,CAClBA,CADkB,EAEpBtK,EAAQ0F,MAAR,CAAexG,EAAEoL,CAAF,CAAf,CAFoB,CAGpBR,SAASC,WAAT,EAHoB,EAMpB9C,aAAahM,GAAG7D,UAAhB,CANoB,CAQtB4jB,EAAOtH,MAAP,EACD,CAXI,CAYLvH,MAAO,eAASC,CAAT,CAAcC,CAAd,CAAsB,CAC3BpF,aAAahM,GAAGxE,IAAH,CAAU,IAAV,CAAiB4V,CAAjB,CAA0B,GAAvC,CACD,CAdI,CAAP,CAgBD,CApBD,CAqBH,CACF,CA9DW,CA+DZiD,KAAM,cAAS2L,CAAT,CAAgB,CAIpB,MAHI,MAAKd,WAGT,EAFEe,MAAMD,EAAMpT,IAAN,CAAW,IAAX,CAAN,CAEF,GACD,CApEW,CAtCd,CA6GA,QAASmQ,MAAT,CAAe3U,CAAf,CACA,CACG,GAAI8X,GAAMnd,SAASgT,aAAT,CAAuB,KAAvB,CAAV,CAEA,MADAmK,GAAI3J,SAAJ,CAAgBnO,CAChB,CAAO8X,EAAIC,WAAJ,EAAmBD,EAAIE,SAAvB,EAAoC,EAC7C,CAED,QAAS3B,cAAT,CAAuBhS,CAAvB,CAA+B,CAC7BA,EAAOtI,IAAP,CAAY,0BAAZ,EAAwC4E,IAAxC,CAA6C,UAAW,CACtD,GAAIsX,GAAYpc,EAAE,IAAF,CAAhB,CACIqc,EAAQD,EAAUhR,IAAV,CAAe,IAAf,CADZ,CAE8B,SAA3B,KAAUA,IAAV,CAAe,MAAf,CAHmD,GAIpDpL,EAAEkB,GAAF,CAAM,qEAAqEmb,CAArE,CAA2E,OAA3E,CAAmFC,iBAAzF,CAA4G,SAAS9M,CAAT,CAAc,CACxH,GAAG,CAACA,EAAIvC,KAAL,EAAcuC,EAAI+M,KAAJ,CAAUvf,MAA3B,CAAmC,CACjC,GAAIwf,GAAahN,EAAI+M,KAAJ,CAAU,CAAV,EAAaE,OAAb,CAAqB5W,KAAtC,CACAuW,EAAU5V,MAAV,CAAiBxG,EAAE,gCAA6BjE,GAAGlD,OAAhC,CAAwC,iBAA1C,EAA4D+J,QAA5D,CAAqE,kBAArE,EAAyF9C,IAAzF,CAA8F0c,CAA9F,EAA0G7T,IAA1G,CAA+G,MAA/G,CAAuH,kCAAkC0T,CAAzJ,EAChBpW,KADgB,CACV,SAASC,CAAT,CAAa,CAAEA,EAAG2M,eAAH,EAAuB,CAD5B,CAAjB,CAED,CACF,CAND,CAJoD,CAWpDuJ,EAAUxZ,QAAV,CAAmB,aAAnB,CAXoD,EAaxB,OAA3B,KAAUwI,IAAV,CAAe,MAAf,CAbmD,GAcpDpL,EAAEkB,GAAF,CAAM,iCAAiCmb,CAAjC,CAAuC,OAA7C,CAAsD,SAAS7M,CAAT,CAAc,CAClE,GAAIgN,GAAahN,EAAI,CAAJ,EAAO3J,KAAxB,CAA+B6W,EAAYlN,EAAI,CAAJ,EAAOmN,eAAlD,CACAP,EAAUnc,GAAV,CAAc,CAAC,mBAAoB,OAAOyc,CAAP,CAAiB,GAAtC,CAAd,EACClW,MADD,CACQxG,EAAE,gCAA6BjE,GAAGlD,OAAhC,CAAwC,eAA1C,EAA0D+J,QAA1D,CAAmE,kBAAnE,EAAuF9C,IAAvF,CAA4F0c,CAA5F,EAAwG7T,IAAxG,CAA6G,MAA7G,CAAqH,oBAAoB0T,CAAzI,EACPpW,KADO,CACD,SAASC,CAAT,CAAa,CAAEA,EAAG2M,eAAH,EAAuB,CADrC,CADR,CAGD,CALD,CAdoD,CAoBpDuJ,EAAUxZ,QAAV,CAAmB,aAAnB,CApBoD,EAsBxB,MAA3B,KAAUwI,IAAV,CAAe,MAAf,CAtBmD,GAuBpDpL,EAAEkB,GAAF,CAAM8K,cAAc,mBAAd,CAAkCqQ,CAAxC,CAA+C,SAAS7M,CAAT,CAAc,CAC3D,GAAIgN,GAAahN,EAAI3J,KAArB,CAA4B6W,EAAYlN,EAAIoN,aAA5C,CACAR,EAAUnc,GAAV,CAAc,CAAC,mBAAoB,OAAOyc,CAAP,CAAiB,GAAtC,CAAd,EACClW,MADD,CACQxG,EAAE,gCAA6BjE,GAAGlD,OAAhC,CAAwC,cAA1C,EAAyD+J,QAAzD,CAAkE,kBAAlE,EAAsF9C,IAAtF,CAA2F0c,CAA3F,EAAuG7T,IAAvG,CAA4G,MAA5G,CAAoH,wBAAwB0T,CAA5I,EACPpW,KADO,CACD,SAASC,CAAT,CAAa,CAAEA,EAAG2M,eAAH,EAAuB,CADrC,CADR,CAGD,CALD,CAvBoD,CA6BpDuJ,EAAUxZ,QAAV,CAAmB,aAAnB,CA7BoD,CA+BvD,CA/BD,CAgCD,CAED,GAAIia,OAAQhZ,UAAU,OAAV,CAAZ,CACc,EAAV,Q,GACW,WAAV,Q,CAAuB5M,Y,CACrBA,UAAYuO,SAASD,cAAT,CAAyBsX,MAAMlb,KAAN,CAAY,GAAZ,CAAzB,C,EAGnB,GAAImb,aAAc,CAAlB,CACA,QAASC,UAAT,CAAmBza,CAAnB,CAAuB7F,CAAvB,CAA4B,CACtBqgB,aAAexa,CADO,EAGxBxD,SAAS+R,cAAT,CAAwB,SAASvO,CAAjC,EAAqCgQ,SAArC,CAAiD,EAHzB,CAIxBxT,SAAS+R,cAAT,CAAwB,SAASvO,CAAjC,EAAqC0P,KAArC,CAA2CgL,OAA3C,CAAqD,MAJ7B,CAKxBF,YAAc,CALU,GAON,CAAf,aAPqB,GAStBhe,SAAS+R,cAAT,CAAwB,SAASiM,WAAjC,EAA8CxK,SAA9C,CAA0D,EATpC,CAUtBxT,SAAS+R,cAAT,CAAwB,SAASiM,WAAjC,EAA8C9K,KAA9C,CAAoDgL,OAApD,CAA8D,MAVxC,EAaxBle,SAAS+R,cAAT,CAAwB,SAASvO,CAAjC,EAAqCgQ,SAArC,CAAiD,sFAAqF7V,CAArF,CAA0F,iCAbnH,CAcxBqC,SAAS+R,cAAT,CAAwB,SAASvO,CAAjC,EAAqC0P,KAArC,CAA2CgL,OAA3C,CAAqD,OAd7B,CAexBF,YAAcxa,CAfU,CAiB3B,CAED,GAAI2a,aAAc,CAAlB,CACA,QAASC,UAAT,CAAmB5a,CAAnB,CAAuB7F,CAAvB,CAA6B0gB,CAA7B,CAAgCC,CAAhC,CAAkC,CAC5BH,aAAe3a,CADa,EAG9BxD,SAAS+R,cAAT,CAAwB,YAAYvO,CAApC,EAAwCgQ,SAAxC,CAAoD,EAHtB,CAI9BxT,SAAS+R,cAAT,CAAwB,YAAYvO,CAApC,EAAwC0P,KAAxC,CAA8CgL,OAA9C,CAAwD,MAJ1B,CAK9BC,YAAc,CALgB,GAOZ,CAAf,aAP2B,GAS5Bne,SAAS+R,cAAT,CAAwB,YAAYoM,WAApC,EAAiD3K,SAAjD,CAA6D,EATjC,CAU5BxT,SAAS+R,cAAT,CAAwB,YAAYoM,WAApC,EAAiDjL,KAAjD,CAAuDgL,OAAvD,CAAiE,MAVrC,EAa9Ble,SAAS+R,cAAT,CAAwB,YAAYvO,CAApC,EAAwCgQ,SAAxC,CAAoD,gBAAe7V,CAAf,CAAoB,aAApB,CAAgC0gB,CAAhC,CAAkC,cAAlC,CAA+CC,CAA/C,CAAiD,KAbvE,CAc9Bte,SAAS+R,cAAT,CAAwB,YAAYvO,CAApC,EAAwC0P,KAAxC,CAA8CgL,OAA9C,CAAwD,OAd1B,CAe9BC,YAAc3a,CAfgB,CAiBjC,CAED,QAASyV,WAAT,CAAoBsF,CAApB,CAA0BnX,CAA1B,CAA8B,CAEfmX,EAAK3a,OAAL,CAAa,QAAb,CAFe,CAG5B,GAA6B,GAA1B,KAAK0I,IAAL,CAAU,UAAV,CAAH,CAAkC,CAChClF,EAAGC,cAAH,EADgC,CAEhC,GAAImX,GAAWD,EAAK1U,IAAL,CAAU,MAAV,CAAf,CAAkC+H,EAAO2M,EAAKjS,IAAL,CAAU,QAAV,CAAzC,CAA8DqF,EAAO4M,EAAKjS,IAAL,CAAU,OAAV,CAArE,CAAyFmS,EAAKF,EAAKjS,IAAL,CAAU,OAAV,CAA9F,CAAkHkF,EAAU+M,EAAKjS,IAAL,CAAU,IAAV,CAA5H,CACIoS,EAAM,WAAWC,QAAX,CAAqB,GAAIne,KAAJ,GAAWE,OAAX,EAD/B,CAEA6d,EAAK1S,WAAL,CAAiB,UAAW,CAC1B,MAAO,cAAa6S,CAAb,CAAiB,kBAAjB,CAAkCD,CAAlC,CAAqC,kBAArC,CAAsD9M,CAAtD,CAA2D,qBAA3D,CAA8EC,CAA9E,CAAmF,iBAAnF,CAAmG4M,CAAnG,CAA4G,KAA5G,CAAiH,KAAKhL,SAAtH,CAAkI,SAC1I,CAFD,CAJgC,CAOhC+K,EAAOrd,EAAE,IAAIwd,CAAN,CAPyB,CAQhCH,EAAKnd,IAAL,CAAU,KAAV,EAAiBiJ,IAAjB,EARgC,CAShC,GAAIuU,GAAQL,EAAKnd,IAAL,CAAU,OAAV,EAAmBoE,IAAnB,EAAZ,CAAuCuN,EAAS,EAAhD,CAOA,GANI6L,EAAM1gB,MAMV,CADK0gB,EAAMxc,GAAN,CAAU,CAAV,EAAayc,IAAb,EACL,CALEN,EAAKnd,IAAL,CAAU,MAAV,EAAkBsG,MAAlB,CAAyB,gCAA6B8W,CAA7B,CAAsC,qCAAtC,CAA0E5M,CAA1E,CAA+E,aAA/E,CAA2FD,CAA3F,CAAgG,aAAzH,EAAuImN,OAAvI,GAAiJ7D,IAAjJ,CAAsJ,UAAW,CAC/J2D,EAAQL,EAAKnd,IAAL,CAAU,OAAV,CACT,CAFD,CAKF,CAAG,CAAC+Q,SAASC,aAAT,EAAJ,CAA8B,KAC5B,GAAIjF,GAAS,EAAb,CAAiBsF,EAAYmM,EAAM,CAAN,CAA7B,CACItM,EAAQtS,SAASmE,eAAT,CAAyBnE,SAASmE,eAAT,CAAyBoO,WAAlD,CAAgEvS,SAASwS,IAAT,CAAcD,WAF9D,CAGR,IAAb,GAHqB,EAI1BpF,GAAUsF,EAAUC,UAJM,CAK1BD,EAAYA,EAAUE,YALI,CAO5B,GAAIC,GAAQN,EAAQnF,CAApB,CACA,GAAGwE,EAAOiB,CAAV,CAAiB,CAIfgM,EAAM7Q,KAAN,CAAY6E,CAAZ,CAJe,CAKfgM,EAAMla,MAAN,CAFYkO,GAFAjB,EAAOC,CAEP,CAEZ,CALe,CAMfmB,EAAS9V,GAAGhC,iBAAH,CAAuB,GAAvB,CAA6B0D,KAAKmP,KAAL,CAAgB,GAAL,EAJtC,EAAI8E,EAAQjB,CAI0B,CAAX,CAA7B,CAAoD,IAApD,CAAyD1U,GAAG/B,KACtE,CACF,CACDqjB,EAAKhX,MAAL,GAAcnG,IAAd,CAAmB,WAAnB,EAAgCsG,MAAhC,CAAuC,+DAA2DqL,CAA3D,CAAkE,SAAzG,CAjCgC,CAkChCwL,EAAKhX,MAAL,GAAcnG,IAAd,CAAmB,cAAnB,EAAmC+F,KAAnC,CAAyC,UAAW,CAClD,GAAIuX,GAAM,WAAWC,QAAX,CAAqB,GAAIne,KAAJ,GAAWE,OAAX,EAA/B,CASA,MARA6d,GAAK1S,WAAL,CAAiB,UAAW,CAC1B,MAAO,2BAAwB6S,CAAxB,CAA4B,kBAA5B,CAA6CD,CAA7C,CAAgD,kBAAhD,CAAiE9M,CAAjE,CAAsE,qBAAtE,CAAyFC,CAAzF,CAA8F,YAA9F,CAAyG4M,CAAzG,CAAkH,KAAlH,CAAuH,KAAKhL,SAA5H,CAAwI,MAChJ,CAFD,EAEGlH,IAFH,CAEQ,UAFR,CAEoB,GAFpB,CAQA,CALAiS,EAAOrd,EAAE,IAAIwd,CAAN,CAKP,CAJAH,EAAKnd,IAAL,CAAU,OAAV,EAAmBiJ,IAAnB,GAA0B,CAA1B,EAA6B0U,KAA7B,EAIA,CAHAR,EAAKnd,IAAL,CAAU,KAAV,EAAiBoE,IAAjB,EAGA,CAFAtE,EAAE,IAAF,EAAQwU,MAAR,EAEA,CADA6I,EAAK3a,OAAL,CAAa,QAAb,EAAuBF,WAAvB,CAAmC,gBAAnC,CACA,GACD,CAXD,CAlCgC,CA8ChC6a,EAAK3a,OAAL,CAAa,QAAb,EAAuBE,QAAvB,CAAgC,gBAAhC,CACD,CACF,CAGD,QAAS6a,OAAT,EACA,CAIE,IAAK,GAHD3d,GAAO,EAGN,CAFDge,EAAW,gEAEV,CAAI/gB,EAAE,CAAX,CAAkB,CAAJ,EAAd,CAAqBA,GAArB,CACE+C,GAAQge,EAASzd,MAAT,CAAgB5C,KAAKE,KAAL,CAAWF,KAAKuG,MAAL,GAAgB8Z,EAAS9gB,MAApC,CAAhB,CAAR,CAEF,MAAO8C,EACR,CAED,QAASoX,cAAT,EAAwB,CACtB,GAAI6G,GACoB,EAArB,YAAU,MAAV,CADH,CAMA,GAAIC,GAAMlf,SAAS+R,cAAT,CAAwB,MAAxB,CAAV,CACW,IAAP,GARkB,GAQLmN,EAAI/N,OAAJ,CAAc8N,CART,CASvB,CACD,QAAS9G,gBAAT,EAA0B,CACxB,GAAI8G,EAAJ,CAEEA,CAHsB,GAEI,IAAzB,YAAU,UAAV,CAFqB,EAOxB/d,EAAE,aAAF,EAAiB2I,IAAjB,CAAsB,SAAtB,CAAiCoV,CAAjC,CACD,CAED,QAASE,cAAT,CAAwBlN,CAAxB,CACA,CACE,GAAKjS,SAAS+R,cAAd,GACM1Z,WADN,GAEIsM,OAAOsN,KAFX,GAEkBA,EAAQtN,OAAOsN,KAFjC,EAIIA,EAAMmN,OAJV,EAKA,CAEE,GAAIlZ,GAAO,IAAX,CACI+G,EAAO,IADX,CAGQoS,EAASrf,SAASsD,QAAT,CAAkBvF,QAAlB,EAHjB,CAII,GAA+B,CAAC,CAA5B,IAAOQ,OAAP,CAAe,OAAf,CAAJ,CAC4E,EAAtE,GAAC0T,EAAMqN,OAAN,CAAgBrN,EAAMqN,OAAtB,CAAgCrN,EAAMC,KAAN,CAAcD,EAAMC,KAApB,CAA4B,IAA7D,CADN,EAEIhR,EAAE,kCAAF,EAAoC0C,OAApC,CAA4C,MAA5C,EAAoD2b,MAApD,EAFJ,KAIK,CACH,GAA+B,CAAC,CAA5B,IAAOhhB,OAAP,CAAe,OAAf,GAAiE,CAAC,CAAjC,IAAOA,OAAP,CAAe,YAAf,CAArC,CACE,GAAIihB,GAAO,CAAX,CACIC,EAAiBJ,EAAOxd,MAAP,CAAc,CAAd,CAAiBwd,EAAOK,WAAP,CAAmB,GAAnB,EAA0B,CAA3C,CADrB,CADF,IAGO,CACL,GAAIF,GAAOH,EAAOxd,MAAP,CAAewd,EAAOK,WAAP,CAAmB,GAAnB,EAA0B,CAAzC,CAAX,CACAF,EAAQ,CAACA,EAAK3d,MAAL,CAAY,CAAZ,CAAe2d,EAAKjhB,OAAL,CAAa,OAAb,CAAf,CAFJ,CAGL,GAAIkhB,GAAiBJ,EAAOxd,MAAP,CAAc,CAAd,CAAiBwd,EAAOK,WAAP,CAAmB,GAAnB,EAA0B,CAA3C,CACtB,CACD,GAAY,CAAR,GAAJ,CACE,GAAIC,GAAeF,CAAnB,CADF,IAGE,IAAIE,GAAgBF,EAAiBD,CAAjB,CAAwB,OAA5C,CAEF,GAAInc,EAAJ,CACA,GAAGA,EAAM,aAAavF,IAAb,CAAkBuhB,CAAlB,CAAT,CACE,GAAIO,GAAgB,CAACvc,EAAM,CAAN,CAArB,CADF,IAGE,IAAIuc,GAAe,CAAC,CAApB,CAlBC,IAoBH,GAAIC,GAAa,CApBd,CAqByD,CAAtD,UAASC,iBAAT,CAA2B,IAAK,GAAED,CAAlC,EAA+C3hB,MArBlD,GAsBH,OAAQ+T,EAAMqN,OAAN,CAAgBrN,EAAMqN,OAAtB,CAAgCrN,EAAMC,KAAN,CAAcD,EAAMC,KAApB,CAA4B,IAApE,EAEE,IAAK,GAAL,CACEhR,EAAE,kCAAF,EAAoC0C,OAApC,CAA4C,MAA5C,EAAoD2b,MAApD,EADF,CAEE,MAEF,IAAK,GAAL,CACErZ,EAAOlG,SAAS+R,cAAT,CAAwB,UAAxB,CADT,CAEE,MACF,IAAK,GAAL,CACE7L,EAAOlG,SAAS+R,cAAT,CAAwB,UAAxB,CADT,CAEE,MAEF,QACE,GAAI6N,GAAgBC,EAAa,CAAjC,CACE,MADF,IAGE,IAAIE,GAAkBH,EAAe,CAArC,CAEF3S,EAAO0S,EAAe,IAAf,CAAsBI,CAN/B,CAOE,MAEF,IAAK,GAAL,CACE,GAAoB,CAAC,CAAjB,KAAsC,CAAhB,GAA1B,CACE,MADF,IAGE,IAAIA,GAAkBH,EAAe,CAArC,CAEF3S,EAAO0S,EAAe,IAAf,CAAsBI,CAN/B,CAOE,MAEF,IAAK,GAAL,CACE/f,SAASsD,QAAT,CAAoBmc,CADtB,CA/BF,CAoCIvZ,GAAQA,EAAKsK,MA1Dd,GA0DsBxQ,SAASsD,QAAT,CAAoB4C,EAAKsK,MA1D/C,EA2DCvD,CA3DD,GA2DOjN,SAASsD,QAAT,CAAkB2J,IAAlB,CAAyBA,CA3DhC,CA4DJ,CACN,CACF,CAGGtI,OAAO3E,QAAP,CAAgBggB,gB,CACjBrb,OAAO3E,QAAP,CAAgBggB,gBAAhB,CAAiC,SAAjC,CAA4Cb,aAA5C,I,CAEAxa,OAAO3E,QAAP,CAAgBigB,WAAhB,CAA4B,WAA5B,CAAyCd,aAAzC,C,CAGHe,SAAS5hB,SAAT,CAAmBkR,OAAnB,CAA6BnR,MAAMC,SAAN,CAAgBkR,O,CAE7C,GAAI1D,UAAW,CACbC,YAAa,qBAASoU,CAAT,CAAe,iBAEzB,CAACA,GAAQngB,QAAT,EAAmB6M,gBAAnB,CAAoC,WAApC,EAAiD2C,OAAjD,CAAyD,WAAQ,CAChE,GAAIpQ,GAAIyE,EAAK4I,aAAL,CAAmB,uBAAnB,EAA4C+G,SAApD,CACE4M,EAAMvc,EAAK4I,aAAL,CAAmB,cAAnB,CADR,CAEE4T,EAAmBxc,EAAK4I,aAAL,CAAmB,cAAnB,CAFrB,CAGI,OAAKb,KAAL,CAAWxM,CAAX,CAJ4D,CAK9D,OAAKwM,KAAL,CAAWxM,CAAX,EAAcke,SAAd,CAA0B+C,CALoC,CAQ9D,OAAKzU,KAAL,CAAWxM,CAAX,EAAgB,CACdke,UAAW+C,CADG,CAEdhnB,UAFc,CAR8C,CAahE,GAAIinB,GAAQF,EAAIvT,gBAAJ,mBAAuCpG,cAAvC,KAAZ,CACI6Z,EAAMpiB,MAdsD,EAc9CoiB,EAAM9Q,OAAN,CAAc,WAAQ,CACtC,GAAI+Q,GAAWra,EAAKsa,SAAL,CAAe3d,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6BA,KAA7B,CAAmC,GAAnC,CAAf,CACE4d,EAAQF,EAAS,CAAT,CADV,CAEEtT,EAAuB,EAAhB,KAAS,CAAT,EAEFC,aAFE,wBAEkCqT,EAAS,CAAT,CAFlC,OAEmDA,EAAS,CAAT,CAFnD,KACDA,EAAS,CAAT,CADC,SACkBA,EAAS,CAAT,CADlB,UACsCnhB,CAH/C,CAKE2a,mCAAoC9M,CAApC,eAAqD7N,CAArD,OALF,CAMI,OAAKwM,KAAL,CAAW6U,CAAX,CAPkC,CAQhC,CAAE1a,EAAE2a,QAAF,CAAW,OAAK9U,KAAL,CAAW6U,CAAX,EAAkBpnB,OAA7B,CAAsC0gB,CAAtC,CAR8B,EASlC,OAAKnO,KAAL,CAAW6U,CAAX,EAAkBpnB,OAAlB,CAA0B8E,IAA1B,CAA+B4b,CAA/B,CATkC,CAapC,OAAKnO,KAAL,CAAW6U,CAAX,EAAoB,CAClBpnB,QAAS,CAAC0gB,CAAD,CADS,CAbgB,CAiBtC,OAAKnO,KAAL,CAAW6U,CAAX,EAAkBE,IAAlB,GACD,CAlBiB,CAmBnB,CAjCA,CAFyB,CAoC1B5a,EAAEC,IAAF,CAAO,KAAK4F,KAAZ,CAAmB,WAAQ,CACrB,CAAC/H,EAAK8c,IAAN,EAAc9c,EAAKxK,OAAL,CAAa6E,MAA3B,EAAqC2F,EAAKyZ,SADrB,GAEvBzZ,EAAKyZ,SAAL,CAAe9J,SAAf,QAAkCvW,GAAG5D,OAArC,MAAiDwK,EAAKxK,OAAL,CAAa+E,IAAb,CAAkB,IAAlB,CAF1B,CAGvByF,EAAK8c,IAAL,GAHuB,CAK1B,CALD,CAQD,CA7CY,CA8Cb/U,QA9Ca,CAAf,CAiDIvD,aAAe,CACjBC,KAAM,cAAS9E,CAAT,CAAaod,CAAb,CAAuBrZ,CAAvB,CAA+BsZ,CAA/B,CAA2C,CAC/CtZ,EAASA,GAAU5C,MAD4B,CAE/Ckc,EAAaA,GAAc,IAFoB,CAG/C,GAAIC,GAAM,CAACnc,OAAOoc,UAAP,CAAoB,CAArB,CAAwBpc,OAAOqc,WAAP,CAAqB,CAA7C,CAAV,CACEC,IADF,CAEEC,EAAa3Z,GAAU5C,MAAX,CAEV,CACAyI,KAAM,CADN,CAEA9I,IAAK,CAFL,CAGA4Q,MAAOvQ,OAAOoc,UAHd,CAIA1c,OAAQM,OAAOqc,WAJf,CAFU,CACVzZ,EAAOtD,qBAAP,EAHJ,CAWEsD,GAAU5C,MAAV,GAGqB,CAAlB,IAAUyI,IAAV,EAA0C,CAAnB,IAAU8H,KAAlC,EAEkB,CAAjB,IAAU5Q,GAAV,EAA0C,CAApB,IAAUD,MAFjC,EAIA6c,EAAU9T,IAAV,EAAkBzI,OAAOoc,UAJzB,EAMAG,EAAU5c,GAAV,EAAiBK,OAAOqc,WAT1B,CAd6C,GA0B7CF,EAAM,CAACI,EAAU9T,IAAV,CAAiB8T,EAAUnT,KAAV,CAAgB,CAAlC,CAAqCmT,EAAU5c,GAAV,CAAgB4c,EAAUxc,MAAV,CAAiB,CAAtE,CA1BuC,EA4B/C,GAAIyc,GAAQ,CAAC5Z,GAAU5C,MAAV,CAAmB3E,QAAnB,CAA8BuH,CAA/B,EAAuCsF,gBAAvC,CAAwD+T,CAAxD,CAAZ,CACA,GAAMO,EAAMjjB,MAAZ,EACAijB,EAAM3R,OAAN,CAAc,SAAU4R,CAAV,CAAc,CAC1B,GAAIpd,GAAMod,EAAGnd,qBAAH,EAAV,CACEod,EAAuB1iB,KAAK2iB,GAAL,CAAStd,EAAI+J,KAAJ,EAAapP,KAAK2iB,GAAL,CAASJ,EAAU9T,IAAV,CAAiBpJ,EAAIoJ,IAA9B,EAAsCzO,KAAK2iB,GAAL,CAAStd,EAAIkR,KAAJ,CAAYgM,EAAUhM,KAA/B,CAAnD,CAAT,EAAsGlR,EAAI+J,KADnI,CAEEwT,EAAwB5iB,KAAK2iB,GAAL,CAAStd,EAAIU,MAAJ,EAAc/F,KAAK2iB,GAAL,CAASJ,EAAU5c,GAAV,CAAgBN,EAAIM,GAA7B,EAAoC3F,KAAK2iB,GAAL,CAAStd,EAAIK,MAAJ,CAAa6c,EAAU7c,MAAhC,CAAlD,CAAT,EAAuGL,EAAIU,MAFrI,CAGE8c,EAAK7iB,KAAK8iB,GAAL,CAASX,EAAI,CAAJ,GAAU9c,EAAIoJ,IAAJ,CAAWpJ,EAAI+J,KAAJ,CAAU,CAA/B,CAAT,CAHP,CAIE2T,EAAK/iB,KAAK8iB,GAAL,CAASX,EAAI,CAAJ,GAAU9c,EAAIM,GAAJ,CAAUN,EAAIU,MAAJ,CAAW,CAA/B,CAAT,CAJP,CAKAuc,EAAM9iB,IAAN,CAAW,CACTijB,GAAIA,CADK,CAETO,kBAAoC,GAAjB,IAAW,CAAX,EAAuBN,CAAvB,CAA8CE,CAFxD,CAGTK,oBAAsC,GAAjB,IAAW,CAAX,EAAuBP,CAAvB,CAA8CE,CAH1D,CAITM,cAAgC,GAAjB,IAAW,CAAX,EAAuBL,CAAvB,CAA4BE,CAJlC,CAKTI,gBAAkC,GAAjB,IAAW,CAAX,EAAuBN,CAAvB,CAA4BE,CALpC,CAAX,CAOD,CAbD,CADA,CAeAT,EAAMc,IAAN,CAAW,SAAC9e,CAAD,CAAID,CAAJ,CAAU,OACfA,GAAE2e,iBAAF,GAAwB1e,EAAE0e,iBADX,CAIU,CAApB,GAAWzjB,MAAX,EAAyB8E,EAAE4e,mBAAF,GAA0B3e,EAAE2e,mBAJ3C,CAKV5e,EAAE4e,mBAAF,CAAwB3e,EAAE2e,mBALhB,CAOV3e,EAAE4e,aAAF,GAAoB7e,EAAE6e,aAPZ,CAUU,CAApB,GAAW3jB,MAVD,CAWV+E,EAAE6e,eAAF,CAAoB9e,EAAE8e,eAXZ,QAQV7e,EAAE4e,aAAF,CAAkB7e,EAAE6e,aARV,CAEV7e,EAAE2e,iBAAF,CAAsB1e,EAAE0e,iBAWlC,CAbD,CAfA,CA6BA,GAAIK,IAASf,EAAM,CAAN,EAASG,EAAtB,CACEa,GAAYD,GAAO/d,qBAAP,EADd,CAEA,KAAKie,KAAL,CAAW1e,CAAX,EAAiB,CACfwe,OAAQA,EADO,CAEf5U,KAAM6U,GAAU7U,IAFD,CAGf9I,IAAK2d,GAAU3d,GAHA,CAIfiD,OAAQA,CAJO,CAKfsZ,WAAYA,CALG,CA/BjB,CAsCD,CApEgB,CAqEjBpY,QAAS,iBAASjF,CAAT,CAAa,CACpB,GAAI2e,GAAS,KAAKD,KAAL,CAAW1e,CAAX,CAAb,CACM2e,CAFc,EAGpBxd,OAAOyd,qBAAP,CAA6B,UAAM,CACjC,GAAIC,GAAWF,EAAOH,MAAP,CAAc/d,qBAAd,EAAf,CACAke,EAAO5a,MAAP,CAAc+a,QAAd,CAA2D,CAAC,CAArC,KAAOzB,UAAP,CAAkBtiB,OAAlB,CAA0B,GAA1B,EAAwE,CAAxE,CAA0C8jB,EAASjV,IAAT,CAAgB+U,EAAO/U,IAAxF,CAAsI,CAAC,CAArC,KAAOyT,UAAP,CAAkBtiB,OAAlB,CAA0B,GAA1B,EAAsE,CAAtE,CAA0C8jB,EAAS/d,GAAT,CAAe6d,EAAO7d,GAAlK,CACD,CAHD,CAID,CA5EgB,CA6EjB4d,QA7EiB,CAjDnB,CAgIAvjB,KAAK2iB,GAAL,CAAW,kBAAU,EAAL,IAASiB,CAAT,CAAa,CAAlB,C,CAGV,UAAW,CAGV,IAAI,GAFAC,GAAW,CAEX,CADAC,2BACA,CAAIF,EAAI,CAAZ,CAAeA,EAAIE,EAAQvkB,MAAZ,EAAsB,CAACyG,OAAOyd,qBAA7C,CAAoE,EAAEG,CAAtE,CACE5d,OAAOyd,qBAAP,CAA+Bzd,OAAO8d,EAAQF,CAAR,EAAW,uBAAlB,CADjC,CAEE5d,OAAO+d,oBAAP,CAA8B/d,OAAO8d,EAAQF,CAAR,EAAW,sBAAlB,GAA6C5d,OAAO8d,EAAQF,CAAR,EAAW,6BAAlB,CAF7E,CAKK5d,OAAOyd,qBARF,GASRzd,OAAOyd,qBAAP,CAA+B,SAAS9L,CAAT,CAA4B,CACzD,GAAIqM,GAAW,GAAIniB,KAAJ,GAAWE,OAAX,EAAf,CACIkiB,EAAajkB,KAAKkkB,GAAL,CAAS,CAAT,CAAY,IAAMF,EAAWH,CAAjB,CAAZ,CADjB,CAEIhf,EAAKmB,OAAOZ,UAAP,CAAkB,UAAW,CAAEuS,EAASqM,EAAWC,CAApB,CAAkC,CAAjE,CAAmEA,CAAnE,CAFT,CAIA,MADAJ,GAAWG,EAAWC,CACtB,CAAOpf,CACR,CAfO,EAiBLmB,OAAO+d,oBAjBF,GAkBR/d,OAAO+d,oBAAP,CAA8B,SAASlf,CAAT,CAAa,CACzC8R,aAAa9R,CAAb,CACD,CApBO,CAqBX,CArBA,E,CAwBD,GAAIsf,cAAe,EAAnB,CACIC,UAAY,EADhB,CAEA,QAASrK,UAAT,CAAmBlV,CAAnB,CACA,CACE,GAAmB,EAAhB,cAAH,CACA,CACE,GAAIwf,GAAY,OAAN,GAAD,CAAkB,GAAlB,CAAwB,CAAjC,CACA9hB,EAAE,IAAI4hB,YAAN,EAAoBvU,KAApB,CAA0ByU,CAA1B,EAA8Bxb,OAA9B,CAAsC,GAAtC,CAFF,CAGEub,UAAYD,YACb,CACS,EAAN,GAPN,GAQQC,WAAavf,CAAb,EAAkD,WAA/B,QAAOtC,GAAE,IAAMsC,CAAR,EAAYyf,KAAZ,EAA1B,EAA8F,CAA7B,GAAE,IAAMzf,CAAR,EAAYyf,KAAZ,GAAoB/kB,MAR7F,CASMgD,EAAE,IAAMsC,CAAR,EAAY0f,UAAZ,EATN,CAWMhiB,EAAE,IAAMsC,CAAR,EAAYoH,SAAZ,CAAsB,GAAtB,CAXN,EAcEkY,aAAetf,CAChB,CACD,QAAS2f,SAAT,EAAmB,CAC4C,UAA1D,WAASpR,cAAT,CAAwB,cAAxB,EAAwCmB,KAAxC,CAA8CtF,QADhC,EAEf5N,SAAS+R,cAAT,CAAwB,cAAxB,EAAwCmB,KAAxC,CAA8CtF,QAA9C,CAAyD,OAF1C,CAGfjO,OAAO,aAAP,CAAsB,OAAtB,CAA+B,GAA/B,CAHe,GAKfK,SAAS+R,cAAT,CAAwB,cAAxB,EAAwCmB,KAAxC,CAA8CtF,QAA9C,CAAyD,UAL1C,CAMfjO,OAAO,aAAP,CAAsB,UAAtB,CAAkC,GAAlC,CANe,CAQlB,CAED,QAASyjB,YAAT,CAAqBnjB,CAArB,CAA4B,CACvBA,CADuB,EAExBN,OAAO,YAAP,CAAqB,KAArB,CAA4B,EAA5B,CAFwB,CAI1B,GAAI2e,GAAIte,SAAS+R,cAAT,CAAwB,kBAAxB,CAAR,CACIxU,EAAIyC,SAAS+R,cAAT,CAAwB,kBAAxB,CADR,CAEIuM,GAAK/gB,CANiB,GAOxB+gB,EAAE9K,SAAF,CAAcjW,EAAEiW,SAAF,CAAc,+HAPJ,CAS3B,CAED,GAAI0E,SAAU,CACZmL,KAAO,KADK,CAEZvd,KAAO,eAAW,CACf9F,SAASsjB,cAAT,CAAwBC,UAAxB,CAAmC,mDAAnC,CAAwF,KAAxF,CADe,GAEhB,KAAKF,IAAL,CAAU,KAFM,CAGjB,CALW,CAMZrmB,IAAK,0CANO,CAOZlD,KAAM,6BAPM,CASZ2b,IAAM,aAAS+N,GAAT,CAAc,CAClB,GAAIC,KAAID,IAAIhQ,SAAZ,CACA,GAAK,CAACiQ,IAAIpgB,KAAJ,CAAU,WAAV,CAAD,EAA2B,CAACogB,IAAIpgB,KAAJ,CAAU,cAAV,CAAjC,CACA,CAEEogB,IAAIA,IAAIxkB,OAAJ,CAAY,QAAZ,CAAqB,EAArB,EAAyBA,OAAzB,CAAiC,WAAjC,CAA6C,EAA7C,EAAiDA,OAAjD,CAAyD,SAAzD,CAAmE,GAAnE,CAFN,CAGE,GAAIykB,MAAO,QAAQD,GAAR,CAAY,QAAvB,CACAA,IAAI3a,OAAO2a,IAAIxkB,OAAJ,CAAY,MAAZ,CAAmB,IAAnB,CAAP,CAJN,CAME,GAAIC,GAAIiE,KAAK,oBAAoBjC,EAAEsiB,GAAF,EAAOjc,MAAP,GAAgBpG,GAAhB,CAAoB,OAApB,CAAzB,CAAR,CACIwiB,MAAQ,iBAAiBzkB,EAAE0kB,CAAnB,CAAqB,GAArB,CAAyB1kB,EAAE2kB,CAA3B,CAA6B,GAA7B,CAAiC3kB,EAAE8D,CAAnC,CAAqC,GAArC,CAAyCygB,GAAzC,CAA6C,GADzD,CAEAA,IAAM,yCAAyC,KAAKJ,IAA9C,CAAmD,SAAnD,CAA8DM,KAA9D,CAAqE,aAArE,CAAmF,KAAK7pB,IAAxF,CAA6F,WAA7F,CAAyG4pB,IAAzG,CAA8G,kBAA9G,CAAiI,KAAK1mB,GAAtI,CAA0I,qCACjJ,CACD,MAAOymB,IACR,CAvBW,CAyBZK,eAAgB,wBAASN,CAAT,CAAc,CAC5B,GAAIC,GAAMviB,EAAEsiB,CAAF,EAAO3Z,IAAP,CAAY,KAAZ,CAAV,CACA3I,EAAEsiB,CAAF,EAAOjc,MAAP,GAAgBlC,IAAhB,CAAqBoe,CAArB,CACD,CA5BW,CA8BZhI,OAAS,gBAAS/R,CAAT,CAAiB,CAGxB,IAAK,GAFDqa,GAA2B,WAAlB,QAAOra,EAAR,CAAkC/E,OAAO3E,QAAzC,CAAoD0J,EAAO,CAAP,CAE3D,CADD8Z,EAAMO,EAAM9d,oBAAN,CAA2B,GAA3B,CACL,CAAIhI,EAAE,CAAX,CAAcA,EAAEulB,EAAItlB,MAApB,CAA4BD,GAA5B,EACoC,OAA/B,IAAIA,CAAJ,EAAOkI,YAAP,CAAoB,MAApB,GAA6E,OAAnC,IAAIlI,CAAJ,EAAOkI,YAAP,CAAoB,UAApB,CAD/C,IAEEqd,EAAIvlB,CAAJ,EAAOuV,SAAP,CAAmB,KAAKiC,GAAL,CAAS+N,EAAIvlB,CAAJ,CAAT,CAFrB,CAID,CArCW,CAuCZ+lB,aAAe,sBAASJ,CAAT,CAAYC,CAAZ,CAAe7gB,CAAf,CAAkB,CAC/B,MAAO,CAAC4gB,EAAG,CAACA,EAAE,GAAH,EAAQK,OAAR,CAAgB,CAAhB,CAAJ,CAAwBJ,EAAG,CAACA,EAAE,GAAH,EAAQI,OAAR,CAAgB,CAAhB,CAA3B,CAA+CjhB,EAAG,CAACA,EAAE,GAAH,EAAQihB,OAAR,CAAgB,CAAhB,CAAlD,CACR,CAzCW,CA0CZC,cAAgB,uBAASN,CAAT,CAAYC,CAAZ,CAAe7gB,CAAf,CAAqB,CACnC,MAAO,MAAKghB,YAAL,CAAkBJ,CAAlB,CAAqBC,CAArB,CAAwB7gB,CAAxB,CACR,CA5CW,CAAd,CA+CA,QAAS0D,SAAT,CAAkByd,CAAlB,CAA0BC,CAA1B,CAAoC,CAClC,MAA4B,QAApB,sBAAOA,EAAP,qBAAOA,CAAP,EAAD,CAAyDre,EAAE2a,QAAF,CAAW0D,CAAX,CAAqBD,CAArB,CAAzD,CAAkCA,IAAWC,CACrD,CAED,CAAC,SAASljB,CAAT,CAAY,CA6GX,QAASmjB,EAAT,CAA4BjD,CAA5B,CAAgCkD,CAAhC,CAA0C,CACxC,GAAIlD,EAAGmD,SAAP,CACCnD,EAAGmD,SAAH,CAAa,KAAOD,CAApB,CADD,KAEO,CACP,GAAIE,GAAMxkB,SAASykB,WAAT,CAAqB,QAArB,CAAV,CACAD,EAAIE,SAAJ,CAAcJ,CAAd,OAFO,CAGPlD,EAAGuD,aAAH,CAAiBH,CAAjB,CACC,CACF,CApHDtjB,EAAE8a,EAAF,CAAK3C,KAAL,CAAa,SAASuL,CAAT,CAAc,CAGzB,GAFAA,EAAM1jB,EAAE2jB,MAAF,CAAS,CAACC,OAAO,EAAR,CAAW1P,OAAO,MAAlB,CAAT,CAAoCwP,CAApC,CAEN,CAAkB,EAAf,KAAIE,MAAP,CACE,GAAIC,GAAM,IAAV,CADF,IAGE,IAAIA,GAAM,KAAK3jB,IAAL,CAAUwjB,EAAIE,MAAd,CAAV,CAGF,MAAOC,GAAI5jB,GAAJ,CAAQ,QAAR,CAAkByjB,EAAIxP,MAAtB,EAA8BmD,EAA9B,CAAiC,WAAjC,CAA8C,SAASzH,CAAT,CAAY,CAC/D,GAAkB,EAAf,KAAIgU,MAAP,CACE,GAAIE,GAAQ9jB,EAAE,IAAF,EAAQ4C,QAAR,CAAiB,WAAjB,CAAZ,CADF,IAGE,IAAIkhB,GAAQ9jB,EAAE,IAAF,EAAQ4C,QAAR,CAAiB,eAAjB,EAAkCyD,MAAlC,GAA2CzD,QAA3C,CAAoD,WAApD,CAAZ,CAEF,GAAImhB,GAAQD,EAAM7jB,GAAN,CAAU,SAAV,CAAZ,CACE+jB,EAAQF,EAAMG,WAAN,EADV,CAEEC,EAAQJ,EAAMK,UAAN,EAFV,CAGEC,EAAQN,EAAM7X,MAAN,GAAe7I,GAAf,CAAqB4gB,CAArB,CAA6BpU,EAAEiE,KAHzC,CAIEwQ,EAAQP,EAAM7X,MAAN,GAAeC,IAAf,CAAsBgY,CAAtB,CAA8BtU,EAAEmE,KAJ1C,CAKA+P,EAAM7jB,GAAN,CAAU,SAAV,MAA2ByC,OAA3B,GAAqC2U,EAArC,CAAwC,WAAxC,CAAqD,SAASzH,CAAT,CAAY,CAC/D5P,EAAE,YAAF,EAAgBiM,MAAhB,CAAuB,CACrB7I,IAAIwM,EAAEiE,KAAF,CAAUuQ,CAAV,CAAkBJ,CADD,CAErB9X,KAAK0D,EAAEmE,KAAF,CAAUsQ,CAAV,CAAkBH,CAFF,CAAvB,EAGG7M,EAHH,CAGM,SAHN,CAGiB,UAAW,CAC1BrX,EAAE,IAAF,EAAQwC,WAAR,CAAoB,WAApB,EAAiCvC,GAAjC,CAAqC,SAArC,CAAgD8jB,CAAhD,CACD,CALD,CAMD,CAPD,CAX+D,CAmB/DnU,EAAEzJ,cAAF,EACD,CApBM,EAoBJkR,EApBI,CAoBD,SApBC,CAoBU,UAAW,CACR,EAAf,KAAIuM,MADmB,CAExB5jB,EAAE,IAAF,EAAQwC,WAAR,CAAoB,WAApB,CAFwB,CAIxBxC,EAAE,IAAF,EAAQwC,WAAR,CAAoB,eAApB,EAAqC6D,MAArC,GAA8C7D,WAA9C,CAA0D,WAA1D,CAEH,CA1BM,CA2BR,CArCU,CAsCXxC,EAAE8a,EAAF,CAAK5C,QAAL,CAAgB,SAASwL,CAAT,CAAc,CAG5B,GAFAA,EAAM1jB,EAAE2jB,MAAF,CAAS,CAACC,OAAO,EAAR,CAAW1P,OAAO,SAAlB,CAAT,CAAuCwP,CAAvC,CAEN,CAAkB,EAAf,KAAIE,MAAP,CAAsB,CACrB,GAAIC,GAAM,IAAV,CACA7jB,EAAE,IAAF,EAAQwC,WAAR,CAAoB,WAApB,CACA,CAHD,IAGO,CACN,GAAIqhB,GAAM,KAAK3jB,IAAL,CAAUwjB,EAAIE,MAAd,CAAV,CACA5jB,EAAE,IAAF,EAAQwC,WAAR,CAAoB,eAApB,EACI6D,MADJ,GAEI7D,WAFJ,CAEgB,WAFhB,CAGA,CACD,MAAOqhB,GAAI5jB,GAAJ,CAAQ,QAAR,CAAkB,SAAlB,EACJsW,GADI,CACA,WADA,EAEJA,GAFI,CAEA,SAFA,EAGJA,GAHI,CAGA,WAHA,CAIR,CAtDU,CAuDXvW,EAAE8a,EAAF,CAAKwJ,GAAL,CAAW,UAAW,CACpB,GAA4B,OAAzB,QAAKrkB,GAAL,CAAS,UAAT,CAAH,CAAqC,CACnC,GAAIsgB,GAAM,CACRnd,IAAK,KAAKsJ,QAAL,GAAgBtJ,GAAhB,CAAsBpD,EAAElB,QAAF,EAAYwE,SAAZ,EADnB,CAER4I,KAAM,KAAKQ,QAAL,GAAgBR,IAAhB,CAAuBlM,EAAElB,QAAF,EAAYylB,UAAZ,EAFrB,CAAV,CAIA,KAAKtkB,GAAL,CAAS,CACPyM,SAAU,OADH,CAEPR,KAAMqU,EAAIrU,IAFH,CAGP9I,IAAKmd,EAAInd,GAHF,CAAT,CALmC,CAUnC,KAAKlD,IAAL,CAAU,SAAV,EAAqBsC,WAArB,CAAiC,QAAjC,EAA2CI,QAA3C,CAAoD,UAApD,CAVmC,CAWnCgD,qBAA0B,CAE3B,CAbD,IAcK,CACH,GAAI2a,GAAM,CACRnd,IAAK,KAAKsJ,QAAL,GAAgBtJ,GAAhB,CAAsBpD,EAAElB,QAAF,EAAYwE,SAAZ,EADnB,CAER4I,KAAM,KAAKQ,QAAL,GAAgBR,IAAhB,CAAuBlM,EAAElB,QAAF,EAAYylB,UAAZ,EAFrB,CAAV,CAIA,KAAKtkB,GAAL,CAAS,CACPyM,SAAU,UADH,CAEPR,KAAMqU,EAAIrU,IAFH,CAGP9I,IAAKmd,EAAInd,GAHF,CAAT,CALG,CAUH,KAAKlD,IAAL,CAAU,SAAV,EAAqBsC,WAArB,CAAiC,UAAjC,EAA6CI,QAA7C,CAAsD,QAAtD,CAVG,CAWHgD,qBAA0B,CAE3B,CACF,CApFU,CAqFX5F,EAAE8a,EAAF,CAAK9B,MAAL,CAAc,UAAY,CACxBhZ,EAAE,IAAF,EAAQuW,GAAR,GAAc/T,WAAd,CAA0B,SAA1B,EAAqCI,QAArC,CAA8C,YAA9C,EAA4D4hB,KAA5D,GAAoEvkB,GAApE,6BADwB,CAExB,GAAIwkB,GAAMzkB,EAAE,IAAF,EAAQoL,IAAR,CAAa,IAAb,CAAV,CAA8ByN,EAAM,EAApC,CAMIA,EALa,CACf6L,QAAS,wHAA+GD,CAA/G,CAAmH,kEAD7G,CAEfE,MAAO,iEAA8DF,CAA9D,CAAkE,8HAF1D,CAGfG,KAAM,uCAAsCH,CAAtC,CAA0C,4LAHjC,CAKP,CAAWzkB,EAAE,IAAF,EAAQoL,IAAR,CAAa,MAAb,CAAX,KANV,CAOA,GAAG,CAACyN,CAAJ,CAAS,SACT,GAAIuD,GAAYpc,EAAE,IAAF,CAAhB,CACIoN,EAAUpN,EAAE6Y,CAAF,EACbP,QADa,CACJ8D,CADI,EAEblH,IAFa,CAER,UAAW,CACflV,EAAE,IAAF,EAAQsE,IAAR,EADe,CAEf8X,EAAU5Z,WAAV,CAAsB,YAAtB,CACD,CALa,CAMf,CAtGU,CAuGXxC,EAAE8a,EAAF,CAAK+J,aAAL,CAAqB,SAASzB,CAAT,CAAoB,CACvC,MAAO,MAAKte,IAAL,CAAU,UAAW,CAC1B,GAAIob,GAAKlgB,EAAE,IAAF,EAAQkB,GAAR,CAAY,CAAZ,CAAT,CACAiiB,EAAmBjD,CAAnB,CAAuBkD,CAAvB,CACD,CAHM,CAIR,CAUF,CAtHD,EAsHGvN,MAtHH,C,CAwHA,QAASmG,MAAT,CAAetN,CAAf,CAAuB,CAsBrB,MArBqB,WAAlB,QAAOA,EAqBV,GArBkCA,EAAS,UAqB3C,EApBA1O,EAAE,IAAI0O,CAAN,EAAcoW,UAAd,CAAyB,CACvBC,aAAc,uBAAW,CACvB/kB,EAAE,IAAI0O,CAAN,EAAc9L,QAAd,CAAuB,cAAvB,CACD,CAHsB,CAIvBoK,QAAS,iBAASgY,CAAT,CAA+C,CACtDhlB,EAAE,IAAI0O,CAAN,EAAclM,WAAd,CAA0B,cAA1B,CADsD,CAEtD,GAAIyiB,GAAOjlB,EAAE,eAAF,EAAmBwG,MAAnB,CAA0Bwe,CAA1B,CAAX,CAC8B,EAA3B,KAAK9kB,IAAL,CAAU,IAAV,EAAgBJ,IAAhB,EAHmD,CAOZ,EAAlC,KAAKI,IAAL,CAAU,WAAV,EAAuBJ,IAAvB,EAP8C,GAQf,gEAAlC,KAAKI,IAAL,CAAU,WAAV,EAAuBJ,IAAvB,EARiD,GASlD2D,OAAOrB,QAAP,CAAgB2J,IAAhB,CAAuBnD,WAAa,aATc,EAWpDb,aAAakd,EAAK/kB,IAAL,CAAU,WAAV,EAAuBJ,IAAvB,EAAb,CAXoD,CAYpDwb,YAAYtb,EAAE0O,CAAF,CAAZ,IAZoD,GAIpD3G,aAAakd,EAAK/kB,IAAL,CAAU,IAAV,EAAgBJ,IAAhB,EAAb,CAJoD,CAKpDwb,YAAYtb,EAAE0O,CAAF,CAAZ,IALoD,CAcvD,CAlBsB,CAAzB,CAoBA,GACD,CAED,QAAS4M,YAAT,CAAqBS,CAArB,CAA4BmJ,CAA5B,CAAyC,CACb,WAAvB,QAAOA,EAD6B,GACAA,IADA,EAEnCA,CAFmC,GAGrCnJ,EAAM7b,IAAN,CAAW,oBAAX,EAA+BwB,GAA/B,CAAmC,EAAnC,CAHqC,CAIrCqa,EAAM7b,IAAN,CAAW,oBAAX,EAA+BwB,GAA/B,CAAmC,EAAnC,CAJqC,CAKrCqa,EAAM7b,IAAN,CAAW,oBAAX,EAA+BwB,GAA/B,CAAmC,EAAnC,CALqC,CAMrCqa,EAAM7b,IAAN,CAAW,sBAAX,EAAiCwB,GAAjC,CAAqC,EAArC,CANqC,CAOrCqa,EAAM7b,IAAN,CAAW,iBAAX,EAA4BwB,GAA5B,CAAgC,EAAhC,CAPqC,CAQrCqa,EAAM7b,IAAN,CAAW,kBAAX,EAA6BwB,GAA7B,CAAiC,EAAjC,CARqC,CASrCqa,EAAM7b,IAAN,CAAW,kBAAX,EAA6BwB,GAA7B,CAAiCyjB,cAAjC,CATqC,EAWnC9L,KAAKhD,OAX8B,GAYrCrW,EAAE,cAAF,EAAkBolB,IAAlB,EAZqC,CAarChR,aAAaiR,aAAb,CAbqC,CAcrCC,YAdqC,CAgBxC,CAED,QAASvV,UAAT,CAAmBnB,CAAnB,CAAyB,CACvB,GAAI2W,GAAS3W,EAAKjD,gBAAL,CAAsB,+DAAtB,CAAb,CACAxO,MAAMC,SAAN,CAAgBkR,OAAhB,CAAwBzC,IAAxB,CAA6B0Z,CAA7B,CAAqC,kBAASC,GAAMtmB,KAAN,CAAc,IAAvB,CAArC,CACD,CAED,GAAI8O,UAAW,CACbC,OAAQ,gBAASwX,CAAT,CAAgBxlB,CAAhB,CAAqB,CAC3B,GAAIqC,eAAiBmjB,CAArB,CACIC,EAAW5mB,SAAS+R,cAAT,CAAwBvO,CAAxB,CADf,CAEA,GAAIojB,CAAJ,CAEE,YADAA,EAASpT,SAAT,CAAqBrS,CACrB,EAEF,GAAI2X,GAAO9Y,SAAS8Y,IAAT,EAAiB9Y,SAASiG,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B,CACEiN,EAAQlT,SAASgT,aAAT,CAAuB,OAAvB,CADV,CAEAE,EAAM2T,IAAN,CAAa,UATc,CAU3B3T,EAAM1P,EAAN,CAAWA,CAVgB,CAWvB0P,EAAM4T,UAXiB,CAYzB5T,EAAM4T,UAAN,CAAiBC,OAAjB,CAA2B5lB,CAZF,CAczB+R,EAAMI,WAAN,CAAkBtT,SAASqT,cAAT,CAAwBlS,CAAxB,CAAlB,CAdyB,CAgB3B2X,EAAKxF,WAAL,CAAiBJ,CAAjB,CACD,CAlBY,CAmBbwC,OAAQ,gBAASiR,CAAT,CAAgB,CACtB,GAAInjB,eAAiBmjB,CAArB,CACIzT,EAAQlT,SAAS+R,cAAT,CAAwBvO,CAAxB,CADZ,CAEA,GAAI0P,CAAJ,CAAW,CACT,GAAI4F,GAAO9Y,SAAS8Y,IAAT,EAAiB9Y,SAASiG,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B,CACI6S,CAFK,EAGPA,EAAKkO,WAAL,CAAiBhnB,SAAS+R,cAAT,CAAwBvO,CAAxB,CAAjB,CACH,CACF,CA3BY,CAAf,CA8BA,QAAS6iB,aAAT,EAAwB,CAEtB,IAAK,GADDY,GAAS,EACR,CADYjiB,EAAQ,gEACpB,CAAI/G,EAD2F,EACpG,CAAyB,CAAJ,EAArB,CAA4B,EAAEA,CAA9B,CAAiCgpB,GAAUjiB,EAAMrG,KAAKmP,KAAL,CAAWnP,KAAKuG,MAAL,IAAiBF,EAAM9G,MAAN,CAAe,CAAhC,CAAX,CAAN,CAAV,CACjC,MAAO+oB,EACR,CAED,GAAI3O,SAAU,CACZxS,KAAM,eAAW,CACf5E,EAAE8Z,OAAF,CAAUlR,WAAa,gBAAvB,CAAyC,SAASwC,CAAT,CAAe,CACtDgM,QAAQ4O,SAAR,CAAoB5a,CADkC,CAEtDgM,QAAQE,MAAR,CAAe,EAAf,CACD,CAHD,CAID,CANW,CAOZA,OAAQ,gBAAS2O,CAAT,CAAgB,CACtB,GAAIzW,KAAJ,CAC6B,WAA1B,QAAO,MAAKwW,SAFO,GAGV,EAAT,GAHmB,CAGNxW,EAAM,KAAKwW,SAHL,EAKpBC,EAAQA,EAAM7hB,WAAN,EALY,CAMpBS,EAAEC,IAAF,CAAO,KAAKkhB,SAAZ,CAAuB,SAAShc,CAAT,CAAgB,EACS,CAAC,CAA5C,KAAMtL,IAAN,CAAW0F,WAAX,GAAyBtJ,MAAzB,CAAgCmrB,CAAhC,GAA4F,CAAC,CAA5C,KAAMC,IAAN,CAAW9hB,WAAX,GAAyBtJ,MAAzB,CAAgCmrB,CAAhC,CADf,GAEnCzW,EAAIvS,IAAJ,CAAS+M,CAAT,CACH,CAHD,CANoB,EAWtB,KAAKgT,OAAL,CAAaxN,CAAb,CAXsB,CAYvB,CAnBW,CAoBZwN,QAAS,iBAASjU,CAAT,CAAe,CACtB,GAAI1E,GAAU,EAAd,CAAkB8hB,EAAO,EAAzB,CACAthB,EAAEC,IAAF,CAAOiE,CAAP,CAAa,SAASqd,CAAT,CAAe,CAC1B/hB,GAAW,kCAAgC+hB,EAAKF,IAArC,CAA2C,YAA3C,CAAsDG,eAAtD,CAAsED,EAAK1nB,IAA3E,CAAgF,OAAhF,CAAuF0nB,EAAK1nB,IAA5F,CAAiG,MAAjG,CAAyG0nB,EAAKF,IAA9G,CAAoH,MADrG,CAE1BC,GAAQ,mBAAkBC,EAAK1nB,IAAvB,CAA4B,MAA5B,CAAkC0nB,EAAK1nB,IAAvC,CAA4C,MAA5C,CAAoD0nB,EAAKF,IAAzD,CAA+D,WACxE,CAHD,CAFsB,CAMtBlmB,EAAE,WAAF,EAAemE,IAAf,CAAoBE,CAApB,CANsB,CAOtBrE,EAAE,aAAF,EAAiBwG,MAAjB,CAAwB2f,CAAxB,CACD,CA5BW,CAAd,CA+BIhN,wtIA/BJ,CAkSIhC,KAAO,CACT1R,YADS,CAETb,KAAM,eAAW,CACf5E,EAAE8Z,OAAF,CAAU9N,cAAc,YAAxB,CAAsC,SAASZ,CAAT,CAAe,CACnD,GAAIkb,KAAJ,CACiB,CAAd,GAAKtpB,MAF2C,CAGjD6H,EAAEC,IAAF,CAAOsG,CAAP,CAAa,SAASmb,CAAT,CAAc,CACtBA,EAAIvhB,IAAJ,GAAaO,cADS,EACO+gB,EAAQrpB,IAAR,CAAaspB,CAAb,CACjC,CAFD,CAHiD,CAO9CD,EAAUlb,CAPoC,CAQnD+L,KAAK/L,IAAL,CAAYkb,CARuC,CASnDnP,KAAK1R,SAAL,GATmD,CAUnD0R,KAAK6F,OAAL,EACD,CAXD,CAYD,CAfQ,CAgBTA,QAAS,kBAAW,CAClB,GAAI,KAAKvX,SAAT,EACI,KAAK2F,IAAL,CAAUpO,MADd,EAEA,GAAIspB,KAAJ,CAC2B,WAAxB,QAAO,MAAKjhB,OAHf,CAQKihB,EAAU,KAAKlb,IARpB,CAIEvG,EAAEC,IAAF,CAAO,KAAKsG,IAAZ,CAAkB,SAASgb,CAAT,CAAe,CAC5BA,EAAK3pB,IAAL,GAAc0a,KAAK9R,OADS,EACAihB,EAAQrpB,IAAR,CAAampB,CAAb,CAChC,CAFD,CAJF,CASA,GAAII,GAAYC,WAAWH,CAAX,CAAhB,CACA,KAAKjhB,OAAL,CAAemhB,EAAU/pB,IAVzB,CAWA,GAAIuI,GAA4C,CAAC,CAArC,KAAUA,IAAV,CAAe3H,OAAf,CAAuB,MAAvB,CAAD,CAA4C2O,cAAc,GAAd,CAAkBwa,EAAUxhB,IAAxE,CAA+EwhB,EAAUxhB,IAApG,CACIX,EAAU,wGAAiGW,CAAjG,CAAsG,gBAAtG,CAAqHgH,aAArH,CAAmI,eAAnI,CAAmJwa,EAAU/pB,IAA7J,CAAkK,WADhL,CAEGuD,EAAE,MAAF,EAAUhD,MAbb,CAcEgD,EAAE,MAAF,EAAUmE,IAAV,CAAeE,CAAf,CAdF,CAgBKrE,EAAE,OAAF,EAAWsT,MAAX,CAAkB,8CAA0CjP,CAA1C,CAAkD,cAApE,CAhBL,CAiBD,CAlCQ,CAlSX,CAuUA,QAASqiB,aAAT,CAAuBC,CAAvB,CAA4BhF,CAA5B,CAAiC,CAC/B,MAAOlkB,MAAKE,KAAL,CAAWF,KAAKuG,MAAL,IAAiB2d,EAAMgF,CAAN,CAAY,CAA7B,CAAX,EAA8CA,CACtD,CAED,QAASF,WAAT,CAAoBG,CAApB,CAA2B,CACzB,MAAOA,GAAMF,aAAa,CAAb,CAAgBE,EAAM5pB,MAAN,CAAa,CAA7B,CAAN,CACR,CAGD,GAAI8R,QAAS,CACXsR,kBADW,CAEXhZ,KAAM,eAAW,CACf,GAAIgE,KAAJ,CACAvG,EAAEC,IAAF,CAAOgK,OAAOsR,GAAd,CAAmB,SAASA,CAAT,CAAc,CAC/BhV,EAAKgV,CAAL,EAAYpgB,EAAE,YAAF,EAAgBC,GAAhB,CAAoBmgB,CAApB,CACb,CAFD,CAFe,CAKf,GAAIyG,GAAU,GAAIvnB,KAAJ,GAAWE,OAAX,EAAd,CAKA,MAJA4L,GAAK0b,OAAL,CAAeD,CAIf,CAHA/X,OAAO+X,OAAP,CAAiBA,CAGjB,CAFA7mB,EAAE,iCAAF,EAAqC0B,GAArC,CAAyCmlB,CAAzC,CAEA,CADAjhB,aAAayC,OAAb,CAAqB,UAAU9C,cAAV,CAAyB,GAAzB,EAA8BrO,OAAS,MAAT,CAAkB8I,EAAE,8BAAF,EAAkC0B,GAAlC,EAAhD,CAArB,CAA+G+N,KAAKiM,SAAL,CAAetQ,CAAf,CAA/G,CACA,GACD,CAbU,CAcXyb,UAdW,CAeXE,OAAQ,iBAAW,CACjB/mB,EAAE,iCAAF,EAAqC0B,GAArC,CAAyCoN,OAAO+X,OAAP,EAAkB,GAAIvnB,KAAJ,GAAWE,OAAX,EAA3D,CACD,CAjBU,CAkBX0V,KAAM,eAAW,CACf,GAAI8R,GAAM,UAAUzhB,cAAV,CAAyB,GAAzB,EAA8BrO,OAAS,MAAT,CAAkB8I,EAAE,8BAAF,EAAkC0B,GAAlC,EAAhD,CAAV,CACA,GAAIkE,aAAaohB,CAAb,CAAJ,CACA,GAAI,aACF,GAAI5b,GAAOqE,KAAKC,KAAL,CAAW9J,aAAaohB,CAAb,CAAX,CAAX,CACG5b,EAAK0b,OAAL,EAAgB1b,EAAK0b,OAAL,EAAgB9mB,EAAE,iCAAF,EAAqC0B,GAArC,EAFjC,EAGAmD,EAAEC,IAAF,CAAOgK,OAAOsR,GAAd,CAAmB,SAASA,CAAT,CAAc,CAC5BhV,EAAKnP,cAAL,CAAoBmkB,CAApB,CAD4B,EACFpgB,EAAE,YAAF,EAAgBC,GAAhB,CAAoBmgB,CAApB,CAAyBhV,EAAKgV,CAAL,CAAzB,CAC9B,CAFD,CAHA,CAMApgB,EAAE,YAAF,EAAgBsE,IAAhB,EANA,EAQGsB,aAAa0C,UAAb,CAAwB0e,CAAxB,CARH,IAUH,CACD,MAAMpX,CAAN,CAAS,CACPhK,aAAa0C,UAAb,CAAwB0e,CAAxB,CADO,CAEP7qB,QAAQC,GAAR,CAAY,0BAAZ,CAAwCwT,CAAxC,CACD,CACF,CApCU,CAAb,CAuCI2J,WAAa,CACf0N,MAAO,CACL,CAAC3kB,GAAI,SAAL,CAAgB4kB,GAAI,+DAApB,CADK,CAEL,CAAC5kB,GAAI,OAAL,CAAgB4kB,GAAI,2CAApB,CAFK,CAGL,CAAC5kB,GAAI,MAAL,CAAgB4kB,GAAI,0CAApB,CAHK,CADQ,CAMf1N,QAAS,iBAAS9X,CAAT,CAAc,CACrB,GAAIqkB,GAAS,IAAb,CAUA,MATAlhB,GAAEC,IAAF,CAAO,KAAKmiB,KAAZ,CAAmB,SAASvN,CAAT,CAAe,CAChC,GAAIyN,GAAQzN,EAAKwN,EAAL,CAAQtqB,IAAR,CAAa8E,CAAb,CAAZ,CACY,IAAT,GAF6B,GAG9BqkB,EAAS,CACPrM,KAAMA,EAAKpX,EADJ,CAEPmX,KAAM0N,EAAM,CAAN,CAFC,CAHqB,CAQjC,CARD,CASA,CAAOpB,CACR,CAlBc,CAvCjB,CA4DAtiB,OAAO2jB,cAAP,CAAwBtY,OAAOiY,M,CAE/B,GAAInN,SAAU,CACZyN,KAAM,CACJhtB,OAAQ,QADJ,CAEJitB,OAAQ,MAFJ,CAGJC,kBAHI,CAIJ5sB,aAJI,CAKJ6sB,gBALI,CADM,CAQZC,WAAY,qBAAW,CACrB7hB,6BAAkC6J,KAAKiM,SAAL,CAAe,KAAK2L,IAApB,CACnC,CAVW,CAWZziB,KAAM,eAAW,CAEf,GAAGgB,4BAAH,CACE,GAAI,CACF,GAAI8hB,GAASjY,KAAKC,KAAL,CAAW9J,4BAAX,CAAb,CACAf,EAAEC,IAAF,CAAO4iB,CAAP,CAAe,SAAShmB,CAAT,CAAcslB,CAAd,CAAmB,CAChC,KAAKK,IAAL,CAAUL,CAAV,EAAiBtlB,CAClB,CAFD,CAEG,IAFH,CAGD,CACD,MAAMkO,CAAN,CAAS,CACPzT,QAAQ8Q,KAAR,CAAc,wBAAd,CADO,CAEPrH,aAAa0C,UAAb,CAAwB,iBAAxB,CACD,CAIHzD,EAAEC,IAAF,4GAKI,SAAS6iB,CAAT,CAAmB,CACC,mBAAkBA,EAAS,CAAT,CAAlB,CAA8B,IAA9B,EAAmCA,EAAS,CAAT,GAAa,KAAKN,IAAL,CAAUhtB,MAAvB,CAAgC,WAAhC,CAA8C,EAAjF,EAAqF,GAArF,CAAyF0B,GAAG4rB,EAAS,CAAT,CAAH,CAAzF,CAAyG,WAChI,CAFE,CAEAzf,IAFA,CAEK,IAFL,CALH,CAhBe,CA0Bf,GAAI0f,GAAW,qDAAf,CACA/iB,EAAEC,IAAF,gLAKI,SAAS+iB,CAAT,CAAgB,CAClBD,GAAY,0BAAyBC,EAAM,CAAN,GAAU,KAAKR,IAAL,CAAUhtB,MAApB,CAA6B,eAA7B,CAA+C,EAAxE,EACZ,gBADY,CACGwtB,EAAM,CAAN,CADH,CACY,aADZ,CACwB9rB,GAAG1B,MAD3B,CACkC,GADlC,CACsC0B,GAAG8rB,EAAM,CAAN,CAAH,CADtC,CACmD,6BADnD,CAEOA,EAAM,CAAN,CAFP,CAEgB,0BAFhB,CAEyCA,EAAM,CAAN,CAFzC,CAEkD,uBAC/D,CAJE,CAIA3f,IAJA,CAIK,IAJL,CALH,CA3Be,CAqCf0f,GAAY,QArCG,CAsCf,GAAIE,GAAU,6BAAiD,QAArB,QAAKT,IAAL,CAAUhtB,MAAV,CAA8C,EAA9C,CAAgC,WAA5D,EAA8E,uDAA5F,CACAwK,EAAEC,IAAF,sEAGI,SAAS+iB,CAAT,CAAgB,CAClBC,GAAW,0BAAyBD,EAAM,CAAN,GAAU,KAAKR,IAAL,CAAUE,eAApB,CAAsC,eAAtC,CAAwD,EAAjF,EACX,gBADW,CACIM,EAAM,CAAN,CADJ,CACa,aADb,CACyB9rB,GAAG8rB,EAAM,CAAN,CAAH,CADzB,CACsC,6BADtC,CAEQA,EAAM,CAAN,CAFR,CAEiB,0BAFjB,CAE0CA,EAAM,CAAN,CAF1C,CAEmD,uBAC/D,CAJE,CAIA3f,IAJA,CAIK,IAJL,CAHH,CAvCe,CA+Cf4f,GAAW,QA/CI,CAgDf,GAAIC,GAAW,yDAAf,CACAljB,EAAEC,IAAF,2EAGI,SAAS+iB,CAAT,CAAgB,CAClBE,GAAY,0BAAyBF,EAAM,CAAN,GAAU,KAAKR,IAAL,CAAU1sB,UAApB,CAAiC,eAAjC,CAAmD,EAA5E,EACZ,gBADY,CACGktB,EAAM,CAAN,CADH,CACY,aADZ,CACwB9rB,GAAG8rB,EAAM,CAAN,CAAH,CADxB,CACqC,6BADrC,CAEOA,EAAM,CAAN,CAFP,CAEgB,0BAFhB,CAEyCA,EAAM,CAAN,CAFzC,CAEkD,uBAC/D,CAJE,CAIA3f,IAJA,CAIK,IAJL,CAHH,CAjDe,CAyDf6f,GAAY,QAzDG,CA0Df,GAAIC,GAAa,qDAAjB,CACAnjB,EAAEC,IAAF,0FAII,SAAS+iB,CAAT,CAAgB,CAClBG,GAAc,0BAAyBH,EAAM,CAAN,GAAU,KAAKR,IAAL,CAAUC,MAApB,CAA6B,eAA7B,CAA+C,EAAxE,EACd,gBADc,CACCO,EAAM,CAAN,CADD,CACU,aADV,CACsB9rB,GAAG8rB,EAAM,CAAN,CAAH,CADtB,CACmC,6BADnC,CAEKA,EAAM,CAAN,CAFL,CAEc,0BAFd,CAEuCA,EAAM,CAAN,CAFvC,CAEgD,uBAC/D,CAJE,CAIA3f,IAJA,CAIK,IAJL,CAJH,CA3De,CAoEf8f,GAAc,QApEC,CAsEf,GAAIC,GAAc,uHAA4GlsB,GAAGjB,MAA/G,CAAsH,sFAAxI,CAEAkF,EAAE,mBAAF,EAAuBmE,IAAvB,CACEyjB,EAASE,CAAT,CAAiBG,CAAjB,CAA6BF,CAA7B,CAAsCC,CADxC,CAxEe,CA2Ef,KAAK9S,IAAL,EA3Ee,CA4EZ,KAAKmS,IAAL,CAAUG,aA5EE,EA6EbxnB,EAAE,mBAAF,EAAuB4C,QAAvB,CAAgC,yBAAhC,CA7Ea,CA+Ef5C,EAAE,mBAAF,EACCqX,EADD,CACI,OADJ,CACa,mBADb,CACkC,UAAW,CAC3CrX,EAAE,IAAF,EAAQ0X,WAAR,CAAoB,iBAApB,CACD,CAHD,EAICL,EAJD,CAII,OAJJ,CAIa,oBAJb,CAImC,SAASnR,CAAT,CAAa,CAC9CA,EAAG2M,eAAH,EAD8C,CACxB3M,EAAGC,cAAH,EADwB,CAE9C,GAAI+hB,GAAQloB,EAAE,IAAF,EAAQ0C,OAAR,CAAgB,YAAhB,CAAZ,CACAwlB,EAAMxQ,WAAN,CAAkB,eAAlB,CACD,CARD,EASCL,EATD,CASI,OATJ,CASa,kCATb,CASiD,SAASnR,CAAT,CAAa,CAC5DA,EAAG2M,eAAH,EACD,CAXD,EAYCwE,EAZD,CAYI,sEAZJ,CAY6E,SAAStG,CAAT,CAAgB,CAC3F,GAAIjQ,GAAUd,EAAE+Q,EAAM4G,MAAR,CAAd,CACyC,oBAArC,IAAMsB,aAAN,CAAoBC,aAApB,EAA8DpY,EAAQiS,QAAR,CAAiB,YAAjB,CAFyB,EAGzF,KAAKoV,aAAL,CAAmBrnB,CAAnB,CACH,CAJ2E,CAIzEoH,IAJyE,CAIpE,IAJoE,CAZ5E,EAiBCmP,EAjBD,CAiBI,WAjBJ,CAiBiB,UAjBjB,CAiB6B,SAASnR,CAAT,CAAa,CACxCA,EAAGC,cAAH,EADwC,CAExCoM,aAAaK,UAAb,CAAwB1K,IAAxB,CAA6B,IAA7B,EAAmChC,CAAnC,CACD,CApBD,EAqBCmR,EArBD,CAqBI,OArBJ,CAqBa,UArBb,CAqByB,SAASnR,CAAT,CAAa,CACpCA,EAAG2M,eAAH,EADoC,CAEpC3M,EAAGC,cAAH,EACD,CAxBD,EAyBCkR,EAzBD,CAyBI,YAzBJ,CAyBkB,UAzBlB,CAyB8B,SAASnR,CAAT,CAAa,CACzCqM,aAAaiB,SAAb,CAAuBtL,IAAvB,CAA4B,IAA5B,EAAkChC,CAAlC,CACD,CA3BD,EA4BCmR,EA5BD,CA4BI,OA5BJ,CA4Ba,SA5Bb,CA4ByB,SAASnR,CAAT,CAAa,CACpC,GAAIpF,GAAUd,EAAEkG,EAAGkiB,aAAL,CAAd,CACEF,EAAQpnB,EAAQ4B,OAAR,CAAgB,YAAhB,CADV,CAEE2lB,EAAWH,EAAM9c,IAAN,CAAW,IAAX,CAFb,CAGEkd,EAAWzjB,EAAE0jB,SAAF,CAAY,KAAKC,KAAjB,CAAwB,CAAC,GAAMH,CAAP,CAAxB,CAHb,CAIEjN,EAAS,KAAKoN,KAAL,CAAWF,CAAX,CAJX,CAKAlN,EAAOqN,MAAP,CAAgB,CAACrN,EAAOqN,MANY,CAQjCrN,EAAOqN,MAR0B,EASlC3nB,EAAQ,CAAR,EAAW4nB,SAAX,CAAqBvT,GAArB,CAAyB,WAAzB,CATkC,CAUlCrU,EAAQqD,IAAR,CAAa,mFAAb,CAVkC,CAWlC2E,cAAcK,IAAd,CAAmBkf,CAAnB,CAXkC,CAYlCH,EAAMtlB,QAAN,CAAe,eAAf,CAZkC,GAelC9B,EAAQ,CAAR,EAAW4nB,SAAX,CAAqBlU,MAArB,CAA4B,WAA5B,CAfkC,CAgBlC1T,EAAQqD,IAAR,CAAa,iFAAb,CAhBkC,CAiBlC2E,cAAcQ,MAAd,CAAqB+e,CAArB,CAjBkC,CAkBlCH,EAAM1lB,WAAN,CAAkB,eAAlB,CAlBkC,EAqBpC,KAAKgmB,KAAL,CAAWF,CAAX,EAAuBlN,CArBa,CAsBpC,MAAO,MAAKuN,QAAL,CAAc,KAAKtB,IAAL,CAAUC,MAAxB,EAAgCe,CAAhC,CACR,CAvBuB,CAuBrBngB,IAvBqB,CAuBhB,IAvBgB,CA5BxB,CA/Ee,CAoIflI,EAAE,YAAF,EAAgBiG,KAAhB,CAAuB,SAASC,CAAT,CAAa,CAClC,GAAIpF,GAAUd,EAAEkG,EAAGkiB,aAAL,CAAd,CACA,IAAGtnB,EAAQiS,QAAR,CAAiB,cAAjB,CAAH,EACA,GAAI6V,GAAS9nB,EAAQuF,MAAR,EAAb,CACE3E,EAAMZ,EAAQsK,IAAR,CAAa,KAAb,CADR,CAEE4b,EAAM4B,EAAOxd,IAAP,CAAY,QAAZ,CAFR,CAGAwd,EAAO1oB,IAAP,CAAY,YAAZ,EAA0BsC,WAA1B,CAAsC,cAAtC,CAJA,CAKA1B,EAAQ8B,QAAR,CAAiB,cAAjB,CALA,CAMW,QAAR,MAA4B,QAAR,IANvB,CAMyClB,EAAM,CAAC,CAACA,CANjD,CAQY,QAAP,GARL,CAQsB1B,EAAE,aAAF,EAAiBwC,WAAjB,CAA6B,UAA7B,CARtB,CASOxC,EAAE,aAAF,EAAiB4C,QAAjB,CAA0B,UAA1B,CATP,CAWA,KAAKykB,IAAL,CAAUL,CAAV,EAAiBtlB,CAXjB,CAYA,KAAK+lB,UAAL,EAZA,CAaW,YAAR,IAbH,CAeK/lB,CAfL,CAeU1B,EAAE,mBAAF,EAAuBwC,WAAvB,CAAmC,YAAnC,CAfV,CAgBOxC,EAAE,mBAAF,EAAuB4C,QAAvB,CAAgC,YAAhC,CAhBP,CAayB,KAAKimB,KAAL,EAbzB,CAkBD,CApBqB,CAoBnB3gB,IApBmB,CAoBd,IApBc,CAAtB,CApIe,CAyJflI,EAAE,kBAAF,EAAsBiG,KAAtB,CAA6B,SAASC,CAAT,CAAa,CACxCA,EAAGC,cAAH,EADwC,CAExC,KAAK+O,IAAL,EACD,CAH2B,CAGzBhN,IAHyB,CAGpB,IAHoB,CAA5B,CAzJe,CA8JflI,EAAE,aAAF,EAAiBqX,EAAjB,CAAoB,OAApB,CAA6B,UAAW,CACtC,GAAI4O,GAAQjmB,EAAE,IAAF,EAAQ0B,GAAR,GAAc0C,WAAd,GAA4BrG,OAA5B,CAAoC,IAApC,CAA0C,MAA1C,CAAZ,CACA,GAAI,CACFiQ,SAASwG,MAAT,CAAgB,YAAhB,CACD,CAAC,MAAM5E,CAAN,CAAS,CAAE,CACVqW,EAAMjpB,MAL6B,CAMpCgR,SAASC,MAAT,CAAgB,YAAhB,CAA8B,sDAAqDgY,CAArD,CAA2D,wBAAzF,CANoC,CAOjCjY,SAASwG,MAAT,CAAgB,YAAhB,CACN,CARD,EAQGoB,OARH,CAQW,OARX,CASD,CAlLW,CAmLZV,KAAM,eAAW,CAEf,KAAKyT,QAAL,CAAgB,CAAC7oB,OAAD,CAAWgpB,UAAX,CAFD,CAGf,KAAKN,KAAL,CAAa,IAHE,CAKfxoB,EAAE8Z,OAAF,CAAU,kBAAmB,GAAIxa,KAAJ,GAAWE,OAAX,EAA7B,EACCua,IADD,CACM,KAAK8O,KAAL,CAAW3gB,IAAX,CAAgB,IAAhB,CADN,EAEC+R,IAFD,CAEM,SAASxP,CAAT,CAAc,CAClB,KAAMA,EACP,CAJD,CAKD,CA7LW,CA8LZse,UAAW,CACTC,gCADS,CAETC,oDAFS,CAGTC,mBAHS,CAITC,yBAJS,CA9LC,CAoMZC,wCApMY,CAqMZpP,WAAY,oBAASwB,CAAT,CAAoB6N,CAApB,CAA2B,CACjB,WAAjB,QAAOA,EAD2B,GACJA,IADI,EAErC,GAAIhqB,GAAO,GAAIC,KAAJ,CAAS,KAAT,CAAX,CACEgqB,EAAM,KAAKC,SAAL,CAAeC,IAAf,CAAoBvtB,cAApB,CAAmCD,MAAnC,EAA6C,KAAKutB,SAAL,CAAeC,IAAf,CAAoBxtB,MAApB,EAA4BqD,EAAKoqB,MAAL,EAA5B,CAA7C,CAA0F,KAAKF,SAAL,CAAeC,IAAf,CAAoBnyB,EAApB,CAAuBgI,EAAKoqB,MAAL,EAAvB,CADlG,CAEEC,EAAK7kB,EAAE8kB,OAAF,CAAUtqB,EAAKuqB,WAAL,GAAqB,GAA/B,CAAoC,CAApC,CAAuC,CAAvC,CAFP,CAGEC,EAAKhlB,EAAE8kB,OAAF,CAAUtqB,EAAKyqB,QAAL,GAAgB,CAA1B,CAA6B,CAA7B,CAAgC,CAAhC,CAHP,CAIEC,EAAkB,IAAX,SAAD,CAAoB,KAAKR,SAAL,CAAeS,IAAf,CAAoBpuB,EAApB,CAAuByD,EAAKyqB,QAAL,EAAvB,CAApB,CAA8DzqB,EAAKyqB,QAAL,GAAgB,CAJtF,CAKEG,EAAKplB,EAAE8kB,OAAF,CAAUtqB,EAAK6qB,OAAL,EAAV,CAA0B,CAA1B,CAA6B,CAA7B,CALP,CAMEC,EAAKtlB,EAAE8kB,OAAF,CAAUtqB,EAAK+qB,QAAL,EAAV,CAA2B,CAA3B,CAA8B,CAA9B,CANP,CAOEC,EAAKxlB,EAAE8kB,OAAF,CAAUtqB,EAAKirB,UAAL,EAAV,CAA6B,CAA7B,CAAgC,CAAhC,CAPP,CAQEC,EAAK1lB,EAAE8kB,OAAF,CAAUtqB,EAAKmrB,UAAL,EAAV,CAA6B,CAA7B,CAAgC,CAAhC,CARP,CASA,MAAO,CAACnB,EACU,IAAX,SAAD,CACCY,EAAG,GAAH,CAAOJ,CAAP,CAAU,GAAV,CAAcH,CAAd,CAAiB,UADlB,CAECG,EAAG,GAAH,CAAOI,CAAP,CAAU,GAAV,CAAcP,CAAd,CAAiB,KAHhB,CAIU,IAAX,SAAD,CACCJ,EAAI,GAAJ,CAAQW,CAAR,CAAW,GAAX,CAAeF,CAAf,CAAmB,QAAnB,CAAuBL,CAAvB,CAA0B,UAD3B,CAECG,EAAG,GAAH,CAAOI,CAAP,CAAU,GAAV,CAAcP,CAAd,CAAiB,IAAjB,CAAsBJ,CAAtB,CAA0B,MAN1B,EAOHa,CAPG,CAOA,GAPA,CAOIE,CAPJ,CAOO,GAPP,CAOWE,CACnB,CAxNW,CAyNZhB,UAAW,CACTC,KAAM,CACJ5tB,uJADI,CAEJvE,8CAFI,CADG,CAKT2yB,KAAM,CACJpuB,gQADI,CALG,CAzNC,CAkOZitB,MAAO,eAASzd,CAAT,CAAe,CAEpB,GADmB,WAAhB,QAAOA,EACV,GADgCA,EAAO,KAAKod,KAC5C,GAAG,CAACpd,CAAJ,EASA,GAPAvG,EAAEC,IAAF,CAAOsG,CAAP,CAAa,SAASqf,CAAT,CAAgB1tB,CAAhB,CAAmB,CAC9B8H,EAAEC,IAAF,kHAAkI,SAASqV,CAAT,CAAe,CAC/IsQ,EAAMtQ,CAAN,EAAc,CAAC,CAACsQ,EAAMtQ,CAAN,CACjB,CAFD,CAD8B,CAI9B/O,EAAKrO,CAAL,EAAU0tB,CACX,CALD,CAOA,CAAwB,QAArB,QAAKpD,IAAL,CAAUhtB,MAAV,EAAiC,KAAKgtB,IAAL,CAAUE,eAA9C,CACE,KAAKiB,KAAL,CAAa3jB,EAAE6lB,WAAF,CAActf,CAAd,uCAAb,CADF,IAEK,CACH,GAAIuf,GAAM,CAAC,KAAKtD,IAAL,CAAUhtB,MAAX,CAAV,CACwB,QAArB,QAAKgtB,IAAL,CAAUhtB,MAFV,EAGDswB,EAAI1tB,IAAJ,CAAS,QAAT,CAHC,CAIH,KAAKurB,KAAL,CAAa3jB,EAAE6lB,WAAF,CAActf,CAAd,CAAoBuf,CAApB,CAAyB9lB,EAAE+lB,MAAF,CAAS,MAAT,CAAiBD,EAAI3tB,MAArB,CAAzB,CACd,CAED,GAAImH,GAAO,EAAX,CAEAU,EAAEC,IAAF,CAAO,KAAK0jB,KAAZ,CAAmB,SAASpN,CAAT,CAAiB,CAClCjX,GAAQ,KAAK0mB,UAAL,CAAgBzP,CAAhB,CACT,CAFD,CAEG,IAFH,CApBA,CAwBApb,EAAE,mBAAF,EAAuBmE,IAAvB,CAA4BA,CAA5B,CAxBA,CAyBD,CA7PW,CA8PZgkB,cAAe,uBAAStE,CAAT,CAAc,CAC3B,GAAInK,GAAOmK,EAAIzY,IAAJ,CAAS,MAAT,CAAX,CAA6B9I,EAAKuhB,EAAIzY,IAAJ,CAAS,IAAT,CAAlC,CACEnB,EAAU4Z,EAAInhB,OAAJ,CAAY,YAAZ,CADZ,CAEE2lB,EAAWpe,EAAQmB,IAAR,CAAa,IAAb,CAFb,CAGW,KAAR,GAJwB,EAKzBpL,EAAEkB,GAAF,CAAM8K,cAAc,mBAAd,CAAkC1J,CAAxC,CAA6C,SAASkN,CAAT,CAAc,CACzDqU,EAAIlZ,WAAJ,CAAgB,cAAa6E,EAAIoN,aAAjB,CAA+B,KAA/C,CADyD,CAEzD,KAAK+L,QAAL,CAAc,KAAKtB,IAAL,CAAUC,MAAxB,EAAgCe,CAAhC,EAA4Cpe,EAAQ,CAAR,EAAW6gB,SACxD,CAH2C,CAGzC5iB,IAHyC,CAGpC,IAHoC,CAA5C,CALyB,CAShB,KAAR,GATwB,EAUzBlI,EAAEkB,GAAF,CAAM,iCAAiCoB,CAAjC,CAAoC,OAA1C,CAAoD,SAASkN,CAAT,CAAc,CAChEqU,EAAIlZ,WAAJ,CAAgB,cAAa6E,EAAI,CAAJ,EAAOub,gBAApB,CAAqC,KAArD,CADgE,CAEhE,KAAKpC,QAAL,CAAc,KAAKtB,IAAL,CAAUC,MAAxB,EAAgCe,CAAhC,EAA4Cpe,EAAQ,CAAR,EAAW6gB,SACxD,CAHkD,CAGhD5iB,IAHgD,CAG3C,IAH2C,CAAnD,CAIH,CA5QW,CA8QZ2iB,WAAY,oBAASzP,CAAT,CAAiB,CAC3B,GAAG,KAAKuN,QAAL,CAAc,KAAKtB,IAAL,CAAUC,MAAxB,EAAgCrrB,cAAhC,CAA+Cmf,EAAO9Y,EAAtD,CAAH,CACE,MAAO,MAAKqmB,QAAL,CAAc,KAAKtB,IAAL,CAAUC,MAAxB,EAAgClM,EAAO9Y,EAAvC,CAAP,CAEF,GAAG,CAAC8Y,EAAO4P,SAAX,CAAsB,CACpB5P,EAAO3T,GAAP,CAAa,IAAIlC,cAAJ,CAAmB,OAAnB,CAA2B6V,EAAO9Y,EAAlC,CAAqC,OAD9B,CAOpB,GAAG,CAAC8Y,EAAO6P,IAAR,EAAgC,SAAhB,KAAOA,IAA1B,CACE7P,EAAO8P,UAAP,CACA,aAAY9P,EAAO3T,GAAnB,CAAuB,sEAAvB,EACqC2T,EAAO6P,IAAP,CAAc,sCAAd,CAAyB,SAD9D,cAFF,KAMK,CACH,GAAGpmB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeC,KAA1B,CAAiC5N,EAAO+P,SAAxC,CAAH,CACE/P,EAAOgQ,aAAP,CAAuB,OADzB,CAEEhQ,EAAO8P,UAAP,CACA,aAAY9P,EAAO3T,GAAnB,CAAuB,uDAAvB,CACoB2T,EAAO6P,IAD3B,CACgC,IADhC,EAC2D,MAArB,KAAOE,SAAP,CAA8B,KAA9B,CAAsC/P,EAAO+P,SADnF,WAHF,CAME/P,EAAOiQ,QAAP,CACA,oBAAmBjQ,EAAO6P,IAA1B,CAA+B,IAA/B,EAA0D,MAArB,KAAOE,SAAP,CAA8B,KAA9B,CAAsC/P,EAAO+P,SAAlF,EAA6F,KAP/F,KAUK,CACH,GAAIG,GAAYzmB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeE,cAA1B,CAA0C7N,EAAO+P,SAAjD,CAAD,CACb,kBAAkB/P,EAAO+P,SAAzB,CAAmC,MADtB,CAEb,0BAA0BtmB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeI,KAA1B,CAAiC/N,EAAO+P,SAAxC,EAAqD,QAArD,CAAgE,EAA1F,EAA8F,MAFhG,CAGII,EAAa1mB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeI,KAA1B,CAAiC/N,EAAO+P,SAAxC,GAAsDtmB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeG,KAA1B,CAAiC9N,EAAO+P,SAAxC,CAHvE,CAIA/P,EAAO8P,UAAP,CACA,aAAY9P,EAAO3T,GAAnB,CAAuB,iDAAvB,CACc6jB,CADd,UAID,CAEEzmB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeI,KAA1B,CAAiC/N,EAAO+P,SAAxC,CAvBA,GAwBD/P,EAAOiQ,QAAP,CAAuC,KAApB,IAAOF,SAAR,CAChB,oCAAmC/P,EAAO6P,IAA1C,CAA+C,mBAD/B,CAEhB,2CAAwC7P,EAAO+P,SAA/C,CAAyD,eAAzD,CAAuE/P,EAAO6P,IAA9E,CAAmF,WA1BpF,EA6BApmB,EAAE2a,QAAF,CAAW,KAAKuJ,SAAL,CAAeG,KAA1B,CAAiC9N,EAAO+P,SAAxC,CA7BA,GA8BD/P,EAAOiQ,QAAP,CACA,oBAAmBjQ,EAAO6P,IAA1B,CAA+B,GAA/B,CAAmC7P,EAAO+P,SAA1C,CAAoD,sBA/BnD,CAiCJ,CACE/P,EAAO6P,IAAP,EAA+B,SAAhB,KAAOA,IA/CL,GAgDlB7P,EAAOiQ,QAAP,CAAkB,+BAA4BjQ,EAAO3T,GAAnC,CAAuC,wBAAvC,CAA6D2T,EAAOiQ,QAApE,CAA6E,MAhD7E,EAmDpBjQ,EAAOoQ,EAAP,CAAY,gCAA6BzvB,GAAGf,UAAhC,CAA2C,8BAA3C,CAAsEogB,EAAO3T,GAA7E,CAAiF,8BAAjF,CAA6G2T,EAAO9Y,EAApH,CAAuH,MAnD/G,CAsDpB8Y,EAAOhI,OAAP,CACA,aAAYgI,EAAO3T,GAAnB,CAAuB,GAAvB,CAA2B2T,EAAO9Y,EAAlC,CAAqC,0GAvDjB,CA4DpB,GAAImpB,GACJ,sGACgCrQ,EAAOsQ,WADvC,CACmD,SAFnD,CAGGtQ,EAAOuQ,UA/DU,GAgElBF,EAAe,aAAYrQ,EAAO3T,GAAnB,CAAuB,GAAvB,CAA2B2T,EAAOuQ,UAAlC,CAA6C,6BAA7C,CAAwEF,CAAxE,CAAqF,MAhElF,EAiEpB,GAAItzB,GACJ,4BAA0BszB,CAA1B,CAAuC,QADvC,CAEAG,EACA,2IAEkCxQ,EAAOwQ,MAFzC,CAEgD,qBALhD,CAOAtN,EACA,uDACcviB,GAAGhB,YADjB,CAC8B,GAD9B,CACkCqgB,EAAOkD,IADzC,CAC8C,+BAD9C,CAC0E/Y,cAD1E,CACyF,GADzF,EAC+G,CAAd,GAAO+Y,IAAR,CAAoBlD,EAAOkD,IAAP,CAAY,OAAhC,CAA0C,EAD1I,EAC8I,GAD9I,CACkJlD,EAAO9Y,EADzJ,CAC4J,qIAD5J,CAGoC8Y,EAAOkD,IAH3C,CAGgD,iCAXhD,CAcAlD,EAAOyQ,gBAAP,CAA0B1zB,EAAQyzB,CAAR,CAAetN,CA/ErB,CAkFpBlD,EAAO0Q,eAAP,CAAyB,CAAC1Q,EAAO0Q,eAlFb,CAmFpB1Q,EAAO2Q,gBAAP,CAA0B,MAnFN,EAoFuB,MAAxC,qCAC0C,MAAxC,sCACE3Q,EAAO1c,IAAP,EAAe0c,EAAO4Q,QAAtB,EAAkC5Q,EAAO0Q,eAD3C,CArFe,IAwFhB1Q,EAAO2Q,gBAAP,CAA0B,MAxFV,EA2FpB,GAAIE,GACJ,CAAC7Q,EAAO1c,IAAP,CAAc,kCAAgC0c,EAAO1c,IAAvC,CAA4C,SAA1D,CAAsE,EAAvE,GACC0c,EAAO4Q,QAAP,CAAkB,mCAAiC5Q,EAAO4Q,QAAxC,CAAiD,SAAnE,CAA+E,EADhF,GAEC5Q,EAAO0Q,eAAP,CAAyB,qCAAmC,KAAK1C,WAAL,CAAiBhO,EAAO0Q,eAAxB,CAAnC,CAA4E,WAArG,CAAmH,EAFpH,CADA,CAIA1Q,EAAO6Q,MAAP,CAAgB,iEAA8DA,GAAU,qCAAmCC,wBAA0BnwB,GAAG3B,SAAhE,EAA2E,SAAnJ,EAA8J,QA/F1J,CAmGpBghB,EAAO/b,IAAP,CAAc,6CAA2C,KAAK2a,UAAL,CAAgBoB,EAAOI,SAAvB,CAA3C,CAA6E,QAnGvE,CAoGpBJ,EAAO+Q,WAAP,CAAqB,8CAA4C,KAAKnS,UAAL,CAAgBoB,EAAOI,SAAvB,CAAkC,CAAlC,CAA5C,CAAiF,QApGlF,CAuGpBJ,EAAOgR,UAAP,CAAoBvnB,EAAE+C,MAAF,CAASykB,UAAUjR,EAAOkR,OAAP,CAAiB,GAAjB,CAAuBlR,EAAOmR,OAAxC,EAAiDnoB,WAAjD,EAAT,CAvGA,CAyGpBgX,EAAOmR,OAAP,CAAiBnR,EAAOmR,OAAP,CAAexuB,OAAf,CAAuB,OAAvB,CAAgC,IAAhC,CAzGG,CA2GpBqd,EAAO4P,SAAP,GA3GoB,CA4GpB,KAAKxC,KAAL,CAAW3jB,EAAE0jB,SAAF,CAAY,KAAKC,KAAjB,CAAwB,CAAClmB,GAAI8Y,EAAO9Y,EAAZ,CAAxB,CAAX,EAAuD8Y,CACxD,CAEDA,EAAS,KAAKoR,eAAL,CAAqBpR,CAArB,CAnHkB,CAqH3B,GAAIjX,GAAO,KAAKsoB,OAAL,CAAa,KAAKpF,IAAL,CAAUC,MAAvB,EAA+Bpf,IAA/B,CAAoC,IAApC,EAA0CkT,CAA1C,CAAX,CAEA,MADA,MAAKuN,QAAL,CAAc,KAAKtB,IAAL,CAAUC,MAAxB,EAAgClM,EAAO9Y,EAAvC,EAA6C6B,CAC7C,CAAOA,CACR,CAtYW,CAuYZqoB,gBAAiB,yBAASpR,CAAT,CAAiB,CAEhCA,EAAOqN,MAAP,CAAiB5jB,EAAE2a,QAAF,CAAW,CAAC5Z,aAAa,iBAAiBL,cAA9B,GAAiD,EAAlD,EAAsD5D,KAAtD,CAA4D,GAA5D,CAAX,CAA6E,GAAGyZ,EAAO9Y,EAAvF,CAFe,CAGhC,GAAIgiB,GAAMlJ,EAAOsR,QAAP,CAAkB,0FAAlB,CAA2G,EAArH,CACAC,EAAOvR,EAAOwR,MAAP,CAAgB,4FAAhB,CAA2G,EADlH,CAEAC,EAAYzR,EAAO0R,iBAAP,CAA2B,kGAA3B,CAA4H,EAFxI,CAGA3jB,EAAO,4CAA2CiS,EAAOqN,MAAP,CAAgB,YAAhB,CAA+B,EAA1E,EAA8E,0BAA9E,EAAwGrN,EAAOqN,MAAP,CAAgB,QAAhB,CAA2B,MAAnI,EAA2I,iBAHlJ,CASA,MADArN,GAAO2R,kBAAP,CAA4B,6BAJnB,6FAImB,CAAkC,4BAAlC,CAA6DF,CAA7D,CAAuEvI,CAAvE,CAA2EqI,CAA3E,CAAgFxjB,CAAhF,CAAqF,mCAArF,CAHtB,kGAGsB,CAFtB,iGAEsB,CADtB,iGACsB,CAAmI,eAC/J,CAAOiS,CACR,CApZW,CAqZZqR,QAAS,CACP3sB,KAAM,cAASsb,CAAT,CAAiB,CACrB,MAAO,kBACUA,EAAO9Y,EADjB,CACoB,8BADpB,EACkD8Y,EAAOqN,MAAP,CAAgB,gBAAhB,CAAmC,EADrF,EACyF,mBADzF,CAC2GrN,EAAOgR,UADlH,CAC6H,sEAD7H,CAIAhR,EAAO8P,UAJP,CAKD,yCALC,CAME9P,EAAOoQ,EANT,CAOEpQ,EAAO2R,kBAPT,CAQD,+DARC,CAS2C3R,EAAO2Q,gBATlD,CASmE,QATnE,CAUE3Q,EAAO6Q,MAVT,CAWE7Q,EAAO/b,IAXT,CAYA,gDAZA,CAcE+b,EAAOhI,OAdT,CAeEgI,EAAOyQ,gBAfT,CAgBD,kFAhBC,CAmBKzQ,EAAOkR,OAnBZ,CAmBoB,OAnBpB,CAoBDlR,EAAOmR,OApBN,CAqBH,sBArBG,CAuBJnR,EAAOiQ,QAvBH,CAwBP,QACD,CA3BM,CA4BPvC,QAAS,iBAAS1N,CAAT,CAAiB,CACxB,MAAO,kBACUA,EAAO9Y,EADjB,CACoB,iCADpB,EACqD8Y,EAAOqN,MAAP,CAAgB,gBAAhB,CAAmC,EADxF,EAC4F,mBAD5F,CAC8GrN,EAAOgR,UADrH,CACgI,qCADhI,CAGHhR,EAAOiQ,QAHJ,CAIH,oEAJG,CAKyBjQ,EAAOoQ,EALhC,CAKmC,4CALnC,CAMuBpQ,EAAOyQ,gBAN9B,CAM+C,8DAN/C,CASAzQ,EAAOhI,OATP,CAUD,gCAVC,CAU+BgI,EAAO2Q,gBAVtC,CAUuD,QAVvD,CAWE3Q,EAAO6Q,MAXT,CAYE7Q,EAAO+Q,WAZT,CAaA,QAbA,CAcA/Q,EAAO2R,kBAdP,CAeH,kEAfG,CAiBK3R,EAAOkR,OAjBZ,CAiBoB,OAjBpB,CAkBDlR,EAAOmR,OAlBN,CAmBH,kCAGL,CAnDM,CArZG,CAAd,CA4cA,QAASF,UAAT,CAAmBloB,CAAnB,CAAyB,CACvB,GAAI8X,GAAMnd,SAASsjB,cAAT,CAAwB4K,kBAAxB,CAA2C,KAA3C,EAAkD1b,IAA5D,CAEA,MADA2K,GAAI3J,SAAJ,CAAgBnO,CAChB,CAAO8X,EAAIC,WAAJ,EAAmBD,EAAIE,SAAvB,EAAoC,EAC5C,CAED,QAAS8Q,SAAT,EAAoB,CAClB1kB,eAAevI,EAAE,GAAF,CAAf,CAAuB,CAAvB,CACD,CAED,GAAIoa,eAAgB,CAClBxV,KAAM,cAASsoB,CAAT,CAAgB,CACfA,CADe,GAElBA,EAAQ,CAAEpuB,SAASyM,aAAT,CAAuB,iCAAvB,EAAwD6B,OAFhD,EAIpB,KAAKmO,UAAL,CAAkB3V,wBAA8B6J,KAAKC,KAAL,CAAW9J,uBAAX,KAA9B,GAJE,CAKpB,GAAIunB,GAAU,KAAK5R,UAAL,CAAgBtf,cAAhB,CAA+Bwf,OAA/B,EAA0C2R,SAAS,KAAK7R,UAAL,CAAgBE,OAAhB,CAAT,CAA1C,CAA+E,CAA7F,CACG0R,EAAUD,CANO,GAOlB,KAAK3R,UAAL,CAAgBE,OAAhB,EAA2ByR,CAPT,CAQlBtnB,aAAayC,OAAb,CAAqB,YAArB,CAAmCoH,KAAKiM,SAAL,CAAe,KAAKH,UAApB,CAAnC,CARkB,CAUrB,CAXiB,CAYlBxjB,OAAQ,iBAAW,CACZ,KAAKwjB,UADO,EAEf,KAAK3W,IAAL,EAFe,CAIjB5E,EAAE+M,IAAF,CAAO,CACLtF,IAAK,oBADA,CAEL2D,KAAM,KAAKmQ,UAFN,CAGL8R,SAAU,MAHL,CAILrgB,QAAS,iBAAS5B,CAAT,CAAe,CACtBpL,EAAE,mBAAF,EAAuBwU,MAAvB,EADsB,CAEtBxU,EAAE,cAAF,EAAkBwC,WAAlB,CAA8B,aAA9B,CAFsB,CAGtBqC,EAAEC,IAAF,CAAOsG,CAAP,CAAa,SAAS1J,CAAT,CAAcwF,CAAd,CAAmB,CAC9B,GAAa,CAAT,CAAC,CAACxF,CAAN,CAAgB,CACd,GAAI4rB,4CAA6C5rB,CAA7C,WAAJ,CACE6rB,EAAOvtB,wBAAuBkH,CAAvB,QADT,CAEIqmB,EAAKvwB,MAHK,GAIZuwB,EAAK/mB,MAAL,CAAY8mB,CAAZ,CAJY,CAKZttB,+BAA8ButB,EAAK7qB,OAAL,CAAa,YAAb,EAA2BiG,IAA3B,CAAgC,IAAhC,EAAsChH,KAAtC,CAA4C,KAA5C,EAAmD,CAAnD,CAA9B,QAAyF0E,MAAzF,GAAkGzD,QAAlG,CAA2G,aAA3G,CALY,EAOd5C,gCAA+BkH,CAA/B,QAAwCV,MAAxC,CAA+C8mB,CAA/C,CACD,CACF,CAVD,CAWD,CAlBI,CAAP,CAoBD,CApCiB,CAApB,CAuCI/iB,UAAY,CACdijB,WAAY,oBAASC,CAAT,CAAkBpF,CAAlB,CAA4BtO,CAA5B,CAAkC2T,CAAlC,CAA0C,iBACpD1tB,EAAEkB,GAAF,CAAmB,GAAb,KACC8K,aADD,wBACqCyhB,CADrC,OACkDC,CADlD,CAEC1hB,aAFD,KAEkByhB,CAFlB,SAEiCpF,CAFjC,QAAN,EAGCsF,IAHD,CAGM,WAAQ,CACZ,GAAIjjB,GAAQU,EAAKjJ,KAAL,CAAW,iCAAX,EACXyrB,GADW,CACP,WAAS,CACb,GAAIpe,GAAMrN,EAAMA,KAAN,CAAY,oCAAZ,CAAV,CACA,MAAO,CACNG,GAAI,CAACkN,EAAI,CAAJ,CADC,CAEN8B,KAAM9B,EAAI,CAAJ,CAFA,CAIP,CAPW,CAAZ,CAQA,GAAiB,GAAb,IAAJ,CAAsB,CACrB,GAAIqe,GAAQziB,EAAKjJ,KAAL,CAAW,0BAAX,CAAZ,CACI0rB,CAFiB,GAGpBxF,EAAWwF,EAAM,CAAN,CAHS,CAIrB,CACD,GAAInjB,EAAM1N,MAAV,CAAkB,CACjB,GAAI8wB,IAAUpjB,EAAMkjB,GAAN,CAAU,WAAQ,CAE/B,MADA,QAAKnb,MAAL,CAAegb,CAAf,KAA0B9qB,EAAKL,EAA/B,EAAuCK,EAAK2O,IAC5C,CAAO3O,EAAKL,EACZ,CAHa,CAAd,CAIiB,GAAb,IALa,GAMf,OAAKyrB,UAAL,CAAmBN,CAAnB,KAA8BpF,CAA9B,EAA4CyF,EAN7B,CAQjB,CACD/T,GACD,CA3BD,EA4BCE,IA5BD,CA4BM,WAAO,CACXF,EAAKtP,EAAI0C,MAAJ,EAAc,MAAnB,CACD,CA9BD,CA+BD,CAjCa,CAkCdgH,QAAS,iBAASsZ,CAAT,CAAkBpF,CAAlB,CAA4BqF,CAA5B,CAAoCtY,CAApC,CAA8C4Y,CAA9C,CAAyD,iBAC5DC,EAAa,KAAKxb,MAAL,CAAegb,CAAf,KAA0BC,CAA1B,CAD+C,CAEhE,GAAIO,CAAJ,CAEE,WADA7Y,MAAgB6Y,CAAhB,CACA,CAGA,GAAI,CAACD,CAAL,CAAgB,CACd,GAAIE,KAAJ,CACA,GAAIT,IAAYloB,cAAhB,CAAgC,CAC9B,GAAI9C,GAAQzC,YAAY0tB,CAAZ,KAAZ,CACA,GAAIjrB,EAAMzF,MAAV,CAAkB,CAChB,GAAI2F,GAAOF,EAAMC,OAAN,CAAc,WAAd,EAA2B,CAA3B,EAA8BooB,SAAzC,CACA,KAAKrY,MAAL,CAAegb,CAAf,KAA0BC,CAA1B,EAAsC/qB,CAFtB,CAGhBurB,IAHgB,CAIhB9Y,KAAgBzS,CAAhB,CACD,CACF,CACIurB,CAXS,EAYZ,KAAKV,UAAL,CAAgBC,CAAhB,CAAyBpF,CAAzB,CAAmC,WAAO,CACpC5d,CADoC,CAEtC2K,EAAS3K,CAAT,CAFsC,CAKtC,OAAK0J,OAAL,CAAasZ,CAAb,CAAsBpF,CAAtB,CAAgCqF,CAAhC,CAAwCtY,CAAxC,IAEH,CAPD,CAOGsY,CAPH,CASH,CArBD,IAuBEtY,GAAS,IAAT,CAGL,CAnEa,CAoEd5K,UAAW,mBAASijB,CAAT,CAAkBpF,CAAlB,CAA4B8F,CAA5B,CAAmC/Y,CAAnC,CAA6C4Y,CAA7C,CAAwDvlB,CAAxD,CAA+D,iBACpE2lB,GAAY3lB,CAAZ,EAA4B,KAAKslB,UAAL,CAAmBN,CAAnB,KAA8BpF,CAA9B,CADwC,CAEpE+F,CAFoE,EAGlED,CAHkE,GAIpEC,EAAYA,EAAU9W,MAAV,CAAiB,kBAAKpZ,GAAIiwB,EAAM,CAAN,CAAJ,EAAgBjwB,EAAIiwB,EAAM,CAAN,CAAzB,CAAjB,CAJwD,EAMtE/Y,KAAgBgZ,EAAUC,MAAV,CAAiB,SAACxV,CAAD,CAAM6U,CAAN,QAAiB7U,GAAM,OAAKpG,MAAL,CAAegb,CAAf,KAA0BC,CAA1B,CAAvB,CAAjB,CAA6E,EAA7E,CAAhB,CANsE,EASjEM,CATiE,CAoBpE5Y,EAAS,IAAT,CApBoE,CAUpE,KAAKoY,UAAL,CAAgBC,CAAhB,CAAyBpF,CAAzB,CAAmC,WAAO,CACpC5d,CADoC,CAEtC2K,EAAS3K,CAAT,CAFsC,CAKtC,OAAKD,SAAL,CAAeijB,CAAf,CAAwBpF,CAAxB,CAAkC8F,CAAlC,CAAyC/Y,CAAzC,IAEH,CAPD,CAaL,CA3Fa,CA4Fd3C,SA5Fc,CA6Fdsb,aA7Fc,CAvChB","file":"kusaba.new.js","sourcesContent":["'use strict';\n\nvar style_cookie;\nvar style_cookie_txt;\nvar style_cookie_site;\nvar kumod_set=false;\nvar ispage;\nvar is_entering=false;\n\nvar _messages = {\n  en: {\n    noLocalStorage: \"Your browser does not support LocalStorage\",\n    oops: \"Something went wrong...\",\n    blankResponse: \"blank response\",\n    watchlistAdd: \"    .\",\n    expandingThread: \"Expanding thread...\",\n    newThread: \"new thread\",\n    NewThread: \"New thread\",\n    replyTo: \"reply to\",\n    cancel: \"Cancel\",\n    update: \"Update\", \n    updatingCounts: \"Updating...\",\n    couldntFetch: \"Cold not fetch this post\",\n    noNewPosts: \"No new posts\",\n    replies: \"Replies\",\n    settings_fxEnabled: \"Animation effects\",\n    settings_showReplies: \"Show replies inside posts\",\n    settings_sfwMode: \"NSFW mode\",\n    settings_expandImgFull: \"Expand images to full size\",\n    deletePost: \"Delete post\", \n    deleteAndBan: \"Delete post and ban poster\",\n    enterCaptcha: \"Please enter captcha.\",\n    selectText: \"Select some text\",\n    dcls: \"Double click to show source\",\n    watchOn: \"Watch on\",\n    captcharot: \"Captcha has rotted\",\n    threadUpdationAutomatically: \"Tread is being updated automatically.\",\n    stopFuckingDolls: \"<b> AJAX-   AJAX- .</b><br />(,  )\",\n    del: \"Delete\",\n    delandban: \"Delete and ban\",\n    ban: \"Ban\",\n    stickthread: \"Stick thread\",\n    unstickthread: \"Unstick thread\",\n    lockthread: \"Lock thread\",\n    unlockthread: \"Unlock thread\",\n    returnDesktop: \"Switch to desktop interface\",\n    returnTouch: \"Switch to touch interface\",\n    forceDesktop: \"Force Desktop interface\",\n    okay: \"Okay\",\n    captchalang: \"Captcha language\",\n    reply: \"Reply\",\n    imageDownscaledBy: \"Image was downscaled by\",\n    videoDownscaledBy: \"Video was downscaled by\",\n    toFit: \"to feet screen\",\n    newReplies: \"New replies\",\n    newThreadsAvailable: \"New threads available.\",\n    loading: \"Loading\",\n    anonymous: \"Anonymous\",\n    sortBy: \"Sort by\",\n    bumpOrder: \"Bump order\",\n    lastReply: \"Last reply\",\n    creationDate: \"Creation date\",\n    replyCount: \"Reply count\",\n    doStick: \"Respect stickied\",\n    showHidden: \"Show hidden\",\n    doNotStick: \"Ignore stickied\",\n    hideHidden: \"Hide hidden\",\n    search: \"Search\",\n    threadOnPage: \"Thread is on page\",\n    goToThread: \"Go to thread\",\n    smallPics: \"Small pictures\",\n    largePics: \"Large pictures\",\n    legacyMode: \"Legacy mode\",\n    threads: \"Threads\",\n    comments: \"Replies\",\n    active_since: \"Active since\",\n    last_active: \"Last seen\",\n    active_on: \"Active on\",\n    tryAgain: \"Try again\",\n    xhrError: \"XHR error\",\n    details: \"details\"\n  },\n  ru: {\n    noLocalStorage: \"localStorage   \",\n    oops: \"-   ...\",\n    blankResponse: \" \",\n    watchlistAdd: \"    .\",\n    watchlistRemove: \"    .\",\n    expandingThread: \" ...\",\n    newThread: \" \",\n    NewThread: \" \",\n    replyTo: \" \",\n    cancel: \"\",\n    update: \"\", \n    updatingCounts: \"  ...\",\n    couldntFetch: \"    \",\n    noNewPosts: \"  \",\n    replies: \"\",\n    settings_fxEnabled: \" \",\n    settings_showReplies: \"   \",\n    settings_sfwMode: \"  \",\n    settings_expandImgFull: \"    \",\n    deletePost: \" \", \n    deleteAndBan: \"    \",\n    enterCaptcha: \",  .\",\n    selectText: \"  \",\n    dcls: \"Double click to show source\",\n    watchOn: \" \",\n    odc: \"javascript:LatexIT.replaceWithSrc(this);\",  \n    captcharot: \" \",\n    threadUpdationAutomatically: \"  \",\n    stopFuckingDolls: \"<b> AJAX-   AJAX- .</b><br />(,  )\",\n    del: \"\",\n    delandban: \"  \",\n    ban: \"\",\n    stickthread: \" \",\n    unstickthread: \" \",\n    lockthread: \" \",\n    unlockthread: \" \",\n    returnDesktop: \"   \",\n    returnTouch: \"  -\",\n    forceDesktop: \"Force Desktop interface\",\n    okay: \"\",\n    captchalang: \" \",\n    reply: \"\",\n    imageDownscaledBy: \"  \",\n    videoDownscaledBy: \"  \",\n    toFit: \"  \",\n    newReplies: \" \",\n    newThreadsAvailable: \"  .\",\n    loading: \"\",\n    anonymous: \"\",\n    sortBy: \" \",\n    bumpOrder: \"\",\n    lastReply: \" \",\n    creationDate: \" \",\n    replyCount: \" \",\n    doStick: \"\",\n    showHidden: \" \",\n    doNotStick: \" \",\n    hideHidden: \" \",\n    search: \"\",\n    threadOnPage: \"   \",\n    goToThread: \"  \",\n    smallPics: \" \",\n    largePics: \" \",\n    legacyMode: \" \",\n    threads: \"\",\n    comments: \"\",\n    active_since: \"\",\n    last_active: \" \",\n    active_on: \" \",\n    tryAgain: \" \",\n    xhrError: \" XHR\",\n    details: \"\"\n  }\n}\n\nvar _l = (typeof locale !== 'undefined' && _messages.hasOwnProperty(locale)) ? _messages[locale] : _messages.ru;\n\nfunction trace() {\n  if (!console.log) return;\n  \n  var f = arguments.callee.caller;\n  var path = arguments[0];\n  if (path == '') path += \"trace()\";\n  \n  while (f != null) {\n    var re = /function ([^\\(]+)/;\n    var fname = re.exec(f.toString());\n    if (fname == null) fname = ''; else fname = fname[1];\n    var args = [];\n    for (var i = 0; i < f.arguments.length; i++) args.push(f.arguments[i]);\n    fname += \"(\" + args.join(', ') + \")\"; \n    path += ' <- ' + fname;\n    f = f.caller;\n  }\n  console.log(path);\n}\n\n/* IE/Opera fix, because they need to go learn a book on how to use indexOf with arrays */\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function(elt /*, from*/) {\n  var len = this.length;\n\n  var from = Number(arguments[1]) || 0;\n  from = (from < 0)\n     ? Math.ceil(from)\n     : Math.floor(from);\n  if (from < 0)\n    from += len;\n\n  for (; from < len; from++) {\n    if (from in this &&\n      this[from] === elt)\n    return from;\n  }\n  return -1;\n  };\n}\n  \n/* Utf8 strings de-/encoder */\nvar Utf8 = {\n  // public method for url encoding\n  encode : function (string) {\n    string = string.replace(/\\r\\n/g,\"\\n\");\n    var utftext = \"\";\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      }\n      else if((c > 127) && (c < 2048)) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n      else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n    return utftext;\n  },\n  // public method for url decoding\n  decode : function (utftext) {\n    var string = \"\", i = 0, c = 0, c1 = 0, c2 = 0, c3 = 0\n    while ( i < utftext.length ) {\n      c = utftext.charCodeAt(i);\n      if (c < 128) {\n        string += String.fromCharCode(c);\n        i++;\n      }\n      else if((c > 191) && (c < 224)) {\n        c2 = utftext.charCodeAt(i+1);\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n        i += 2;\n      }\n      else {\n        c2 = utftext.charCodeAt(i+1);\n        c3 = utftext.charCodeAt(i+2);\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n        i += 3;\n      }\n    }\n    return string;\n  }\n}\n\nfunction Cookie(name) {\n  if (arguments.length == 1) {\n    // with(document.cookie) {\n      var regexp=new RegExp(\"(^|;\\\\s+)\"+name+\"=(.*?)(;|$)\");\n      var hit=regexp.exec(document.cookie);\n      if(hit&&hit.length>2) return Utf8.decode(unescape(replaceAll(hit[2],'+','%20')));\n      else return '';\n    // }\n  } else {\n    var value = arguments[1]\n    , days = arguments[2]\n    , expires=\"\"\n    if(days) {\n      var date=new Date();\n      date.setTime(date.getTime()+(days*24*60*60*1000));\n      expires=\"; expires=\"+date.toGMTString();\n    }\n    document.cookie=name+\"=\"+value+expires+\"; path=/\";\n  }\n}\n   \n\nfunction replaceAll(str, from, to) {\n  var idx = str.indexOf( from );\n  while ( idx > -1 ) {\n    str = str.replace( from, to );\n    idx = str.indexOf( from );\n  }\n  return str;\n}\n\n\nfunction insert(text) {\n  var textarea = (($('#postclone').length && $('#postclone').css('display') !== 'none') ? $('#postclone') : $('#postform')).find('textarea')[0];\n  if(textarea) {\n    if(textarea.createTextRange && textarea.caretPos) { // IE \n      var caretPos=textarea.caretPos;\n      caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==\" \"?text+\" \":text;\n    } else if(textarea.setSelectionRange) { // Firefox \n      var start=textarea.selectionStart;\n      var end=textarea.selectionEnd;\n      textarea.value=textarea.value.substr(0,start)+text+textarea.value.substr(end);\n      textarea.setSelectionRange(start+text.length,start+text.length);\n    } else {\n      textarea.value+=text+\" \";\n    }\n    textarea.focus();\n  }\n  if($('#postclone').css('display') !== 'none') return false;\n}\n\nfunction markup($target, start, end, istart, iend) {\n  let element = $target.find('textarea').get(0);\n  if (element.selectionStart || element.selectionStart == '0') {\n    element.focus();\n    let startPos = element.selectionStart\n    , endPos = element.selectionEnd\n    , selected = element.value.substring(startPos, endPos);\n    if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\n      start = istart; end = iend;\n    }\n    element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + end + element.value.substring(endPos, element.value.length);\n  } else {\n    element.value += start + end;\n  }\n}\n\nfunction bullets($target, bullet, istart, iend) {\n  let $area = $target.find('textarea')\n  , element = $area.get(0)\n  , startPos = element.selectionStart\n  , endPos = element.selectionEnd\n  , selected = $area.val().substring(startPos, endPos)\n  if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\n    element.value = element.value.substring(0, startPos) + istart + element.value.substring(startPos, endPos) + iend + element.value.substring(endPos, element.value.length);\n  }\n  else {\n    selected = $area.val().substring(startPos, endPos).split('\\n');\n    var newtxt = \"\";\n    for(var i=0; i<selected.length; i++) {\n      newtxt += (bullet + selected[i]);\n      if(i < (selected.length - 1)) newtxt += '\\n';\n    }\n    $area.val(\n      $area.val().substring(0, startPos) \n      + newtxt + \n      $area.val().substring(endPos)\n    );  \n  }\n} \n  \nfunction quote(b, a) { \n  var v = eval(\"document.\" + a + \".message\");\n  v.value += \">>\" + b + \"\\n\";\n  v.focus();\n}\n\nfunction checkhighlight() {\n  var match;\n  if(match=/#i([0-9]+)/.exec(document.location.toString()))\n    if(!$('#postform textarea').val())\n      insert(\">>\"+match[1]);\n  if(match=/#([0-9]+)/.exec(document.location.toString()))\n    highlight(match[1]);\n}\n\nfunction highlight(id, offTimeout=0) {\n  $('.highlight').removeClass('highlight');\n  let $post = $(`#delform a[name=\"${id}\"]`).parents('.reply, .op')\n  , post = $post[0]\n  if (! post) return 'not-found';\n  console.log(post)\n  $post.addClass('highlight');\n  if (offTimeout) {\n    setTimeout(() => $post.removeClass('highlight'), offTimeout)\n  }\n  // Scroll to post\n  let bcr = post.getBoundingClientRect()\n  , docHeight = document.documentElement.clientHeight\n  if (bcr.bottom > docHeight || bcr.top < 0) {\n    let postX = bcr.top + document.documentElement.scrollTop\n    , spaceAround = docHeight - bcr.height\n    window.scrollTo(0, postX - (spaceAround ? Math.ceil(spaceAround/2) : 0))\n  }\n}    \n  \nfunction get_password(name) {\n  var pass = getCookie(name);\n  if(pass) return pass;\n\n  var chars=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n  pass='';\n\n  for(var i=0;i<8;i++) {\n    var rnd = Math.floor(Math.random()*chars.length);\n    pass += chars.substring(rnd, rnd+1);\n  }\n  Cookie(name, pass, 365);\n  return(pass);\n}\n\nfunction togglePassword() {\n  var passwordbox_html = $(\"#passwordbox\").html().toLowerCase();\n  var newhtml = '<td></td><td></td>';\n  if (passwordbox_html == newhtml) {\n    newhtml = '<td class=\"postblock\">Mod</td><td><input type=\"text\" name=\"modpassword\" size=\"28\" maxlength=\"75\">&nbsp;<acronym title=\"Display staff status (Mod/Admin)\">D</acronym>:&nbsp;<input type=\"checkbox\" name=\"displaystaffstatus\" checked>&nbsp;<acronym title=\"Lock\">L</acronym>:&nbsp;<input type=\"checkbox\" name=\"lockonpost\">&nbsp;&nbsp;<acronym title=\"Sticky\">S</acronym>:&nbsp;<input type=\"checkbox\" name=\"stickyonpost\">&nbsp;&nbsp;<acronym title=\"Raw HTML\">RH</acronym>:&nbsp;<input type=\"checkbox\" name=\"rawhtml\">&nbsp;&nbsp;<acronym title=\"Name\">N</acronym>:&nbsp;<input type=\"checkbox\" name=\"usestaffname\"></td>';\n  }\n  $(\"#passwordbox\").html(newhtml).show();\n  return false;\n}\n\n/* used for textboards only, deleted, src in clean */\nfunction toggleOptions(D,C,B){ trace('deprecated!') }\n\n// proxied functions\nfunction getCookie(name)                {   return Cookie(name)                     }  \nfunction set_cookie(name,value,days)    {   return Cookie(name,value,days)          }       \n\nvar Styles = {\n  all: [], titles: [],\n  init: function() {\n    _.each(document.getElementsByTagName(\"link\"), function(link) {\n      if(link.getAttribute(\"rel\").indexOf(\"style\")!=-1 && link.getAttribute(\"title\")) {\n        this.all.push(link);\n        this.titles.push(link.getAttribute(\"title\"));\n        if(link.getAttribute(\"rel\").indexOf(\"alternate\")===-1) {\n          this._default = link.getAttribute(\"title\");\n        }\n        if(link.hasAttribute(\"data-custom\")) {\n          this.custom = link.getAttribute(\"title\");\n        }\n      }\n    }, this);\n    this.current = this._default;\n    var customBypass = getCookie('bypasscustom');\n    this.customBypass = (customBypass.length && typeof this_board_dir !== 'undefined' && in_array(this_board_dir, customBypass.split('|'))) ? true : false;\n    this.initiated = true\n  },\n  decide: function() {\n    this.init();\n    var testingCSS = localStorage['testing-css'] || null\n    if(testingCSS) {\n      var title = this.addStyle(testingCSS)\n      this.setStyle(title)\n      var $clink = $('<a href=\"#\">  '+title+'.css</a>')\n      $clink.click(function(ev) {\n        ev.preventDefault()\n        Styles.quitTest()\n        $(this).parent().slideUp()\n      })\n      this.$cancelLink = $('<div style=\"font-weight: bold\"></div>').append($clink)\n      return\n    }     \n    if(this.hasOwnProperty('custom') && !this.customBypass) \n      return this.setCustom();\n    var sc = getCookie(style_cookie);\n    if(sc && in_array(sc, this.titles))\n      this.setStyle(sc);\n    else {\n      this.setDefault();\n      set_cookie(\"kustyle_site\",this._default,365);\n      set_cookie(\"kustyle\",this._default,365); \n    }\n  },\n  change: function(stylename) {\n    if(!in_array(stylename, this.titles) || this.current === stylename) return;\n    this.setStyle(stylename);\n    if(this.hasOwnProperty('custom') && this.custom === stylename) {\n      this.removeBypass();\n    }\n    else {\n      if(this.hasOwnProperty('custom'))\n        this.addBypass();\n      set_cookie(\"kustyle_site\",stylename,365);\n      set_cookie(\"kustyle\",stylename,365);    \n    }\n  },\n  removeBypass: function() {\n    if(!this.customBypass || typeof this_board_dir === 'undefined') return;\n    this.customBypass = false;\n    var oldcookie = getCookie('bypasscustom').split('|'), newcookie = [];\n    _.each(oldcookie, function(brd) {\n      if(brd !== this_board_dir) newcookie.push(brd);\n    });\n    newcookie = newcookie.length ? newcookie.join('|') : '';\n    set_cookie(\"bypasscustom\",newcookie,365);\n  },\n  addBypass: function() {\n    if(this.customBypass || typeof this_board_dir === 'undefined') return;\n    this.customBypass = true;\n    var cookie = getCookie('bypasscustom').split('|');\n    if(!in_array(this_board_dir, cookie)) {\n      cookie.push(this_board_dir);\n      set_cookie(\"bypasscustom\",cookie.join('|'),365);\n    }\n  },\n  setDefault: function() {\n    if(this.hasOwnProperty('_default') && this.current !== this._default)\n      this.setStyle(this._default);\n  },\n  setCustom: function() {\n    if(this.hasOwnProperty('custom'))\n      this.setStyle(this.custom);\n  },\n  setStyle: function(stylename) {\n    if(!in_array(stylename, this.titles)) return;\n    if (scrollAnchor && scrollAnchor.save)\n      scrollAnchor.save('setstyle', '.postnode', window, 'v');\n    _.each(this.all, function(sheet) {\n      sheet.disabled=true;    // Hello IE\n      if(sheet.getAttribute(\"title\") === stylename)\n        sheet.disabled=false;\n    });\n    if (scrollAnchor && scrollAnchor.restore)\n      scrollAnchor.restore('setstyle');\n    this.current = stylename;\n  },\n  onTest: null,\n  addStyle: function(url) {\n    var m = /(?:.+\\/)?(.+)\\.css/i.exec(url);\n    if(!m) return;\n    var title = _.capitalize(_.escape(m[1]))\n    if(!in_array(title, this.titles)) {\n      var $link = $('<link rel=\"stylesheet\" type=\"text/css\" href=\"'+url+'\" title=\"'+title+'\" disabled>')\n      $('head').append($link);\n      this.titles.push(title)\n      this.all.push($link[0])\n    }\n    return title\n  },\n  testStyle: function(url) {\n    this.onTest = url\n    var title = this.addStyle(url)\n    this.setStyle(title)\n    popupMessage('  '+title+'.', 'none');\n    var $confirm = $('<button>OK</button>').click(this.confirmLongTermTest.bind(this))\n    , $reject = $('<button>'+_l.cancel+'</button>').click(this.quitTest.bind(this))\n    , $btns = $('<div class=\"pmsg-form\"></div>').append($confirm, $reject)\n    $('#popupMessage').append($btns)\n  },\n  confirmLongTermTest: function() {\n    if(this.onTest)\n      localStorage.setItem('testing-css', this.onTest)\n  },\n  quitTest: function() {\n    localStorage.removeItem('testing-css')\n    this.decide()\n  }\n}\n\nif(style_cookie) Styles.decide();\n\nfunction delandbanlinks($scope, force) {\n  if(typeof force === 'undefined') force = false;\n  if ((!kumod_set && !force) || typeof $scope === 'undefined') return;\n  $scope.find('span[id^=dnb]').each(function(index,element) {\n    let dnbinfo = $(this).attr('id').split('-')\n    , newhtml = '&nbsp;<span class=\"btngroup\">' + '<a href=\"' + ku_cgipath + '/manage_page.php?action=delposts&boarddir=' + dnbinfo[1] + '&del';\n    if (dnbinfo[3] == 'y') {newhtml += 'thread';} else {newhtml += 'post';}\n    newhtml += 'id=' + dnbinfo[2] + '\" title=\"'+_l.del+'\" onclick=\"return confirm(\\''+_l.delPost+'?\\');\"><svg class=\"icon b-icon sb-l\"><use xlink:href=\"#i-x\"></use></svg><\\/a>';\n    newhtml += '<a href=\"' + ku_cgipath + '/manage_page.php?action=delposts&boarddir=' + dnbinfo[1] + '&del';if (dnbinfo[3] == 'y') {newhtml += 'thread';} else {newhtml += 'post';}\n    newhtml +='id=' + dnbinfo[2] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.delandban+'\" onclick=\"return confirm(\\''+_l.delPost+'?\\');\"><svg class=\"icon b-icon sb-c\"><use xlink:href=\"#i-and\"></use></svg><\\/a>';\n    newhtml +='<a href=\"' + ku_cgipath + '/manage_page.php?action=bans&banboard=' + dnbinfo[1] + '&banpost=' + dnbinfo[2] + '\" title=\"'+_l.ban+'\"><svg class=\"icon b-icon sb-r\"><use xlink:href=\"#i-ban\"></use></svg><\\/a></span>&nbsp;';\n\n    if (dnbinfo[3] == 'y') {\n      newhtml += '<span class=\"btngroup\"><a href=\"' + ku_cgipath + '/manage_page.php?action=stickypost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.stickthread+'\" ><svg class=\"icon b-icon sb-l\"><use xlink:href=\"#i-pin\"></use></svg><\\/a><a href=\"' + ku_cgipath + '/manage_page.php?action=unstickypost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.unstickthread+'\" ><svg class=\"icon b-icon sb-r\"><use xlink:href=\"#i-unpin\"></use></svg><\\/a></span>&nbsp;';\n      newhtml += '<span class=\"btngroup\"><a href=\"' + ku_cgipath + '/manage_page.php?action=lockpost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.lockthread+'\" ><svg class=\"icon b-icon sb-l\"><use xlink:href=\"#i-lock\"></use></svg><\\/a><a href=\"' + ku_cgipath + '/manage_page.php?action=unlockpost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.unlockthread+'\" ><svg class=\"icon b-icon sb-r\"><use xlink:href=\"#i-unlock\"></use></svg><\\/a></span>';\n    }\n\n    $(this).html(newhtml);\n  });\n}\n\nvar HiddenThreads = {\n  list: function() {\n    if (localStorage == null) {\n      trace(_l.noLocalStorage);\n      return [];\n    }\n    var list = localStorage.getItem('hiddenThreads.' + this_board_dir);\n    if (list == null) return [];\n    return list.split(',');\n  },\n  isHidden: function(threadid) { return HiddenThreads.list().indexOf(threadid) != -1 },\n  hide: function(threadid) { \n    if (localStorage == null) alert(_l.noLocalStorage);\n    else {\n      var newlist = HiddenThreads.list();\n      newlist.push(threadid.toString());\n      localStorage.setItem('hiddenThreads.' + this_board_dir, newlist.join(','));\n    }\n  },\n  unhide: function(threadid) { \n    if (localStorage == null) alert(_l.noLocalStorage);\n    else {\n      var list = HiddenThreads.list();\n      var i = list.indexOf(threadid.toString());\n      if (i == -1) return;\n      var newlist = list.slice(0,i);\n      newlist = newlist.concat(list.slice(i+1));\n      localStorage.setItem('hiddenThreads.' + this_board_dir, newlist.join(','));\n    }\n  }\n}\n  \nfunction togglethread(threadid) {\n  if (HiddenThreads.isHidden(threadid)) {\n    $('#unhidethread' + threadid + this_board_dir).slideUp();\n    $('#thread' + threadid + this_board_dir).slideDown();\n    HiddenThreads.unhide(threadid);\n  } else {\n    $('#unhidethread' + threadid + this_board_dir).slideDown();\n    $('#thread' + threadid + this_board_dir).slideUp();\n    HiddenThreads.hide(threadid);\n  }\n  return false;\n}\n  \nfunction toggleblotter() {\n  $('.blotter-entries').each(function(index,element) {\n    $(this).slideToggle(function() {\n      if($(this).is(\":hidden\")) {\n        Cookie('ku_showblotter', '0', 365);\n      } else {\n        Cookie('ku_showblotter', '1', 365);\n      }\n    });\n  });\n}\n\nfunction hideblotter() {\n   $('.blotter-entries').each(function(index,element) {\n    $(this).hide();\n  });\n}\n\nfunction expandthread(threadid, board, ev) {\n  ev.preventDefault()\n  let $thread = $(`#thread${threadid}${board}`)\n  if ($thread.length) {\n    let expandFrom = + $thread.find('.postnode.op').find('input[type=checkbox]').val()\n    , expandTo = + $thread.find('.postnode:not(.op):first').find('input[type=checkbox]').val()\n    , $omitted = $thread.find('.omittedposts')\n    $omitted.find('a').hide()\n    let $msg = $omitted.find('span')\n    if (!$msg.length) {\n      $msg = $(`<span></span>`).prependTo($omitted)\n    }\n    $msg.text(`${_l.loading}...`)\n    HTMLoader.getThread(board, +threadid, [expandFrom, expandTo], (err, posts) => {\n      if (posts) {\n        $thread.find('.omittedposts').replaceWith(posts)\n        replyMap.showReplies()\n      }\n      else {\n        $msg.text(_l.oops + (err !== false ? ` (${err})` : ''))\n        $omitted.find('a').text(_l.tryAgain).show()\n      }\n    })\n  }\n  return false;\n}   \n\nfunction getnewposts(threadid=null, scrollToID=null, onError = () => 'error') {\n  if(threadid===null) {\n    if (ispage) return onError();\n    threadid = $('input[name=replythread]').val()\n  }\n  let $lastQrl = $(`.qrl[data-parent=\"${threadid}\"]`).last()\n  , lastpost = $lastQrl.data('postnum') || $lastQrl.data('parent')\n  if (! lastpost) return onError();\n  let replies_container, $newposts_get, $msg\n  if (!ispage) {\n    $newposts_get = $('#newposts_get')\n    $newposts_get.removeClass('upd-counting').addClass('upd-updating')\n    replies_container = document.querySelector('.replies')\n  }\n  else {\n    replies_container = document.querySelector(`#thread${threadid}${this_board_dir} .replies`)\n    if (!replies_container) return onError();\n  }\n  HTMLoader.getThread(this_board_dir, +threadid, [+lastpost,Infinity], (err, posts) => {\n    if (!ispage) {\n      $newposts_get.removeClass('upd-updating')\n    }\n    if (posts) {\n      replies_container.insertAdjacentHTML('beforeend', posts)\n      if (scrollToID) {\n        let allPosts = replies_container.querySelectorAll('.reply')\n        , targetReply = scrollToID=='last' \n          ? allPosts[allPosts.length-1] \n          : Array.prototype.find.call(allPosts, post => post.querySelector(`a[name=\"${scrollToID}\"]`))\n        if (! targetReply) {\n          return onError();\n        }\n        highlight(scrollToID, 5000)\n      }\n      replyMap.showReplies()\n    }\n    else {\n      if (scrollToID) {\n        return onError();\n      }\n      popupMessage(posts === '' ? _l.noNewPosts : _l.oops + (err !== false ? ` (${err})` : ''))\n    }\n  }, false, true)\n  return false;\n}\n\nfunction showLinks(ev) {\n  var href = $(this).attr('href');\n  $('#directLink').val(ku_boardspath+href);\n  $('#quoteLink').val('>>'+href.split('/res/')[0]+'/'+href.split('#')[1]);\n  $('#viewlink').css({\n    top: $(this).offset().top + $(this).height(),\n    left: $(this).offset().left\n  }).fadeIn('fast');\n  return false;\n}  \nif(localStorage['pinPreference'] === 'pinned')\n  localStorage['pinForm'] = 0;\nif(localStorage['pinPreference'] === 'unpinned')\n  localStorage['pinForm'] = 1;\nlocalStorage.removeItem('pinPreference');\n\nvar goingExternal = false;\nfunction quickreply(ev) {\n  var externalBoard = $(this).data('boardname');\n  if(externalBoard === this_board_dir) externalBoard = false;\n  var parent = $(this).data('parent'), current = $(this).data('postnum') || parent;\n  var preferUnpinned = !!+localStorage['pinForm'];\n  var appearsNew = ($('#postclone').css('display') === 'none');\n  $('#postclone').show();\n  if(isTouch) {\n    $('#postclone').css({\n      bottom: '0px',\n      left: '0px',\n      position: 'fixed',\n      opacity: 1\n    });\n  }\n  else {\n    if(preferUnpinned) {\n      $('#postclone').css({\n        top: $(this).offset().top + $(this).height(),\n        left: Math.round(($(window).width() / 2) - ($('#postclone').width() / 2)),\n        position: 'absolute'\n      });\n    }\n    else if(appearsNew) {\n      $('#postclone').css({\n        top: $(this).offset().top + $(this).height() - $(document).scrollTop(),\n        left: Math.round(($(window).width() / 2) - ($('#postclone').width() / 2)),\n        position: 'fixed'\n      });\n    }\n  }\n  $('#postclone input[name=\"replythread\"]').val(parent);\n  if(externalBoard) {\n    $('#postclone input[name=\"board\"]').val(externalBoard);\n    $('#postclone .posttypeindicator').html('<a href=\"'+ku_boardspath+'/'+externalBoard+'/res/'+parent+'.html?i#'+current+'\"> &gt;&gt;/'+externalBoard+'/'+parent+'</a>');\n  }\n  else {\n    $('#postclone .posttypeindicator').html('<a class=\"xlink\" href=\"#'+current+'\"> &gt;&gt;'+parent+'</a>');\n  }\n  insert('>>'+current+'\\n');\n  return false;\n} \n  \nfunction getwatchedthreads(threadid, board) {\n  if ($('#watchedthreadlist').get()!='') {\n    $('#watchedthreadlist').html(_l.loading + '...');\n    $.ajax({\n      url: ku_boardspath + '/threadwatch.php?board=' + board + '&threadid=' + threadid,\n      success: function(data) {\n        $('#watchedthreadlist').html(data || (_l.oops + \" (\"+_l.blankResponse+\")\"));\n      },\n      error: function(xhr, status) {\n        $('#watchedthreadlist').html(_l.oops + \" (\" + status + \")\");\n      }\n    });\n  }\n}  \n\nfunction popupMessage(content, delay) {\n  if (delay == null) delay = 1000\n  if ($('#popupMessage').get() == '') {\n    $('body').children().last().after('<div id=\"popupMessage\" class=\"reply postername\"></div>');\n    $('#popupMessage').hide()\n  }\n  $('#popupMessage').html(content).fadeIn(150)\n  if(delay !== 'none')\n    $('#popupMessage').delay(delay).fadeOut(300)\n  else\n    $('#popupMessage').click(function() {\n      $(this).fadeOut(300)\n    })\n}\n\nfunction addtowatchedthreads(threadid, board) {\n  if ($('#watchedthreadlist').get()!='') {\n    $.ajax({\n      url: ku_boardspath + '/threadwatch.php?do=addthread&board=' + board + '&threadid=' + threadid,\n      success: function(data) {\n        popupMessage(_l.watchlistAdd)\n        getwatchedthreads('0', board);\n      },\n      error: function(xhr, status) {\n        popupMessage(_l.oops + \" (\" + status + \")\");\n      }\n    });\n  }\n}\n  \nfunction removefromwatchedthreads(threadid, board) {\n  if ($('#watchedthreadlist').get()!='') {\n    $.ajax({\n      url: ku_boardspath + '/threadwatch.php?do=removethread&board=' + board + '&threadid=' + threadid,\n      success: function(data) {\n        popupMessage(_l.watchlistRemove)\n        getwatchedthreads('0', board);\n      },\n      error: function(xhr, status) {\n        popupMessage(_l.oops + \" (\" + status + \")\");\n      }\n    });\n  }\n}\n  \nfunction hidewatchedthreads() {\n  Cookie('showwatchedthreads','0',30);\n  $(\"#watchedthreads\").fadeOut();\n}    \n  \nfunction showwatchedthreads() {\n  Cookie('showwatchedthreads','1',30);\n  window.location.reload(true);\n}\n\nvar Captcha = {\n  init: function() {\n    $('.captchawrap').click(this.refresh.bind(this))\n    injector.inject('captcha-rotting',\n`.cw-running .rotting-indicator {\n  -webkit-animation-duration: ${captchaTimeout}s;\n       -o-animation-duration: ${captchaTimeout}s;\n          animation-duration: ${captchaTimeout}s;\n}\n.cw-running .captchaimage, \n.cw-running .rotten-msg {\n  -webkit-animation-delay: ${captchaTimeout}s;\n       -o-animation-delay: ${captchaTimeout}s;\n          animation-delay: ${captchaTimeout}s;}`)\n  },\n  refresh: function() {\n    if (!$('.captchawrap').length) return;\n    this.shownOnce = true\n    let cColor = $('.captchawrap').css('color').match(/([0-9]+(?:\\.[0-9]+)?)/g)\n    cColor = (cColor.length >= 3) ? '&color='+cColor.slice(0, 3).join(',') : ''\n    $('.captchaimage').attr('src', ku_boardspath+'/captcha.php?'+Math.random()+cColor)\n    $('.captchawrap')\n    .removeClass('cw-initial cw-running')\n    .each(function() {void this.offsetWidth}) //trigger a reflow\n    .addClass('cw-running')\n    Array.prototype.forEach.call(document.querySelectorAll('input[name=\"captcha\"]'), input => input.value = null)\n  },\n  refreshOnce: function() {\n    if (!this.shownOnce) {\n      this.refresh()\n    }\n    return false\n  },\n  shownOnce: false\n}\n\nfunction checkcaptcha(formid) {\n  if($('input[name=captcha]').length > 0) {\n    if($('#'+formid+' input[name=captcha]').val() =='') {\n      popupMessage(_l.enterCaptcha);\n      return false;\n    }\n    if(+$('.rotten-msg').css('opacity') > 0) {\n      popupMessage(_l.captcharot);\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction handleSubmit(form) {\n  let captchafield = form.querySelector('input[name=captcha]')\n  if (captchafield && !captchafield.value.length)\n    return popupMessage(_l.enterCaptcha)\n  if (form.id === 'postclone') \n    ffdata.save()\n  Ajax.submitPost(form)\n}\n\nconst Ajax = {\n  submitPost: function(form) {\n    let fd = new FormData(form)\n    , xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    xr.open('POST', form.action)\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        popupMessage(_l.xhrError)\n        return\n      }\n      Captcha.refresh()\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        popupMessage(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_type) {\n          if (res.error_type == 'ban') {\n            popupMessage(`${res.error} (<a href=\"${ku_cgipath}/banned.php\" target=\"_blank\">${_l.details}</a>)`, 'none')\n          }\n          if (res.error_type == 'duplicate_file') {\n            popupMessage(`${res.error}<br>${res.error_verbose}`, 'none')\n            form.querySelector('input[name=\"imagefile\"]').value = null\n          }\n        }\n        else {\n          popupMessage(res.error)\n        }\n        return\n      }\n      else {\n        resetForm(form)\n        if (form.id == \"postclone\") {\n          $(form).hide()\n        }\n        let noko = form.querySelector('input[name=\"redirecttothread\"]').checked\n        if (res.thread_replyto != 0) {\n          getnewposts(ispage ? res.thread_replyto : null, +res.post_id, () => {\n            document.location.href = `${ku_boardspath}/${res.board}/res/${res.thread_replyto}.html#${res.post_id}`\n            if (! ispage)\n              document.location.reload()\n          })\n        }\n        else {\n          if (noko) {\n            document.location.href = `${ku_boardspath}/${res.board}/res/${res.post_id}.html`\n          }\n          else {\n            document.location.href = `${ku_boardspath}/${res.board}`\n          }\n        }\n      }\n    }\n    xr.send(fd)\n  }\n}\n  \nfunction expandimg(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh) {\n  let element = document.getElementById(\"thumb\" + postnum);\n  if (element == null) return false;\n  let $reply = $(element).parents('.reply')\n  if(typeof event !== 'undefined' && event.which === 2) return true;\n  if (element.getElementsByTagName('img')[0].getAttribute('alt').substring(0,4)!='full') {\n    $(element).html('<img src=\"'+imgurl+'\" alt=\"full'+postnum+'\" class=\"thumb\" height=\"'+imgh+'\" width=\"'+imgw+'\">'); \n    if (Settings.expandImgFull()) return false;    \n    let img = element.getElementsByTagName('img')[0]\n    , max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth\n    , offset = 50\n    , offset_el = img\n\n    while (offset_el != null) {\n      offset += offset_el.offsetLeft;\n      offset_el = offset_el.offsetParent;\n    }\n    var new_w = max_w - offset;\n    if (img.width > new_w) {\n      var ratio = img.width / img.height;\n      var zoom = 1 - new_w / img.width;\n      var new_h = new_w / ratio;\n      var notice = document.createElement('div');\n      notice.setAttribute('class', 'filesize');\n      notice.style.textDecoration = 'underline'; \n      var textNode = document.createTextNode(_l.imageDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit);\n      notice.appendChild(textNode);  \n      element.insertBefore(notice, img);\n      $(img).width(new_w);\n      $(img).height(new_h);\n    } \n    if ($reply) $reply.addClass('reply-expanded')\n  } \n  else {\n    element.innerHTML = '<img src=\"' + thumburl + '\" alt=\"' + postnum + '\" class=\"thumb\" height=\"' + thumbh + '\" width=\"' + thumbw + '\">';\n    if ($reply) $reply.removeClass('reply-expanded')\n  }\n  \n  return false;\n}\n\n// YOBA previews w/#snivystuff\nvar PostPreviews = {\n  zindex:  3,\n  cached: {},\n  parent: {},\n\n  _parseURL: function(url) {\n    let matches = url.match(/\\/(.+)\\/res\\/([0-9]+)\\.html#([0-9]+)|postbynumber\\.php\\?b=(.+)&p=([0-9]+)/i)\n    if (!matches) return null;\n    return {\n      board: matches[1] || matches[4],\n      parent: matches[2] || '?',\n      post: matches[3] || matches[5],\n    }\n  },\n\n  _mouseover: function(e) {\n    e.stopPropagation();\n    var href = this.getAttribute(\"href\")\n    , isCatalog = $(this).hasClass('catalog-entry')\n    , parsedURL = PostPreviews._parseURL(href)\n    if (!parsedURL) return false;\n    let board = parsedURL['board']\n    , parentid = parsedURL['parent']\n    , postid = parsedURL['post']\n    , previewid = 'preview_'+board+'_'+postid\n    , preview = $('#' + previewid)\n    if (preview.length == 0) {\n      $('body').children().first().before('<div id=\"'+previewid+'\"></div>');\n      preview = $('#' + previewid);\n      preview.addClass('reflinkpreview content-background pre-hidden actual-reflinkpreview');     \n      preview.mouseleave(PostPreviews._mouseout);\n      preview.mouseover(PostPreviews.onMouseOver);\n    }\n    var parent = $(this).parents('div[id^=preview]');\n    if (parent.length > 0) {\n      if (previewid == parent.attr('id')) return; // anti-recursion\n      for (var id in PostPreviews.parent) { if (id == previewid || PostPreviews.parent[id] == previewid) return }\n      PostPreviews.parent[previewid] = parent.attr('id');\n    } \n    else {\n      PostPreviews.parent = [];\n    }\n    let transformOrigin;\n    if(e.clientY < ($(window).height() / 1.5)) { \n      preview.css({top:e.pageY+5}); \n      transformOrigin = \"top \"\n    } else {\n      preview.css({bottom:$(window).height()-e.pageY+5}); \n      transformOrigin = \"bottom \"\n    }\n    if(e.clientX < ($(window).width() / 1.5)) {\n      preview.css({left:e.pageX+15}); \n      transformOrigin += \"left\"\n    } else {\n      preview.css({right:$(window).width()-e.pageX+15}); \n      transformOrigin += \"right\"\n    }\n    preview.css({zIndex: PostPreviews.zindex++, \"transform-origin\": transformOrigin});\n    this.style.cursor = \"progress\"\n    HTMLoader.getPost(board, parentid, postid, (err, post) => {\n      window.setTimeout(() => {\n        preview.html(post ? post : (_l.oops + (err !== false ? ` (${err})` : '')))\n        .removeClass('pre-hidden')\n        this.style.cursor = \"pointer\"\n      }, 0)\n    })\n    e.preventDefault();\n  },\n\n  onMouseOver: function() {\n    var preview = $(this);\n    if ($(this).is('a')) {\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\n      if (!parsedURL) return;\n      let board = parsedURL['board']\n      , postid = parsedURL['post']\n      preview = $('#preview_'+board+\"_\"+postid).first();\n    }\n    while (preview.length > 0) {\n      clearTimeout(preview[0].fadeout)\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);\n    }\n  },\n\n  _mouseout: function() {\n    var preview = $(this);\n    if ($(this).is('a')) {\n      if (this.predelay) {\n        clearTimeout(this.predelay)\n      }\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\n      if (!parsedURL) return;\n      let board = parsedURL['board']\n      , postid = parsedURL['post']\n      preview = $('#preview_'+board+\"_\"+postid).first();\n    }\n    while (preview.length > 0) {\n      clearTimeout(preview[0].fadeout)\n      let pre = preview\n      preview[0].fadeout = setTimeout(() => {\n        pre.addClass('pre-hidden')\n        setTimeout(() => {\n          delete PostPreviews.parent[pre.attr('id')];\n          pre.remove();\n        }, PostPreviews._timings.transition)\n      }, PostPreviews._timings.fade)\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);   \n    }\n  },\n\n  _timings: {\n    predelay: 50,\n    transition: 200,\n    fade: 400\n  }\n}\n\n/* txt only. deleted. src in clean */\nfunction postpreview(D,A,C,B){}\n  \nfunction set_inputs(id) {\n  let form = document.getElementById(id)\n  if (form) {\n    let name = form.querySelector('input[name=name]')\n    if(name && !name.value) name.value = getCookie(\"name\");\n    if(!form.em.value) form.em.value = getCookie(\"email\");\n    if(!form.postpassword.value) form.postpassword.value = get_password(\"postpassword\");\n  }\n}\n  \nfunction set_delpass(id) {\n  let postpassword = document.getElementById(id).postpassword\n  if (postpassword && !postpassword.value) {\n    postpassword.value = get_password(\"postpassword\");\n  }\n}   \n\n(function ($) {\n  $.event.special.load = {\n    add: function (callback) {\n      if ( this.nodeType === 1 && this.tagName.toLowerCase() === 'img' && this.src !== '' ) {\n        if ( this.complete || this.readyState === 4 ) {\n          callback.handler.apply(this);\n        }\n        else if ( this.readyState === 'uninitialized' && this.src.indexOf('data:') === 0 ) {\n          $(this).trigger('error');\n        }\n\n        else {\n          $(this).bind('load', callback.handler);\n        }\n      }\n    }\n  };\n}(jQuery));\n\nvar Settings = {\n  _checkbox: function(clicked, settingName, defaultValue) {\n    if (localStorage == null) {\n      trace(_l.noLocalStorage);\n      return;\n    }\n    if (localStorage[settingName] == null) {\n      localStorage[settingName] = defaultValue;\n    }\n    if (clicked == true) {\n      // save it\n      localStorage[settingName] = $('#settings_' + settingName).is(\":checked\");\n    } else {\n      // update checkbox (called on load)\n      if (localStorage[settingName] == 'true')\n        $('#settings_' + settingName).attr(\"checked\",\"checked\");\n      else \n        $('#settings_' + settingName).removeAttr(\"checked\");\n    }\n    return (localStorage[settingName] == 'true') || (localStorage[settingName] == true) ;\n  },\n  \n  fxEnabled: function(changed) { \n    var enabled = Settings._checkbox(changed, 'fxEnabled', true);\n    if (changed != null) {\n      $.fx.off = !enabled;\n    }\n    return enabled;\n  },\n  \n  showReplies: function(changed) {\n    var enabled = Settings._checkbox(changed, 'showReplies', false);\n    if (changed != null) {\n      scrollAnchor.save('replymap', '.postnode', window, 'v')\n      if (enabled) {\n        replyMap.showReplies()\n        injector.remove('hide-replies')\n      }\n      else {\n        injector.inject('hide-replies', '.replieslist {display: none}')\n      }\n      scrollAnchor.restore('replymap')\n    }\n    return enabled;\n  },\n  \n  sfwMode: function(changed) {\n    var enabled = Settings._checkbox(changed, 'sfwMode', false);\n    if (enabled) {\n      injector.inject('sfwMode', '.thumb { opacity: 0.05;} .thumb:hover { opacity: 1;}');\n    }\n    else {\n      injector.remove('sfwMode');\n    }\n    return enabled;\n  },\n  \n  expandImgFull: function(changed) {\n    return Settings._checkbox(changed, 'expandImgFull', false);\n  }\n}\n\nvar rswap = {\n  i: true,\n  swap: function() {\n    if(this.i) $('#delform').before($('#rswapper')).after($('.postarea'));\n    else $('#delform').before($('.postarea')).after($('#rswapper'));\n    this.i = !this.i;\n  }\n}\n\nvar isTouch = (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) || false;\nif(localStorage['interfaceType'] == 'desktop')\n  isTouch = false;\nif(localStorage['interfaceType'] == 'touch')\n  isTouch = true;\n\nvar captchalang = getCookie('captchalang') || 'ru';\nfunction setCaptchaLang(lang) {\n  if(!in_array(lang, ['ru', 'en', 'num'])) return;\n  captchalang = lang;\n  set_cookie('captchalang', lang, 365);\n}\n\nfunction readyset() {\n  if(!ispage) $('.mgoback').show();\n  if(isTouch)\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'desktop\\'); location.reload();\">'+_l.returnDesktop+'</a><br>');\n  else\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'touch\\'); location.reload();\">'+_l.returnTouch+'</a><br>');\n\n  $('#js_settings').prepend(_l.captchalang+': <a href=\"javascript:setCaptchaLang(\\'ru\\');\">Cyrillic</a> | <a href=\"javascript:setCaptchaLang(\\'en\\');\">Latin</a> | <a href=\"javascript:setCaptchaLang(\\'num\\');\">Numeral</a><br />');\n\n  if(Styles.$cancelLink)\n    $('#js_settings').prepend(Styles.$cancelLink)\n  \n  LatexIT.init();\n  checkhighlight();\n  checkgotothread();\n  checknamesave();\n\n  bnrs.init();\n\n  cloud20.init();\n  $('#boardselect').on('input', function() {\n    cloud20.filter($(this).val());\n  });\n\n  if(getCookie('ku_menutype')) {\n    var c = Cookie('ku_menutype');\n    if(c != 'default' && c != '')\n      document.getElementById('overlay_menu').style.position = c;\n  }\n\n  //initial post-process\n  processNodeInsertion();\n\n  if(!isTouch) {\n    $('.mobile-nav').hide();\n    $('.sect-exr').mouseenter(function() { menu_show('ms-'+$(this).data('toexpand')); });\n    $('#overlay_menu').mouseleave(function() { menu_show('_off_'); });\n    $('body').on('mouseenter', \"a[class^='ref']\", function(ev) {\n      this.predelay = setTimeout(() => PostPreviews._mouseover.bind(this)(ev), PostPreviews._timings.predelay)\n    });\n    $('body').on('mouseleave', \"a[class^='ref']\", PostPreviews._mouseout);\n    $('body').on('click', \"a[class^='ref']\", function(e) {\n      e.preventDefault()\n      let href = this.getAttribute('href')\n      if (highlight(href.split('#')[1]) == 'not-found') {\n        document.location.href = href\n      }\n    })\n  }\n  else {\n    $('body').addClass('touch-mode');\n    $('.sect-exr:not([data-toexpand=\"_options\"])').parent().hide();\n    $('.sect-exr').click(function() {\n      if($('#js_settings').is(':visible')) {\n        menu_show('_off_');\n      }\n      else {\n        menu_show('ms-_options');\n      }\n      return false;\n    });\n    $('body').click(function(event) {\n      menu_show('_off_'); \n      $('[id^=preview]').addClass('pre-hidden')\n      setTimeout(() => {\n        $('[id^=preview]').remove();\n      }, PostPreviews._timings.transition)\n    });\n    $('.mobile-nav').show();\n    $('body').on('click', \"a[class^='ref']\", PostPreviews._mouseover);       \n  \n    injector.inject('mb', 'body {margin-bottom: 350px;}')\n  }\n\n  // new markup\n  $('body').on('click', '.uib-mup', function() {\n    markup($(this).parents('form'), $(this).data('mups'), $(this).data('mupe'), $(this).data('imups'), $(this).data('imupe'));\n    return false;\n  });\n  $('.opt-exp').click(function() {\n    $(this).find('.expandee').toggleClass('expanded');\n  })\n  .mouseleave(function() {\n    $(this).find('.expandee').removeClass('expanded');\n  });\n  $('.code_markup_select').change(function() {\n    markup($(this).parents('form'), '[code='+$(this).val()+']', '[/code]');\n  })\n  $('body').on('click', '.uib-bul', function() {\n    bullets($(this).parents('form'), $(this).data('bul'), $(this).data('imups'), $(this).data('imupe'));\n    return false;\n  });\n  $('body').on('click', '.uib-tx', function() {\n    var target = $(this).data('target');\n    head.js('http://latex.codecogs.com/editor3.js', function() {\n      OpenLatexEditor(target,'phpBB','en-us', false, '','full');\n    });\n    return false;\n  });\n  //Webm expanding\n  $('body').on('click', '.movie', function(event) {expandwebm($(this), event)});\n  //new quick reply\n  $('body').on('click', '.qrl', quickreply);\n  $('#postclone label').each(function() {\n    var newid = $(this).attr('for')+'_clone';\n    $(this).attr('for', newid);\n    $(this).find('input').attr('id', newid);\n  });\n  $('#postform textarea').attr('id', 'top-textarea'); $('#postform .uib-tx').data('target', 'top-textarea');\n  $('#postclone textarea').attr('id', 'pop-textarea'); $('#postclone .uib-tx').data('target', 'pop-textarea');\n  if(!isTouch) {\n    $('input, textarea, select, label').hover(function() {\n      $('#postclone').dragsOff();\n    }, function() {\n      $('#postclone').drags();\n    });\n    var pinnerState = !!+localStorage['pinForm'] ? 'pinned' : 'unpinned';\n    var pinner = '<a href=\"#\" class=\"pinner '+pinnerState+'\" onclick=\"javascript:$(\\'#postclone\\').pin();return false;\" title=\" / \"><svg class=\"icon b-icon\"><use class=\"use-pin\" xlink:href=\"#i-pin\"></use><use class=\"use-unpin\" xlink:href=\"#i-unpin\"></use></svg></a>';\n  }\n  else {\n    var pinner = '';\n  }\n\n  /* not losing floating form data */\n  ffdata.load();\n\n  $('<span class=\"extrabtns postboxcontrol\">'+ pinner +\n  '&nbsp;<a href=\"#\" onclick=\"javascript:$(\\'#postclone\\').hide();return false;\" title=\"\"><svg class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n  '</span>').appendTo('#postclone');\n\n  //Dollscript rape begins\n  //Switch captcha language   \n  /*dcxt.addTask(function() {\n    dcxt.openSettings();\n    //Switch to \"form\" tab\n    $('.de-cfg-tab[info=form]')[0].click();\n    //Switch language if it's set wrong\n    if(captchalang == 'ru' && $('select[info=captchaLang] option:selected').val() !== $('select[info=captchaLang] option:contains(Rus)').val()) {\n      $('select[info=captchaLang]').val($('select[info=captchaLang] option:contains(Rus)').val()).triggerNative('change'); \n    }\n    if(captchalang == 'en' && $('select[info=captchaLang] option:selected').val() !== $('select[info=captchaLang] option:contains(Eng)').val()) {\n      $('select[info=captchaLang]').val($('select[info=captchaLang] option:contains(Eng)').val()).triggerNative('change'); \n    }\n    dcxt.closeSettings();\n  });*/\n\n  /*if(liveupd_ena && typeof io !== 'undefined') {\n    // Remove malfunctioning post counter\n    injector.inject('dcxt-nocount', '.de-ppanel-cnt:after {display: none}');\n    $(\"#postform, #postclone\").each(function() { $(this).append($('<input type=\"hidden\" name=\"token\">').val(randomString())) } );\n    $('#postform input[type=\"submit\"]').after('<img class=\"sending-loading\" src=\"'+ku_boardspath+'/images/loading.gif\">')\n    var socket = io.connect(liveupd_api);\n    if(ispage) {\n      var subscribeTo = [liveupd_sitename+this_board_dir+':newthreads'];\n      $('.op .reflink').children(':last-child').each(function() { \n        subscribeTo.push(liveupd_sitename+this_board_dir+':'+$(this).text());\n      });\n      socket.on('update', updater.bpageNotify)\n      .emit('subscribe', subscribeTo);\n    }\n    else {\n      dcxt.addTask(function() {\n        dcxt.openSettings();\n        $('.de-cfg-tab[info=form]')[0].click();\n        //Detect if AJAX posting enabled.\n        if(+$('select[info=ajaxReply]').val()) {\n          updater.ajaxPosting = true;\n        }\n        //Switch to \"posts\" tab\n        $('.de-cfg-tab[info=posts]')[0].click();\n        //Turn off AJAX thread update\n        if($('input[info=ajaxUpdThr]:checked').length) {\n          $('input[info=ajaxUpdThr]:checked')[0].click();\n          dcxt.changed++;\n        }\n        dcxt.closeSettings();\n      });\n      _l.noNewPosts += (\"<br>\" + _l.threadUpdationAutomatically);\n      socket.emit('subscribe', liveupd_sitename+$('input[name=board]').val()+':'+$('input[name=replythread]').val());\n      socket.on('update', function(data) {\n        updater.update(data);\n      });\n      $('body').on('submit', '#postform, #postclone', function(e) {\n        e.preventDefault();\n        if (!dcxt.enabled || checkcaptcha($(this).attr('id')))\n        updater.send($(this));\n      });\n    }\n  }*/\n\n  $('body').on('submit', '#postform, #postclone', function(e) {\n    e.preventDefault()\n    handleSubmit(this)\n  });\n\n  $('#delform').after('<div id=\"rswapper\">[<a onclick=\"javascript:rswap.swap();return false;\" href=\"#\">'+(ispage ? _l.NewThread : _l.reply)+'</a>]<hr /></div>');\n\n\n  /*dcxt.addTask(function() {\n    $('#rswapper').remove();\n  })*/\n\n  Settings.sfwMode(false);\n  if (localStorage) {\n    for(var s in Settings) {\n      if (s.substring(0,1) == \"_\") continue;\n      $(\"#js_settings\").append('<label><input type=\"checkbox\" onchange=\"javascript:Settings.'+s+'(true)\" name=\"settings_'+s+'\" id=\"settings_'+s+'\" value=\"true\"> '+_l['settings_'+s]+'</label><br />');\n      Settings[s](false);\n    }\n  } else {\n    $(\"#js_settings\").append(\"<span style=\\\"color:#F00\\\">\"+_l.noLocalStorage+\"</span><br />   .  <a href=\\\"/web/20110329072959/http://google.com/chrome\\\" target=\\\"_blank\\\">Chome</a>, .\");\n  }\n\n  var textbox = document.getElementById('message');\n  if(textbox)\n  {\n    textbox.onfocus=function(){is_entering = true;}\n    textbox.onblur=function(){is_entering = false;}\n  }\n\n  $('body').on('click', '.posttypeindicator a', function() {\n    var xl = $(this); \n    var offset = $('[name=\"' + xl.attr('href').substr(1) + '\"]').offset() || $('[name=\"' + xl.text().split('>>')[1] + '\"]').offset() || false;\n    if(offset) {\n      $('html, body').animate({\n        scrollTop: offset.top - ( $('#overlay_menu').height() + 10 )\n      }, 250);\n    }\n    return false;\n  });\n\n  $('body').on('click', '.dice', function() {\n    if(typeof $(this).data('html') === 'undefined') $(this).data('html', $(this).html());\n    var htm = strip($(this).html());\n    $(this).html($(this).attr('title'));\n    $(this).attr('title', htm);\n  });\n\n  //Permalinks and stuff\n  $('<div id=\"viewlink\"></div>').addClass('content-background reflinkpreview qreplyform').html(\n    '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#viewlink\\').hide();return false;\"><svg style=\"margin-left:0\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n    '<div style=\"display:inline-block\"><input type=\"text\" id=\"directLink\"><br /><input type=\"text\" id=\"quoteLink\"></div>'\n  ).hide().appendTo('body');\n  $('body').on('click', '.shl', showLinks);\n  $('#directLink, #quoteLink').on(\"click\", function() { $(this).select(); });\n\n  //Ultimate YOBA Youtube embeds\n  $('body').on('click','.embed', function() {$(this).unwrap() });\n  //detect node insertions and process them\n  $(document).on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', function(event) {\n    var $target = $(event.target);\n    if (event.originalEvent.animationName == \"nodeInserted\" && !$target.hasClass('_inserted_')) processNodeInsertion($target);\n  });\n  $('body').on('mouseenter', '._country_', function() {\n    if(typeof $(this).attr('title') === \"undefined\") {\n      $(this).attr('title', countries[$(this).attr('src').split('flags/')[1].split('.png')[0].toUpperCase()]);\n    }\n  });\n  dcxt.performTasks();\n  $('body').on('click', '.audiowrap', function(ev) {\n    ev.preventDefault();\n    var src = $(this).attr('href');\n    $(this).replaceWith('<audio src=\"'+src+'\" controls autoplay=\"true\"></audio>')\n  })\n\n  $('input[name=embed]').on('input', function() {\n    var match = embedLinks.process($(this).val());\n    if(match) {\n      $(this).val(match.code)\n      .parents('.postform').find('[name=embedtype]').val(match.site);\n    }\n  });\n  if(typeof is_catalog !== 'undefined' && is_catalog) catalog.init();\n\n  $('.userdelete').addClass('content-background reflinkpreview');\n  $('body').on('change', 'input[name=\"post[]\"]', function() {\n    if (!$('.userdelete').hasClass('ud-active'))\n      $('.userdelete').addClass('ud-active');\n    else if (!($('input[name=\"post[]\"]').is(\":checked\")))\n      $('.userdelete').removeClass('ud-active');\n  })\n\n  $('<div id=\"tripinfo\"></div>').addClass('content-background reflinkpreview qreplyform').hide().appendTo('body');\n\n  $('#delform').on('click', '.postertrip', function(ev) {\n    ev.preventDefault()\n    var trip = $(this).text().split('!')[1]\n    , offset = $(this).offset(), height = $(this).height()\n    $.getJSON('/tripinfo.php', { trip: trip })\n    .done(function(data) {\n      var active_on = [];\n      _.each(data.active_on, function(board) {\n        active_on.push('<a target=\"_blank\" href=\"'+ku_boardspath+'/'+board+'/\">'+'/'+board+'/</a>');\n      })\n      $('#tripinfo')\n      .html(\n        '<div><b class=\"postertrip\">!'+trip+'</b> ['+'<a href=\"https://www.google.com/search?q=!'+trip+'\" target=\"_blank\">G</a>]</div>'+\n        '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#tripinfo\\').hide();return false;\"><svg style=\"position: absolute; top: 3px; right: 3px;\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n        '<div class=\"trip-info-line\">'+_l.threads+': '+data.threads+', '+_l.comments+': '+data.comments+'</div>'+\n        '<div class=\"trip-info-line\">'+_l.active_since+': '+catalog.formatDate(data.active_since, true)+'</div>'+\n        '<div class=\"trip-info-line\">'+_l.last_active+': '+catalog.formatDate(data.last_active, true)+'</div>'+\n        (active_on.length ? '<div class=\"trip-info-line\">'+_l.active_on+': '+active_on.join(', ')+'</div>' : '')\n      )\n      .css({\n         top: offset.top + height,\n         left: offset.left\n       })\n      .fadeIn('fast');\n    })\n    .fail(function(error) {\n      console.error(error)\n    })\n  })\n  $('body').on('click', '.csswrap', function(ev) {\n    ev.preventDefault()\n    var cssLink = $(this).attr('href')\n    Styles.testStyle(cssLink)\n  })\n\n  $('input[name=disable_name]').on('change', function() {\n    var off = $(this).is(':checked')\n    $(this).parents('form').find('input[name=name]').attr('disabled', off)\n    localStorage.setItem('post_anonymously', +off)\n  })\n  .prop('checked', !!+localStorage['post_anonymously']).trigger('change')\n\n  unreadCounter.update()\n\n  Captcha.init()\n}\n\n// this will be applied to every new inserted node (post)\nfunction processNodeInsertion($node) {\n  if(typeof $node === 'undefined') $node = $('*');\n  else {\n    $node.addClass('_inserted_');\n    $node = $node.parents(\":eq(1)\");\n  }\n  if($node.find('.prettyprint').length) \n    prettyPrint.apply(window);\n  LatexIT.render($node);\n  processEmbeds($node);\n  delandbanlinks($node);\n}\n\nvar dcxt = {\n  tries: 10,\n  enabled: false,\n  tasks: [],\n  changed: 0,\n  openSettings: function() {\n    if($('#de-content-cfg').length) return;\n    injector.inject('dcxt-hide', '#de-content-cfg {opacity: 0!important}');\n    $('#de-btn-settings')[0].click();\n  },\n  closeSettings: function() {\n    if(!$('#de-content-cfg').length) return;\n    $('#de-btn-settings')[0].click();\n    injector.remove('dcxt-hide');\n  },\n  addTask: function(fn) {\n    if(this.enabled) fn();\n    else this.tasks.push(fn);\n  },\n  performTasks: function() {\n    if(!this.enabled && $('#de-btn-settings').length) {\n      this.enabled = true;\n      $('#gotothread').prop('checked', true);\n      _.each(this.tasks, function(task) {\n        task();\n      });\n      this.tasks = [];\n      if(this.changed) location.reload();\n    }\n    else if(this.tries) {\n      setTimeout(function() {\n        dcxt.performTasks();\n      }, 500);\n      this.tries--;\n    }\n  }\n}\n\nvar updater = {\n  ajaxPosting: false,\n  newThreads: [],\n  showNewThreads: function() {\n    $('#wild_thread_appeared').remove();\n    _.each(this.newThreads, function(thread) {\n      $.get(ku_boardspath+'/read.php?b='+this_board_dir+'&t='+this_board_dir+'&p='+thread+'&single&replink=1', function(data) {\n        $('#delform').prepend(data+'<br clear=\"left\" /><hr />');\n      });\n    });\n    this.newThreads = [];\n  },\n  update: function(data) {\n    if(typeof data.token !== undefined) {\n      if($('input[name=token][value='+ data.token +']').length) {\n        // This is my post\n        clearfields($('input[name=token][value='+ data.token +']').parents('form'));\n        if(!this.ajaxPosting) getnewposts();\n      }\n      else {\n        getnewposts();\n      }\n    }\n    var lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { };\n    if(typeof data.timestamp !== 'undefined') {\n      lastvisits[boardid] = data.timestamp;\n      localStorage.setItem('lastvisits', JSON.stringify(lastvisits));\n    }\n  },\n  bpageNotify: function(data) {\n    if($('input[name=token][value='+ data.token +']').length) return;\n    if(data.room == 'newthreads') {\n      if(dcxt.enabled) return;\n      updater.newThreads.push(data.newthread);\n      if(!$('#wild_thread_appeared').length)\n      $('.postarea').after('<a class=\"xlink\" href=\"javascript:updater.showNewThreads();return false;\" id=\"wild_thread_appeared\">'+_l.newThreadsAvailable+'<hr /></a>');\n    }\n    else {\n      var $target = $('[id^=replies'+data.room+']');\n      if(!$target.find('.fresh-replies').text(_l.newReplies+': '+(Number(($target.find('.fresh-replies').text().split(':')[1]))+1)).length)\n        $target.append('<a href=\"/'+ this_board_dir +'/res/'+data.room+'.html\" class=\"xlink fresh-replies\">'+_l.newReplies+': 1</a>').find('.fresh-replies').click(function(e) {\n          e.preventDefault();\n          var $label = $(this);\n          var after = /\\d+/.exec($target.find('.reply').last().attr('id'));\n          $.ajax({\n            url: ku_boardspath + '/expand.php?after=' + after + '&board=' + this_board_dir + '&threadid=' + data.room,\n            success: function(data) {\n              if (data) {\n                $target.append($(data));\n                replyMap.showReplies()\n                \n              } else {\n                popupMessage(_l.noNewPosts);\n              }\n              $label.remove();\n            },\n            error: function(xhr, status) {\n              popupMessage(_l.oops + \" (\" + status + \")\");\n            }\n          });\n        });\n    } \n  },\n  send: function($form) {\n    if(!this.ajaxPosting) {\n      xsend($form.attr('id'));\n    }\n    return false;\n  }\n}\n\nfunction strip(html)\n{\n   var tmp = document.createElement(\"DIV\");\n   tmp.innerHTML = html;\n   return tmp.textContent || tmp.innerText || \"\";\n}\n\nfunction processEmbeds($scope) {\n  $scope.find('.embed:not(.title-given)').each(function() {\n    var container = $(this);\n    var vidID = container.data('id');\n    if(container.data('site') === 'youtube') { \n      $.get('https://www.googleapis.com/youtube/v3/videos?part=id%2Csnippet&id='+vidID+'&key='+ku_youtube_apikey, function(res) {\n        if(!res.error && res.items.length) {\n          var videotitle = res.items[0].snippet.title;          \n          container.append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Youtube\"></a>').addClass('yt-title-overlay').text(videotitle).attr('href', 'http://www.youtube.com/watch?v='+vidID)\n          .click(function(ev) { ev.stopPropagation(); }));\n        }\n      });\n      container.addClass('title-given');\n    }\n    if(container.data('site') === 'vimeo') {\n      $.get('http://vimeo.com/api/v2/video/'+vidID+'.json', function(res) {\n        var videotitle = res[0].title, thumbnail = res[0].thumbnail_large;\n        container.css({'background-image': 'url('+thumbnail+')'})\n        .append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Vimeo\"></a>').addClass('vi-title-overlay').text(videotitle).attr('href', 'http://vimeo.com/'+vidID)\n        .click(function(ev) { ev.stopPropagation(); }));\n      });\n      container.addClass('title-given');\n    }\n    if(container.data('site') === 'coub') {\n      $.get(ku_boardspath+'/corpsy.php?code='+vidID, function(res) {\n        var videotitle = res.title, thumbnail = res.thumbnail_url;\n        container.css({'background-image': 'url('+thumbnail+')'})\n        .append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Coub\"></a>').addClass('co-title-overlay').text(videotitle).attr('href', 'http://coub.com/view/'+vidID)\n        .click(function(ev) { ev.stopPropagation(); }));\n      });\n      container.addClass('title-given');\n    }\n  });\n}\n\nvar kumod = getCookie('kumod');\nif (kumod !== '') {\n  if(kumod === 'allboards') kumod_set = true;\n  else kumod_set = in_array(this_board_dir, kumod.split('|'));\n}\n\nvar mp3playerid = 0;\nfunction expandmp3(id, path){\n  if (mp3playerid == id)\n  {\n    document.getElementById('player'+id).innerHTML = '';\n    document.getElementById('player'+id).style.display = 'none';\n    mp3playerid = 0;\n  } else {\n    if(mp3playerid != 0)\n    {\n      document.getElementById('player'+mp3playerid).innerHTML = '';\n      document.getElementById('player'+mp3playerid).style.display = 'none';\n    }\n\n    document.getElementById('player'+id).innerHTML = '<embed src=\"/web/20110329072959/http://www.0chan.ru/mediaplayer.swf?type=mp3&file='+path+'\" width=\"320\" height=\"20\">';\n    document.getElementById('player'+id).style.display = 'block';\n    mp3playerid = id;\n  }\n}\n\nvar swfplayerid = 0;\nfunction expandswf(id, path, w, h){\n  if (swfplayerid == id)\n  {\n    document.getElementById('swfplayer'+id).innerHTML = '';\n    document.getElementById('swfplayer'+id).style.display = 'none';\n    swfplayerid = 0;\n  } else {\n    if(swfplayerid != 0)\n    {\n      document.getElementById('swfplayer'+swfplayerid).innerHTML = '';\n      document.getElementById('swfplayer'+swfplayerid).style.display = 'none';\n    }\n\n    document.getElementById('swfplayer'+id).innerHTML = '<embed src=\"'+path+'\" width=\"'+w+'\" height=\"'+h+'\">';\n    document.getElementById('swfplayer'+id).style.display = 'block';\n    swfplayerid = id;\n  }\n}\n\nfunction expandwebm($mov, ev) {\n  //good luck understanding this shitcode :^)\n  let $reply = $mov.parents('.reply')\n  if($mov.data('expanded') !== '1') {\n    ev.preventDefault(); \n    var movieurl = $mov.attr('href'), imgh = $mov.data('height'), imgw = $mov.data('width'), dt = $mov.data('thumb'), postnum = $mov.data('id');\n    var uid = '_vframe_'+makeid()+(new Date().getTime());\n    $mov.replaceWith(function() {\n      return '<span id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" data-href=\"'+movieurl+'\">'+this.innerHTML + '</span>';\n    });\n    $mov = $(\"#\"+uid);\n    $mov.find('img').hide();\n    var video = $mov.find('video').show(), notice = '';\n    if(!video.length) {\n      $mov.find('span').append('<video class=\"thumb\" src=\"'+movieurl+'\" controls loop autoplay height=\"'+imgh+'\" width=\"'+imgw+'\"></video>').promise().done(function() {\n        video = $mov.find('video');\n      });\n    }\n    else video.get(0).play();\n    if(!Settings.expandImgFull()) {\n      var offset = 50, offset_el = video[0];\n      var max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth;\n      while (offset_el != null) {\n        offset += offset_el.offsetLeft;\n        offset_el = offset_el.offsetParent;\n      }\n      var new_w = max_w - offset;\n      if(imgw > new_w) {\n        var ratio = imgw / imgh;\n        var zoom = 1 - new_w / imgw;\n        var new_h = new_w / ratio;\n        video.width(new_w);\n        video.height(new_h);\n        notice = _l.videoDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit;\n      }\n    }\n    $mov.parent().find('.filesize').append('<span class=\"videocloser\"><b> [<a href=\"#\"> x </a>]</b> '+notice+'</span>');\n    $mov.parent().find('.videocloser').click(function() {\n      var uid = '_vframe_'+makeid()+(new Date().getTime());\n      $mov.replaceWith(function() {\n        return '<a class=\"movie\" id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" href=\"'+movieurl+'\">'+this.innerHTML + '</a>';\n      }).data('expanded', '0');\n      $mov = $(\"#\"+uid);\n      $mov.find('video').hide()[0].pause();\n      $mov.find('img').show();\n      $(this).remove();\n      $mov.parents('.reply').removeClass('reply-expanded')\n      return false;\n    });\n    $mov.parents('.reply').addClass('reply-expanded')\n  }\n}\n\n\nfunction makeid()\n{\n  var text = \"\";\n  var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n  for( var i=0; i < 5; i++ )\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n  return text;\n}\n\nfunction checknamesave(){\n  var checkd;\n  if(getCookie('name') != '') {\n    checkd = true;\n  } else {\n    checkd = false;\n  }\n  var doc = document.getElementById('save');\n  if (doc != null) doc.checked = checkd;\n}\nfunction checkgotothread(){\n  var checkd; \n  if(getCookie('tothread') == 'on') {\n    checkd = true;\n  } else {\n    checkd = false;\n  }\n  $(\"#gotothread\").attr('checked', checkd);\n}\n\nfunction navigatepages (event)\n{\n  if (!document.getElementById) return;\n    if (is_entering) return;\n  if (window.event) event = window.event;\n\n  if (event.ctrlKey)\n  {\n\n    var link = null;\n    var href = null;\n\n        var docloc = document.location.toString();\n        if (docloc.indexOf('/res/') != -1) {\n          if( (event.keyCode ? event.keyCode : event.which ? event.which : null) == 13 )\n            $('textarea[name=\"message\"]:focus').parents('form').submit();\n        }\n        else {\n          if (docloc.indexOf('.html') == -1 || docloc.indexOf('board.html') != -1) {\n            var page = 0;\n            var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\n          } else {\n            var page = docloc.substr((docloc.lastIndexOf('/') + 1));\n            page = (+page.substr(0, page.indexOf('.html')));\n            var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\n          }\n          if (page == 0) {\n            var docloc_valid = docloc_trimmed;\n          } else {\n            var docloc_valid  = docloc_trimmed + page + '.html';\n          }\n          let match;\n          if(match=/#s([0-9]+)/.exec(docloc)) {\n            var relativepost = (+match[1]);\n          } else {\n            var relativepost = -1;\n          }\n          var maxthreads = 0;\n          while(document.getElementsByName('s'+(++maxthreads)).length>0){}\n          switch (event.keyCode ? event.keyCode : event.which ? event.which : null)\n          {\n            case 13: // ctrl+Enter\n              $('textarea[name=\"message\"]:focus').parents('form').submit();\n              break;\n\n            case 0x25: // ctrl+left\n              link = document.getElementById('prevPage');\n              break;\n            case 0x27: // ctrl+right\n              link = document.getElementById('nextPage');\n              break;\n\n            case 0x28: // ctrl+down\n              if (relativepost == maxthreads - 1) {\n                break; //var newrelativepost = 0;\n              } else {\n                var newrelativepost = relativepost + 1;\n              }\n              href = docloc_valid + '#s' + newrelativepost;\n              break;\n\n            case 0x26: // ctrl+up\n              if (relativepost == -1 || relativepost == 0) {\n                break; //var newrelativepost = maxthreads - 1;\n              } else {\n                var newrelativepost = relativepost - 1;\n              }\n              href = docloc_valid + '#s' + newrelativepost;\n              break;\n\n            case 0x24: // ctrl+home\n              document.location = docloc_trimmed;\n              break;\n          }\n\n          if (link && link.action) document.location = link.action;\n          if (href) document.location.href = href;\n        }\n  }\n}\n \n\nif (window.document.addEventListener) {\n   window.document.addEventListener(\"keydown\", navigatepages, false);\n} else {\n   window.document.attachEvent(\"onkeydown\", navigatepages);\n}\n\nNodeList.prototype.forEach = Array.prototype.forEach;\n\nvar replyMap = {\n  showReplies: function(root) {\n    // let start = new Date().getTime()\n    ;(root || document).querySelectorAll('.postnode').forEach(post => {\n      let n = post.querySelector('.reflink a:last-child').innerHTML\n      , msg = post.querySelector('.postmessage')\n      , repliesContainer = post.querySelector('.replieslist')\n      if (this.posts[n]) {\n        this.posts[n].container = repliesContainer\n      }\n      else {\n        this.posts[n] = {\n          container: repliesContainer,\n          replies: []\n        }\n      }\n      let links = msg.querySelectorAll(`a[class^=ref\\\\|${this_board_dir}]`)\n      if (links.length) links.forEach(link => {\n        let linkData = link.className.split(' ')[0].split('|')\n        , linkN = linkData[3]\n        , href = linkData[2] !== '' \n          ? `/${linkData[1]}/res/${linkData[2]}.html#${n}`\n          : `${ku_boardspath}/postbynumber.php?b=${linkData[1]}&p=${linkData[3]}`\n        , htm = `<a class=\"ref-reply\" href=\"${href}\">&gt;&gt;${n}</a>`\n        if (this.posts[linkN]) {\n          if (! _.includes(this.posts[linkN].replies, htm)) {\n            this.posts[linkN].replies.push(htm)\n          }\n        }\n        else {\n          this.posts[linkN] = {\n            replies: [htm]\n          }\n        }\n        this.posts[linkN].skip = false\n      })\n    })\n    _.each(this.posts, post => {\n      if (!post.skip && post.replies.length && post.container) {\n        post.container.innerHTML = `<br>${_l.replies}: ${post.replies.join(', ')}`\n        post.skip = true\n      }\n    })\n    /*let end = new Date().getTime()\n    console.log(end - start)*/\n  },\n  posts: {}\n}\n\nvar scrollAnchor = {\n  save: function(id, elements, parent, dimensions) {\n    parent = parent || window\n    dimensions = dimensions || 'vh'\n    let mid = [window.innerWidth / 2, window.innerHeight / 2]\n    , elMap = []\n    , parentBCR = (parent != window) \n      ? parent.getBoundingClientRect() \n      : {\n        left: 0,\n        top: 0,\n        right: window.innerWidth,\n        bottom: window.innerHeight\n      }\n    if (\n      parent != window\n      &&\n      ( \n        (parentBCR.left <= 0 && parentBCR.right <= 0) \n        || \n        (parentBCR.top <= 0 && parentBCR.bottom <= 0)\n        ||\n        parentBCR.left >= window.innerWidth\n        ||\n        parentBCR.top >= window.innerHeight\n      )\n    ) {\n      mid = [parentBCR.left + parentBCR.width/2, parentBCR.top + parentBCR.height/2]\n    }\n    let elems = (parent == window ? document : parent).querySelectorAll(elements)\n    if (! elems.length) return;\n    elems.forEach(function (el) {\n      let bcr = el.getBoundingClientRect()\n      , relativeVisibleWidth = Math.pos(bcr.width - (Math.pos(parentBCR.left - bcr.left) + Math.pos(bcr.right - parentBCR.right))) / bcr.width\n      , relativeVisibleHeight = Math.pos(bcr.height - (Math.pos(parentBCR.top - bcr.top) + Math.pos(bcr.bottom - parentBCR.bottom))) / bcr.height\n      , dx = Math.abs(mid[0] - (bcr.left + bcr.width/2))\n      , dy = Math.abs(mid[1] - (bcr.top + bcr.height/2))\n      elMap.push({\n        el: el,\n        primaryVisibility: dimensions[0] == 'h' ? relativeVisibleWidth : relativeVisibleHeight,\n        secondaryVisibility: dimensions[0] == 'v' ? relativeVisibleWidth : relativeVisibleHeight,\n        primaryOffset: dimensions[0] == 'h' ? dx : dy,\n        secondaryOffset: dimensions[0] == 'v' ? dx : dy\n      })\n    })\n    elMap.sort((a, b) => {\n      if (b.primaryVisibility !== a.primaryVisibility) {\n        return b.primaryVisibility - a.primaryVisibility\n      }\n      else if (dimensions.length > 1 && b.secondaryVisibility !== a.secondaryVisibility) {\n        return b.secondaryVisibility - a.secondaryVisibility\n      }\n      else if (a.primaryOffset !== b.primaryOffset) {\n        return a.primaryOffset - b.primaryOffset\n      }\n      else if (dimensions.length > 1) {\n        return a.secondaryOffset - b.secondaryOffset\n      }\n    })\n    let anchor = elMap[0].el\n    , bcrBefore = anchor.getBoundingClientRect()\n    this.saved[id] = {\n      anchor: anchor,\n      left: bcrBefore.left,\n      top: bcrBefore.top,\n      parent: parent,\n      dimensions: dimensions\n    }\n  },\n  restore: function(id) {\n    let loaded = this.saved[id]\n    if (! loaded) return;\n    window.requestAnimationFrame(() => {\n      let bcrAfter = loaded.anchor.getBoundingClientRect()\n      loaded.parent.scrollBy(loaded.dimensions.indexOf('h') !== (-1) ? bcrAfter.left - loaded.left : 0, loaded.dimensions.indexOf('v') !== (-1) ? bcrAfter.top - loaded.top : 0)\n    })\n  },\n  saved: {}\n}\nMath.pos = x => x >= 0 ? x : 0;\n\n// requestAnimationFrame polyfill https://gist.github.com/paulirish/1579671\n(function() {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n  }\n \n  if (!window.requestAnimationFrame)\n    window.requestAnimationFrame = function(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n \n  if (!window.cancelAnimationFrame)\n    window.cancelAnimationFrame = function(id) {\n      clearTimeout(id);\n    };\n}());\n\n/// overlay menu\nvar menu_current = '';\nvar menu_last = '';\nfunction menu_show(id)\n{\n  if(menu_current != '')\n  {\n    var dl = (id == '_off_') ? 125 : 0;\n    $('#'+menu_current).delay(dl).slideUp(100);\n    menu_last = menu_current;\n  }\n  if (id != '') {\n    if (menu_last == id && typeof $('#' + id).queue() !== 'undefined' && $('#' + id).queue().length > 0) {\n      $('#' + id).clearQueue();\n    } else {\n      $('#' + id).slideDown(150);\n    }\n  }\n  menu_current = id;\n}\nfunction menu_pin(){\n  if(document.getElementById('overlay_menu').style.position == 'absolute') {\n    document.getElementById('overlay_menu').style.position = 'fixed';\n    Cookie('ku_menutype', 'fixed', 365);\n  } else { \n    document.getElementById('overlay_menu').style.position = 'absolute';\n    Cookie('ku_menutype', 'absolute', 365);\n  }\n}\n\nfunction set_oldmenu(cookie){\n  if(cookie) {\n    Cookie('ku_oldmenu', 'yes', 90);\n  }\n  var h = document.getElementById('boardlist_header');\n  var f = document.getElementById('boardlist_footer');\n  if (h && f) {\n    h.innerHTML = f.innerHTML + ' <a href=\\\"#\\\" onclick=\\\"javascript:set_cookie(\\'ku_oldmenu\\', \\'no\\', 90);parent.document.location.reload(true);\\\">[overlay]</a>';\n  }\n}\n\nvar LatexIT = {\n  mode : 'gif',\n  init : function() {\n  if(document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"))\n    this.mode='svg';\n  },\n  odc: \"javascript:LatexIT.replaceWithSrc(this);\",\n  dcls: \"Double click to show source\", \n\n  pre : function(eqn) {\n    var txt=eqn.innerHTML;\n    if ( !txt.match(/<img.*?>/i) && !txt.match(/<object.*?>/i))\n    {\n      //Clean code\n      txt=txt.replace(/<br>/gi,\"\").replace(/<br \\/>/gi,\"\").replace(/&amp;/mg,'&');\n      var atxt = \"[tex]\"+txt+\"[/tex]\"; \n      txt=escape(txt.replace(/\\\\/mg,'\\\\'));\n      // Add coloring according to style of text\n      var c = eval(\"LatexIT.normalize\"+$(eqn).parent().css('color'));\n      var extxt = \"{\\\\color[rgb]{\"+c.r+','+c.g+','+c.b+\"}\"+txt+\"}\";\n      txt = \" <img src=\\\"http://latex.codecogs.com/\"+this.mode+\".latex?\"+ extxt +\"\\\" title=\\\"\"+this.dcls+\"\\\" alt=\\\"\"+atxt+\"\\\" ondblclick=\\\"\"+this.odc+\"\\\" border=\\\"0\\\" class=\\\"latex\\\" /> \";\n    }\n    return txt;\n  },\n  \n  replaceWithSrc: function(eqn) {\n    var txt = $(eqn).attr('alt');\n    $(eqn).parent().html(txt);\n  },\n\n  render : function($scope) {\n    var scope = (typeof $scope === 'undefined') ? window.document : $scope[0];\n    var eqn = scope.getElementsByTagName(\"*\");\n    for (var i=0; i<eqn.length; i++) {\n      if(eqn[i].getAttribute(\"lang\") == \"latex\" || eqn[i].getAttribute(\"xml:lang\") == \"latex\")\n      eqn[i].innerHTML = this.pre(eqn[i]);\n    } \n  },\n\n  normalizergb : function(r, g, b) {\n    return {r: (r/255).toFixed(3), g: (g/255).toFixed(2), b: (b/255).toFixed(2) }\n  },\n  normalizergba : function(r, g, b, a) {\n    return this.normalizergb(r, g, b);\n  }\n};\n\nfunction in_array(needle, haystack) {\n  return (typeof haystack !== 'object') ? (needle === haystack) : _.includes(haystack, needle)\n}\n\n(function($) {\n  $.fn.drags = function(opt) {\n    opt = $.extend({handle:\"\",cursor:\"move\"}, opt);\n\n    if(opt.handle === \"\") {\n      var $el = this;\n    } else {\n      var $el = this.find(opt.handle);\n    }\n\n    return $el.css('cursor', opt.cursor).on(\"mousedown\", function(e) {\n      if(opt.handle === \"\") {\n        var $drag = $(this).addClass('draggable');\n      } else {\n        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');\n      }\n      var z_idx = $drag.css('z-index'),\n        drg_h = $drag.outerHeight(),\n        drg_w = $drag.outerWidth(),\n        pos_y = $drag.offset().top + drg_h - e.pageY,\n        pos_x = $drag.offset().left + drg_w - e.pageX;\n      $drag.css('z-index', 1000).parents().on(\"mousemove\", function(e) {\n        $('.draggable').offset({\n          top:e.pageY + pos_y - drg_h,\n          left:e.pageX + pos_x - drg_w\n        }).on(\"mouseup\", function() {\n          $(this).removeClass('draggable').css('z-index', z_idx);\n        });\n      });\n      e.preventDefault(); // disable selection\n    }).on(\"mouseup\", function() {\n      if(opt.handle === \"\") {\n        $(this).removeClass('draggable');\n      } else {\n        $(this).removeClass('active-handle').parent().removeClass('draggable');\n      }\n    });\n  }\n  $.fn.dragsOff = function(opt) {\n    opt = $.extend({handle:\"\",cursor:\"default\"}, opt);\n\n    if(opt.handle === \"\") {\n     var $el = this;\n     $(this).removeClass('draggable');\n    } else {\n     var $el = this.find(opt.handle);\n     $(this).removeClass('active-handle')\n        .parent()\n        .removeClass('draggable');\n    }\n    return $el.css('cursor', \"default\")\n      .off(\"mousedown\")\n      .off(\"mouseup\")\n      .off(\"mousemove\");\n  }\n  $.fn.pin = function() {\n    if(this.css('position') !== 'fixed') {\n      var abs = {\n        top: this.position().top - $(document).scrollTop(),\n        left: this.position().left - $(document).scrollLeft()\n      }\n      this.css({\n        position: 'fixed',\n        left: abs.left,\n        top: abs.top\n      });\n      this.find('.pinner').removeClass('pinned').addClass('unpinned');\n      localStorage['pinForm'] = 0;\n      // localStorage['pinPreference'] = 'pinned';\n    }\n    else {\n      var abs = {\n        top: this.position().top + $(document).scrollTop(),\n        left: this.position().left + $(document).scrollLeft()\n      }\n      this.css({\n        position: 'absolute',\n        left: abs.left,\n        top: abs.top\n      });\n      this.find('.pinner').removeClass('unpinned').addClass('pinned');\n      localStorage['pinForm'] = 1;\n      // localStorage['pinPreference'] = 'unpinned';\n    }\n  }\n  $.fn.unwrap = function () {\n    $(this).off().removeClass('wrapper').addClass('unwrapping').empty().css({'background-image': 'none'});\n    var vid = $(this).data('id'), htm = '';\n    var embedHTMLs = {\n      youtube: '<iframe style=\"display:none\" class=\"embedded-content\" width=\"368\" height=\"237\" src=\"//www.youtube.com/embed/'+vid+'?wmode=transparent\" frameborder=\"0\" allowfullscreen></iframe>',\n      vimeo: '<iframe style=\"display:none\" src=\"//player.vimeo.com/video/'+vid+'?badge=0\" width=\"368\" height=\"210\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',\n      coub: '<iframe src=\"http://coub.com/embed/'+vid+'?muted=false&autostart=false&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false\" allowfullscreen=\"true\" frameborder=\"0\" width=\"368\" height=\"207\"></iframe>'\n    }\n    var htm = embedHTMLs[$(this).data('site')] || false;\n    if(!htm) return false;\n    var container = $(this);\n    var content = $(htm)\n    .appendTo(container)\n    .load(function() {\n      $(this).show();\n      container.removeClass('unwrapping');\n    });\n  };\n  $.fn.triggerNative = function(eventName) {\n    return this.each(function() {\n      var el = $(this).get(0);\n      triggerNativeEvent(el, eventName);\n    });\n  };\n  function triggerNativeEvent(el, eventName){\n    if (el.fireEvent) { // < IE9\n    (el.fireEvent('on' + eventName));\n    } else {\n    var evt = document.createEvent('Events');\n    evt.initEvent(eventName, true, false);\n    el.dispatchEvent(evt);\n    }\n  }\n})(jQuery);\n\nfunction xsend(formid) {\n  if(typeof formid === 'undefined') formid = \"postform\";\n  $('#'+formid).ajaxSubmit({\n    beforeSubmit: function() {\n      $('#'+formid).addClass('form-sending');\n    },\n    success: function(responseText, statusText, xhr, $form) {\n      $('#'+formid).removeClass('form-sending');\n      var resp = $('<html></html>').append(responseText);\n      if(resp.find('h1').text() !== '') {\n        popupMessage(resp.find('h2').text());\n        clearfields($(formid), true);\n      }\n      else if(resp.find('.big-shit').text() !== '') {\n        if(resp.find('.big-shit').text() === ' !') {\n          window.location.href = ku_cgipath + \"/banned.php\";\n        }\n        popupMessage(resp.find('.big-shit').text());\n        clearfields($(formid), true);\n      }\n    } \n  }); \n  return false;\n}\n\nfunction clearfields($form, onlycaptcha) {\n  if(typeof onlycaptcha === 'undefined') onlycaptcha = false;\n  if(!onlycaptcha) {\n    $form.find('[name=\"message\"]').val('');\n    $form.find('[name=\"captcha\"]').val('');\n    $form.find('[name=\"subject\"]').val('');\n    $form.find('[name=\"imagefile\"]').val('');\n    $form.find('[name=\"name\"]').val('');\n    $form.find('[name=\"embed\"]').val('');\n    $form.find('[name=\"token\"]').val(randomString());\n  }\n  if(!dcxt.enabled) {\n    $('.captchawrap').stop();\n    clearTimeout(rottencaptcha);\n    rotCaptcha();\n  }\n}\n\nfunction resetForm(form) {\n  let fields = form.querySelectorAll('input[type=text]:not([name=name]), input[type=file], textarea')\n  Array.prototype.forEach.call(fields, field => field.value = null)\n}\n\nvar injector = {\n  inject: function(alias, css) {\n    var id = `injector:${alias}`\n    var existing = document.getElementById(id)\n    if (existing) {\n      existing.innerHTML = css\n      return\n    }\n    var head = document.head || document.getElementsByTagName('head')[0]\n    , style = document.createElement('style')\n    style.type = 'text/css'\n    style.id = id\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css\n    } else {\n      style.appendChild(document.createTextNode(css))\n    }\n    head.appendChild(style)\n  },\n  remove: function(alias) {\n    var id = `injector:${alias}`\n    var style = document.getElementById(id)\n    if (style) {\n      var head = document.head || document.getElementsByTagName('head')[0]\n      if (head)\n        head.removeChild(document.getElementById(id))\n    }\n  }\n}\n\nfunction randomString() {\n  var result = '', chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ', length = 10;\n  for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\n  return result;\n}\n\nvar cloud20 = {\n  init: function() {\n    $.getJSON(ku_cgipath + '/boards20.json', function(data) {\n      cloud20.allboards = data;\n      cloud20.filter('');\n    });\n  },\n  filter: function(query) {\n    var res = [];\n    if(typeof this.allboards === \"undefined\") return;\n    if(query == '') res = this.allboards;\n    else {\n      query = query.toLowerCase();\n      _.each(this.allboards, function(board) {\n        if(board.name.toLowerCase().search(query) !== -1 || board.desc.toLowerCase().search(query) !== -1)\n          res.push(board);\n      });\n    }\n    this.display(res);\n  },\n  display: function(list) {\n    var newhtml = '', opts = '';\n    _.each(list, function(item) {\n      newhtml += '<a class=\"menu-item\" title=\"'+ item.desc +'\" href=\"'+ku_boardsfolder+item.name+'/\">/'+item.name+'/ - '+ item.desc +'</a>';\n      opts += '<option value=\"'+item.name+'\">/'+item.name+'/ - '+ item.desc +'</option>';\n    });\n    $('#boards20').html(newhtml);\n    $('.boardsel20').append(opts);\n  }\n}\n\nvar countries = {\n  'A1': \"Anonymous Proxy\",\n  'A2': \"Satellite Provider\",\n  'O1': \"Other Country\",\n  'AD': \"Andorra\",\n  'AE': \"United Arab Emirates\",\n  'AF': \"Afghanistan\",\n  'AG': \"Antigua and Barbuda\",\n  'AI': \"Anguilla\",\n  'AL': \"Albania\",\n  'AM': \"Armenia\",\n  'AO': \"Angola\",\n  'AP': \"Asia/Pacific Region\",\n  'AQ': \"Antarctica\",\n  'AR': \"Argentina\",\n  'AS': \"American Samoa\",\n  'AT': \"Austria\",\n  'AU': \"Australia\",\n  'AW': \"Aruba\",\n  'AX': \"Aland Islands\",\n  'AZ': \"Azerbaijan\",\n  'BA': \"Bosnia and Herzegovina\",\n  'BB': \"Barbados\",\n  'BD': \"Bangladesh\",\n  'BE': \"Belgium\",\n  'BF': \"Burkina Faso\",\n  'BG': \"Bulgaria\",\n  'BH': \"Bahrain\",\n  'BI': \"Burundi\",\n  'BJ': \"Benin\",\n  'BL': \"Saint Bartelemey\",\n  'BM': \"Bermuda\",\n  'BN': \"Brunei Darussalam\",\n  'BO': \"Bolivia\",\n  'BQ': \"Bonaire, Saint Eustatius and Saba\",\n  'BR': \"Brazil\",\n  'BS': \"Bahamas\",\n  'BT': \"Bhutan\",\n  'BV': \"Bouvet Island\",\n  'BW': \"Botswana\",\n  'BY': \"Belarus\",\n  'BZ': \"Belize\",\n  'CA': \"Canada\",\n  'CC': \"Cocos (Keeling) Islands\",\n  'CD': \"Congo, The Democratic Republic of the\",\n  'CF': \"Central African Republic\",\n  'CG': \"Congo\",\n  'CH': \"Switzerland\",\n  'CI': \"Cote d'Ivoire\",\n  'CK': \"Cook Islands\",\n  'CL': \"Chile\",\n  'CM': \"Cameroon\",\n  'CN': \"China\",\n  'CO': \"Colombia\",\n  'CR': \"Costa Rica\",\n  'CU': \"Cuba\",\n  'CV': \"Cape Verde\",\n  'CW': \"Curacao\",\n  'CX': \"Christmas Island\",\n  'CY': \"Cyprus\",\n  'CZ': \"Czech Republic\",\n  'DE': \"Germany\",\n  'DJ': \"Djibouti\",\n  'DK': \"Denmark\",\n  'DM': \"Dominica\",\n  'DO': \"Dominican Republic\",\n  'DZ': \"Algeria\",\n  'EC': \"Ecuador\",\n  'EE': \"Estonia\",\n  'EG': \"Egypt\",\n  'EH': \"Western Sahara\",\n  'ER': \"Eritrea\",\n  'ES': \"Spain\",\n  'ET': \"Ethiopia\",\n  'EU': \"Europe\",\n  'FI': \"Finland\",\n  'FJ': \"Fiji\",\n  'FK': \"Falkland Islands (Malvinas)\",\n  'FM': \"Micronesia, Federated States of\",\n  'FO': \"Faroe Islands\",\n  'FR': \"France\",\n  'GA': \"Gabon\",\n  'GB': \"United Kingdom\",\n  'GD': \"Grenada\",\n  'GE': \"Georgia\",\n  'GF': \"French Guiana\",\n  'GG': \"Guernsey\",\n  'GH': \"Ghana\",\n  'GI': \"Gibraltar\",\n  'GL': \"Greenland\",\n  'GM': \"Gambia\",\n  'GN': \"Guinea\",\n  'GP': \"Guadeloupe\",\n  'GQ': \"Equatorial Guinea\",\n  'GR': \"Greece\",\n  'GS': \"South Georgia and the South Sandwich Islands\",\n  'GT': \"Guatemala\",\n  'GU': \"Guam\",\n  'GW': \"Guinea-Bissau\",\n  'GY': \"Guyana\",\n  'HK': \"Hong Kong\",\n  'HM': \"Heard Island and McDonald Islands\",\n  'HN': \"Honduras\",\n  'HR': \"Croatia\",\n  'HT': \"Haiti\",\n  'HU': \"Hungary\",\n  'ID': \"Indonesia\",\n  'IE': \"Ireland\",\n  'IL': \"Israel\",\n  'IM': \"Isle of Man\",\n  'IN': \"India\",\n  'IO': \"British Indian Ocean Territory\",\n  'IQ': \"Iraq\",\n  'IR': \"Iran, Islamic Republic of\",\n  'IS': \"Iceland\",\n  'IT': \"Italy\",\n  'JE': \"Jersey\",\n  'JM': \"Jamaica\",\n  'JO': \"Jordan\",\n  'JP': \"Japan\",\n  'KE': \"Kenya\",\n  'KG': \"Kyrgyzstan\",\n  'KH': \"Cambodia\",\n  'KI': \"Kiribati\",\n  'KM': \"Comoros\",\n  'KN': \"Saint Kitts and Nevis\",\n  'KP': \"Korea, Democratic People's Republic of\",\n  'KR': \"Korea, Republic of\",\n  'KW': \"Kuwait\",\n  'KY': \"Cayman Islands\",\n  'KZ': \"Kazakhstan\",\n  'LA': \"Lao People's Democratic Republic\",\n  'LB': \"Lebanon\",\n  'LC': \"Saint Lucia\",\n  'LI': \"Liechtenstein\",\n  'LK': \"Sri Lanka\",\n  'LR': \"Liberia\",\n  'LS': \"Lesotho\",\n  'LT': \"Lithuania\",\n  'LU': \"Luxembourg\",\n  'LV': \"Latvia\",\n  'LY': \"Libyan Arab Jamahiriya\",\n  'MA': \"Morocco\",\n  'MC': \"Monaco\",\n  'MD': \"Moldova, Republic of\",\n  'ME': \"Montenegro\",\n  'MF': \"Saint Martin\",\n  'MG': \"Madagascar\",\n  'MH': \"Marshall Islands\",\n  'MK': \"Macedonia\",\n  'ML': \"Mali\",\n  'MM': \"Myanmar\",\n  'MN': \"Mongolia\",\n  'MO': \"Macao\",\n  'MP': \"Northern Mariana Islands\",\n  'MQ': \"Martinique\",\n  'MR': \"Mauritania\",\n  'MS': \"Montserrat\",\n  'MT': \"Malta\",\n  'MU': \"Mauritius\",\n  'MV': \"Maldives\",\n  'MW': \"Malawi\",\n  'MX': \"Mexico\",\n  'MY': \"Malaysia\",\n  'MZ': \"Mozambique\",\n  'NA': \"Namibia\",\n  'NC': \"New Caledonia\",\n  'NE': \"Niger\",\n  'NF': \"Norfolk Island\",\n  'NG': \"Nigeria\",\n  'NI': \"Nicaragua\",\n  'NL': \"Netherlands\",\n  'NO': \"Norway\",\n  'NP': \"Nepal\",\n  'NR': \"Nauru\",\n  'NU': \"Niue\",\n  'NZ': \"New Zealand\",\n  'OM': \"Oman\",\n  'PA': \"Panama\",\n  'PE': \"Peru\",\n  'PF': \"French Polynesia\",\n  'PG': \"Papua New Guinea\",\n  'PH': \"Philippines\",\n  'PK': \"Pakistan\",\n  'PL': \"Poland\",\n  'PM': \"Saint Pierre and Miquelon\",\n  'PN': \"Pitcairn\",\n  'PR': \"Puerto Rico\",\n  'PS': \"Palestinian Territory\",\n  'PT': \"Portugal\",\n  'PW': \"Palau\",\n  'PY': \"Paraguay\",\n  'QA': \"Qatar\",\n  'RE': \"Reunion\",\n  'RO': \"Romania\",\n  'RS': \"Serbia\",\n  'RU': \"Russian Federation\",\n  'RW': \"Rwanda\",\n  'SA': \"Saudi Arabia\",\n  'SB': \"Solomon Islands\",\n  'SC': \"Seychelles\",\n  'SD': \"Sudan\",\n  'SE': \"Sweden\",\n  'SG': \"Singapore\",\n  'SH': \"Saint Helena\",\n  'SI': \"Slovenia\",\n  'SJ': \"Svalbard and Jan Mayen\",\n  'SK': \"Slovakia\",\n  'SL': \"Sierra Leone\",\n  'SM': \"San Marino\",\n  'SN': \"Senegal\",\n  'SO': \"Somalia\",\n  'SR': \"Suriname\",\n  'SS': \"South Sudan\",\n  'ST': \"Sao Tome and Principe\",\n  'SV': \"El Salvador\",\n  'SX': \"Sint Maarten\",\n  'SY': \"Syrian Arab Republic\",\n  'SZ': \"Swaziland\",\n  'TC': \"Turks and Caicos Islands\",\n  'TD': \"Chad\",\n  'TF': \"French Southern Territories\",\n  'TG': \"Togo\",\n  'TH': \"Thailand\",\n  'TJ': \"Tajikistan\",\n  'TK': \"Tokelau\",\n  'TL': \"Timor-Leste\",\n  'TM': \"Turkmenistan\",\n  'TN': \"Tunisia\",\n  'TO': \"Tonga\",\n  'TR': \"Turkey\",\n  'TT': \"Trinidad and Tobago\",\n  'TV': \"Tuvalu\",\n  'TW': \"Taiwan\",\n  'TZ': \"Tanzania, United Republic of\",\n  'UA': \"Ukraine\",\n  'UG': \"Uganda\",\n  'UM': \"United States Minor Outlying Islands\",\n  'US': \"United States\",\n  'UY': \"Uruguay\",\n  'UZ': \"Uzbekistan\",\n  'VA': \"Holy See (Vatican City State)\",\n  'VC': \"Saint Vincent and the Grenadines\",\n  'VE': \"Venezuela\",\n  'VG': \"Virgin Islands, British\",\n  'VI': \"Virgin Islands, U.S.\",\n  'VN': \"Vietnam\",\n  'VU': \"Vanuatu\",\n  'WF': \"Wallis and Futuna\",\n  'WS': \"Samoa\",\n  'YE': \"Yemen\",\n  'YT': \"Mayotte\",\n  'ZA': \"South Africa\",\n  'ZM': \"Zambia\",\n  'ZW': \"Zimbabwe\",\n  'XX': \"OMCK\",\n  'T1': \"Tor\"\n}\n\nvar bnrs = {\n  initiated: false,\n  init: function() {\n    $.getJSON(ku_boardspath+'/bnrs.json', function(data) { \n      var reduced = [];\n      if(data.length > 1) {\n        _.each(data, function(bnr) {\n          if(bnr.link !== this_board_dir) reduced.push(bnr);\n        });\n      }\n      else reduced = data;\n      bnrs.data = reduced;\n      bnrs.initiated = true;\n      bnrs.display();\n    });\n  },\n  display: function() {\n    if(!this.initiated) return;\n    if(!this.data.length) return;\n    var reduced = [];\n    if(typeof this.current !== 'undefined') {\n      _.each(this.data, function(item) {\n        if(item.path !== bnrs.current) reduced.push(item)\n      });\n    }\n    else reduced = this.data;\n    var toDisplay = randomItem(reduced);\n    this.current = toDisplay.path;\n    var link = (toDisplay.link.indexOf('http') === (-1)) ? ku_boardspath+'/'+toDisplay.link : toDisplay.link;\n    var newhtml = '<a class=\"bnrsupdate\" href=\"#\" onclick=\"javascript:bnrs.display();return false;\"></a><a href=\"'+link+'\"><img src=\"'+ku_boardspath+'/images/bnrs/'+toDisplay.path+'\" /></a>';\n    if($('.bnr').length) {\n      $('.bnr').html(newhtml);\n    }\n    else $('.logo').before('<div class=\"bnr-wrap\"><div class=\"bnr\">'+newhtml+'</div></div>');\n  },\n}\n\nfunction getRandomInt (min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction randomItem(array) {\n  return array[getRandomInt(0, array.length-1)];\n}\n\n/* not losing floating form data */\nvar ffdata = {\n  pos: ['top', 'left'],\n  save: function() {\n    var data = {};\n    _.each(ffdata.pos, function(pos) {\n      data[pos] = $('#postclone').css(pos);\n    });\n    var savedOn = new Date().getTime();\n    data.savedon = savedOn;\n    ffdata.savedOn = savedOn;\n    $('#postform [name=ffdata_savedon]').val(savedOn);\n    localStorage.setItem('ffdata_'+this_board_dir+'_'+(ispage ? 'page' : $('#postform [name=replythread]').val()), JSON.stringify(data));\n    return true;\n  },\n  savedOn: false,\n  unload: function() {\n    $('#postform [name=ffdata_savedon]').val(ffdata.savedOn || new Date().getTime());\n  },\n  load: function() {\n    var key = 'ffdata_'+this_board_dir+'_'+(ispage ? 'page' : $('#postform [name=replythread]').val());\n    if(!localStorage[key]) return;\n    try {\n      let data = JSON.parse(localStorage[key]);\n      if(data.savedon && data.savedon == $('#postform [name=ffdata_savedon]').val()) {\n        _.each(ffdata.pos, function(pos) {\n          if(data.hasOwnProperty(pos)) $('#postclone').css(pos, data[pos]);\n        });\n        $('#postclone').show();\n      }\n      else localStorage.removeItem(key);\n      \n    }\n    catch(e) {\n      localStorage.removeItem(key);\n      console.log('unable to load form data', e)\n    }\n  }\n}\n\nvar embedLinks = {\n  sites: [\n    {id: 'youtube', rx: /(?:youtu(?:\\.be|be\\.com)\\/(?:.*v(?:\\/|=)|(?:.*\\/)?)([\\w'-]+))/ },\n    {id: 'vimeo',   rx: /[\\w\\W]*vimeo\\.com\\/(?:.*?)([0-9]+)(?:.*)?/ },\n    {id: 'coub',    rx: /[\\w\\W]*coub\\.com\\/view\\/([\\w\\W]*)[\\w\\W]*/ }\n  ],\n  process: function(val) {\n    var result = null;\n    _.each(this.sites, function(site) {\n      var fruit = site.rx.exec(val);\n      if(fruit != null) {\n        result = {\n          site: site.id,\n          code: fruit[1]\n        }\n      }\n    })\n    return result;\n  }\n}\n\nwindow.onbeforeunload = ffdata.unload;\n\nvar catalog = {\n  conf: {\n    sortBy: 'bumped',\n    layout: 'text',\n    respectStickied: true,\n    showHidden: true,\n    expandOnHover: true\n  },\n  saveConfig: function() {\n    localStorage['catalogSettings'] = JSON.stringify(this.conf);\n  },\n  init: function() {\n    // apply settings\n    if(localStorage['catalogSettings']) {\n      try {\n        var myConf = JSON.parse(localStorage['catalogSettings']);\n        _.each(myConf, function(val, key) {\n          this.conf[key] = val\n        }, this)\n      }\n      catch(e) {\n        console.error('Invalid catalog config');\n        localStorage.removeItem('catalogSettings');\n      }\n    }\n\n    var sortOptionElements = '';\n    _.each([\n      ['bumped', 'bumpOrder'],\n      ['replied', 'lastReply'],\n      ['timestamp', 'creationDate'],\n      ['reply_count', 'replyCount']\n    ], (function(val_desc) {\n      sortOptionElements += '<option value=\"'+val_desc[0]+'\"'+(val_desc[0]==this.conf.sortBy ? ' selected' : '')+'>'+_l[val_desc[1]]+'</option>';\n    }).bind(this));\n\n    // catalog control buttons\n    var sortBtns = '<div class=\"button-group\" data-select=\"sortBy\">';\n    _.each([\n      ['bumped', 'bumpOrder', 'bump', 'i-20'],\n      ['timestamp', 'creationDate', 'creation', 'i-20'],\n      ['replied', 'lastReply', 'reply', 'i-16in20'],\n      ['reply_count', 'replyCount', 'replies', 'i-20']\n    ], (function(v_d_i) {\n      sortBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.sortBy ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l.sortBy+' '+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    sortBtns += '</div>';\n    var pinBtns = '<div class=\"button-group'+(this.conf.sortBy !== 'bumped' ? ' disabled' : '')+'\" data-select=\"respectStickied\" id=\"pinControl\">';\n    _.each([\n      [1, 'doStick', 'pin', 'i-16in20'],\n      [0, 'doNotStick', 'unpin', 'i-16in20']\n    ], (function(v_d_i) {\n      pinBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.respectStickied ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    pinBtns += '</div>';\n    var hideBtns = '<div class=\"button-group\" data-select=\"showHidden\">';\n    _.each([\n      [0, 'hideHidden', 'hide', 'i-16in20'],\n      [1, 'showHidden', 'unhide', 'i-16in20']\n    ], (function(v_d_i) {\n      hideBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.showHidden ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    hideBtns += '</div>';\n    var layoutBtns = '<div class=\"button-group\" data-select=\"layout\">';\n    _.each([\n      ['text', 'smallPics', 'grid-small', 'i-20'],\n      ['gallery', 'largePics', 'gallery-grid', 'i-20'],\n      /*['legacy', 'legacyMode', 'legacy-grid', 'i-20']*/\n    ], (function(v_d_i) {\n      layoutBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.layout ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    layoutBtns += '</div>';\n    // searck input\n    var searchInput = '<input name=\"subject\" autocomplete=\"false\" class=\"button-group\" type=\"text\" id=\"cat-search\" placeholder=\"'+_l.search+'...\" /><input type=\"text\" name=\"FUCKYOUCHROMEFUCKYOU\" style=\"display:none;\"/>'\n\n    $('#catalog-controls').html(\n      sortBtns+pinBtns+searchInput+hideBtns+layoutBtns\n    );\n    this.load();\n    if(this.conf.expandOnHover)\n      $('#catalog-contents').addClass('expand-on-hover-enabled');\n    // Card events\n    $('#catalog-contents')\n    .on('click', '.namedate-overlay', function() {\n      $(this).toggleClass('date-on name-on');\n    })\n    .on('click', '.ce-text .bigThumb', function(ev) {\n      ev.stopPropagation(); ev.preventDefault(); \n      var $card = $(this).parents('.cat-entry');\n      $card.toggleClass('thumbExpanded');\n    })\n    .on('click', '.bigThumb audio, .bigThumb video', function(ev) {\n      ev.stopPropagation();\n    })\n    .on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', (function(event) {\n      var $target = $(event.target);\n      if (event.originalEvent.animationName == \"embed-image-insert\" && !$target.hasClass('_inserted_')) \n        this.getEmbedThumb($target);\n    }).bind(this))\n    .on('mousedown', '.cat-prv', function(ev) {\n      ev.preventDefault();\n      PostPreviews._mouseover.bind(this)(ev);\n    })\n    .on('click', '.cat-prv', function(ev) {\n      ev.stopPropagation();\n      ev.preventDefault();\n    })\n    .on('mouseleave', '.cat-prv', function(ev) {\n      PostPreviews._mouseout.bind(this)(ev);\n    })\n    .on('click', '.i-hide', (function(ev) {\n      var $target = $(ev.currentTarget)\n      , $card = $target.parents('.cat-entry')\n      , threadID = $card.data('id')\n      , threadIX = _.findIndex(this.model, {'id': threadID})\n      , thread = this.model[threadIX];\n      thread.hidden = !thread.hidden;\n      // addClass won't work here for some reason\n      if(thread.hidden) {\n        $target[0].classList.add('hidden-on');\n        $target.html('<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unhide\"></use>');\n        HiddenThreads.hide(threadID);\n        $card.addClass('thread-hidden')\n      } \n      else {\n        $target[0].classList.remove('hidden-on');\n        $target.html('<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-hide\"></use>');\n        HiddenThreads.unhide(threadID);\n        $card.removeClass('thread-hidden')\n      }\n      //invalidate rendered cache\n      this.model[threadIX] = thread;\n      delete this.rendered[this.conf.layout][threadID];\n    }).bind(this))\n    // catalog configuration\n    $('.bg-button').click((function(ev) {\n      var $target = $(ev.currentTarget);\n      if($target.hasClass('bgb-selected')) return;\n      var $group = $target.parent()\n      , val = $target.data('val')\n      , key = $group.data('select');\n      $group.find('.bg-button').removeClass('bgb-selected');\n      $target.addClass('bgb-selected');\n      if(key !== 'sortBy' && key !== 'layout') val = !!val;\n      else {\n        if(val == 'bumped') $('#pinControl').removeClass('disabled');\n        else $('#pinControl').addClass('disabled');\n      }\n      this.conf[key] = val;\n      this.saveConfig();\n      if(key !== 'showHidden') this.build();\n      else {\n        if(val) $('#catalog-contents').removeClass('hideHidden');\n        else $('#catalog-contents').addClass('hideHidden');\n      }\n    }).bind(this))\n    $('#refresh_catalog').click((function(ev) {\n      ev.preventDefault();\n      this.load();\n    }).bind(this));\n    //search\n    $('#cat-search').on('input', function() {\n      var query = $(this).val().toLowerCase().replace(/\\\"/, '\\\\\"');\n      try {\n        injector.remove('cat-search');\n      } catch(e) {}\n      if(query.length)\n        injector.inject('cat-search', '#catalog-contents .cat-entry:not([data-search *= \"'+query+'\"]) { display:none; }');\n      else injector.remove('cat-search');\n    }).trigger('input');\n  },\n  load: function() {\n    // clear data\n    this.rendered = {text: {}, gallery: {}};\n    this.model = null;\n    // get contents\n    $.getJSON('catalog.json?v='+(new Date().getTime()))\n    .done(this.build.bind(this))\n    .fail(function(err) {\n      throw err;\n    })\n  },\n  fileTypes: {\n    image: ['jpg', 'gif', 'png', 'webm'],\n    iconsAvailable: ['swf', 'mp3', 'ogg', 'cob', 'vim', 'you'],\n    audio: ['mp3', 'ogg'],\n    embed: ['cob', 'vim', 'you']\n  },\n  authorities: ['', 'Admin', 'Mod', '?', 'God'],\n  formatDate: function(timestamp, short) {\n    if(typeof short === 'undefined') short = false;\n    var date = new Date(timestamp * 1000)\n    , Dow = this.dateLocal.dows.hasOwnProperty(locale) ? this.dateLocal.dows[locale][date.getDay()] : this.dateLocal.dows.en[date.getDay()]\n    , yy = _.padLeft(date.getFullYear() % 100, 2, 0)\n    , mo = _.padLeft(date.getMonth()+1, 2, 0)\n    , Mon = (locale === 'ru') ? this.dateLocal.mons.ru[date.getMonth()] : date.getMonth()+1\n    , dd = _.padLeft(date.getDate(), 2, 0)\n    , hh = _.padLeft(date.getHours(), 2, 0)\n    , mm = _.padLeft(date.getMinutes(), 2, 0)\n    , ss = _.padLeft(date.getSeconds(), 2, 0);\n    return (short\n      ? ( (locale === 'ru')\n        ? (dd+'.'+mo+'.'+yy+'  ')\n        : (mo+'/'+dd+'/'+yy+' @ ') )\n      : ( (locale === 'ru') \n        ? (Dow+' '+dd+' '+Mon+''+yy+'  ')\n        : (mo+'/'+dd+'/'+yy+' ('+Dow+') @ ') )\n    ) + hh+':'+mm+':'+ss;\n  },\n  dateLocal: {\n    dows: {\n      ru: ['','','','','','',''],\n      en: ['Sun','Mon','Tue','Wen','Thu','Fri','Sat']\n    },\n    mons: {\n      ru: ['','','','','','','','','','','','']\n    }\n  },\n  build: function(data) {\n    if(typeof data === 'undefined') data = this.model;\n    if(!data) return;\n    // normalize\n    _.each(data, function(entry, i) {\n      _.each(['id', 'reply_count', 'bumped', 'replied', 'reply_count', 'timestamp', 'page', 'locked', 'stickied', 'deleted_timestamp'], function(prop) {\n        entry[prop] = ~~entry[prop];\n      })\n      data[i] = entry;\n    })\n    // Sort threads\n    if(this.conf.sortBy === 'bumped' && this.conf.respectStickied)\n      this.model = _.sortByOrder(data, ['stickied', 'bumped'], ['desc', 'desc']);\n    else {\n      var sby = [this.conf.sortBy];\n      if(this.conf.sortBy !== 'bumped')\n        sby.push('bumped')\n      this.model = _.sortByOrder(data, sby, _.repeat('desc', sby.length));\n    }\n\n    var html = '';\n\n    _.each(this.model, function(thread) {\n      html += this.buildEntry(thread);\n    }, this);\n\n    $('#catalog-contents').html(html);\n  },\n  getEmbedThumb: function($el) {\n    var site = $el.data('site'), id = $el.data('id'), img\n    , $thread = $el.parents('.cat-entry')\n    , threadID = $thread.data('id');\n    if(site == 'cob')\n      $.get(ku_boardspath+'/corpsy.php?code='+id, (function(res) {\n        $el.replaceWith('<img src=\"'+res.thumbnail_url+'\">');\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML;\n      }).bind(this));\n    if(site == 'vim')\n      $.get('http://vimeo.com/api/v2/video/'+id+'.json', (function(res) {\n        $el.replaceWith('<img src=\"'+res[0].thumbnail_medium+'\">');\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML\n      }).bind(this));\n  },\n\n  buildEntry: function(thread) {\n    if(this.rendered[this.conf.layout].hasOwnProperty(thread.id))\n      return this.rendered[this.conf.layout][thread.id];\n\n    if(!thread.processed) {\n      thread.url = '/'+this_board_dir+'/res/'+thread.id+'.html';\n      // --- Building blocks ---\n      // Thumbnails\n      var expanderBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-expand\"></use></svg>',\n      playerBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-play\"></use></svg>';\n      //  for images\n      if(!thread.file || thread.file === 'removed') {\n        thread.smallThumb = \n        '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n          <div class=\"nofile-removed ctx\">'+(thread.file ? '' : 'No File')+'</div>'\n        +'</a>';\n      }\n      else {\n        if(_.includes(this.fileTypes.image, thread.file_type)) {\n          thread.fileTypeClass = 'image';\n          thread.smallThumb = \n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"thumb/'+thread.file+'c.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">'\n          +'</a>';\n          thread.bigThumb = \n          '<img src=\"thumb/'+thread.file+'s.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">';\n        }\n        //  small thumbnail for embeds and generic files\n        else {\n          var smallSrc = (_.includes(this.fileTypes.iconsAvailable, thread.file_type))\n          ? '/inc/filetypes/'+thread.file_type+'.png'\n          : '/inc/filetypes/generic'+(_.includes(this.fileTypes.embed, thread.file_type) ? '-embed' : '')+'.png';\n          var expandable = _.includes(this.fileTypes.embed, thread.file_type) || _.includes(this.fileTypes.audio, thread.file_type);\n          thread.smallThumb = \n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"'+smallSrc+'\">' +\n            /*+ ''+(expandable ? playerBtn : '') +*/\n          '</a>';\n        }\n        //  for embeds\n        if(_.includes(this.fileTypes.embed, thread.file_type)) {\n          thread.bigThumb = (thread.file_type == 'you')\n          ? '<img src=\"http://i.ytimg.com/vi/'+thread.file+'/mqdefault.jpg\">'\n          : '<div class=\"cat-bt-embed\" data-site=\"'+thread.file_type+'\" data-id=\"'+thread.file+'\"></div>';\n        }\n        //  for audios\n        if(_.includes(this.fileTypes.audio, thread.file_type)) {\n          thread.bigThumb = \n          '<audio src=\"src/'+thread.file+'.'+thread.file_type+'\" controls></audio>';\n        }\n      }\n      if(thread.file && thread.file !== 'removed')\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';\n\n      //OP\n      thread.op = '<a target=\"_blank\" title=\"'+_l.goToThread+'\" target=\"_blank\" href=\"'+thread.url+'\" class=\"op-number ctx\">#'+thread.id+'</a>';\n            \n      //preview\n      thread.preview = \n      '<a href=\"'+thread.url+'#'+thread.id+'\" class=\"actor cat-prv\">\\\n        <svg class=\"icon\"><use xlink:href=\"#i-eye\"></use></svg>\\\n      </a>';\n      \n      //counters\n      var repliesLabel = \n      '<svg class=\"icon\"><use xlink:href=\"#i-reply\"></use></svg>\\\n      <span class=\"ctx reply-count\">'+thread.reply_count+'</span>';\n      if(thread.last_reply)\n        repliesLabel = '<a href=\"'+thread.url+'#'+thread.last_reply+'\" class=\"actor cat-prv\">'+repliesLabel+'</a>';\n      var replies = \n      '<div class=\"infolabel\">'+repliesLabel+'</div>',\n      images = \n      '<div class=\"infolabel\">\\\n        <svg class=\"icon\"><use xlink:href=\"#i-picture\"></use></svg>\\\n        <span class=\"ctx image-count\">'+thread.images+'</span>\\\n      </div>',\n      page = \n      '<div class=\"infolabel il-page\">\\\n        <a title=\"'+_l.threadOnPage+' '+thread.page+'\" target=\"_blank\" href=\"/'+this_board_dir+'/' + ((thread.page > 0) ? thread.page+'.html' : '')+'#'+thread.id+'\" class=\"actor\">\\\n          <svg class=\"icon\"><use xlink:href=\"#i-page\"></use></svg>\\\n          <span class=\"ctx page-number\">'+thread.page+'</span>\\\n        </a>\\\n      </div>';\n      thread.countersCombined = replies+images+page;\n\n      //Poster name+date\n      thread.posterauthority = +thread.posterauthority;\n      thread.nameDatePriority = 'date';\n      if(localStorage['cat_nameDatePriority'] == 'name' || \n          (localStorage['cat_nameDatePriority'] != 'date' && \n            (thread.name || thread.tripcode || thread.posterauthority) \n          ) \n        ) thread.nameDatePriority = 'name';\n      \n      // Poster name\n      var poster = \n      (thread.name ? '<span class=\"ctx postername\">'+thread.name+'</span>' : '') + \n      (thread.tripcode ? '<span class=\"ctx postertrip\">!'+thread.tripcode+'</span>' : '') + \n      (thread.posterauthority ? '<span class=\"ctx admin\">&nbsp;##'+this.authorities[thread.posterauthority]+'##</span>' : '');\n      thread.poster = '<div class=\"cat-poster\"><span class=\"ctx\">by&nbsp;</span>'+ (poster || '<span class=\"ctx c-postername\">'+(this_board_defaultName || _l.anonymous)+'</span>')+'</div>';\n\n      // Date\n      var dn = ' style=\"display:none\"';\n      thread.date = '<div class=\"ctx cat-date cat-date-long\">'+this.formatDate(thread.timestamp)+'</div>';\n      thread.dateCompact = '<div class=\"ctx cat-date cat-date-short\">'+this.formatDate(thread.timestamp, 1)+'</div>';\n\n      //search data\n      thread.searchData = _.escape(stripHTML(thread.subject + ' ' + thread.message).toLowerCase());\n\n      thread.message = thread.message.replace(/\\\\\"/mg, '\"');\n\n      thread.processed = true;\n      this.model[_.findIndex(this.model, {id: thread.id})] = thread;\n    }\n    //indicators\n    thread = this.buildIndicators(thread);\n    \n    var html = this.layouts[this.conf.layout].bind(this)(thread);\n    this.rendered[this.conf.layout][thread.id] = html;\n    return html\n  },\n  buildIndicators: function(thread) {\n    // if(!thread.hasOwnProperty('hidden')) \n    thread.hidden =  _.includes((localStorage['hiddenThreads.'+this_board_dir] || '').split(','), ''+thread.id);\n    var pin = thread.stickied ? '<svg class=\"foradmin-act icon i-layer-1 i-pin\"><use xlink:href=\"#i-pin\"></use></svg>' : '',\n    lock = thread.locked ? '<svg class=\"foradmin-act icon i-layer-1 i-lock\"><use xlink:href=\"#i-lock\"></use></svg>' : '',\n    deathmark = thread.deleted_timestamp ? '<svg class=\"foradmin-act icon i-layer-1 i-deathmark\"><use xlink:href=\"#i-skull\"></use></svg>' : '',\n    hide = '<svg class=\"actor icon i-layer-1 i-hide'+(thread.hidden ? ' hidden-on' : '')+'\"><use xlink:href=\"#i-'+(thread.hidden ? 'unhide' : 'hide')+'\"></use></svg>',\n    burger = '<svg class=\"actor icon i-burger foradmin-show\"><use xlink:href=\"#i-burger\"></use></svg>',\n    del = '<svg class=\"actor icon i-layer-2 i-delete foradmin-show\"><use xlink:href=\"#i-x\"></use></svg>',\n    and = '<svg class=\"actor icon i-layer-2 i-dnb foradmin-show\"><use xlink:href=\"#i-and\"></use></svg>',\n    ban = '<svg class=\"actor icon i-layer-2 i-ban foradmin-show\"><use xlink:href=\"#i-ban\"></use></svg>';\n    thread.indicatorsCombined = '<div class=\"indicators\">'+burger+'<span class=\"i-layer-1\">'+deathmark+pin+lock+hide+'</span><span class=\"i-layer-2\">'+del+and+ban+'</span></div>';\n    return thread;\n  },\n  layouts: {\n    text: function(thread) {\n      return ''+\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-text'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\n        <div class=\"cat-card\">\\\n          <div class=\"ce-heda\">'\n            +thread.smallThumb+\n            '<div class=\"cat-infoline ci-op-link\">'\n              +thread.op\n              +thread.indicatorsCombined+\n            '</div>\\\n            <div class=\"cat-infoline namedate-overlay '+thread.nameDatePriority+'-on\">'\n              +thread.poster\n              +thread.date\n            +'</div>\\\n            <div class=\"cat-infoline\">'\n              +thread.preview\n              +thread.countersCombined+\n            '</div>\\\n          </div>\\\n          <div class=\"ce-opcontent ctx\">\\\n            <h5>'+thread.subject+'</h5>'+\n            thread.message+\n          '</div>\\\n        </div>'\n        +thread.bigThumb+\n      '</div>'\n    },\n    gallery: function(thread) {\n      return ''+\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-gallery'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\n        <div class=\"cat-card\">'+\n          thread.bigThumb+\n          '<div class=\"cat-infoline\">\\\n            <div class=\"ci-op-link\">'+thread.op+'</div>\\\n            <div class=\"counters\">'+thread.countersCombined+'</div>\\\n          </div>\\\n          <div class=\"cat-infoline\">'\n            +thread.preview+\n            '<div class=\"namedate-overlay '+thread.nameDatePriority+'-on\">'\n              +thread.poster\n              +thread.dateCompact\n            +'</div>'\n            +thread.indicatorsCombined+\n          '</div>\\\n          <div class=\"ce-opcontent ctx\">\\\n            <h5>'+thread.subject+'</h5>'+\n            thread.message+\n          '</div>\\\n        </div>\\\n      </div>'\n    }\n  }\n}\n\nfunction stripHTML(html) {\n  var tmp = document.implementation.createHTMLDocument(\"New\").body;\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText || \"\";\n}\n\nfunction localMod() {\n  delandbanlinks($('*'), 1);\n}\n\nvar unreadCounter = {\n  init: function(built) {\n    if (!built) {\n      built = + document.querySelector('meta[property=\"i0:buildtime\"]').content\n    }\n    this.lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { }\n    let last_ts = this.lastvisits.hasOwnProperty(boardid) ? parseInt(this.lastvisits[boardid]) : 0;\n    if(last_ts < built) {\n      this.lastvisits[boardid] = built\n      localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\n    }\n  },\n  update: function() {\n    if (!this.lastvisits) {\n      this.init()\n    }\n    $.ajax({\n      url: '/newpostscount.php',\n      data: this.lastvisits,\n      dataType: 'json',\n      success: function(data) {\n        $('.newposts-counter').remove()\n        $('.got-updates').removeClass('got-updates')\n        _.each(data, function(val, brd) {\n          if ((+val) > 0) {\n            let valstr = `<span class=\"newposts-counter\">(${val})</span>`\n            , $brd = $(`.menu-item[href=\"/${brd}/\"]`)\n            if ($brd.length) {\n              $brd.append(valstr)\n              $(`.sect-exr[data-toexpand=\"${$brd.parents('.menu-sect').attr('id').split('ms-')[1]}\"]`).parent().addClass('got-updates')\n            }\n            $(`.mobile-nav option[value=\"${brd}\"]`).append(valstr)\n          }\n        })\n      }\n    });\n  }\n}\n\nvar HTMLoader = {\n  loadThread: function(boardID, threadID, done, postID) {\n    $.get(threadID === '?' \n      ? `${ku_boardspath}/postbynumber.php?b=${boardID}&p=${postID}` \n      : `${ku_boardspath}/${boardID}/res/${threadID}.html`)\n    .then(data => {\n      let posts = data.match(/<!--[0-9]+-->[\\s\\S]+?<!--\\/-->/g)\n      .map(match => { \n      \tlet res = match.match(/<!--([0-9]+)-->([\\s\\S]+?)<!--\\/-->/); \n      \treturn {\n      \t\tid: +res[1], \n      \t\tbody: res[2]\n      \t} \n      })\n      if (threadID === '?') {\n      \tlet thrno = data.match(/<!--i0:thrno=([0-9]+)-->/)\n      \tif (thrno)\n      \t\tthreadID = thrno[1]\n      }\n      if (posts.length) {\n      \tlet postMap = posts.map(post => {\n      \t\tthis.cached[`${boardID}_${post.id}`] = post.body\n      \t\treturn post.id\n      \t})\n      \tif (threadID !== '?') {\n      \t  this.threadMaps[`${boardID}_${threadID}`] = postMap\n      \t}\n      }\n      done()\n    })\n    .fail(err => {\n      done(err.status || 'null')\n    })\n  },\n  getPost: function(boardID, threadID, postID, callback, secondTry) {\n    let cachedPost = this.cached[`${boardID}_${postID}`]\n    if (cachedPost) {\n      callback(false, cachedPost)\n      return\n    }\n    else {\n      if (!secondTry) {\n        let found = false\n        if (boardID === this_board_dir) {\n          let $post = $(`a[name=${postID}]`)\n          if ($post.length) {\n            let post = $post.parents('.postnode')[0].outerHTML\n            this.cached[`${boardID}_${postID}`] = post\n            found = true\n            callback(false, post)\n          }\n        }\n        if (!found) {\n          this.loadThread(boardID, threadID, err => {\n            if (err) {\n              callback(err)\n            }\n            else {\n              this.getPost(boardID, threadID, postID, callback, true)\n            }\n          }, postID)\n        }\n      }\n      else {\n        callback(null)\n      }\n    }\n  },\n  getThread: function(boardID, threadID, range, callback, secondTry, force) {\n    let threadMap = force ? false : this.threadMaps[`${boardID}_${threadID}`]\n    if (threadMap) {\n      if (range) {\n        threadMap = threadMap.filter(n => n > range[0] && n < range[1])\n      }\n      callback(false, threadMap.reduce((htm, postID) => htm + this.cached[`${boardID}_${postID}`], ''))\n    }\n    else {\n      if (!secondTry) {\n        this.loadThread(boardID, threadID, err => {\n          if (err) {\n            callback(err)\n          }\n          else {\n            this.getThread(boardID, threadID, range, callback, true)\n          }\n        })\n      }\n      else {\n        callback(null)\n      }\n    }\n  },\n  cached: {},\n  threadMaps: {}\n}"]}