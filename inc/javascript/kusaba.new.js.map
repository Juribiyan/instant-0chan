{"version":3,"file":"kusaba.new.js","names":["style_cookie","style_cookie_txt","style_cookie_site","ispage","kumod_set","is_entering","_messages","en","noLocalStorage","oops","blankResponse","expandingThread","newThread","NewThread","replyTo","cancel","update","updatingCounts","couldntFetch","noNewPosts","replies","settings_fxEnabled","settings_showReplies","settings_sfwMode","settings_expandImgFull","settings_constrainWidth","settings_newMediaViewer","settings_hidePostBtn","settings_endlessScroll","enterCaptcha","selectText","dcls","watchOn","captcharot","threadUpdationAutomatically","stopFuckingDolls","del","delandban","ban","stickthread","unstickthread","lockthread","unlockthread","returnDesktop","returnTouch","forceDesktop","okay","captchalang","reply","imageDownscaledBy","videoDownscaledBy","toFit","newReplies","newThreadsAvailable","loading","anonymous","sortBy","bumpOrder","lastReply","creationDate","replyCount","doStick","showHidden","doNotStick","hideHidden","search","threadOnPage","goToThread","smallPics","largePics","legacyMode","threads","comments","active_since","last_active","active_on","tryAgain","xhrError","details","thread","post","posts","deleted","deletedMulti","report","reported","reportedMulti","fileRemoved","file","files","collapse","asMod","asOP","historyEmpty","noDataLoaded","unable_load_20","captchaLangChanged","found","links","selectMultiple","selected","directLink","quoteLink","maxAttNumReached","unsupportedFileType","hideName","removeFile","spoilerOnOff","hidePost","unhidePost","settings_hideCompletely","pinUnpin","hideForm","collapseExpand","notEmpty","showName","showSubject","showEmbeds","showPassword","showTTL","attachFile","classicSimplifiedForm","showMarkup","refreshCatalog","cancelTimer","saved","savedMulti","password","captcha","captchaImage","refreshCaptcha","showCaptcha","captchaExpired","mod_","expandAllImages","getDownloadList","ru","odc","_l","locale","hasOwnProperty","onReady","pushTask","fn","isReady","tasks","push","ready","forEach","Array","prototype","indexOf","elt","Math","floor","ceil","len","length","from","arguments","Utf8","encode","string","String","fromCharCode","replace","c","utftext","n","charCodeAt","decode","i","c2","c3","Cookie","name","regexp","RegExp","hit","exec","document","cookie","unescape","replaceAll","value","days","expires","date","Date","setTime","getTime","toGMTString","str","to","idx","_lastActiveForm","Object","defineProperty","window","get","getClientRects","updateActiveForm","set","el","querySelectorAll","a","classList","remove","form","_findParent","add","contains","toggleFormCollapse","floating","querySelector","lastActiveForm","findClosest","selector","height","innerHeight","list","closest","map","call","rect","offset","abs","y","filter","sort","e1","e2","insert","text","breakBefore","breakAfter","textarea","start","selectionStart","end","selectionEnd","pre","substr","charBefore","charAfter","selectionRange","setSelectionRange","focus","markup","$target","istart","iend","element","find","startPos","endPos","substring","bullets","bullet","$area","val","split","newtxt","quotes","type","areaVal","tag","quote","b","v","eval","checkhighlight","match","location","toString","$","highlight","id","offTimeout","removeClass","this_board_dir","$post","parents","addClass","setTimeout","bcr","getBoundingClientRect","docHeight","documentElement","clientHeight","bottom","top","postX","scrollTop","spaceAround","scrollTo","password_length","get_password","pass","getCookie","randomString","togglePassword","passwordbox_html","html","toLowerCase","newhtml","show","set_cookie","Styles","all","titles","init","_","each","getElementsByTagName","link","getAttribute","_default","hasAttribute","custom","current","customBypass","in_array","initiated","decide","testingCSS","LSfetchJSON","title","addStyle","url","setStyle","$clink","click","ev","preventDefault","quitTest","parent","slideUp","$cancelLink","append","setCustom","sc","setDefault","change","stylename","removeBypass","addBypass","oldcookie","newcookie","brd","join","scrollAnchor","save","sheet","disabled","setAttribute","requestAnimationFrame","restore","onTest","m","capitalize","escape","$link","testStyle","pups","succ","time","confirmLongTermTest","localStorage","setItem","JSON","stringify","removeItem","HiddenItems","hideCompletely","kind","ls","lists","write","buildCSS","unhide","hide","hiddenPosts","node","updateCSS","injector","inject","isHidden","hideItem","saveList","unhideItem","hideThread","slideDown","$thread","$form","promise","done","toggleFormFloating","unhideThread","togglePost","$body","$btn","css","attr","expandthread","threadid","board","expandFrom","data","expandTo","$omitted","prependTo","HTMLoader","getThread","err","replaceWith","replyMap","showReplies","newposts","busy","options","defaults","expectedPost","silent","onError","onSuccess","timestamp","execute","task","next","replies_container","$newposts_get","$lastQrl","last","lastpost","idb","bd","insertAdjacentHTML","unreadCounter","refreshTimestamp","info","stack","shift","flyTo","dest","destBox","destX","x","width","destY","elBox","style","transformOrigin","Promise","resolve","getComputedStyle","transition","oldBox","offRight","right","innerWidth","toggle","box","newWidth","left","toggleFormRow","btn","dataset","row","rem","isRowEmpty","_originalTitle","focal","inputs","checked","trim","updateReminders","float","pinner","getParentPost","f","then","drags","mousedown","e","stopPropagation","dragsOff","prop","hidePostForm","_preview","_pinned","toggleFormSimplify","simplify","simplified","clonePostForm","anchorID","preview","boardName","getPostbox","oldForm","Captcha","enabled","state","newForm","cloneNode","innerText","blotter","onclick","uniqueId","l","newid","input","resetForm","richFileInput","initForm","maybePost","_findPrevious","matches","skip","anchor","pinned","ondragstart","ondrop","quickreply","$this","threadID","postID","fromExternalBoard","is_overboard","$preview","needInsert","_findNext","formExists","formHidden","formFloating","quotation","getPostQuotation","parentElement","insertAdjacentElement","existingForm","_getSelection","getSelection","selection","selectedText","anchorNode","getLocalSelection","sel","_isChildOf","popupMessage","content","delay","console","warn","forceEnable","captchaTimeout","addImgLoadListener","cw","onClick","bind","evt","addEventListener","onFieldClick","onload","onImageLoad","evType","onAnimationEnd","_state","s","offsetWidth","clear","refresh","ctrlKey","altKey","target","switch_lang","cColor","slice","ku_boardspath","random","img","src","formatFileSize","bytes","round","handleFiles","fromClipboard","maxfiles","slotsLeft","filesLeft","fileAttached","handleFile","fx","ns","ext","pop","allowedAllFiletypes","allowedFiletypes","fname","sizeFormatted","size","reader","FileReader","result","addFile","readAsDataURL","extra","index","store","makeGenericFileIcon","recalcForm","thisEl","updateInfo","toUpperCase","naturalWidth","naturalHeight","onerror","_ext","updateTitle","count","innerHTML","$el","hasClass","serialize","fd","fe","_this","on","$entry","toggleClass","select","item","items","clipboardData","originalEvent","arr","getAsFile","nodeName","dataTransfer","Sortable","create","animation","handle","removeAttribute","area","previousElementSibling","clearStore","hash","reverse","char","color","handleCtrlEnter","activeElement","Ajax","submitPost","redirectTo","href","sage","hcaptcha","async","response","key","actuallySubmitPost","error","shownErrors","hCaptchaResponse","alertsToRemove","clone","closeByID","showError","captchafield","showWarning","FormData","xr","XMLHttpRequest","postToken","open","action","status","res","parse","logJSONexpectedError","error_verbose","error_type","ku_cgipath","badatt","error_data","attachmenttype","position","timings","log","nokoInput","noko","thread_replyto","post_id","reload","send","reportPost","callback","forms","delform","postsReported","postErrors","success","msg","message","timerToken","postsSaved","$reply","modThread","$a","$li","$posthead","$extrabtns","prepend","makeIcon","deleteItems","has","delToken","inspectFormData","formData","entries","pair","classes","bare","addCaptchaToMenu","$menu","keydown","MediaViewer","min","postnum","imgurl","thumburl","imgw","imgh","isVideo","thumb","initZoom","createContainer","resetTransform","PostPreviews","pinPreview","thBCR","thumb_x","thumb_y","thumb_w","thumb_h","win_w","viewer","clientWidth","win_h","scaleDownFactor","pre_w","mi_w","mi_h","trans","me","_ins","createMediaElement","refreshList","currentThumb","visibility","updateCounter","showPercentage","_isVideo","setVolume","_scaleDownFactor","currentMediaItem","_realWidth","body","overflow","container","transform","findIndex","handleZoom","mouseX","clientX","mouseY","clientY","isMouseDown","handleDrag","button","ov","pointerEvents","gripX","gripY","emptyClick","isDragged","pnb","switchItem","toggleFullSize","translateX","translateY","scale","zoomAmount","minScale","zoomSteps","sign","dir","deltaY","initialScale","zSteps","z","concat","centerX","centerY","newScale","isNaN","applyTransform","flashLabel","dx","dy","initialTransX","initialTransY","parseVideo","parseImg","thumbw","thumbh","vid","volume","onvolumechange","muted","clearTimeout","flashLabelTimeout","svg","resizeFactor","offScreen","thumbBCR","transX","transY","onCollapse","underImageSrc","Element","firstElementChild","lastElementChild","nextElementSibling","expandimg_old","getElementById","fc_width","$element","$postbody","$fc_filename","Settings","expandImgFull","max_w","offset_el","offsetLeft","offsetParent","new_w","ratio","zoom","notice","createElement","textDecoration","textNode","createTextNode","appendChild","insertBefore","maxWidth","expandimg","newMediaViewer","mv","alt","newWindow","zindex","_parseLink","cl","_mouseover","isCatalog","parsedURL","parentid","postid","previewid","children","first","before","mouseleave","_mouseout","mouseover","mouseOverPreview","pageY","pageX","zIndex","cursor","getPost","ebtns","is","fadeout","nodelay","predelay","_timings","fade","pin","temporary","o","set_inputs","savedName","em","postpassword","set_delpass","event","special","load","nodeType","tagName","complete","readyState","handler","apply","trigger","jQuery","_checkbox","clicked","settingName","defaultValue","perBoard","settingNameGeneral","removeAttr","fxEnabled","changed","off","is_catalog","sfwMode","constrainWidth","hidePostBtn","endlessScroll","rswap","swap","after","setCaptchaLang","lang","offClick","readyset","isTouch","pf","chpok","LatexIT","checkgotothread","checknamesave","bnrs","processNodeInsertion","add_mob_menu","menu_show","cloud20","mouseenter","head","js","OpenLatexEditor","expandVideo","xl","animate","htm","stripHTML","ref","postnode","formBoard","postBody","qoutation","unwrapEmbed","wrapEmbed","countries","$fig","$fsz","pause","itemCount","$postnode","isOP","opmod","visible","$boundTo","ofs","offsetTop","outerHeight","outerWidth","fileid","$pn","pid","__menuProps","isFile","$md","isShown","menu","$item","$pass","$c","special_error","errors","cssLink","styleName","isTrip","resize","$fileMenu","textbox","onfocus","onblur","animationName","catalog","appendTo","trip","getJSON","formatDate","fadeIn","fail","liveupd_ena","io","updater","doubletap","bindType","delegateType","handleObj","targetData","now","delta","lastTouch","touches","origType","property","changedTouches","NTP","calc","t0","t1","t2","t3","sync","force","pending","valueOf","ajax","servertime","synced","timeWithOffset","getServerTime","externallyResolvingPromise","promiseResolve","promiseReject","reject","$node","prettyPrint","render","iv","updateTTL","srvTime","ms_left","min_left","h_left","padLeft","markOnly","clearInterval","setInterval","atLoad","audio","play","noop","newThreads","socket","connect","liveupd_api","subscribeTo","liveupd_sitename","thr","dispatch","emit","writable","configurable","token","notifyAboutNewThreads","notifyAboutNewRepliesOnBoardPage","showNewReplies","hasFocus","board_desc","new_thread_id","showNewThreads","room","repliesOnBoardPage","reply_id","refreshNewRepliesCount","$counter","clearCounter","loadNewReplies","$freshReplies","freshReplies","__alreadyLoading","$wta","insideDeletedThread","bySelf","postsDeleted","filesDeleted","fileErrors","deletedClasses","by_op","by_mod","itemtype","prev","thread_id","kumod","expandVideo_old","$mov","autoplay","movieurl","dt","uid","video","new_h","checkd","doc","navigatepages","docloc","page","docloc_trimmed","lastIndexOf","docloc_valid","relativepost","maxthreads","getElementsByName","newrelativepost","attachEvent","NodeList","parentNode","Node","root","postNum","repliesContainer","linkData","className","linkDestBoard","linkPostNum","includes","elements","dimensions","scrollY","_top","mid","elMap","parentBCR","elems","pos","relativeVisibleWidth","relativeVisibleHeight","primaryVisibility","secondaryVisibility","primaryOffset","secondaryOffset","bcrBefore","loaded","bcrAfter","scrollBy","lastTime","vendors","cancelAnimationFrame","max","currTime","timeToCall","menu_current","menu_last","dl","queue","clearQueue","menu_pin","toggle_oldmenu","mode","implementation","hasFeature","eqn","txt","atxt","extxt","r","g","replaceWithSrc","$scope","scope","normalizergb","toFixed","normalizergba","needle","haystack","opt","extend","$drag","z_idx","drg_h","drg_w","pos_y","pos_x","onMove","$iw","paddingBottom","code","iframeOptions","enccode","encodeURI","$ew","empty","isClone","fields","field","onchange","indicator","embedLinks","process","site","nextCheckbox","exp","onmouseleave","hideTimeout","onmouseenter","cms","areaID","ro","readOnly","sub","ttl","fileButton","alias","existing","styleSheet","cssText","removeChild","chars","mm","$mmw","overboard_dir","overboard_desc","cats","boards10","getBoards","b20","order","boards","cat","ix","desc","sqrt","R","allboards","toexpand","sd","sect","section","rs","rj","query","display","opts","ku_boardsfolder","reduced","bnr","path","toDisplay","randomItem","getRandomInt","array","sites","rx","fruit","conf","layout","respectStickied","expandOnHover","saveConfig","myConf","refreshBtn","sortBtns","v_d_i","pinBtns","hideBtns","layoutBtns","searchInput","$card","getEmbedThumb","currentTarget","threadIX","model","hidden","rendered","$group","build","gallery","fileTypes","image","jpgThumb","iconsAvailable","embed","authorities","short","Dow","dateLocal","dows","getDay","yy","getFullYear","mo","getMonth","Mon","mons","dd","getDate","hh","getHours","getMinutes","ss","getSeconds","entry","sortByOrder","sby","repeat","buildEntry","thumbnail_url","outerHTML","thumbnail_medium","processed","expanderBtn","playerBtn","embeds","smallThumb","file_type","ftype","thumbURL","vartype","bigThumb","isGeneric","op","repliesLabel","reply_count","last_reply","images","countersCombined","posterauthority","nameDatePriority","tripcode","poster","this_board_defaultName","dn","dateCompact","searchData","subject","buildIndicators","layouts","stickied","lock","locked","deathmark","deleted_timestamp","burger","and","indicatorsCombined","tmp","createHTMLDocument","textContent","overboard","_boards","unique","boardid","idFromName","built","lastvisits","last_ts","parseInt","dataType","valstr","$brd","loadThread","boardID","force_html_nocache","thrno","postMap","cached","threadMaps","loadPage","chunk","pageCleanUp","existingIDs","secondTry","cachedPost","range","threadMap","reduce","cachedPostboxes","pb","hcaptchaScript","firstChild","bound","onScroll","removeEventListener","scrollHeight","loader","switchFileType","exts","buildAlert","marginTop","timeout","onHold","old","ar","ae","holdOffTimeout","scheduleClose","aid","byID","cooldown","upd","cls","contentsOnly","contents","iconMap","historyToggle","destroy","defaultTimeout","container_id","pupclass","historySize","cloneDeep","junkProperty","output"],"sources":["src/kusaba.new.js"],"sourcesContent":["'use strict';\r\n\r\nvar style_cookie;\r\nvar style_cookie_txt;\r\nvar style_cookie_site;\r\nvar kumod_set=false;\r\nvar ispage;\r\nvar is_entering=false;\r\n\r\nvar _messages = {\r\n  en: {\r\n    noLocalStorage: \"Your browser does not support LocalStorage\",\r\n    oops: \"Something went wrong...\",\r\n    blankResponse: \"blank response\",\r\n    expandingThread: \"Expanding thread...\",\r\n    newThread: \"new thread\",\r\n    NewThread: \"New thread\",\r\n    replyTo: \"reply to\",\r\n    cancel: \"Cancel\",\r\n    update: \"Update\",\r\n    updatingCounts: \"Updating...\",\r\n    couldntFetch: \"Could not fetch this post\",\r\n    noNewPosts: \"No new posts\",\r\n    replies: \"Replies\",\r\n    settings_fxEnabled: \"Animation effects\",\r\n    settings_showReplies: \"Show replies inside posts\",\r\n    settings_sfwMode: \"NSFW mode\",\r\n    settings_expandImgFull: \"Expand images to full size\",\r\n    settings_constrainWidth: \"Constrain content width\",\r\n    settings_newMediaViewer: \"Experimental media viewer\",\r\n    settings_hidePostBtn: 'Post hide buttons',\r\n    settings_endlessScroll: 'Endless scrolling',\r\n    enterCaptcha: \"Please enter captcha.\",\r\n    selectText: \"Select some text\",\r\n    dcls: \"Double click to show source\",\r\n    watchOn: \"Watch on\",\r\n    captcharot: \"Captcha has rotted\",\r\n    threadUpdationAutomatically: \"Tread is being updated automatically.\",\r\n    stopFuckingDolls: \"<b>Отключите AJAX-отправку постов и AJAX-обновление треда.</b><br />(Кликните, чтобы закрыть)\",\r\n    del: \"Delete\",\r\n    delandban: \"Delete and ban\",\r\n    ban: \"Ban\",\r\n    stickthread: \"Stick thread\",\r\n    unstickthread: \"Unstick thread\",\r\n    lockthread: \"Lock thread\",\r\n    unlockthread: \"Unlock thread\",\r\n    returnDesktop: \"Switch to desktop interface\",\r\n    returnTouch: \"Switch to touch interface\",\r\n    forceDesktop: \"Force Desktop interface\",\r\n    okay: \"Okay\",\r\n    captchalang: \"Captcha language\",\r\n    reply: \"Reply\",\r\n    imageDownscaledBy: \"Image was downscaled by\",\r\n    videoDownscaledBy: \"Video was downscaled by\",\r\n    toFit: \"to feet screen\",\r\n    newReplies: \"New replies\",\r\n    newThreadsAvailable: \"New threads available.\",\r\n    loading: \"Loading\",\r\n    anonymous: \"Anonymous\",\r\n    sortBy: \"Sort by\",\r\n    bumpOrder: \"Bump order\",\r\n    lastReply: \"Last reply\",\r\n    creationDate: \"Creation date\",\r\n    replyCount: \"Reply count\",\r\n    doStick: \"Respect stickied\",\r\n    showHidden: \"Show hidden\",\r\n    doNotStick: \"Ignore stickied\",\r\n    hideHidden: \"Hide hidden\",\r\n    search: \"Search\",\r\n    threadOnPage: \"Thread is on page\",\r\n    goToThread: \"Go to thread\",\r\n    smallPics: \"Small pictures\",\r\n    largePics: \"Large pictures\",\r\n    legacyMode: \"Legacy mode\",\r\n    threads: \"Threads\",\r\n    comments: \"Replies\",\r\n    active_since: \"Active since\",\r\n    last_active: \"Last seen\",\r\n    active_on: \"Active on\",\r\n    tryAgain: \"Try again\",\r\n    xhrError: \"XHR error\",\r\n    details: \"details\",\r\n    thread: \"Thread\",\r\n    post: 'Post',\r\n    posts: \"Posts\",\r\n    deleted:'has been deleted',\r\n    deletedMulti: 'have been deleted',\r\n    report: 'Report',\r\n    reported:'has been reported',\r\n    reportedMulti: 'have been reported',\r\n    fileRemoved: 'File<br>removed.',\r\n    file: 'File',\r\n    files: 'Files',\r\n    collapse: 'Collapse',\r\n    asMod: 'as Mod',\r\n    asOP: 'as OP',\r\n    historyEmpty: 'History is empty',\r\n    noDataLoaded: 'No data was loaded',\r\n    unable_load_20: 'Unable to load 2.0 boards list',\r\n    captchaLangChanged: 'Captcha laguage changed',\r\n    found: 'Found',\r\n    links: 'Links',\r\n    selectMultiple: 'Select multiple',\r\n    selected: 'Selected',\r\n    directLink: 'Direct link',\r\n    quoteLink: 'Quote link',\r\n    maxAttNumReached: 'Attachments number limit reached.',\r\n    unsupportedFileType: 'unsupported file type',\r\n    hideName: 'Hide file name',\r\n    removeFile: 'Remove file',\r\n    spoilerOnOff: 'Spoier On/Off',\r\n    hidePost: 'Hide post',\r\n    unhidePost: 'Unhide post',\r\n    settings_hideCompletely: 'Hide items completely',\r\n    pinUnpin: 'Pin/Unpin',\r\n    hideForm: 'Hide form',\r\n    collapseExpand: 'Collapse/Expand',\r\n    notEmpty: 'Not empty',\r\n    showName: 'Show/hide name/trip field',\r\n    showSubject: 'Show/hide subject field',\r\n    showEmbeds: 'Show/hide embeds',\r\n    showPassword: 'Show/hide password field',\r\n    showTTL: 'Show/hide time-to-live field',\r\n    attachFile: 'Attach file...',\r\n    classicSimplifiedForm: 'Classic/simplified form',\r\n    showMarkup: 'Show/hide markup',\r\n    refreshCatalog: 'Refresh catalog',\r\n    cancelTimer: 'Cancel timer',\r\n    saved:'saved from deletion',\r\n    savedMulti: 'saved from deletion',\r\n    password: 'Password',\r\n    captcha: 'Captcha',\r\n    captchaImage: 'Captcha image',\r\n    refreshCaptcha: 'Refresh captcha',\r\n    showCaptcha: 'Show captcha',\r\n    captchaExpired: 'Captcha has expired.',\r\n    mod_: 'Mod.',\r\n    expandAllImages: 'Expand all images',\r\n    getDownloadList: 'Get media download list'\r\n  },\r\n  ru: {\r\n    noLocalStorage: \"localStorage не поддерживается браузером\",\r\n    oops: \"Что-то пошло не так...\",\r\n    blankResponse: \"пустой ответ\",\r\n    expandingThread: \"Разворачиваем тред...\",\r\n    newThread: \"новый тред\",\r\n    NewThread: \"Создать тред\",\r\n    replyTo: \"ответ на\",\r\n    cancel: \"Отмена\",\r\n    update: \"Обновить\",\r\n    updatingCounts: \"Ищем новые посты...\",\r\n    couldntFetch: \"Не удалось загрузить этот пост\",\r\n    noNewPosts: \"Нет новых постов\",\r\n    replies: \"Ответы\",\r\n    settings_fxEnabled: \"Анимированные эффекты\",\r\n    settings_showReplies: \"Показывать ответы внутри поста\",\r\n    settings_sfwMode: \"Мамка в комнате\",\r\n    settings_expandImgFull: \"Разворачивать картинки до исходного размера\",\r\n    settings_constrainWidth: \"Ограничивать ширину контента\",\r\n    settings_newMediaViewer: \"Экспериментальный просмотрщик медиа\",\r\n    settings_hidePostBtn: 'Кнопки скрытия постов',\r\n    settings_endlessScroll: 'Бесконечная прокрутка',\r\n    enterCaptcha: \"Пожалуйста, введите капчу.\",\r\n    selectText: \"Текст не выделен\",\r\n    dcls: \"Double click to show source\",\r\n    watchOn: \"Смотреть на\",\r\n    odc: \"javascript:LatexIT.replaceWithSrc(this);\",\r\n    captcharot: \"Капча протухла\",\r\n    threadUpdationAutomatically: \"Тред обновляется автоматически\",\r\n    stopFuckingDolls: \"<b>Отключите AJAX-отправку постов и AJAX-обновление треда.</b><br />(Кликните, чтобы закрыть)\",\r\n    del: \"Удалить\",\r\n    delandban: \"Удалить и забанить\",\r\n    ban: \"Забанить\",\r\n    stickthread: \"Прикрепить тред\",\r\n    unstickthread: \"Отлепить тред\",\r\n    lockthread: \"Закрыть тред\",\r\n    unlockthread: \"Открыть тред\",\r\n    returnDesktop: \"Переключиться на десктопный интерфейс\",\r\n    returnTouch: \"Переключиться на тач-интерфейс\",\r\n    forceDesktop: \"Force Desktop interface\",\r\n    okay: \"Ясно\",\r\n    captchalang: \"Язык капчи\",\r\n    reply: \"Ответить\",\r\n    imageDownscaledBy: \"Картинка ужата на\",\r\n    videoDownscaledBy: \"Видео ужато на\",\r\n    toFit: \"по размеру окна\",\r\n    newReplies: \"Новых ответов\",\r\n    newThreadsAvailable: \"Доступны новые треды.\",\r\n    loading: \"Загружаем\",\r\n    anonymous: \"Аноним\",\r\n    sortBy: \"Сортировать по\",\r\n    bumpOrder: \"бампам\",\r\n    lastReply: \"дате ответов\",\r\n    creationDate: \"дате создания\",\r\n    replyCount: \"числу ответов\",\r\n    doStick: \"Прикреплять\",\r\n    showHidden: \"Показывать скрытые\",\r\n    doNotStick: \"Не прикреплять\",\r\n    hideHidden: \"Скрывать скрытые\",\r\n    search: \"Поиск\",\r\n    threadOnPage: \"Тред располагается на странице\",\r\n    goToThread: \"Перейти в тред\",\r\n    smallPics: \"Мелкие картинки\",\r\n    largePics: \"Большие картинки\",\r\n    legacyMode: \"Олдфажный режим\",\r\n    threads: \"Тредов\",\r\n    comments: \"Ответов\",\r\n    active_since: \"Присоединился\",\r\n    last_active: \"Был активен\",\r\n    active_on: \"Активен на\",\r\n    tryAgain: \"Попробовать снова\",\r\n    xhrError: \"Ошибка XHR\",\r\n    details: \"подробности\",\r\n    thread: \"Тред\",\r\n    post: 'Пост',\r\n    posts: 'Посты',\r\n    deleted:'удален',\r\n    deletedMulti: 'удалены',\r\n    report: 'Пожаловаться',\r\n    reported:': жалоба отправлена',\r\n    reportedMulti: ': жалобы отправлены',\r\n    fileRemoved: 'Файл<br>удален.',\r\n    file: 'Файл',\r\n    files: 'Файлы',\r\n    collapse: 'Свернуть',\r\n    asMod: 'от лица модератора',\r\n    asOP: 'от лица ОПа',\r\n    historyEmpty: 'История пуста',\r\n    noDataLoaded: 'Данные не загружены',\r\n    unable_load_20: 'Unable to load 2.0 boards list',\r\n    captchaLangChanged: 'Язык капчи изменен',\r\n    found: 'Найдено',\r\n    links: 'Ссылки',\r\n    selectMultiple: 'Выбрать несколько',\r\n    selected: 'Выбрано',\r\n    directLink: 'Прямая ссылка на пост',\r\n    quoteLink: 'Ссылка для цитирования',\r\n    maxAttNumReached: 'Превышено допустимое число вложений.',\r\n    unsupportedFileType: 'недопустимый тип файла',\r\n    hideName: 'Скрыть имя файла',\r\n    removeFile: 'Удалить файл',\r\n    spoilerOnOff: 'Спойлер Вкл/Выкл',\r\n    hidePost: 'Скрыть пост',\r\n    unhidePost: 'Раскрыть пост',\r\n    settings_hideCompletely: 'Скрывать треды и посты полностью',\r\n    pinUnpin: 'Прикрепить/Открепить',\r\n    hideForm: 'Скрыть форму',\r\n    collapseExpand: 'Свернуть/Развернуть',\r\n    notEmpty: 'Содержит данные',\r\n    showName: 'Показать/скрыть поле имени',\r\n    showSubject: 'Показать/скрыть поле темы',\r\n    showEmbeds: 'Показать/скрыть вложения',\r\n    showPassword: 'Показать/скрыть поле ввода пароля',\r\n    showTTL: 'Показать/скрыть время жизни',\r\n    attachFile: 'Прикрепить файл...',\r\n    classicSimplifiedForm: 'Упрощенная/классическая форма',\r\n    showMarkup: 'Показать/скрыть разметку',\r\n    refreshCatalog: 'Обновить каталог',\r\n    cancelTimer: 'Отменить таймер',\r\n    saved:'спасен от удаления',\r\n    savedMulti: 'спасены от удаления',\r\n    password: 'Пароль',\r\n    captcha: 'Captcha',\r\n    captchaImage: 'Captcha image',\r\n    refreshCaptcha: 'Обновить капчу',\r\n    showCaptcha: 'Показать капчу',\r\n    captchaExpired: 'Капча протухла.',\r\n    mod_: 'Мод.',\r\n    expandAllImages: 'Развернуть все картинки',\r\n    getDownloadList: 'Список медиа для скачивания'\r\n  }\r\n}\r\nvar _l = (typeof locale !== 'undefined' && _messages.hasOwnProperty(locale)) ? _messages[locale] : _messages.ru;\r\n\r\nvar onReady = {\r\n  pushTask: function(fn) {\r\n    if (this.isReady)\r\n      fn()\r\n    else\r\n      this.tasks.push(fn)\r\n  },\r\n  tasks: [],\r\n  ready: function() {\r\n    this.isReady = true\r\n    this.tasks.forEach(fn=>fn())\r\n  }\r\n}\r\n\r\n/* IE/Opera fix, because they need to go learn a book on how to use indexOf with arrays */ // Is this still relevant tho?\r\nif (!Array.prototype.indexOf) {\r\n  Array.prototype.indexOf = function(elt /*, from*/) {\r\n  var len = this.length;\r\n\r\n  var from = Number(arguments[1]) || 0;\r\n  from = (from < 0)\r\n     ? Math.ceil(from)\r\n     : Math.floor(from);\r\n  if (from < 0)\r\n    from += len;\r\n\r\n  for (; from < len; from++) {\r\n    if (from in this &&\r\n      this[from] === elt)\r\n    return from;\r\n  }\r\n  return -1;\r\n  };\r\n}\r\n\r\n/* Utf8 strings de-/encoder */\r\nvar Utf8 = {\r\n  // public method for url encoding\r\n  encode : function (string) {\r\n    string = string.replace(/\\r\\n/g,\"\\n\");\r\n    var utftext = \"\";\r\n    for (var n = 0; n < string.length; n++) {\r\n      var c = string.charCodeAt(n);\r\n      if (c < 128) {\r\n        utftext += String.fromCharCode(c);\r\n      }\r\n      else if((c > 127) && (c < 2048)) {\r\n        utftext += String.fromCharCode((c >> 6) | 192);\r\n        utftext += String.fromCharCode((c & 63) | 128);\r\n      }\r\n      else {\r\n        utftext += String.fromCharCode((c >> 12) | 224);\r\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n        utftext += String.fromCharCode((c & 63) | 128);\r\n      }\r\n    }\r\n    return utftext;\r\n  },\r\n  // public method for url decoding\r\n  decode : function (utftext) {\r\n    var string = \"\", i = 0, c = 0, c1 = 0, c2 = 0, c3 = 0\r\n    while ( i < utftext.length ) {\r\n      c = utftext.charCodeAt(i);\r\n      if (c < 128) {\r\n        string += String.fromCharCode(c);\r\n        i++;\r\n      }\r\n      else if((c > 191) && (c < 224)) {\r\n        c2 = utftext.charCodeAt(i+1);\r\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n        i += 2;\r\n      }\r\n      else {\r\n        c2 = utftext.charCodeAt(i+1);\r\n        c3 = utftext.charCodeAt(i+2);\r\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        i += 3;\r\n      }\r\n    }\r\n    return string;\r\n  }\r\n}\r\n\r\nfunction Cookie(name) {\r\n  if (arguments.length == 1) {\r\n    // with(document.cookie) {\r\n      var regexp=new RegExp(\"(^|;\\\\s+)\"+name+\"=(.*?)(;|$)\");\r\n      var hit=regexp.exec(document.cookie);\r\n      if(hit&&hit.length>2) return Utf8.decode(unescape(replaceAll(hit[2],'+','%20')));\r\n      else return '';\r\n    // }\r\n  } else {\r\n    var value = arguments[1]\r\n    , days = arguments[2]\r\n    , expires=\"\"\r\n    if(days) {\r\n      var date=new Date();\r\n      date.setTime(date.getTime()+(days*24*60*60*1000));\r\n      expires=\"; expires=\"+date.toGMTString();\r\n    }\r\n    document.cookie=name+\"=\"+value+expires+\"; path=/\";\r\n  }\r\n}\r\n\r\nfunction replaceAll(str, from, to) {\r\n  var idx = str.indexOf( from );\r\n  while ( idx > -1 ) {\r\n    str = str.replace( from, to );\r\n    idx = str.indexOf( from );\r\n  }\r\n  return str;\r\n}\r\n\r\nvar _lastActiveForm = false\r\nObject.defineProperty(window, 'lastActiveForm', {\r\n  get: function() {\r\n    if (!_lastActiveForm || !_lastActiveForm.getClientRects().length) {\r\n      updateActiveForm()\r\n    }\r\n    return _lastActiveForm\r\n  },\r\n  set: function(el) {\r\n    document.querySelectorAll('.qrf-active').forEach(a => a.classList.remove('qrf-active'))\r\n    if (el) {\r\n      let form = el._findParent('form') // _findParent retuns element itself if in matches the selector\r\n      form.classList.add('qrf-active')\r\n      if (form.classList.contains('collapsed')) {\r\n        toggleFormCollapse(form, false/*← uncollapse*/, false/*← no focus*/)\r\n      }\r\n      _lastActiveForm  = form\r\n    }\r\n    else\r\n      _lastActiveForm = false\r\n  }\r\n})\r\nfunction updateActiveForm() {\r\n  let floating = document.querySelector('.qrf-floating:not(.collapsed)')\r\n  if (floating) {\r\n    lastActiveForm = floating\r\n    return\r\n  }\r\n  lastActiveForm = findClosest('.qrf-floating.collapsed, .quick-reply-form textarea')\r\n  return\r\n}\r\n\r\nfunction findClosest(selector) {\r\n  let height = window.innerHeight\r\n  , hh = height / 2\r\n  , list = document.querySelectorAll(selector)\r\n  if (!list) return false\r\n  let closest = [].map.call(list, el => {\r\n    let rect = el.getClientRects()\r\n    , offset = rect.length\r\n      ? Math.abs(hh - (rect[0].y + rect[0].height/2))\r\n      : null\r\n    return { el: el, offset: offset }\r\n  })\r\n  .filter(a => a.offset !== null)\r\n  .sort((e1, e2) => e1.offset < e2.offset ? -1 : 1)\r\n  return closest.length ? closest[0].el : false\r\n}\r\n\r\nfunction insert(text, breakBefore=true, breakAfter=true) {\r\n  let form = lastActiveForm || document.querySelector('#postform')\r\n  , textarea = form && form.querySelector('textarea')\r\n  if(textarea) {\r\n    if (form.classList.contains('collapsed')) {\r\n      toggleFormCollapse(form, false/*← uncollapse*/, false/*← no focus*/)\r\n    }\r\n    let start = textarea.selectionStart\r\n    , end = textarea.selectionEnd\r\n    , pre = textarea.value.substr(0,start)\r\n    , post = textarea.value.substr(end)\r\n    , charBefore = pre[pre.length-1]\r\n    , charAfter = post[0]\r\n    if (breakBefore && text[0] !== \"\\n\" && charBefore && charBefore !== \"\\n\")\r\n      text = \"\\n\"+text\r\n    if (breakAfter && text[text.length-1] !== \"\\n\" && charAfter !== \"\\n\")\r\n      text += \"\\n\"\r\n    let selectionRange = start + text.length\r\n    textarea.value = pre + text + post\r\n    textarea.setSelectionRange(selectionRange, selectionRange)\r\n    textarea.focus()\r\n  }\r\n}\r\n\r\nfunction markup($target, start, end, istart, iend) {\r\n  let element = $target.find('textarea').get(0);\r\n  if (element.selectionStart || element.selectionStart == '0') {\r\n    element.focus();\r\n    let startPos = element.selectionStart\r\n    , endPos = element.selectionEnd\r\n    , selected = element.value.substring(startPos, endPos);\r\n    if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\r\n      start = istart; end = iend;\r\n    }\r\n    element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + end + element.value.substring(endPos, element.value.length);\r\n  } else {\r\n    element.value += start + end;\r\n  }\r\n}\r\n\r\nfunction bullets($target, bullet, istart, iend) {\r\n  let $area = $target.find('textarea')\r\n  , element = $area[0]\r\n  , startPos = element.selectionStart\r\n  , endPos = element.selectionEnd\r\n  , selected = $area.val().substring(startPos, endPos)\r\n  if(!~selected.indexOf('\\n') && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\r\n    element.value = element.value.substring(0, startPos) + istart + element.value.substring(startPos, endPos) + iend + element.value.substring(endPos, element.value.length);\r\n  }\r\n  else {\r\n    selected = $area.val().substring(startPos, endPos).split('\\n');\r\n    var newtxt = \"\";\r\n    for(var i=0; i<selected.length; i++) {\r\n      newtxt += (bullet + selected[i]);\r\n      if(i < (selected.length - 1)) newtxt += '\\n';\r\n    }\r\n    $area.val(\r\n      $area.val().substring(0, startPos)\r\n      + newtxt +\r\n      $area.val().substring(endPos)\r\n    );\r\n  }\r\n}\r\n\r\nfunction quotes($target, type) {\r\n  let $area = $target.find('textarea')\r\n  , areaVal = $area.val()\r\n  , element = $area[0]\r\n  , startPos = element.selectionStart\r\n  , endPos = element.selectionEnd\r\n  , selected = areaVal.substring(startPos, endPos)\r\n  , newtxt = \"\"\r\n  if (~selected.indexOf('\\n')) { // multiline quoting\r\n    selected = areaVal.substring(startPos, endPos).split('\\n')\r\n    for(var i=0; i<selected.length; i++) {\r\n      let bullet = (type=='g') ? '>'\r\n        : (type=='r') ? '<'\r\n          : (i%2) ? '<'\r\n            : '>'\r\n      newtxt += (bullet + ' ' + selected[i])\r\n      if(i < (selected.length - 1)) newtxt += '\\n'\r\n    }\r\n  }\r\n  else { // inline quoting\r\n    let tag = type=='r' ? 'rq' : 'q'\r\n    newtxt = `[${tag}]${selected}[/${tag}]`\r\n  }\r\n  element.value =\r\n    areaVal.substring(0, startPos)\r\n    + newtxt +\r\n    areaVal.substring(endPos)\r\n}\r\n\r\nfunction quote(b, a) {\r\n  var v = eval(\"document.\" + a + \".message\");\r\n  v.value += \">>\" + b + \"\\n\";\r\n  v.focus();\r\n}\r\n\r\nfunction checkhighlight() {\r\n  var match;\r\n  if(match=/#i([0-9]+)/.exec(document.location.toString()))\r\n    if(!$('#postform textarea').val())\r\n      insert(\">>\"+match[1]);\r\n  if(match=/#([0-9]+)/.exec(document.location.toString()))\r\n    highlight(match[1]);\r\n}\r\n\r\nfunction highlight(id, offTimeout=5000) {\r\n  $('.highlight').removeClass('highlight');\r\n  if (!(''+id).split('-')[1])\r\n    id += '-'+this_board_dir\r\n  let $post = $(`#postbody${id}`).parents('.reply')\r\n  if (!$post.length) return false;\r\n  let post = $post[0]\r\n  $post.addClass('highlight');\r\n  if (offTimeout) {\r\n    setTimeout(() => $post.removeClass('highlight'), offTimeout)\r\n  }\r\n  // Scroll to post\r\n  let bcr = post.getBoundingClientRect()\r\n  , docHeight = document.documentElement.clientHeight\r\n  if (bcr.bottom > docHeight || bcr.top < 0) {\r\n    let postX = bcr.top + document.documentElement.scrollTop\r\n    , spaceAround = docHeight - bcr.height\r\n    window.scrollTo(0, postX - (spaceAround ? Math.ceil(spaceAround/2) : 0))\r\n  }\r\n  return true\r\n}\r\n\r\nconst password_length = 20;\r\n\r\nfunction get_password(name) {\r\n  let pass = getCookie(name);\r\n  if(pass) return pass;\r\n  pass = randomString(password_length)\r\n  Cookie(name, pass, 365);\r\n  return(pass);\r\n}\r\n\r\nfunction togglePassword() {\r\n  var passwordbox_html = $(\"#passwordbox\").html().toLowerCase();\r\n  var newhtml = '<td></td><td></td>';\r\n  if (passwordbox_html == newhtml) {\r\n    newhtml = '<td class=\"postblock\">Mod</td><td><input type=\"text\" name=\"modpassword\" size=\"28\" maxlength=\"75\">&nbsp;<acronym title=\"Display staff status (Mod/Admin)\">D</acronym>:&nbsp;<input type=\"checkbox\" name=\"displaystaffstatus\" checked>&nbsp;<acronym title=\"Lock\">L</acronym>:&nbsp;<input type=\"checkbox\" name=\"lockonpost\">&nbsp;&nbsp;<acronym title=\"Sticky\">S</acronym>:&nbsp;<input type=\"checkbox\" name=\"stickyonpost\">&nbsp;&nbsp;<acronym title=\"Raw HTML\">RH</acronym>:&nbsp;<input type=\"checkbox\" name=\"rawhtml\">&nbsp;&nbsp;<acronym title=\"Name\">N</acronym>:&nbsp;<input type=\"checkbox\" name=\"usestaffname\"></td>';\r\n  }\r\n  $(\"#passwordbox\").html(newhtml).show();\r\n  return false;\r\n}\r\n\r\n// proxied functions\r\nfunction getCookie(name)                {   return Cookie(name)                     }\r\nfunction set_cookie(name,value,days)    {   return Cookie(name,value,days)          }\r\n\r\nvar Styles = {\r\n  all: [], titles: [],\r\n  init: function() {\r\n    _.each(document.getElementsByTagName(\"link\"), function(link) {\r\n      if(link.getAttribute(\"rel\").indexOf(\"style\")!=-1 && link.getAttribute(\"title\")) {\r\n        this.all.push(link);\r\n        this.titles.push(link.getAttribute(\"title\"));\r\n        if(link.getAttribute(\"rel\").indexOf(\"alternate\")===-1) {\r\n          this._default = link.getAttribute(\"title\");\r\n        }\r\n        if(link.hasAttribute(\"data-custom\")) {\r\n          this.custom = link.getAttribute(\"title\");\r\n        }\r\n      }\r\n    }, this);\r\n    this.current = this._default;\r\n    var customBypass = getCookie('bypasscustom');\r\n    this.customBypass = (customBypass.length && typeof this_board_dir !== 'undefined' && in_array(this_board_dir, customBypass.split('|'))) ? true : false;\r\n    this.initiated = true\r\n  },\r\n  decide: function() {\r\n    this.init();\r\n    var testingCSS = LSfetchJSON('testing-css')\r\n    if(testingCSS) {\r\n      let title = this.addStyle(testingCSS.url, testingCSS.title)\r\n      this.setStyle(title)\r\n      var $clink = $('<a href=\"#\">Отключить тестирование '+title+'.css</a>')\r\n      $clink.click(function(ev) {\r\n        ev.preventDefault()\r\n        Styles.quitTest()\r\n        $(this).parent().slideUp()\r\n      })\r\n      this.$cancelLink = $('<div style=\"font-weight: bold\"></div>').append($clink)\r\n      return\r\n    }\r\n    if(this.hasOwnProperty('custom') && !this.customBypass)\r\n      return this.setCustom();\r\n    var sc = getCookie(style_cookie);\r\n    if(sc && in_array(sc, this.titles))\r\n      this.setStyle(sc);\r\n    else {\r\n      this.setDefault();\r\n      set_cookie(\"kustyle_site\",this._default,365);\r\n      set_cookie(\"kustyle\",this._default,365);\r\n    }\r\n  },\r\n  change: function(stylename) {\r\n    if(!in_array(stylename, this.titles) || this.current === stylename) return;\r\n    this.setStyle(stylename);\r\n    if(this.hasOwnProperty('custom') && this.custom === stylename) {\r\n      this.removeBypass();\r\n    }\r\n    else {\r\n      if(this.hasOwnProperty('custom'))\r\n        this.addBypass();\r\n      set_cookie(\"kustyle_site\",stylename,365);\r\n      set_cookie(\"kustyle\",stylename,365);\r\n    }\r\n  },\r\n  removeBypass: function() {\r\n    if(!this.customBypass || typeof this_board_dir === 'undefined') return;\r\n    this.customBypass = false;\r\n    var oldcookie = getCookie('bypasscustom').split('|'), newcookie = [];\r\n    _.each(oldcookie, function(brd) {\r\n      if(brd !== this_board_dir) newcookie.push(brd);\r\n    });\r\n    newcookie = newcookie.length ? newcookie.join('|') : '';\r\n    set_cookie(\"bypasscustom\",newcookie,365);\r\n  },\r\n  addBypass: function() {\r\n    if(this.customBypass || typeof this_board_dir === 'undefined') return;\r\n    this.customBypass = true;\r\n    var cookie = getCookie('bypasscustom').split('|');\r\n    if(!in_array(this_board_dir, cookie)) {\r\n      cookie.push(this_board_dir);\r\n      set_cookie(\"bypasscustom\",cookie.join('|'),365);\r\n    }\r\n  },\r\n  setDefault: function() {\r\n    if(this.hasOwnProperty('_default') && this.current !== this._default)\r\n      this.setStyle(this._default);\r\n  },\r\n  setCustom: function() {\r\n    if(this.hasOwnProperty('custom'))\r\n      this.setStyle(this.custom);\r\n  },\r\n  setStyle: function(stylename) {\r\n    if(!in_array(stylename, this.titles)) return;\r\n    if (scrollAnchor && scrollAnchor.save)\r\n      scrollAnchor.save('setstyle', '.postnode')\r\n    _.each(this.all, function(sheet) {\r\n      sheet.disabled=true;\r\n      sheet.setAttribute('rel', 'alternate stylesheet')\r\n    })\r\n    _.each(this.all, function(sheet) {\r\n      if(sheet.getAttribute(\"title\") === stylename) {\r\n        requestAnimationFrame(() => {\r\n          sheet.disabled=false;\r\n          sheet.setAttribute('rel', 'stylesheet')\r\n        })\r\n      }\r\n    })\r\n    if (scrollAnchor && scrollAnchor.restore)\r\n      scrollAnchor.restore('setstyle')\r\n    this.current = stylename;\r\n  },\r\n  onTest: null,\r\n  addStyle: function(url, title='') {\r\n    if (! title) {\r\n      let m = /(?:.+\\/)?(.+)\\.css/i.exec(url)\r\n      if(!m) return;\r\n      title = m[1]\r\n    }\r\n    title = _.capitalize(_.escape(title))\r\n    if(!in_array(title, this.titles)) {\r\n      var $link = $('<link rel=\"stylesheet\" type=\"text/css\" href=\"'+url+'\" title=\"'+title+'\" disabled>')\r\n      $('head').append($link);\r\n      this.titles.push(title)\r\n      this.all.push($link[0])\r\n    }\r\n    return title\r\n  },\r\n  testStyle: function(url, title) {\r\n    title = this.addStyle(url, title)\r\n    this.setStyle(title)\r\n    this.onTest = {\r\n      url: url,\r\n      title: title\r\n    }\r\n    pups.succ(`Установлен стиль ${title}.\r\n      <div class=\"styletest-form\">\r\n        <button onclick=\"Styles.confirmLongTermTest()\">OK</button>\r\n        <button onclick=\"Styles.quitTest()\">${_l.cancel}</button>\r\n      </div>`, {time: 0, save: true})\r\n  },\r\n  confirmLongTermTest: function() {\r\n    if(this.onTest)\r\n      localStorage.setItem('testing-css', JSON.stringify(this.onTest))\r\n  },\r\n  quitTest: function() {\r\n    localStorage.removeItem('testing-css')\r\n    this.decide()\r\n  }\r\n}\r\nif(style_cookie) Styles.decide();\r\n\r\nvar HiddenItems = {\r\n  init: function() {\r\n    this.hideCompletely = localStorage['hideCompletely.'+this_board_dir]=='true'\r\n    ;['posts', 'threads'].forEach(kind => {\r\n      let ls = localStorage[`hidden${_.capitalize(kind)}`]\r\n      , list = ls ? ls.split(',').filter(a => a) : []\r\n      this.lists[kind] = list\r\n    })\r\n    document.write(`<style id=\"injector:hideitems\">${this.buildCSS()}</style>`)\r\n  },\r\n  buildCSS: function() {\r\n    let unhide = [], hide = [], hiddenPosts = []\r\n    ;['posts', 'threads'].forEach(kind => {\r\n      this.lists[kind].forEach(id => {\r\n        if (kind==\"posts\") {\r\n          let node = `#postnode${id}`\r\n          hiddenPosts.push(node)\r\n          if (this.hideCompletely)\r\n            hide.push(node)\r\n          else\r\n            hide.push(`#postbody${id}`)\r\n        }\r\n        else if(ispage) {\r\n          hide.push(`#thread${id}`)\r\n          if (this.hideCompletely) {\r\n            hide.push(`#unhidethread${id}`)\r\n            hide.push(`#thread${id} + br`)\r\n            hide.push(`#thread${id} + br + hr`)\r\n          }\r\n          else {\r\n            unhide.push(`#unhidethread${id}`)\r\n          }\r\n        }\r\n      })\r\n    })\r\n    if (hiddenPosts.length) {\r\n      onReady.pushTask(() => {\r\n        $(hiddenPosts.join(',')).addClass('post-hidden')\r\n      })\r\n    }\r\n    return (hide.length ? hide.join(',') + '{ display: none }' : '') +\r\n      (unhide.length ? unhide.join(',') + '{ display: inline-block }' : '')\r\n  },\r\n  updateCSS: function() {\r\n    injector.inject('hideitems', this.buildCSS())\r\n  },\r\n  hideCompletely: false,\r\n  lists: {},\r\n  isHidden: function(kind, id) {\r\n    return this.lists[kind+'s'].indexOf(id.toString()) != -1 \r\n  },\r\n  hideItem: function(kind, id) {\r\n    if (this.isHidden(kind, id)) return;\r\n    this.lists[kind+'s'].push(id)\r\n    this.saveList(kind)\r\n  },\r\n  unhideItem: function(kind, id) {\r\n    if (!this.isHidden(kind, id)) return;\r\n    this.lists[kind+'s'] = this.lists[kind+'s'].filter(a => a!=id)\r\n    this.saveList(kind)\r\n  },\r\n  hideThread: function(id, inCatalog=false) {\r\n    this.hideItem('thread', id)\r\n    $('#unhidethread' + id).slideDown()\r\n    let $thread = $('#thread' + id)\r\n    , $form = $thread.find('.qrf-floating')\r\n    $thread.slideUp().promise().done(updateActiveForm)\r\n    if ($form.length)\r\n      toggleFormFloating($form[0], false /* ← float=off*/, false /* ← no focus*/)\r\n  },\r\n  unhideThread: function(id, inCatalog=false) {\r\n    this.unhideItem('thread', id)\r\n    $('#thread' + id).slideDown()\r\n    $('#unhidethread' + id).slideUp()\r\n  },\r\n  hidePost: function(id) {\r\n    this.hideItem('post', id)\r\n    $('#postbody' + id).slideUp('fast')\r\n  },\r\n  unhidePost: function(id) {\r\n    this.unhideItem('post', id)\r\n    $('#postbody' + id).slideDown('fast')\r\n  },\r\n  togglePost: function(id) {\r\n    let $body = $('#postbody' + id)\r\n    , $btn = $body.parent().find('.hide-post-btn')\r\n    if ($body.css('display') == 'none') {\r\n      this.unhidePost(id)\r\n      $btn.attr('title', _l.hidePost)\r\n      .find('use').attr('xlink:href', '#i-hide')\r\n    }\r\n    else {\r\n      this.hidePost(id)\r\n      $btn.attr('title', _l.unhidePost)\r\n      .find('use').attr('xlink:href', '#i-unhide')\r\n    }\r\n  },\r\n  saveList: function(kind) {\r\n    localStorage[`hidden${_.capitalize(kind)}s`] = this.lists[kind+'s'].join(',')\r\n  }\r\n}\r\nHiddenItems.init()\r\n\r\nfunction expandthread(threadid, board, ev) {\r\n  ev.preventDefault()\r\n  let $thread = $(`#thread${threadid}-${board}`)\r\n  if ($thread.length) {\r\n    let expandFrom = + $thread.find('.postnode.op').data('id')\r\n    , expandTo = + $thread.find('.postnode:not(.op):first').data('id')\r\n    , $omitted = $thread.find('.omittedposts')\r\n    $omitted.find('a').hide()\r\n    if (! $omitted.find('span').length) {\r\n      $(`<div class=\"spinner\"></div><span>${_l.loading}...</span>`).prependTo($omitted)\r\n    }\r\n    else {\r\n      $omitted.find('.spinner').show()\r\n    }\r\n    HTMLoader.getThread(board, +threadid, [expandFrom, expandTo], (err, posts) => {\r\n      if (posts) {\r\n        $thread.find('.omittedposts').replaceWith(posts)\r\n        replyMap.showReplies()\r\n      }\r\n      else {\r\n        setTimeout(() => $omitted.find('.spinner').hide(), 1000)\r\n        $omitted.find('span').text(_l.oops + (err !== false ? ` (${err})` : ''))\r\n        $omitted.find('a').text(_l.tryAgain).show()\r\n      }\r\n    })\r\n  }\r\n  return false;\r\n}\r\n\r\nvar newposts = {\r\n  busy: false,\r\n  get: function(options={}) {\r\n    options = _.defaults(options, {\r\n      threadid: null,\r\n      expectedPost: null,\r\n      silent: false,\r\n      onError: err => pups.err(`Error geting new posts (${err})`),\r\n      onSuccess: null,\r\n      timestamp: null\r\n    })\r\n    if (!options.threadid) {\r\n      if (ispage)\r\n        return options.onError()\r\n      options.threadid = +$('input[name=replythread]').val()\r\n    }\r\n    this.pushTask(options)\r\n    return false\r\n  },\r\n  execute: function(task) {\r\n    this.busy = true\r\n    let threadid = ''+task.threadid\r\n    , expectedPost = task.expectedPost\r\n    , onError = err => {\r\n      this.next()\r\n      task.onError(err)\r\n    }\r\n    if (!threadid.split('-')[1])\r\n      threadid += '-'+this_board_dir\r\n    let replies_container, $newposts_get\r\n    if (!ispage) {\r\n      $newposts_get = $('#newposts_get')\r\n      $newposts_get.removeClass('upd-counting').addClass('upd-updating')\r\n      replies_container = document.querySelector('.replies')\r\n    }\r\n    else {\r\n      replies_container = document.querySelector(`#thread${threadid} .replies`)\r\n      if (!replies_container) return onError('No replies container!');\r\n    }\r\n    // If post is already there, skip the entire thing\r\n    if (expectedPost && highlight(expectedPost)) {\r\n      $newposts_get.removeClass('upd-updating')\r\n      this.next()\r\n      return\r\n    }\r\n    let $lastQrl = $(`.qrl[data-parent=\"${threadid}\"]`).last()\r\n    , lastpost = ($lastQrl.data('postnum') || $lastQrl.data('parent'))+''\r\n    if (! lastpost) return onError();\r\n    let idb = threadid.split('-')\r\n    , id = idb[0], bd = idb[1]\r\n    HTMLoader.getThread(bd, id, [+(lastpost.split('-')[0]),Infinity], (err, posts) => {\r\n      if (!ispage) {\r\n        $newposts_get.removeClass('upd-updating')\r\n      }\r\n      if (posts) {\r\n        replies_container.insertAdjacentHTML('beforeend', posts)\r\n        replyMap.showReplies()\r\n        unreadCounter.refreshTimestamp(task.timestamp || null, bd)\r\n        if (task.onSuccess)\r\n          task.onSuccess()\r\n      }\r\n      else {\r\n        if (!task.silent) {\r\n          pups.info(posts === '' ? _l.noNewPosts : _l.oops + (err !== false ? ` (${err})` : ''), {time: 1})\r\n        }\r\n      }\r\n      if (expectedPost && !highlight(expectedPost)) {\r\n        return onError('No target reply!');\r\n      }\r\n      this.next()\r\n    }, false, true)\r\n  },\r\n  pushTask: function(task) {\r\n    if (this.busy)\r\n      this.stack.push(task)\r\n    else\r\n      this.execute(task)\r\n  },\r\n  next: function() {\r\n    let next = this.stack.shift()\r\n    if (next)\r\n      this.execute(next)\r\n    else\r\n      this.busy = false\r\n  }, \r\n  stack: []\r\n}\r\n\r\n// Hiding animation\r\nfunction flyTo(el, dest) {\r\n  let destBox = dest.getBoundingClientRect()\r\n  , destX = destBox.x + (destBox.width / 2)\r\n  , destY = destBox.y + (destBox.height / 2)\r\n  , elBox = el.getBoundingClientRect()\r\n  el.style.transformOrigin = `${(destX - elBox.x) + 'px'} ${(destY - elBox.y) + 'px'}`\r\n  el.classList.add('fly-to-zero')\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      el.classList.remove('fly-to-zero')\r\n      el.style.transformOrigin = null\r\n      resolve(el)\r\n    }, (+getComputedStyle(el).transition.match(/transform ([0-9\\.]+)/)[1] * 1000) + 100 )\r\n  })\r\n}\r\n\r\nfunction toggleFormCollapse(form, collapse = !form.classList.contains('collapsed'), focus = !collapse) {\r\n  let oldBox = form.getBoundingClientRect()\r\n  , offRight = oldBox.right - (window.innerWidth - 32)\r\n  form.classList.toggle('collapsed', collapse)\r\n  let box = form.getBoundingClientRect()\r\n  , newWidth = box.width\r\n  form.style.left = \r\n    box.left \r\n    + (oldBox.width - newWidth) \r\n    - (offRight > 0 ? offRight : 0) \r\n    + 'px'\r\n  form.querySelector('.collapser').classList.toggle('collapsed', collapse)\r\n  if (focus) {\r\n    form.querySelector('textarea').focus()\r\n  }\r\n}\r\n\r\nfunction toggleFormRow(form, btn) {\r\n  let id = btn.dataset.toggle\r\n  , row = form.querySelector(`.${btn.dataset.toggle}-row`)\r\n  if (! row) return;\r\n  let show = row.classList.toggle('row-shown')\r\n  btn.querySelector('svg').classList.toggle('pressed', show)\r\n  let rem = show ? 0 : isRowEmpty(row, id)\r\n  btn.classList.toggle('button-with-reminder', rem)\r\n  if (rem) {\r\n    if (! btn._originalTitle)\r\n      btn._originalTitle = btn.title\r\n    btn.title = `${btn._originalTitle} (${_l.notEmpty})`\r\n  }\r\n  else if (btn._originalTitle)\r\n    btn.title = btn._originalTitle\r\n  if (show) { // focus on field\r\n    let focal = null\r\n    if (id == 'subject-send') {\r\n      let i = form.querySelector('input[name=subject]')\r\n      if (!i.value)\r\n        focal = i\r\n    }\r\n    if (id == 'name') {\r\n      let i = form.querySelector('input[name=name]')\r\n      if (!i.value && !i.disabled)\r\n        focal = i\r\n    }\r\n    if (id == 'embed') {\r\n      let inputs = [].filter.call(form.querySelectorAll('input[type=text][name^=embed]'), \r\n        el => el.getClientRects().length && !el.value)\r\n      if (inputs.length)\r\n        focal = inputs[0]\r\n    }\r\n    if (focal)\r\n      focal.focus()\r\n  }\r\n}\r\n\r\nfunction isRowEmpty(row, id) {\r\n  return !!(\r\n    (id == 'name' &&\r\n      row.querySelector('input[name=name]').value != ''\r\n      &&\r\n      !row.querySelector('input[name=disable_name]').checked\r\n    ) ||\r\n    (id == 'subject-send' &&\r\n      row.querySelector('input[name=subject]').value != ''\r\n    ) ||\r\n    (id == 'embed' &&\r\n      [].find.call(row.querySelectorAll('input[type=text]'), i => i.value.trim())\r\n    ) ||\r\n    (id == 'ttl' &&\r\n      row.querySelector('input[name=ttl-enable]').checked\r\n    )\r\n  )\r\n}\r\n\r\nfunction updateReminders(form) {\r\n  ['name', 'subject-send', 'embed', 'ttl'].forEach(id => {\r\n    let row = form.querySelector(`.${id}-row:not(.row-shown)`)\r\n    , btn = row && form.querySelector(`.simplified-toggle[data-toggle=\"${id}\"]`)\r\n    if (btn)\r\n      btn.classList.toggle('button-with-reminder', isRowEmpty(row, id))\r\n  })\r\n}\r\n\r\nfunction toggleFormFloating(form, float, focus=true) {\r\n  let pinner = form.querySelector('.pinner')\r\n  pinner.classList.toggle('pinned', !float)\r\n  pinner.classList.toggle('unpinned', float)\r\n  if (float) { // Make the form floating\r\n    // Pin other forms\r\n    scrollAnchor.save('toggleFormFloating', form.getParentPost())\r\n    document.querySelectorAll('.qrf-floating').forEach(f => toggleFormFloating(f, false))\r\n    scrollAnchor.restore('toggleFormFloating')\r\n    .then(() => { // When all scrolling is settled\r\n      let box = form.getBoundingClientRect()\r\n      form.classList.add('qrf-floating')\r\n      form.classList.remove('qrf-builtin', 'qrf-builtin-back')\r\n      form.style.top = box.top + 'px'\r\n      form.style.left = box.left + 'px'\r\n      $(form).drags()\r\n      .find('input, textarea, select, label, .fe-sort-wrapper, button, .b-icon').mousedown(function(e) {\r\n        e.stopPropagation()\r\n      })\r\n    })\r\n  }\r\n  else { // Build the form back in\r\n    form.classList.remove('qrf-floating', 'collapsed')\r\n    form.querySelector('.collapser').classList.remove('collapsed')\r\n    form.classList.add('qrf-builtin', 'qrf-builtin-back')\r\n    $(form).dragsOff()\r\n    ;['top', 'left', 'zIndex'].forEach(prop => form.style[prop] = null)\r\n  }\r\n  if (focus)\r\n    form.querySelector('textarea').focus()\r\n}\r\n\r\nfunction hidePostForm(form) {\r\n  form.classList.add('hidden')\r\n  toggleFormFloating(form, false)\r\n  toggleFormCollapse(form, false)\r\n  setTimeout(() => {\r\n    form.classList.remove('qrf-builtin-back')\r\n  }, 200)\r\n  if (form._preview) {\r\n    let pinner = form._preview.querySelector('.pinner')\r\n    if (pinner) {\r\n      pinner.classList.remove('pinned')\r\n      pinner.classList.add('unpinned')\r\n    }\r\n    form._preview._pinned = false\r\n  }\r\n  updateActiveForm()\r\n}\r\n\r\nfunction toggleFormSimplify(form, simplify) {\r\n  let simplified = form.classList.toggle('postform-simplified', simplify)\r\n  if (simplified)\r\n    updateReminders(form)\r\n}\r\n\r\nfunction clonePostForm(anchorID, preview, boardName=false) {\r\n  return new Promise((resolve, reject) => {\r\n    HTMLoader.getPostbox(boardName).then(oldForm => {\r\n      if (Captcha.enabled)\r\n        Captcha.state = 'init' // Destroy old captcha because it will be inevitably reloaded at form cloning\r\n      let newForm = oldForm.cloneNode(true)\r\n      newForm.id = anchorID + '_qrf'\r\n      newForm.dataset.anchorID = anchorID\r\n      newForm.classList.remove('main-reply-form')\r\n      newForm.querySelector('.simplified-send-row .primary span').innerText = _l.reply\r\n      newForm.querySelector('input[name=\"postpassword\"]').value = get_password('postpassword')\r\n      newForm.querySelector('input.primary').value = _l.reply\r\n      newForm.querySelector('.noko-row').remove()\r\n      let blotter = newForm.querySelector('.blotter-row')\r\n      if (preview)\r\n        newForm._preview = preview\r\n      blotter.insertAdjacentHTML('afterend', `\r\n        <span class=\"extrabtns simplified-extras\">\r\n          ${newForm.querySelector('.name-row') ? `\r\n            <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"name\" title=\"${_l.showName}\">\r\n              <svg class=\"icon b-icon\"><use xlink:href=\"#i-name\"></use></svg>\r\n            </a>\r\n          ` : ''}\r\n          <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"subject-send\" title=\"${_l.showSubject}\">\r\n            <svg class=\"icon b-icon\"><use xlink:href=\"#i-subject\"></use></svg>\r\n          </a>\r\n          <a href=\"#\" class=\"s-markup\" data-toggle=\"password\" title=\"${_l.showMarkup}\">\r\n            <svg class=\"icon b-icon\"><use xlink:href=\"#i-markup\"></use></svg>\r\n          </a>\r\n          ${newForm.querySelector('.embed-row') ? `\r\n            <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"embed\" title=\"${_l.showEmbeds}\">\r\n              <svg class=\"icon b-icon\"><use xlink:href=\"#i-embed\"></use></svg>\r\n            </a>\r\n          ` : ''}\r\n          <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"password\" title=\"${_l.showPassword}\">\r\n            <svg class=\"icon b-icon\"><use xlink:href=\"#i-password\"></use></svg>\r\n          </a>\r\n          ${newForm.querySelector('.ttl-row') ? `\r\n            <a href=\"#\" class=\"simplified-toggle\" data-toggle=\"ttl\" title=\"${_l.showTTL}\">\r\n              <svg class=\"icon b-icon\"><use xlink:href=\"#i-timer\"></use></svg>\r\n            </a>\r\n          ` : ''}\r\n        </span>`)\r\n      // Name reminder\r\n      updateReminders(newForm)\r\n      // Enabling extra inputs in simplified form\r\n      newForm.querySelectorAll('.simplified-toggle').forEach(a => {\r\n        a.onclick = ev => {\r\n          ev.preventDefault()\r\n          toggleFormRow(newForm, a)\r\n        }\r\n      })\r\n      newForm.querySelector('.s-markup').onclick = function(ev) {\r\n        ev.preventDefault()\r\n        this.querySelector('.icon').classList.toggle('pressed')\r\n        newForm.querySelector('.message-row').classList.toggle('markup-enabled')\r\n      }\r\n      blotter.remove()\r\n      // Rename label[for]s and corresponding inputs\r\n      let add = '_'+_.uniqueId()\r\n      // newForm.id = 'postform'+add\r\n      newForm.querySelectorAll('label').forEach(l => {\r\n        let id = l.getAttribute('for')\r\n        , newid = id + add\r\n        , input = newForm.querySelector('#'+id)\r\n        if (input)\r\n          input.id = newid\r\n        l.setAttribute('for', newid)\r\n      })\r\n      newForm.classList.add('quick-reply-form') // New general class to tell qr form apart from the main form\r\n      newForm.classList.add('postform-simplified')\r\n      // Clear fields\r\n      resetForm(newForm, true /* ← isClone */)\r\n      // Init rich file input\r\n      richFileInput.initForm(newForm)\r\n      // Add extra buttons\r\n      newForm.insertAdjacentHTML('beforeend', `\r\n        <span class=\"extrabtns postboxcontrol\">\r\n          <svg class=\"icon form-handle-icon\"><use xlink:href=\"#i-handle\"></use></svg>\r\n          <a href=\"#\" title=\"${_l.classicSimplifiedForm}\" class=\"simplify-qr-form\">\r\n            <svg class=\"icon b-icon\">\r\n              <use class=\"use-simplify\" xlink:href=\"#i-simplify\"></use>\r\n              <use class=\"use-complicate\" xlink:href=\"#i-complicate\"></use>\r\n            </svg>\r\n          </a>\r\n          <a href=\"#\" title=\"${_l.collapseExpand}\" class=\"collapse-qr-form collapser\">\r\n            <svg class=\"icon b-icon\">\r\n              <use class=\"use-collapse\" xlink:href=\"#i-collapse\"></use>\r\n              <use class=\"use-uncollapse\" xlink:href=\"#i-uncollapse\"></use>\r\n            </svg>\r\n          </a>\r\n          <a href=\"#\" class=\"pinner\" title=\"${_l.pinUnpin}\">\r\n            <svg class=\"icon b-icon\">\r\n              <use class=\"use-pin\" xlink:href=\"#i-float\"></use>\r\n              <use class=\"use-unpin\" xlink:href=\"#i-unfloat\"></use>\r\n            </svg>\r\n          </a>\r\n          &nbsp;\r\n          <a href=\"#\" title=\"${_l.hideForm}\" class=\"hide-qr-form\">\r\n            <svg class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg>\r\n          </a>\r\n        </span>`)\r\n      // Form button actions\r\n      newForm.getParentPost = () => {\r\n        let maybePost = newForm._findPrevious('*:not(.i0svcel)')\r\n        return maybePost.matches('.postnode') ? maybePost : null\r\n      }\r\n      newForm.querySelector('.hide-qr-form').onclick = ev => {\r\n        ev.preventDefault()\r\n        let skip = false\r\n        if (newForm.classList.contains('qrf-floating')) {\r\n          let anchor = newForm.getParentPost()\r\n          if (anchor) {\r\n            flyTo(newForm, anchor.querySelector('a.qrl .b-icon')).then(hidePostForm)\r\n            skip = true\r\n          }\r\n        }\r\n        if (!skip) {\r\n          hidePostForm(newForm)\r\n        }\r\n      }\r\n      newForm.querySelector('.simplify-qr-form').onclick = ev => {\r\n        ev.preventDefault()\r\n        toggleFormSimplify(newForm)\r\n      }\r\n      newForm.querySelector('.pinner').onclick = function(ev) {\r\n        ev.preventDefault()\r\n        let pinned = newForm.classList.contains('qrf-builtin')\r\n        toggleFormFloating(newForm, pinned)\r\n      }\r\n      newForm.querySelector('.collapse-qr-form').onclick = ev => {\r\n        ev.preventDefault()\r\n        toggleFormCollapse(newForm)\r\n      }\r\n      // Prevent dragging of links\r\n      newForm.querySelectorAll('a').forEach(a => {\r\n        a.ondragstart = ev => false\r\n        a.ondrop = ev => false\r\n      })\r\n      // Extra hooks for the new form\r\n      initForm(newForm)\r\n\r\n      resolve(newForm)\r\n    })\r\n  })\r\n}\r\n\r\nfunction quickreply() {\r\n  let $this = $(this)\r\n  , threadID = $this.data('parent')\r\n  , postID = $(this).data('postnum') || threadID.split('-')[0]\r\n  , $post = $this.parents('.postnode')\r\n  , boardName = $post.data('board')\r\n  , fromExternalBoard = (!is_overboard && boardName != this_board_dir)\r\n  , post = $post[0]\r\n  , $preview = $post.parents('.reflinkpreview')\r\n  , isPreview = !!$preview\r\n  , needInsert = true\r\n  , form = post._findNext('*:not(.i0svcel)')\r\n  , formExists = form && form.getAttribute('name') == 'postform'\r\n  , formHidden = formExists && form.classList.contains('hidden')\r\n  , formFloating = formExists && form.classList.contains('qrf-floating')\r\n  , isOpen = true\r\n  , preview = post._findParent('.reflinkpreview')\r\n  , quotation = needInsert ? getPostQuotation(post.querySelector('.postbody')) : ''\r\n  \r\n  if (formExists) {\r\n    if (formFloating) {\r\n      toggleFormCollapse(form, false)\r\n      toggleFormFloating(form, false)\r\n    }\r\n    else {\r\n      if (!formHidden) {\r\n        hidePostForm(form)\r\n        formHidden = true\r\n      }\r\n      else {\r\n        form.classList.remove('hidden')\r\n      }\r\n      formHidden = !formHidden\r\n    }\r\n    needInsert = false\r\n  }\r\n  else {\r\n    $this.addClass('spin-around')\r\n    clonePostForm(post.id || post.parentElement.id, preview, (is_overboard ? boardName : false)).then(form => {\r\n      $this.removeClass('spin-around')\r\n      form.classList.add('qrf-builtin')\r\n      form.querySelector('.pinner').classList.toggle('pinned')\r\n      form.querySelector('input[name=replythread]').value = threadID\r\n      post.insertAdjacentElement('afterend', form)\r\n      document.querySelectorAll('.qrf-floating:not(.collapsed)')\r\n      .forEach(existingForm => toggleFormCollapse(existingForm))\r\n      form.querySelector('textarea').focus()\r\n      if (needInsert) {\r\n        insert(`>>${fromExternalBoard ? `/${boardName}/` : ''}${postID}\\n${quotation}`)\r\n      }\r\n      // Pin the post if it is in preview\r\n      if (preview && !preview._pinned) {\r\n        post.querySelector('.pinner').click()\r\n      }\r\n    })\r\n  }\r\n  // post.classList.toggle('reply-with-form-open', isOpen)\r\n  return false\r\n}\r\n\r\nfunction _getSelection() {\r\n  if (! window.getSelection) return null\r\n  let selection = window.getSelection()\r\n  if (selection.type !== \"Range\") return null\r\n  let selectedText = selection.toString()\r\n  if (! selectedText) return null\r\n  return {\r\n    text: selectedText,\r\n    node: selection.anchorNode\r\n  }\r\n}\r\n\r\n// get the selected text within the given element\r\nfunction getLocalSelection(parent) {\r\n  let sel = _getSelection()\r\n  return sel && sel.node._isChildOf(parent)  \r\n    ? sel.text \r\n    : null\r\n}\r\n\r\nfunction getPostQuotation(post) {\r\n  let text = getLocalSelection(post)\r\n  if (!text) return ''\r\n  text = text\r\n    .replace(/^\\s/, '').replace(/\\s$/, '') // remove leading and trailing whitespaces\r\n    .replace(/^>/gm, ' >').replace(/^/gm, '> ') // add quotation marks\r\n  return text/*+'\\n'*/ || ''\r\n}\r\n\r\nfunction popupMessage(content, delay=1000) {\r\n  pups.info(content, {time: delay/1000})\r\n  console.warn('popupMessage() is deprecated. Please use YOBA alerts instead.')\r\n}\r\n\r\nvar Captcha = {\r\n  init: function(forceEnable=false) {\r\n    let captchaImage = document.querySelector('.captchaimage')\r\n    this.enabled = forceEnable || !!captchaImage\r\n    if (!this.enabled) return;\r\n    injector.inject('captcha-rotting',\r\n    `.cw-running .rotting-indicator {\r\n      -webkit-animation-duration: ${captchaTimeout}s;\r\n              animation-duration: ${captchaTimeout}s;\r\n    }\r\n    .cw-running .captchaimage,\r\n    .cw-running .rotten-msg {\r\n      -webkit-animation-delay: ${captchaTimeout}s;\r\n              animation-delay: ${captchaTimeout}s;}`)\r\n    if (captchaImage) {\r\n      this.addImgLoadListener(captchaImage)\r\n    }\r\n  },\r\n  initForm: function(form) {\r\n    let cw = form.querySelector('.captchawrap')\r\n    if (!cw) return;\r\n    cw.onclick = this.onClick.bind(this)\r\n    ;['click', 'focus'].forEach(evt => {\r\n      form.querySelector('input[name=captcha]').addEventListener(evt, this.onFieldClick.bind(this))\r\n    })\r\n    let captchaImage = form.querySelector('.captchaimage')\r\n    if (captchaImage) {\r\n      this.addImgLoadListener(captchaImage)\r\n    }\r\n  },\r\n  addImgLoadListener: function(captchaImage) {\r\n    captchaImage.onload = this.onImageLoad.bind(this)\r\n    ;['animationend', 'webkitAnimationEnd', 'msAnimationEnd'].forEach(evType => {\r\n      captchaImage.addEventListener(evType, this.onAnimationEnd.bind(this))\r\n    })\r\n  },\r\n  _state: 'init',\r\n  get state() {\r\n    return this._state\r\n  },\r\n  set state(s) { // Capthca state machine\r\n    document.querySelectorAll('.captchawrap').forEach(c => {\r\n      if (s == 'init') {\r\n        c.classList.remove('cw-running')\r\n        c.classList.add('cw-initial')\r\n      }\r\n      if (s == 'init' || s == 'load') {\r\n        c.classList.add('captchaimage-invisible')\r\n      }\r\n      if (s == 'load') {\r\n        c.classList.remove('cw-initial', 'cw-running')\r\n        void c.offsetWidth //trigger a reflow\r\n        c.classList.add('cw-running', 'cw-loading')\r\n      }\r\n      else {\r\n        c.classList.remove('cw-loading')\r\n      }\r\n      if (s == 'run') {\r\n        c.classList.remove('captchaimage-invisible')\r\n      }\r\n    })\r\n    if (s !== 'run')\r\n      this.clear()\r\n    this._state = s\r\n  },\r\n  onClick: function(ev) {\r\n    this.refresh(ev.ctrlKey || ev.altKey)\r\n    ev.target._findParent('form').querySelector('input[name=captcha]').focus()\r\n  },\r\n  onFieldClick: function() {\r\n    if (this.state == 'init' || this.state == 'expired')\r\n      this.refresh()\r\n  },\r\n  onImageLoad: function() {\r\n    if (this.state == 'load')\r\n      this.state = 'run'\r\n  },\r\n  onAnimationEnd: function() {\r\n    this.state = 'expired'\r\n  },\r\n  clear: function() {\r\n    document.querySelectorAll('input[name=\"captcha\"]').forEach(i => i.value = '')\r\n  },\r\n  refresh: function(switch_lang=false) {\r\n    let cColor = $('.captchawrap').css('color').match(/([0-9]+(?:\\.[0-9]+)?)/g)\r\n    cColor = (cColor.length >= 3) ? '&color='+cColor.slice(0, 3).join(',') : ''\r\n    let url = ku_boardspath+'/captcha.php?'+Math.random()+cColor+(switch_lang ? '&switch' : '')\r\n    document.querySelectorAll('.captchaimage').forEach(img => img.src = url)\r\n    this.state = 'load'\r\n  }\r\n}\r\n\r\nfunction formatFileSize(bytes) {\r\n  if (bytes < 1000) {\r\n    return `${bytes}B`\r\n  }\r\n  else if (bytes < 1000000) {\r\n    return `${Math.round(bytes/1000)}KB`\r\n  }\r\n  else {\r\n    return `${Math.round(bytes/100000)/10}MB`\r\n  }\r\n}\r\n\r\nconst richFileInput = {\r\n  handleFiles: function(files, form, fromClipboard=false) {\r\n    let maxfiles = +form.dataset.maxfiles\r\n    , slotsLeft = maxfiles - $(form).find('.file-entry').length\r\n    , filesLeft = files.length\r\n    , i = 0\r\n    for (; slotsLeft && filesLeft; i++) {\r\n      let fileAttached = this.handleFile(files[i], form, fromClipboard)\r\n      slotsLeft -= fileAttached\r\n      filesLeft--\r\n    }\r\n    if (slotsLeft <= 0 && filesLeft)\r\n      pups.warn(_l.maxAttNumReached)\r\n  },\r\n  handleFile: function(file, form, fromClipboard=false) {\r\n    let fx = {}\r\n    // Determine the file extension\r\n    let ns = file.name.split('.')\r\n    fx.ext = (ns.length) > 1 ? ns.pop().toLowerCase() : \"\"\r\n    if (fx.ext == 'jpeg') \r\n      fx.ext = 'jpg'\r\n\r\n    if (\r\n      form.dataset.allowedAllFiletypes != '*'\r\n      &&\r\n      !_.contains(form.dataset.allowedFiletypes.split(','), fx.ext)\r\n    ) {\r\n      pups.err(`${file.name}: ${_l.unsupportedFileType}.`)\r\n      return 0\r\n    }\r\n    fx.fname = ns.join('.')\r\n\r\n    fx.sizeFormatted = formatFileSize(file.size)\r\n    \r\n    if (file.type.indexOf(\"image\") != -1) {\r\n      let reader = new FileReader()\r\n      reader.onload = ev => {\r\n        fx.img = ev.target.result\r\n        this.addFile(file, fx, form, fromClipboard)\r\n      }\r\n      reader.readAsDataURL(file, fx, form)\r\n    }\r\n    else {\r\n      this.addFile(file, fx, form, fromClipboard)\r\n    }\r\n    return 1\r\n  },\r\n  addFile: function(file, extra, form, fromClipboard=false) {\r\n    let index = this.store.push(file)-1\r\n    form.querySelector('.fe-sort-wrapper').insertAdjacentHTML('beforeEnd', `\r\n      <div class=\"file-entry${fromClipboard ? ' fe-name-hidden' : ''}\" data-index=\"${index}\" title=\"${file.name}\">\r\n        <div class=\"fe-thumb\">\r\n          ${extra.img ? `<img src=${extra.img}>` :  makeGenericFileIcon(extra.ext)}\r\n        </div>\r\n        <input type=\"text\" value=\"${extra.fname}\" class=\"fe-fn\" ${fromClipboard ? ' disabled' : ''}>\r\n        <button class=\"clear-filename fe-pop-button icon-wraping-button\" title=\"${_l.hideName}\"><svg class=\"icon b-icon\">\r\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-hide-name\"></use>\r\n        </svg></button>\r\n        <button class=\"remove-file fe-pop-button icon-wraping-button\" title=\"${_l.removeFile}\"><svg class=\"icon b-icon\">\r\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-x\"></use>\r\n        </svg></button>\r\n        <button class=\"spoiler-file fe-pop-button icon-wraping-button\" title=\"${_l.spoilerOnOff}\"><svg class=\"icon b-icon\">\r\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-spoiler\"></use>\r\n        </svg></button>\r\n        <div class=\"fe-info\"></div>\r\n      </div>\r\n    `)\r\n    this.recalcForm(form)\r\n    let thisEl = form.querySelector(`.file-entry[data-index=\"${index}\"]`)\r\n    , img = false\r\n    , updateInfo = () => thisEl.querySelector(`.fe-info`).innerText = \r\n        `${extra.ext.toUpperCase()}${(img ? `, ${img.naturalWidth}×${img.naturalHeight}`: '')}, ${extra.sizeFormatted}`\r\n    if (extra.img) {\r\n      img = thisEl.querySelector('img')\r\n      img.onload = updateInfo\r\n      img.onerror = updateInfo\r\n    }\r\n    else updateInfo()\r\n    thisEl._ext = extra.ext\r\n    this.updateTitle($(thisEl))\r\n  },\r\n  recalcForm: function(form) {\r\n    let count = form.querySelectorAll('.file-entry').length\r\n    , maxfiles = +form.dataset.maxfiles\r\n    form.classList.toggle('fda-non-empty', count > 0)\r\n    form.classList.toggle('fda-form-full', count >= maxfiles)\r\n    form.querySelector('.file-count').innerHTML = count > 0\r\n      ? `${_l.files}<br>(${count}/${maxfiles})`\r\n      : `${_l.file}`\r\n  },\r\n  updateTitle: function($el) {\r\n    let v = $el.find('.fe-fn').val()\r\n    , fname = !$el.hasClass('fe-name-hidden') && v ? v : '*****'\r\n    $el[0].title = `${fname}.${$el[0]._ext}`\r\n  },\r\n  serialize: function(form, fd) {\r\n    form.querySelectorAll('.file-entry').forEach((fe, i) => {\r\n      fd.append('imagefile[]', this.store[+fe.dataset.index])\r\n      if (fe.classList.contains('fe-spoiler'))\r\n        fd.append(`spoiler-${i}`, 1)\r\n      let fname = fe.querySelector('.fe-fn').value\r\n      if (fe.classList.contains('fe-name-hidden') || fname==='')\r\n        fd.append(`hidename-${i}`, 1)\r\n      else\r\n        fd.append(`filename-${i}`, fname)\r\n    } )\r\n  },\r\n  store: [],\r\n  initiated: false,\r\n  init: function(form) {\r\n    this.enabled = form.querySelector('.file-row') && 'FileReader' in window\r\n    if (this.enabled) {\r\n      let _this = this\r\n      $('body')\r\n      .on('click', '.remove-file', function(ev) {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        let $entry = $(this).parents('.file-entry')\r\n        _this.store[+$entry.data('index')] = null\r\n        let $form = $entry.parents('form[name=postform]')\r\n        $entry.remove()\r\n        _this.recalcForm($form[0])\r\n      })\r\n      .on('click', '.file-entry', function(ev) {\r\n        $(this).toggleClass('fe-expanded')\r\n        setTimeout(() => $(this).find('input').select(), 450)\r\n      })\r\n      .on('click', '.file-entry input', function(ev) {\r\n        ev.stopPropagation()\r\n      })\r\n      .on('click', '.spoiler-file', function(ev) {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        $(this).parents('.file-entry').toggleClass('fe-spoiler')\r\n      })\r\n      .on('click', '.clear-filename', function(ev) {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        let $entry = $(this).parents('.file-entry')\r\n        $entry.find('.fe-fn').prop('disabled', !$entry.hasClass('fe-name-hidden'))\r\n        $entry.toggleClass('fe-name-hidden')\r\n        _this.updateTitle($entry)\r\n      })\r\n      .on('change', '.fe-fn', function(ev) {\r\n        _this.updateTitle($(this).parents('.file-entry'))\r\n      })\r\n      .on('change', 'input[type=file]', function(ev) {\r\n        let form = $(this).parents('form[name=postform]')[0]\r\n        _this.handleFiles(ev.target.files, form)\r\n        this.value = null\r\n      })\r\n      .on('click', '.add-files', function(ev) {\r\n        ev.preventDefault()\r\n        $(this).parents('form[name=postform]').find('input[type=file]')[0].click()\r\n      })\r\n      .on('paste', 'form[name=postform]', function(ev) {\r\n        let items = (ev.clipboardData || ev.originalEvent.clipboardData).items\r\n        , arr = [];\r\n        for (var i = 0 ; i < items.length ; i++) {\r\n          var item = items[i];\r\n          if (item.kind == 'file') {\r\n            arr.push(item.getAsFile())\r\n          }\r\n        }\r\n        _this.handleFiles(arr, this, true)\r\n      })\r\n    }\r\n    else {\r\n      $('body')\r\n      .on('click', '.remove-file', function(ev) {\r\n        ev.preventDefault()\r\n        $(this).parent().find('input[type=file]')\r\n          .val(null)\r\n          .removeClass('non-empty-file-input')\r\n      })\r\n      .on('change', 'input[type=file]', function() {\r\n        $(this).toggleClass('non-empty-file-input', this.value)\r\n      })\r\n    }\r\n    this.initiated = true\r\n    /*if (!is_overboard)\r\n      this.initForm(postform)*/\r\n  },\r\n  initForm: function(form) {\r\n    if (!this.initiated)\r\n      this.init(form)\r\n    let _this = this\r\n    if (this.enabled) {\r\n      // Drag and drop events\r\n      $(form) // I tried using plain JS, doesn't work, sorry\r\n      .on('dragenter dragend dragover drop dragleave', function(ev) {\r\n        ev.originalEvent.stopPropagation()\r\n        if (!(ev.target.nodeName == 'TEXTAREA' || ev.target.nodeName == 'INPUT')) \r\n          ev.preventDefault()\r\n      })\r\n      .on('drop', function(ev) {\r\n        ev.originalEvent.stopPropagation()\r\n        if (ev.originalEvent.dataTransfer && ev.originalEvent.dataTransfer.files.length) {\r\n          ev.originalEvent.preventDefault() \r\n          _this.handleFiles(ev.originalEvent.dataTransfer.files, this)\r\n        }\r\n      })\r\n      // File entry sorting\r\n      if(form.querySelector('.fe-sort-wrapper')) {\r\n        Sortable.create(form.querySelector('.fe-sort-wrapper'), {\r\n          animation: 150,\r\n          handle: '.fe-thumb'\r\n        })\r\n      }\r\n      // Prevent legacy file inputs from being serialized\r\n      form.querySelectorAll('input[name^=imagefile]').forEach(i => i.removeAttribute('name'))\r\n    }\r\n    else {\r\n      let area = form.querySelector('.drop-area')\r\n      if (!area) return;\r\n      area.previousElementSibling.classList.remove('noscript')\r\n      area.remove()\r\n    }\r\n  },\r\n  clear: function(form, clearStore=false) {\r\n    if (this.enabled) {\r\n      form.querySelectorAll('.file-entry').forEach(fe => {\r\n        if (clearStore)\r\n          this.store[fe.dataset.index] = null\r\n        fe.remove()\r\n      })\r\n      this.recalcForm(form)\r\n    }\r\n  }\r\n}\r\n\r\nfunction makeGenericFileIcon(ext) {\r\n  let hash = 0\r\n  ext.toLowerCase().split('').reverse().forEach((char, i) => {\r\n    char = char.charCodeAt(0)\r\n    hash += char*(i*10 + 7)\r\n  })\r\n  let color = hash % 360\r\n  return `<div class=\"generic-file-icon\" style=\"background-color: hsl(${color}, 66%, 50%)\"><div class=\"gfi-extension\">${ext}</div></div>`\r\n}\r\n\r\nfunction handleCtrlEnter(ev) {\r\n  ev.preventDefault()\r\n  let area = document.activeElement\r\n  , form = area._findParent('form[name=postform]')\r\n  if (form) {\r\n    Ajax.submitPost(form)\r\n  }\r\n}\r\n\r\nfunction redirectTo(href) {\r\n  // console.warn('About to redirect to:', href)\r\n  document.location.href = href\r\n}\r\n\r\nconst Ajax = {\r\n  submitPost: function(form, sage) {\r\n    if (form.querySelector('script[src^=\"https://js.hcaptcha.com\"]')) {\r\n      hcaptcha.execute({ async: true })\r\n      .then(({ response, key }) => {\r\n        this.actuallySubmitPost(form, sage, response)\r\n      })\r\n      .catch(err => {\r\n        console.error('hcapthca:', err)\r\n        if (err == 'challenge-expired')\r\n          this.shownErrors.push(pups.warn(_l.captchaExpired))\r\n      });\r\n    }\r\n    else {\r\n      this.actuallySubmitPost(form, sage)\r\n    }\r\n  },\r\n  actuallySubmitPost: function(form, sage, hCaptchaResponse=false) {\r\n    let alertsToRemove = _.clone(this.shownErrors)\r\n    setTimeout(() => {\r\n      alertsToRemove.forEach(a => {\r\n        pups.closeByID(a)\r\n      })\r\n    }, 300)\r\n    this.shownErrors = []\r\n    let showError = (a, b={}) => this.shownErrors.push(pups.err(a, b))\r\n    let showWarning = (a, b={}) => this.shownErrors.push(pups.warn(a, b))\r\n\r\n    let captchafield = form.captcha\r\n    if (captchafield && !captchafield.value.length) {\r\n      captchafield.focus()\r\n      return showWarning(_l.enterCaptcha)\r\n    }\r\n    \r\n    form.classList.add('form-sending')\r\n    let fd = new FormData(form)\r\n\r\n    if (typeof sage !== 'undefined')\r\n      fd.append('sagebtn', sage)\r\n\r\n    if (hCaptchaResponse) {\r\n      fd.append('h-captcha-response', hCaptchaResponse)\r\n    }\r\n\r\n    if (richFileInput.enabled)\r\n      richFileInput.serialize(form, fd)\r\n    let xr = new XMLHttpRequest()\r\n    fd.append('AJAX', 1)\r\n\r\n    // Token for live updates\r\n    this.postToken = randomString()\r\n    fd.append('token', this.postToken)\r\n\r\n    xr.open('POST', form.action)\r\n    xr.onload = e => {\r\n      form.classList.remove('form-sending')\r\n      if (xr.status !== 200) {\r\n        showError(_l.xhrError)\r\n        return\r\n      }\r\n      ;[].forEach.call(form.querySelectorAll('.error-in-attachment'), el => el.classList.remove('error-in-attachment'))\r\n      if (Captcha.enabled)\r\n        Captcha.state = 'init'\r\n      let res = null\r\n      try {\r\n        res = JSON.parse(xr.response)\r\n      }\r\n      catch(e) {\r\n        logJSONexpectedError(xr.response)\r\n        return\r\n      }\r\n      if (res.error) {\r\n        if (res.error_verbose)\r\n          res.error = `${res.error}<br>${res.error_verbose}`\r\n        if (res.error_type) {\r\n          if (res.error_type == 'ban') {\r\n            showError(`${res.error} (<a href=\"${ku_cgipath}/banned.php\" target=\"_blank\">${_l.details}</a>)`, {time: 0, save: true})\r\n          }\r\n          if (res.error_type == 'duplicate_file') {\r\n            showError(res.error, {time: 0})\r\n            form.querySelector('input[name=\"imagefile\"]').value = null\r\n          }\r\n          if (res.error_type == 'upload_error') {\r\n            showError(res.error, {time: 0})\r\n            let badatt = form.querySelector(`.multiembedwrap[data-pos=\"${res.error_data.attachmenttype}-${res.error_data.position+1}\"]`)\r\n            if (badatt) {\r\n              badatt.classList.add('error-in-attachment')\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          showError(res.error, {time: 0})\r\n        }\r\n        return\r\n      }\r\n      else {\r\n        if (res.timings) {\r\n          console.log('timings:', res.timings)\r\n        }\r\n        resetForm(form)\r\n        if (form.classList.contains('quick-reply-form')) {\r\n          hidePostForm(form) // TODO: tumbach pinning?\r\n        }\r\n        /*else {\r\n        }*/\r\n        let nokoInput = form.querySelector('input[name=\"redirecttothread\"]')\r\n        , noko = nokoInput && nokoInput.checked\r\n        if (res.thread_replyto != 0) {\r\n          newposts.get({\r\n            threadid: ispage ? res.thread_replyto+'-'+res.board : null,\r\n            expectedPost: res.post_id+'-'+res.board,\r\n            onError: (err) => {\r\n              console.error(err)\r\n              redirectTo(`${ku_boardspath}/${res.board}/res/${res.thread_replyto}.html#${res.post_id}`)\r\n              if (! ispage)\r\n                document.location.reload()\r\n            },\r\n            onSuccess: () => $(`#delform div[id^=thread${res.thread_replyto}] .fresh-replies`).remove()\r\n          })\r\n        }\r\n        else {\r\n          if (noko) {\r\n            redirectTo(`${ku_boardspath}/${res.board}/res/${res.post_id}.html`)\r\n          }\r\n          else {\r\n            redirectTo(`${ku_boardspath}/${res.board}`)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    xr.onerror = e => {\r\n      form.classList.remove('form-sending')\r\n      console.log(e)\r\n      showError(_l.xhrError)\r\n      return\r\n    }\r\n    xr.send(fd)\r\n  },\r\n  shownErrors: [],\r\n  reportPost: function(fd, callback=null) {\r\n    let xr = new XMLHttpRequest()\r\n    fd.append('AJAX', 1)\r\n    fd.append('reportpost', 1)\r\n    xr.open('POST', document.forms.delform.action)\r\n    xr.onload = e => {\r\n      if (xr.status !== 200) {\r\n        pups.err(_l.xhrError)\r\n        return callback(false)\r\n      }\r\n      let res = null\r\n      try {\r\n        res = JSON.parse(xr.response)\r\n      }\r\n      catch(e) {\r\n        logJSONexpectedError(xr.response)\r\n        return callback(false)\r\n      }\r\n      if (callback)\r\n        callback(res.data)\r\n      if (res.error) {\r\n        if (res.error_verbose)\r\n          res.error = `${res.error}<br>${res.error_verbose}`\r\n        pups.err(res.error, {time: 0})\r\n        return\r\n      }\r\n      else {\r\n        $('body').removeClass('select-multiple')\r\n        $('.userdelete').removeClass('ud-active')\r\n        let postsReported = []\r\n        , postErrors = []\r\n        res.data.forEach(item => {\r\n          if (!item.success) {\r\n            postErrors.push(item)\r\n            return\r\n          }\r\n          postsReported.push(item.id)\r\n          if (! $('input[name=\"post[]\"]:checked').length)\r\n            $('.userdelete').removeClass('ud-active');\r\n        })\r\n        let msg = ''\r\n        if (postsReported.length) {\r\n          postsReported = postsReported.map(post => '#'+post)\r\n          msg += postsReported.length > 1 ?\r\n            `${_l.posts} ${postsReported.join(', ')} ${_l.reportedMulti}.`\r\n           :`${_l.post} ${postsReported[0]} ${_l.reported}.`\r\n          pups.succ(msg, {time: 2 + postsReported.length})\r\n        }\r\n        postErrors.forEach(err => {\r\n          pups.err(`${_l.post} #${err.id}: ${err.message}`)\r\n        })\r\n      }\r\n    }\r\n    xr.send(fd)\r\n  },\r\n  cancelTimer: function(fd, callback=null) {\r\n    let xr = new XMLHttpRequest()\r\n    fd.append('AJAX', 1)\r\n    fd.append('cancel_timer', 1)\r\n\r\n    // Token for live updates\r\n    this.timerToken = randomString()\r\n    fd.append('token', this.timerToken)\r\n\r\n    xr.open('POST', document.forms.delform.action)\r\n    xr.onload = e => {\r\n      if (xr.status !== 200) {\r\n        pups.err(_l.xhrError)\r\n        return callback(false)\r\n      }\r\n      let res = null\r\n      try {\r\n        res = JSON.parse(xr.response)\r\n      }\r\n      catch(e) {\r\n        logJSONexpectedError(xr.response)\r\n        return callback(false)\r\n      }\r\n      if (res.error) {\r\n        if (res.error_verbose)\r\n          res.error = `${res.error}<br>${res.error_verbose}`\r\n        pups.err(res.error, {time: 0})\r\n        return callback(false)\r\n      }\r\n      else {\r\n        $('body').removeClass('select-multiple')\r\n        $('.userdelete').removeClass('ud-active')\r\n        let postsSaved = []\r\n        , postErrors = []\r\n        res.data.forEach(item => {\r\n          if (!item.success) {\r\n            postErrors.push(item)\r\n            return\r\n          }\r\n          postsSaved.push(item.id)\r\n          if (! $('input[name=\"post[]\"]:checked').length)\r\n            $('.userdelete').removeClass('ud-active');\r\n        })\r\n        let msg = ''\r\n        if (postsSaved.length) {\r\n          postsSaved.forEach(id => {\r\n            let $reply = $(`.postnode[data-id=${id}]`)\r\n            $reply.find('.post-ttl').remove()\r\n            $reply.find('.post-menu').hide()\r\n          } )\r\n          msg += postsSaved.length > 1 ?\r\n            `${_l.posts} #${postsSaved.join(', #')} ${_l.savedMulti}.`\r\n           :`${_l.post} #${postsSaved[0]} ${_l.saved}.`\r\n          pups.succ(msg, {time: 2 + postsSaved.length})\r\n        }\r\n        postErrors.forEach(err => {\r\n          pups.err(`${_l.post} #${err.id}: ${err.message}`)\r\n        })\r\n        callback(postErrors)\r\n      }\r\n    }\r\n    xr.send(fd)\r\n  },\r\n  modThread: function(a, action) {\r\n    let $a = $(a)\r\n    , fd = new FormData()\r\n    , xr = new XMLHttpRequest()\r\n    , $li = $a.find('li')\r\n    $li.addClass('spin-around')\r\n    fd.append('AJAX', 1)\r\n    xr.open('POST', a.getAttribute('href'))\r\n    xr.onload = e => {\r\n      $li.removeClass('spin-around')\r\n      if (xr.status !== 200) {\r\n        pups.err(_l.xhrError)\r\n        return\r\n      }\r\n      let res = null\r\n      try {\r\n        res = JSON.parse(xr.response)\r\n      }\r\n      catch(e) {\r\n        logJSONexpectedError(xr.response)\r\n        return\r\n      }\r\n      if (res.error) {\r\n        if (res.error_verbose)\r\n          res.error = `${res.error}<br>${res.error_verbose}`\r\n        pups.err(res.error, {time: 0})\r\n        return\r\n      }\r\n      else {\r\n        let $posthead = $a.parents('.posthead')\r\n        , $extrabtns = $posthead.find('.extrabtns')\r\n        if (action == 'stickypost') {\r\n          $extrabtns.prepend(makeIcon('pin', 'i-icon i-pin'));\r\n          $posthead.addClass('thread-stickied')\r\n        }\r\n        if (action == 'unstickypost') {\r\n          $extrabtns.find('svg.i-icon.i-pin').remove()\r\n          $posthead.removeClass('thread-stickied')\r\n        }\r\n        if (action == 'lockpost') {\r\n          $extrabtns.prepend(makeIcon('lock', 'i-icon i-lock'));\r\n          $posthead.addClass('thread-locked')\r\n        }\r\n        if (action == 'unlockpost') {\r\n          $extrabtns.find('svg.i-icon.i-lock').remove()\r\n          $posthead.removeClass('thread-locked')\r\n        }\r\n        pups.succ(res.message)\r\n      }\r\n    }\r\n    xr.send(fd)\r\n  },\r\n  deleteItems: function(fd, callback=null, asMod=false) {\r\n    let kind = 'Items'\r\n    if (asMod) {\r\n      fd.append('moddelete', 1)\r\n    }\r\n    if (fd.has) {\r\n      if (fd.has('post[]')) {\r\n        if (!fd.has('delete-file[]'))\r\n          kind = 'Posts'\r\n        fd.append('deletepost', 1)\r\n      }\r\n      else if (fd.has('delete-file[]'))\r\n        kind = 'Files'\r\n      else return;\r\n    }\r\n    else { // FormData.has() is not supported\r\n      fd.append('deletepost', 1)\r\n    }\r\n    \r\n    let xr = new XMLHttpRequest()\r\n    fd.append('AJAX', 1)\r\n\r\n    // Token for live updates\r\n    this.delToken = randomString()\r\n    fd.append('token', this.delToken)\r\n\r\n    xr.open('POST', document.forms.delform.action)\r\n    xr.onload = e => {\r\n      if (xr.status !== 200) {\r\n        pups.err(_l.xhrError)\r\n        return callback ? callback(null) : null\r\n      }\r\n      let res = null\r\n      try {\r\n        res = JSON.parse(xr.response)\r\n      }\r\n      catch(e) {\r\n        logJSONexpectedError(xr.response)\r\n        return callback ? callback(null) : null\r\n      }\r\n      if (callback)\r\n        callback(res.data)\r\n      if (res.error) {\r\n        if (res.error_verbose)\r\n          res.error = `${res.error}<br>${res.error_verbose}`\r\n        pups.err(res.error, {time: 0})\r\n        return\r\n      }\r\n      else {\r\n        deleteItems(res.data)\r\n      }\r\n    }\r\n    xr.send(fd)\r\n  }\r\n}\r\n\r\nfunction inspectFormData(formData) {\r\n  for (var pair of formData.entries()) {\r\n    console.log(pair[0]+ ', ' + pair[1]);\r\n  }\r\n}\r\n\r\nfunction makeIcon(i, classes=\"\", bare=false) {\r\n  return `${bare ? '' : `<svg class=\"icon ${classes}\">`}\r\n    <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-${i}\"></use>\r\n  ${bare ? '' : '</svg>'}`\r\n}\r\n\r\nfunction addCaptchaToMenu($menu) {\r\n  if ($menu.find('.captchawrap').length) {\r\n    Captcha.state = 'init';\r\n    return;\r\n  }\r\n  if (!Captcha.enabled) {\r\n    Captcha.init('only-access')\r\n  }\r\n  $menu.prepend(`<li class=\"menu-captcha\">\r\n    <div class=\"captchawrap cw-initial captchaimage-invisible\" title=\"${_l.refreshCaptcha}\">\r\n      <div class=\"captcha-show msg\">${_l.showCaptcha}</div>\r\n      <img class=\"captchaimage\" valign=\"middle\" border=\"0\" alt=\"${_l.captchaImage}\">\r\n      <div class=\"rotting-indicator\"></div>\r\n      <div class=\"rotten-msg msg\">${_l.captchaExpired}</div>\r\n    </div>\r\n    <input type=\"text\" name=\"captcha\" placeholder=\"${_l.captcha}\" autocomplete=\"off\">\r\n  </li>`)\r\n  Captcha.initForm($menu[0])\r\n  $menu.find('input[name=captcha]').keydown(ev => {\r\n    if (ev.key == 'Enter') {\r\n      ev.preventDefault()\r\n      ev.stopPropagation()\r\n    }\r\n  })\r\n}\r\n\r\n// YOBA media previews\r\nclass MediaViewer {\r\n  static parseVideo(link) {\r\n    let postnum = link.dataset.id\r\n    , imgurl = link.href\r\n    , thumburl = link.dataset.thumb\r\n    , imgw = link.dataset.width\r\n    , imgh = link.dataset.height\r\n    , thumb = link.querySelector('img')\r\n    , thumbw = thumb.width\r\n    , thumbh = thumb.height\r\n    return [postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh]\r\n  }\r\n  static parseImg(link) {\r\n    return link.getAttribute('onclick')\r\n    .match(/expandimg\\('(.+?)', ?'(.+?)', ?'(.+?)', ?'(.+?)', ?'(.+?)', ?'(.+?)', ?'(.+?)'/)\r\n    .slice(1)\r\n  }\r\n  constructor(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh, isVideo=false) {\r\n    let thumb = document.querySelector(`#thumb${postnum} img`)\r\n    if (thumb == null) return false;\r\n    this.post = thumb._findParent('.postbody')\r\n    this.initZoom()\r\n    this.createContainer()\r\n    this.resetTransform()\r\n    let pre = thumb._findParent('.reflinkpreview')\r\n    if (pre)\r\n      PostPreviews.pinPreview(pre, true, true)\r\n    let thBCR = thumb.getBoundingClientRect()\r\n    , thumb_x = thBCR.x, thumb_y = thBCR.y, thumb_w = thBCR.width, thumb_h = thBCR.height\r\n    , win_w = this.viewer.clientWidth, win_h = this.viewer.clientHeight\r\n    , scaleDownFactor = Math.min(win_w / imgw, win_h / imgh, 1)\r\n    , pre_w = imgw * scaleDownFactor, pre_h = imgh * scaleDownFactor\r\n    , visibleMarginX = (win_w-pre_w)/2, visibleMarginY = (win_h-pre_h)/2\r\n    , mi_w = Math.min(win_w, imgw), mi_h = Math.min(win_h, imgh)\r\n    , screenScaleDownFactor = thumb_w/pre_w\r\n    , transX = (thumb_x + thumb_w/2) - win_w/2, transY = (thumb_y + thumb_h/2) - win_h/2\r\n    , trans = `style=\"transform: translate(${transX}px, ${transY}px) scale(${screenScaleDownFactor})\"`\r\n    , me = this.viewer._ins('afterBegin', this.createMediaElement(thumb.src, imgw, imgh, imgurl, trans, isVideo))\r\n    this.refreshList()\r\n    this.currentThumb = thumb\r\n    thumb.style.visibility = 'hidden'\r\n    this.updateCounter()\r\n    this.showPercentage(scaleDownFactor)\r\n    me._isVideo = isVideo\r\n    this.setVolume(me)\r\n    me._scaleDownFactor = scaleDownFactor\r\n    this.currentMediaItem = me\r\n    me._realWidth = imgw\r\n    this.imgw = imgw\r\n    this.imgh = imgh\r\n    document.body.style.overflow = 'hidden'\r\n    requestAnimationFrame(() => {\r\n      this.container.classList.remove('mvc-collapsed')\r\n      me.style.transform = null\r\n    })\r\n  }\r\n  refreshList() {\r\n    this.list = document.querySelectorAll('img.thumb')\r\n  }\r\n  findIndex(thumb) {\r\n    return Array.prototype.findIndex.call(this.list, e => e==thumb)\r\n  }\r\n  // Container\r\n  createContainer() {\r\n    this.container = document.body._ins('beforeend', `<div class=\"mv-container mvc-collapsed\">\r\n    <div class=\"media-viewer\">\r\n      <div class=\"mv-label\">\r\n        <span class=\"item-counter\"></span>\r\n        <span class=\"scale-indicator\"></span>\r\n      </div>\r\n      <div class=\"mv-button mv-prev-next mv-prev\"></div>\r\n      <div class=\"mv-button mv-prev-next mv-next\"></div>\r\n      <div class=\"mv-button mv-restore\"></div>\r\n      <div class=\"mv-button mv-close\"></div>\r\n    </div></div>`)\r\n    this.viewer = this.container.querySelector('.media-viewer')\r\n    this.viewer.addEventListener('wheel', this.handleZoom.bind(this))\r\n    this.viewer.addEventListener('mousemove', ev => {\r\n      this.mouseX = ev.clientX\r\n      this.mouseY = ev.clientY\r\n      if (this.isMouseDown) {\r\n        this.handleDrag()\r\n      }\r\n    })\r\n    this.viewer.addEventListener('mousedown', ev => {\r\n      if (ev.button==2 && this.currentMediaItem._isVideo) {\r\n        let ov = this.currentMediaItem.querySelector('.video-event-overlay')\r\n        ov.style.pointerEvents='none'\r\n        setTimeout(() => ov.style.pointerEvents='all', 100)\r\n      }\r\n      this.gripX = ev.clientX\r\n      this.gripY = ev.clientY\r\n      this.isMouseDown = true\r\n      if (ev.target.classList.contains('media-viewer') || ev.target.classList.contains('mv-under'))\r\n        this.emptyClick = true\r\n    })\r\n    this.viewer.addEventListener('contextmenu', ev => {\r\n      if (this.currentMediaItem._isVideo) {\r\n        let ov = this.currentMediaItem.querySelector('.video-event-overlay')\r\n        ov.style.pointerEvents='none'\r\n        setTimeout(() => ov.style.pointerEvents='all', 100)\r\n      }\r\n    })\r\n    this.viewer.addEventListener('click', ev=> {\r\n      if (this.isDragged) {\r\n        this.isDragged = false\r\n        ev.preventDefault()\r\n      }\r\n    })\r\n    this.viewer.addEventListener('mouseup', ev => {\r\n      this.isMouseDown = false\r\n      this.currentMediaItem.classList.remove('no-transition')\r\n      if (this.isDragged) {\r\n        ev.preventDefault()\r\n      }\r\n      else if (ev.button == 0) {\r\n        this.collapse()\r\n      }\r\n      this.emptyClick = false\r\n    })\r\n    this.viewer.addEventListener('dragstart', ev => {\r\n      ev.preventDefault()\r\n      ev.stopPropagation()\r\n    })\r\n    this.viewer.querySelectorAll('.mv-button').forEach(pnb => {\r\n      pnb.addEventListener('click', ev => {\r\n        ev.stopPropagation()\r\n        this.refreshList()\r\n        let index = this.findIndex(this.currentThumb)\r\n        if (pnb.classList.contains('mv-prev') || pnb.classList.contains('mv-next')) {\r\n          if (pnb.classList.contains('mv-prev')) {\r\n            index -= 1\r\n            if (index < 0)\r\n              index = this.list.length-1\r\n          }\r\n          else  {\r\n            index += 1\r\n            if (index >= this.list.length)\r\n              index = 0\r\n          }\r\n          this.switchItem(this.list[index])\r\n        }\r\n        else if (pnb.classList.contains('mv-close')) {\r\n          this.collapse()\r\n        }\r\n        else if (pnb.classList.contains('mv-restore')) {\r\n          this.toggleFullSize(0)\r\n        }\r\n      })\r\n      ;['mouseup', 'mousedown'].forEach(evt => pnb.addEventListener(evt, ev => ev.stopPropagation()))\r\n    })\r\n    this.viewer.addEventListener('mouseleave', ev => {\r\n      this.isMouseDown = false\r\n      this.isDragged = false\r\n    })\r\n  }\r\n  // Managing transforms\r\n  applyTransform() {\r\n    let me = this.currentMediaItem\r\n    if (!me) return;\r\n    me.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`\r\n  }\r\n  resetTransform() {\r\n    this.translateX = 0\r\n    this.translateY = 0\r\n    this.scale = 1\r\n  }\r\n  // Zooming\r\n  initZoom() {\r\n    this.zoomAmount = 0.5\r\n    this.minScale = 0.1\r\n    this.zoomSteps = [0.1, 0.25, 0.33, 0.5, 0.75, 1, 1.5, 2, 2.5, 3, 4, 5, 6, 8, 10]\r\n  }\r\n  handleZoom(ev) {\r\n    let me = this.currentMediaItem\r\n    if (!me) return;\r\n    ev.stopPropagation()\r\n    ev.preventDefault()\r\n    let dir = -Math.sign(ev.deltaY)\r\n    , initialScale = 1/me._scaleDownFactor\r\n    , zSteps = Array.from(this.zoomSteps)\r\n      .filter(z => Math.abs((z-initialScale)/initialScale) > 0.1) // Remove zoom steps that are close to (real) 100%\r\n      .concat([initialScale]) // Add a (real) 100% step\r\n    , centerX = this.viewer.clientWidth / 2 + this.translateX\r\n    , centerY = this.viewer.clientHeight / 2 + this.translateY\r\n    , newScale = zSteps.map(z => z - this.scale).filter(z => z*dir > 0) // Pick only the steps in the needed direction\r\n      .sort((a,b) => (a-b)*dir)[0] + this.scale // Find the closest step\r\n    if (!isNaN(newScale)) { // It may be NaN in case when minimum or maximum zoom amount is achieved\r\n      this.showPercentage(me._scaleDownFactor * newScale)\r\n      this.translateX += (centerX - this.mouseX)/this.scale * (newScale-this.scale)\r\n      this.translateY += (centerY - this.mouseY)/this.scale * (newScale-this.scale)\r\n      this.scale = newScale\r\n      this.applyTransform()\r\n      this.flashLabel()\r\n    }\r\n  }\r\n  showPercentage(scale) {\r\n    this.viewer.querySelector('.scale-indicator').innerText = `| ${Math.round(scale * 100)}%`\r\n  }\r\n  // Dragging\r\n  handleDrag(ev) {\r\n    let me = this.currentMediaItem\r\n    if (!me) return;\r\n    let dx = this.mouseX - this.gripX\r\n    , dy = this.mouseY - this.gripY\r\n    if (dx != 0 || dy != 0) {\r\n      if (!this.isDragged) {\r\n        this.currentMediaItem.classList.add('no-transition')\r\n        this.isDragged = true\r\n        this.initialTransX = this.translateX\r\n        this.initialTransY = this.translateY\r\n      }\r\n      this.translateX = this.initialTransX+dx\r\n      this.translateY = this.initialTransY+dy\r\n      this.applyTransform()\r\n    }\r\n  }\r\n  // Switching\r\n  switchItem(thumb) {\r\n    let link = thumb._findParent('a')\r\n    , isVideo = link.classList.contains('movie')\r\n    let [postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh] = isVideo\r\n      ? MediaViewer.parseVideo(link)\r\n      : MediaViewer.parseImg(link)\r\n    let win_w = this.viewer.clientWidth, win_h = this.viewer.clientHeight\r\n    , scaleDownFactor = Math.min(win_w / imgw, win_h / imgh, 1)\r\n    this.showPercentage(scaleDownFactor)\r\n    this.resetTransform()\r\n    this.applyTransform()\r\n    this.currentMediaItem._isVideo = isVideo\r\n    this.currentMediaItem._scaleDownFactor = scaleDownFactor\r\n    this.currentMediaItem.classList.remove('no-transition')\r\n    this.currentMediaItem.innerHTML = this.createMediaElement(thumb.src, imgw, imgh, imgurl, null, isVideo)\r\n    this.setVolume(this.currentMediaItem)\r\n    this.currentThumb.style.visibility = 'visible'\r\n    thumb.style.visibility = 'hidden'\r\n    this.post = thumb._findParent('.postbody')\r\n    this.currentThumb = thumb\r\n    this.updateCounter()\r\n    this.refreshList()\r\n  }\r\n  setVolume(me) {\r\n    if (!me._isVideo) return;\r\n    let vid = me.querySelector('video')\r\n    vid.volume = localStorage['mediaVolume'] || 1\r\n    vid.onvolumechange = function() {\r\n      localStorage['mediaVolume'] = this.muted ? 0 : this.volume\r\n    }\r\n  }\r\n  updateCounter() {\r\n    let index = this.findIndex(this.currentThumb)\r\n    this.viewer.querySelector('.item-counter').innerText = `${index+1}/${this.list.length}`\r\n    this.flashLabel()\r\n  }\r\n  flashLabel() {\r\n    clearTimeout(this.flashLabelTimeout)\r\n    this.viewer.querySelector('.mv-label').classList.add('mvl-visible')\r\n    this.flashLabelTimeout = setTimeout(() => this.viewer.querySelector('.mv-label').classList.remove('mvl-visible'), 1000)\r\n  }\r\n  // Closing\r\n  collapse() {\r\n    document.body.style.overflow = ''\r\n    let me = this.currentMediaItem\r\n    , mi_w = me.clientWidth, mi_h = me.clientHeight\r\n    , svg = me.querySelector('.placeholder-svg')\r\n    , resizeFactor = Math.min(this.viewer.clientHeight/svg.naturalHeight, this.viewer.clientWidth/svg.naturalWidth)\r\n    if (me._isVideo) {\r\n      me.querySelector('video').remove()\r\n    }\r\n    this.isDragged = false\r\n    if (resizeFactor < 1) {\r\n      mi_w = svg.naturalWidth * resizeFactor\r\n      mi_h = svg.naturalHeight * resizeFactor\r\n    }\r\n    let offScreen = true, transform = ''\r\n    if (document.body.contains(this.currentThumb)) {\r\n      let thumbBCR = this.currentThumb.getBoundingClientRect()\r\n      offScreen = !(\r\n        thumbBCR.y < window.innerHeight\r\n        &&\r\n        (thumbBCR.y + thumbBCR.height) > 0\r\n        &&\r\n        thumbBCR.x < window.innerWidth\r\n        &&\r\n        (thumbBCR.x + thumbBCR.width) > 0\r\n      )\r\n      if (!offScreen) {\r\n        let transX = (thumbBCR.x + thumbBCR.width/2) - this.viewer.clientWidth/2\r\n        , transY = (thumbBCR.y + thumbBCR.height/2) - this.viewer.clientHeight/2\r\n        me.style.transform = `translate(${transX}px, ${transY}px) scale(${thumbBCR.width/mi_w})`\r\n      }\r\n    }\r\n    if (offScreen) {\r\n      me.style.transform = 'translate(0px, 0px) scale(0)'\r\n    }\r\n    me.classList.remove('no-transition')\r\n    this.container.classList.add('mvc-collapsed')\r\n    setTimeout(() => {\r\n      this.container.remove()\r\n      this.currentThumb.style.visibility = 'visible'\r\n      if (this.onCollapse) this.onCollapse()\r\n    }, 250)\r\n  }\r\n  // Full screen on and off\r\n  toggleFullSize(on) {\r\n    document.body.style.overflow = on ? 'hidden' : ''\r\n    if (on)\r\n      this.viewer.classList.remove('mv-transparent')\r\n    else\r\n      this.viewer.classList.add('mv-transparent')\r\n  }\r\n  // Media element within container\r\n  createMediaElement(underImageSrc, imgw, imgh, imgurl, trans='', isVideo=false) {\r\n    return `<div class=\"media-item ${isVideo ? 'loaded' : ''}\" ${trans}>\r\n      <div style=\"background-image: url(${underImageSrc}); max-width: ${imgw}px\" class=\"mv-under\"></div>\r\n      <${isVideo ? 'video controls autoplay loop' : 'img'} src=\"${imgurl}\" class=\"mv-over\" ${isVideo \r\n        ? `></video><img class=\"video-event-overlay\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' width='${imgw}' height='${Math.min(imgh, window.innerHeight)-50}'%2F%3E\">`\r\n        : `onload=\"this.parentElement.classList.add('loaded')\">`}\r\n      <img class=\"placeholder-svg\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' width='${imgw}' height='${imgh}'%2F%3E\">\r\n    </div>`\r\n  }\r\n}\r\n\r\n// Insert adjacent HTML and immediately return the inserted element\r\nElement.prototype._ins = function(position='beforeend', html) {\r\n  this.insertAdjacentHTML(position, html)\r\n  position = position.toLowerCase()\r\n  if (position == 'afterbegin') \r\n    return this.firstElementChild\r\n  else if (position == 'beforeend')\r\n    return this.lastElementChild\r\n  else if (position == 'beforebegin')\r\n    return this.previousElementSibling\r\n  else\r\n    return this.nextElementSibling\r\n}\r\n\r\nfunction expandimg_old(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh) {\r\n  let element = document.getElementById(\"thumb\" + postnum);\r\n  if (element == null) return false;\r\n  let $element = $(element)\r\n  , $postbody = $element.parents('.postbody')\r\n  , $fc_filename = $element.parents('figure').find('.fc-filename')\r\n  , fc_width\r\n  if (element.getElementsByTagName('img')[0].getAttribute('alt').substring(0,4)!='full') {\r\n    $element.html('<img src=\"'+imgurl+'\" alt=\"full'+postnum+'\" class=\"thumb\" height=\"'+imgh+'\" width=\"'+imgw+'\">');\r\n    if (! Settings.expandImgFull()) {\r\n      let img = element.getElementsByTagName('img')[0]\r\n      , max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth\r\n      , offset = 50\r\n      , offset_el = img\r\n\r\n      while (offset_el != null) {\r\n        offset += offset_el.offsetLeft;\r\n        offset_el = offset_el.offsetParent;\r\n      }\r\n      var new_w = max_w - offset;\r\n      if (img.width > new_w) {\r\n        var ratio = img.width / img.height;\r\n        var zoom = 1 - new_w / img.width;\r\n        var new_h = new_w / ratio;\r\n        var notice = document.createElement('div');\r\n        notice.setAttribute('class', 'filesize');\r\n        notice.style.textDecoration = 'underline';\r\n        var textNode = document.createTextNode(_l.imageDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit);\r\n        notice.appendChild(textNode);\r\n        element.insertBefore(notice, img);\r\n        $(img).width(new_w);\r\n        $(img).height(new_h);\r\n      }\r\n      fc_width = new_w\r\n    }\r\n    else\r\n      fc_width = imgw\r\n    if ($postbody) $postbody.addClass('postbody-expanded')\r\n  }\r\n  else {\r\n    element.innerHTML = '<img src=\"' + thumburl + '\" alt=\"' + postnum + '\" class=\"thumb\" height=\"' + thumbh + '\" width=\"' + thumbw + '\">';\r\n    fc_width = thumbw\r\n    if ($postbody) $postbody.removeClass('postbody-expanded')\r\n  }\r\n  $fc_filename[0].style.maxWidth = `${fc_width - 50}px`\r\n  return false;\r\n}\r\n\r\nfunction expandimg(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh) {\r\n  if (Settings.newMediaViewer()) {\r\n    let mv = new MediaViewer(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh)\r\n    mv.onCollapse = () => mv = null //gc\r\n  }\r\n  else {\r\n    expandimg_old(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh)\r\n  }\r\n  return false\r\n}\r\n\r\nfunction expandAllImages() {\r\n  document.querySelectorAll('a[onclick^=\"javascript:return expandimg\"]').forEach(a => {\r\n    if (a.querySelector('img')?.alt?.indexOf('full') == -1) {\r\n      expandimg_old(...MediaViewer.parseImg(a))\r\n    }\r\n  })\r\n  // expanding videos is is pointless as they won't preload ()\r\n  // document.querySelectorAll('.movie').forEach(mov => expandVideo_old($(mov), ''))\r\n}\r\n\r\nfunction getDownloadList() {\r\n  let newWindow = window.open()\r\n  newWindow.document.body.innerHTML = [].map.call(document.querySelectorAll('.filesize a'), a=>a.href).join('<br>')\r\n}\r\n\r\n// YOBA previews\r\nvar PostPreviews = {\r\n  zindex:  3,\r\n  parent: {},\r\n\r\n  _parseLink: function(el) {\r\n    let url = el.getAttribute(\"href\")\r\n    if (url) {\r\n      let matches = url.match(/\\/(.+)\\/res\\/([0-9]+)\\.html#([0-9]+)|postbynumber\\.php\\?b=(.+)&p=([0-9]+)/i)\r\n      if (matches) return {\r\n        board: matches[1] || matches[4],\r\n        parent: matches[2] || '?',\r\n        post: matches[3] || matches[5],\r\n      }\r\n    }\r\n    let cl = [].find.call(el.classList, c => c.match(/ref\\|.+?\\|([0-9]+|\\?)\\|[0-9]+/))\r\n    if (cl) {\r\n      cl = cl.split('|')\r\n      return {\r\n        board: cl[1],\r\n        parent: cl[2],\r\n        post: cl[3],\r\n      }\r\n    }\r\n    return null\r\n  },\r\n\r\n  _mouseover: function(e) {\r\n    e.stopPropagation();\r\n    var isCatalog = $(this).hasClass('catalog-entry')\r\n    , parsedURL = PostPreviews._parseLink(this)\r\n    if (!parsedURL) return false;\r\n    let board = parsedURL['board']\r\n    , parentid = parsedURL['parent']\r\n    , postid = parsedURL['post']\r\n    , previewid = 'preview_'+board+'_'+postid\r\n    , $preview = $('#' + previewid)\r\n    if ($preview.length == 0) {\r\n      $('body').children().first().before('<div id=\"'+previewid+'\"></div>');\r\n      $preview = $('#' + previewid);\r\n      $preview.addClass('reflinkpreview content-background pre-hidden actual-reflinkpreview');\r\n      $preview.mouseleave(PostPreviews._mouseout);\r\n      $preview.mouseover(PostPreviews.mouseOverPreview);\r\n    }\r\n    else {\r\n      if ($preview[0]._pinned)\r\n        return false // No need to recreate a preview in this case\r\n    }\r\n    var parent = $(this).parents('div[id^=preview]');\r\n    if (parent.length > 0) {\r\n      if (previewid == parent.attr('id')) return; // anti-recursion\r\n      for (var id in PostPreviews.parent) { \r\n        if (id == previewid || PostPreviews.parent[id] == previewid) \r\n          return\r\n      }\r\n      PostPreviews.parent[previewid] = parent.attr('id');\r\n    }\r\n    let transformOrigin;\r\n    if(e.clientY < ($(window).height() / 1.5)) {\r\n      $preview.css({top:e.pageY+5});\r\n      transformOrigin = \"top \"\r\n    } else {\r\n      $preview.css({bottom:$(window).height()-e.pageY+5});\r\n      transformOrigin = \"bottom \"\r\n    }\r\n    if(e.clientX < ($(window).width() / 1.5)) {\r\n      $preview.css({left:e.pageX+15});\r\n      transformOrigin += \"left\"\r\n    } else {\r\n      $preview.css({right:$(window).width()-e.pageX+15});\r\n      transformOrigin += \"right\"\r\n    }\r\n    $preview.css({zIndex: PostPreviews.zindex++, \"transform-origin\": transformOrigin});\r\n    this.style.cursor = \"progress\"\r\n    let preview = $preview[0]\r\n    HTMLoader.getPost(board, parentid, postid, (err, post) => {\r\n      window.setTimeout(() => {\r\n        preview.getBoundingClientRect() // force reflow or how is this thing called\r\n        $preview.html(post ? post : (_l.oops + (err !== false ? ` (${err})` : '')))\r\n        .removeClass('pre-hidden')\r\n        this.style.cursor = \"pointer\"\r\n        // Add pin button\r\n        let ebtns = preview.querySelector('.extrabtns')\r\n        if (!ebtns) return;\r\n        ebtns.insertAdjacentHTML('beforeEnd', `\r\n        <a href=\"#\" class=\"pin-preview pinner unpinned\" title=\"${_l.pinUnpin}\">\r\n          <svg class=\"icon b-icon\">\r\n            <use class=\"use-pin\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-pin\"></use>\r\n            <use class=\"use-unpin\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unpin\"></use>\r\n          </svg>\r\n        </a>`)\r\n        let pinner = ebtns.querySelector('.pinner')\r\n        pinner.onclick = (ev) => {\r\n          ev.preventDefault()\r\n          ev.stopPropagation()\r\n          PostPreviews.pinPreview($preview[0])\r\n        }\r\n      }, 0)\r\n    })\r\n    e.preventDefault();\r\n  },\r\n\r\n  mouseOverPreview: function() {\r\n    var preview = $(this);\r\n    if ($(this).is('a')) {\r\n      let parsedURL = PostPreviews._parseLink(this)\r\n      if (!parsedURL) return;\r\n      let board = parsedURL['board']\r\n      , postid = parsedURL['post']\r\n      preview = $('#preview_'+board+\"_\"+postid).first();\r\n    }\r\n    while (preview.length > 0) {\r\n      clearTimeout(preview[0].fadeout)\r\n      preview = $('#' + PostPreviews.parent[preview.attr('id')])\r\n    }\r\n  },\r\n\r\n  _mouseout: function(ev, nodelay=false) {\r\n    var preview = $(this);\r\n    if ($(this).is('a')) {\r\n      if (this.predelay) {\r\n        clearTimeout(this.predelay)\r\n      }\r\n      let parsedURL = PostPreviews._parseLink(this)\r\n      if (!parsedURL) return;\r\n      let board = parsedURL['board']\r\n      , postid = parsedURL['post']\r\n      preview = $('#preview_'+board+\"_\"+postid).first();\r\n    }\r\n    while (preview.length > 0) {\r\n      clearTimeout(preview[0].fadeout)\r\n      let pre = preview\r\n      if (pre[0]._pinned) return;\r\n\r\n      preview[0].fadeout = setTimeout(() => {\r\n        pre.addClass('pre-hidden')\r\n        setTimeout(() => {\r\n          delete PostPreviews.parent[pre.attr('id')];\r\n          pre.remove();\r\n        }, PostPreviews._timings.transition)\r\n      }, nodelay ? 0 : PostPreviews._timings.fade)\r\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);\r\n    }\r\n  },\r\n\r\n  pinPreview: function(pre, pin, temporary=false) {\r\n    let pinner = pre.querySelector('.pinner')\r\n    if (typeof pin == 'undefined')\r\n      pin = !pinner.classList.contains('pinned')\r\n    pinner.classList.toggle('pinned', pin)\r\n    pinner.classList.toggle('unpinned', !pin)\r\n    if (temporary) {\r\n      let o = pre\r\n      o.addEventListener('mouseenter', () => PostPreviews.pinPreview(o, false))\r\n      o.classList.add('temporarily-pinned')\r\n    }\r\n    while (pre) {\r\n      pre._pinned = pin\r\n      pre = document.querySelector(`#${PostPreviews.parent[pre.id]}`)\r\n    }\r\n  },\r\n\r\n  _timings: {\r\n    predelay: 50,\r\n    transition: 200,\r\n    fade: 400\r\n  }\r\n}\r\n\r\nfunction set_inputs(id) {\r\n  let form = document.getElementById(id)\r\n  if (form) {\r\n    let name = form.querySelector('input[name=name]')\r\n    if(name && !name.value) {\r\n      let savedName = getCookie(\"name\")\r\n      if (~savedName.indexOf('#'))\r\n        name.type = 'password'\r\n      name.value = savedName\r\n    }\r\n    if(!form.em.value) form.em.value = getCookie(\"email\");\r\n    if(!form.postpassword.value) form.postpassword.value = get_password(\"postpassword\");\r\n  }\r\n}\r\n\r\nfunction set_delpass(id) {\r\n  let form = document.getElementById(id)\r\n  if (! form) return;\r\n  let postpassword = form.postpassword\r\n  if (postpassword && !postpassword.value) {\r\n    postpassword.value = get_password(\"postpassword\");\r\n  }\r\n}\r\n\r\n(function ($) { // [!] What the fuck is this?\r\n  $.event.special.load = {\r\n    add: function (callback) {\r\n      if ( this.nodeType === 1 && this.tagName.toLowerCase() === 'img' && this.src !== '' ) {\r\n        if ( this.complete || this.readyState === 4 ) {\r\n          callback.handler.apply(this);\r\n        }\r\n        else if ( this.readyState === 'uninitialized' && this.src.indexOf('data:') === 0 ) {\r\n          $(this).trigger('error');\r\n        }\r\n\r\n        else {\r\n          $(this).bind('load', callback.handler);\r\n        }\r\n      }\r\n    }\r\n  };\r\n}(jQuery));\r\n\r\nvar Settings = {\r\n  _checkbox: function(clicked, settingName, defaultValue, perBoard=false) {\r\n    let settingNameGeneral = settingName\r\n    if (perBoard)\r\n      settingName = settingName+'.'+this_board_dir\r\n    if (localStorage == null) {\r\n      pups.err(_l.noLocalStorage);\r\n      return;\r\n    }\r\n    if (localStorage[settingName] == null) {\r\n      localStorage[settingName] = defaultValue;\r\n    }\r\n    if (clicked == true) {\r\n      // save it\r\n      localStorage[settingName] = $('#settings_' + settingNameGeneral).is(\":checked\");\r\n    } else {\r\n      // update checkbox (called on load)\r\n      if (localStorage[settingName] == 'true')\r\n        $('#settings_' + settingNameGeneral).attr(\"checked\",\"checked\");\r\n      else\r\n        $('#settings_' + settingNameGeneral).removeAttr(\"checked\");\r\n    }\r\n    return (localStorage[settingName] == 'true') || (localStorage[settingName] == true) ;\r\n  },\r\n\r\n  fxEnabled: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'fxEnabled', true);\r\n    if (changed != null) {\r\n      $.fx.off = !enabled;\r\n    }\r\n    return enabled;\r\n  },\r\n\r\n  showReplies: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'showReplies', true);\r\n    if (changed != null && (typeof is_catalog === 'undefined' || !is_catalog)) {\r\n      scrollAnchor.save('replymap', '.postnode')\r\n      if (enabled) {\r\n        replyMap.showReplies()\r\n        injector.remove('hide-replies')\r\n      }\r\n      else {\r\n        injector.inject('hide-replies', '.replieslist {display: none}')\r\n      }\r\n      scrollAnchor.restore('replymap')\r\n    }\r\n    return enabled;\r\n  },\r\n\r\n  sfwMode: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'sfwMode', false);\r\n    if (enabled) {\r\n      injector.inject('sfwMode', 'figure > *, .emoji { opacity: 0.05;} figure:hover > *, .postbody:hover .emoji { opacity: 1;}');\r\n    }\r\n    else {\r\n      injector.remove('sfwMode');\r\n    }\r\n    return enabled;\r\n  },\r\n\r\n  hideCompletely: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'hideCompletely', false, true);\r\n    if (changed) {\r\n      HiddenItems.hideCompletely = enabled\r\n      HiddenItems.updateCSS()\r\n    }\r\n    return enabled;\r\n  },\r\n\r\n  expandImgFull: function(changed) {\r\n    return Settings._checkbox(changed, 'expandImgFull', false);\r\n  },\r\n\r\n  constrainWidth: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'constrainWidth', true);\r\n    if (enabled) {\r\n      injector.inject('constrainWidth', `body {\r\n        max-width: 960px;\r\n        margin: 0px auto;\r\n      }`)\r\n    }\r\n    else {\r\n      injector.remove('constrainWidth')\r\n    }\r\n  },\r\n\r\n  newMediaViewer: function(changed) {\r\n    return Settings._checkbox(changed, 'newMediaViewer', true);\r\n  },\r\n\r\n  hidePostBtn: function(changed) {\r\n    let enabled = Settings._checkbox(changed, 'hidePostBtn', true)\r\n    if (!enabled) {\r\n      injector.inject('hidePostBtn', `.hide-post-btn {display: none}`)\r\n    }\r\n    else {\r\n      injector.remove('hidePostBtn')\r\n    }\r\n    if (!changed) {\r\n      HiddenItems.lists.posts.forEach(id => {\r\n        $(`#postnode${id}`).find('.hide-post-btn').attr('title', _l.unhidePost)\r\n        .find('use').attr('xlink:href', '#i-unhide')\r\n      })\r\n    }\r\n    return enabled\r\n  },\r\n\r\n  endlessScroll: function(changed) {\r\n    let enabled = Settings._checkbox(changed, 'endlessScroll', false)\r\n    endlessScroll.toggle(enabled)\r\n  }\r\n}\r\n\r\nvar rswap = {\r\n  i: true,\r\n  swap: function() {\r\n    if(this.i) $('#delform').before($('#rswapper')).after($('.postarea'));\r\n    else $('#delform').before($('.postarea')).after($('#rswapper'));\r\n    this.i = !this.i;\r\n  }\r\n}\r\n\r\nvar captchalang = getCookie('captchalang') || 'ru';\r\nfunction setCaptchaLang(lang) {\r\n  if(!in_array(lang, ['ru', 'en', 'num'])) return;\r\n  captchalang = lang;\r\n  set_cookie('captchalang', lang, 365);\r\n  pups.succ(_l.captchaLangChanged)\r\n}\r\n\r\nconst offClick = []\r\n\r\nfunction readyset() {\r\n  $('.make-me-readonly').each(function() {\r\n    $(this).attr('readonly', true)\r\n    .on('focus', function() {\r\n      $(this).removeAttr('readonly')\r\n    })\r\n  })\r\n\r\n  if(!ispage) $('.mgoback').show();\r\n  if(isTouch)\r\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'desktop\\'); location.reload();\">'+_l.returnDesktop+'</a><br>');\r\n  else\r\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'touch\\'); location.reload();\">'+_l.returnTouch+'</a><br>');\r\n\r\n  $('#js_settings').prepend(_l.captchalang+': <a href=\"javascript:setCaptchaLang(\\'ru\\');\">Cyrillic</a> | <a href=\"javascript:setCaptchaLang(\\'en\\');\">Latin</a> | <a href=\"javascript:setCaptchaLang(\\'num\\');\">Numeral</a><br />');\r\n\r\n  $('#js_settings').append(`\r\n    <a href=\"javascript:expandAllImages()\">${_l.expandAllImages}</a><br>\r\n    <a href=\"javascript:getDownloadList()\">${_l.getDownloadList}</a><br>`)\r\n\r\n  if(Styles.$cancelLink)\r\n    $('#js_settings').prepend(Styles.$cancelLink)\r\n\r\n  let pf = document.querySelector('#postform')\r\n  if (pf)\r\n    richFileInput.initForm(pf)\r\n\r\n  pups.init();\r\n  chpok.init(true)\r\n\r\n  LatexIT.init();\r\n  checkhighlight();\r\n  checkgotothread();\r\n  checknamesave();\r\n\r\n  bnrs.init();\r\n\r\n  if(getCookie('ku_menutype')) {\r\n    var c = Cookie('ku_menutype');\r\n    if(c != 'default' && c != '')\r\n      document.getElementById('overlay_menu').style.position = c;\r\n  }\r\n\r\n  //initial post-process\r\n  processNodeInsertion()\r\n\r\n  if(!isTouch) {\r\n    cloud20.init();\r\n    $('.sect-exr').mouseenter(function() { menu_show('ms-'+$(this).data('toexpand')); });\r\n    $('#overlay_menu').mouseleave(function() { menu_show('_off_'); });\r\n    $('body').on('mouseenter', \"a[class^='ref']\", function(ev) {\r\n      this.predelay = setTimeout(() => PostPreviews._mouseover.bind(this)(ev), PostPreviews._timings.predelay)\r\n    })\r\n    .on('mouseleave', \"a[class^='ref']\", PostPreviews._mouseout)\r\n    .on('click', \"a[class^='ref']\", function(e) {\r\n      e.preventDefault()\r\n      let href = this.getAttribute('href')\r\n      if (!highlight(href.split('#')[1], 0)) {\r\n        redirectTo(href)\r\n      }\r\n    })\r\n  }\r\n  else {\r\n    add_mob_menu();\r\n    $('body').addClass('touch-mode');\r\n    $('.sect-exr:not([data-toexpand=\"_options\"])').parent().hide();\r\n    $('.sect-exr').click(function() {\r\n      if($('#js_settings').is(':visible')) {\r\n        menu_show('_off_');\r\n      }\r\n      else {\r\n        menu_show('ms-_options');\r\n      }\r\n      return false;\r\n    });\r\n    offClick.push(ev => {\r\n      menu_show('_off_');\r\n      document.querySelectorAll('[id^=preview]').forEach(pre => PostPreviews._mouseout.bind(pre)(null, true))\r\n    })\r\n    $('body').on('click', \"a[class^='ref']\", PostPreviews._mouseover)\r\n    .on('doubletap', '.postnode', function(ev) {\r\n      ev.stopPropagation()\r\n      ev.preventDefault()\r\n      this.querySelector('.qrl').click()\r\n    })\r\n  }\r\n\r\n  $('html').click(ev => offClick.forEach(fn => fn(ev)))\r\n\r\n  /* ---------- All delegated events on body ---------- */\r\n  $('body')\r\n  .on('click', '.uib-mup', function() {\r\n    markup($(this).parents('form'), $(this).data('mups'), $(this).data('mupe'), $(this).data('imups'), $(this).data('imupe'));\r\n    return false;\r\n  })\r\n  .on('click', '.uib-bul', function() {\r\n    bullets($(this).parents('form'), $(this).data('bul'), $(this).data('imups'), $(this).data('imupe'));\r\n    return false;\r\n  })\r\n  .on('click', '.uib-tx', function() {\r\n    var target = $(this).data('target');\r\n    head.js('http://latex.codecogs.com/editor3.js', function() {\r\n      OpenLatexEditor(target,'phpBB','en-us', false, '','full');\r\n    });\r\n    return false;\r\n  })\r\n  //Video expanding\r\n  .on('click', '.movie', function(event) {expandVideo($(this), event)})\r\n  //new quick reply\r\n  .on('click', '.qrl', quickreply)\r\n  // ID highlighting\r\n  .on('click', '.hashpic', function() {\r\n    $('.highlight').removeClass('highlight')\r\n    let found = $(`.hashpic[alt=${$(this).attr('alt')}]`).each(function() {\r\n      $(this).parents('.posthead').parent().addClass('highlight')\r\n    }).length\r\n    pups.info(_l.found+': '+found, {time: 1.5})\r\n  })\r\n  .on('click', '.posttypeindicator a', function() { // TODO: what is this?\r\n    var xl = $(this);\r\n    var offset = $('[name=\"' + xl.attr('href').substr(1) + '\"]').offset() || $('[name=\"' + xl.text().split('>>')[1] + '\"]').offset() || false;\r\n    if(offset) {\r\n      $('html, body').animate({\r\n        scrollTop: offset.top - ( $('#overlay_menu').height() + 10 )\r\n      }, 250);\r\n    }\r\n    return false;\r\n  })\r\n  .on('click', '.dice', function() {\r\n    if(typeof $(this).data('html') === 'undefined') $(this).data('html', $(this).html());\r\n    var htm = stripHTML($(this).html());\r\n    $(this).html($(this).attr('title'));\r\n    $(this).attr('title', htm);\r\n  })\r\n  .on('click', '.reflink a', function(ev) {\r\n    ev.preventDefault()\r\n    let ref = this.parentElement\r\n    , postnode = ref._findParent('.postnode')\r\n    if (!lastActiveForm) {\r\n      quickreply.bind(postnode.querySelector('.qrl'))()\r\n    }\r\n    else {\r\n      let formBoard = is_overboard\r\n        ? lastActiveForm.getAttribute('id').match(/[0-9]+\\-(.+?)_qrf/)[1]\r\n        : this_board_dir\r\n      let postBody = postnode.querySelector('.postbody')\r\n      , qoutation = getPostQuotation(postBody)\r\n      insert(`>>${ref.dataset.b == formBoard ? '' : `/${ref.dataset.b}/`}${ref.dataset.id}\\n${qoutation}`)\r\n    }\r\n  })\r\n  //Ultimate YOBA Youtube embeds\r\n  .on('click','.embed-play-button', function(ev) {\r\n    ev.preventDefault()\r\n    unwrapEmbed($(this).parents('figure'))\r\n  })\r\n  .on('click','.collapse-video', function(ev) {\r\n    ev.preventDefault()\r\n    wrapEmbed($(this).parents('figure'))\r\n  })\r\n  .on('mouseenter', '._country_', function() {\r\n    if(typeof $(this).attr('title') === \"undefined\") {\r\n      $(this).attr('title', countries[$(this).attr('src').split('flags/')[1].split('.png')[0].toUpperCase()]);\r\n    }\r\n  })\r\n  .on('click', '.audiowrap', function(ev) {\r\n    ev.preventDefault();\r\n    let $this = $(this)\r\n    var src = $this.attr('href');\r\n    let $fig = $this.parents('figure')\r\n    if (! $fig.hasClass('unwrapped')) {\r\n      $fig.addClass('unwrapped unwrapped-audio')\r\n    }\r\n    let $fsz = $fig.find('.filesize');\r\n    if (! $fsz.find('.collapse-btn').length)\r\n      $fsz.append(`\r\n        <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\r\n          ${makeIcon('shrink', 'b-icon')}\r\n        </button>`);\r\n    if (! $this.find('audio').length)\r\n      $this.append('<audio src=\"'+src+'\" controls autoplay=\"true\"></audio>')\r\n    $fsz.find('.collapse-video').click(function() {\r\n      $fig.removeClass('unwrapped unwrapped-audio')\r\n      .find('audio')[0].pause()\r\n    })\r\n  })\r\n  .on('change', '.multidel', function() {\r\n    let itemCount = $('.multidel:checked').length\r\n\r\n    if (! $('.item-count').length) {\r\n      $('.userdelete tbody').prepend(`<tr><td>\r\n        ${_l.selected}:&nbsp;<span class=\"item-count\"></span>\r\n        <button class=\"close-multisel icon-wraping-button\" title=\"${_l.cancel}\">${makeIcon('x', 'b-icon ', false)}</button>\r\n      </td></tr>`)\r\n      $('.close-multisel').click(function(ev) {\r\n        ev.preventDefault()\r\n        $('.multidel').prop('checked', false)\r\n        $('body').removeClass('select-multiple')\r\n        $('.userdelete').removeClass('ud-active')\r\n      })\r\n    }\r\n\r\n    if (itemCount > 0) {\r\n      $('.item-count').text(itemCount)\r\n    }\r\n    else {\r\n      $('.userdelete').removeClass('ud-active')\r\n      $('body').removeClass('select-multiple')\r\n    }\r\n  })\r\n  /* Post menu */ \r\n  .on('click', 'label.postinfo', function(ev) {\r\n    if (! $(this).find('.multidel').is(':visible')) {\r\n      ev.stopPropagation()\r\n      ev.preventDefault()\r\n      let $this = $(this)\r\n      , $menu = $this.parent().find('.post-menu')\r\n      let on = !$menu.is(':visible')\r\n      $('.post-menu').hide()\r\n      if (! $menu.length) {\r\n        let $postnode = $(this).parents('.postnode')\r\n        , board = $postnode.data('board')\r\n        , id = $postnode.data('id')\r\n        , isOP = $postnode.hasClass('op')\r\n        /*if (!isOP)\r\n          $postnode.toggleClass('post-hidden', HiddenItems.isHidden('post', id))*/\r\n        this.insertAdjacentHTML('afterend', `<div class=\"content-background post-menu\" style=\"display: none\"> \r\n          <ul>\r\n            <li class=\"menu-delete\">${makeIcon('x')}<span>${_l.del}</span></li>\r\n            ${!isOP ? `\r\n              ${typeof opmod !== 'undefined' && +opmod || 0 ? `<li class=\"menu-delete menu-delete-op\">${makeIcon('x')}<span>${_l.del} ${_l.asOP}</span></li>`: ''}\r\n              <li class=\"menu-hide\">${makeIcon('hide')}<span>${_l.hidePost}</span></li>\r\n              <li class=\"menu-unhide\">${makeIcon('unhide')}<span>${_l.unhidePost}</span></li>\r\n            `: ''}\r\n            <li class=\"menu-report\">${makeIcon('warning')}<span>${_l.report}</span></li>\r\n            <li class=\"menu-link-share\">${makeIcon('link')}<span>${_l.links}</span></li>\r\n            ${$postnode.find('.post-ttl').length ? `\r\n              <li class=\"menu-cancel-timer\">${makeIcon('untimer')}<span>${_l.cancelTimer}</span></li>\r\n            `: ''}\r\n            <li class=\"menu-select-multiple\">${makeIcon('select-multiple')}<span>${_l.selectMultiple}</span></li>\r\n            ${kumod_set ? `\r\n              <li class=\"menu-delete menu-delete-mod\">${makeIcon('x')}<span>${_l.del} ${_l.asMod}</span></li>\r\n              <a href=\"${ku_cgipath}/manage_page.php?action=bans&amp;banboard=${board}&amp;banpost=${id}\">\r\n                <li class=\"menu-ban\">${makeIcon('ban')}<span>${_l.ban}...<span></li>\r\n              </a>\r\n              ${isOP ? `\r\n                <a class=\"stickypost-btn\" onclick=\"Ajax.modThread(this, 'stickypost'); return false\"\r\n                href=\"${ku_cgipath}/manage_page.php?action=stickypost&amp;board=${board}&amp;postid=${id}\">\r\n                  <li>${makeIcon('pin')}<span>${_l.stickthread}<span></li>\r\n                </a>\r\n                <a class=\"unstickypost-btn\" onclick=\"Ajax.modThread(this, 'unstickypost'); return false\"\r\n                href=\"${ku_cgipath}/manage_page.php?action=unstickypost&amp;board=${board}&amp;postid=${id}\">\r\n                  <li>${makeIcon('unpin')}<span>${_l.unstickthread}<span></li>\r\n                </a>\r\n                <a class=\"lockpost-btn\" onclick=\"Ajax.modThread(this, 'lockpost'); return false\"\r\n                href=\"${ku_cgipath}/manage_page.php?action=lockpost&amp;board=${board}&amp;postid=${id}\">\r\n                  <li>${makeIcon('lock')}<span>${_l.lockthread}<span></li>\r\n                </a>\r\n                <a class=\"unlockpost-btn\" onclick=\"Ajax.modThread(this, 'unlockpost'); return false\"\r\n                href=\"${ku_cgipath}/manage_page.php?action=unlockpost&amp;board=${board}&amp;postid=${id}\">\r\n                  <li>${makeIcon('unlock')}<span>${_l.unlockthread}<span></li>\r\n                </a>`\r\n              : ''}`\r\n            : ''}\r\n          </ul>\r\n        </div>`)\r\n        $menu = $this.parent().find('.post-menu')\r\n      }\r\n      $menu.toggle(on)\r\n    }\r\n  })\r\n  // Figure menu is global because of FUCKING overflow\r\n  .on('click', '.file-menu-toggle', function(ev) {\r\n    ev.stopPropagation()\r\n    ev.preventDefault()\r\n    let $menu = $('.file-menu')\r\n    , $this = $(this)\r\n    , $fsz = $this.parent()\r\n    , visible = $menu.is(':visible')\r\n    $('.post-menu').hide()\r\n    if (visible && $menu[0].$boundTo[0] == $fsz[0]) return;\r\n    let ofs = $fsz.offset()\r\n    , offsetTop = $fsz.hasClass('embed-wrap') ? 22 : $fsz.outerHeight()\r\n    $menu.css({\r\n      'left': `${ofs.left}px`,\r\n      'top': `${ofs.top + offsetTop}px`,\r\n      'min-width': `${$fsz.outerWidth()}px`\r\n    }).show()\r\n    let fileid = $fsz.parents('figure').data('fileid')\r\n    , $pn = $fsz.parents('.postnode')\r\n    , board = $pn.data('board')\r\n    , pid = $pn.data('id')\r\n    $menu[0].__menuProps = {\r\n      fileid: fileid,\r\n      board: board\r\n    }\r\n    $menu[0].$boundTo = $fsz\r\n    // Set the proper link for file banning\r\n    $menu.find('.menu-banfile').attr('href', `${ku_cgipath}/manage_page.php?action=bans&banboard=${board}&banpost=${pid}&banfile=${fileid}`)\r\n  })\r\n  .on('click', '.post-menu li', ev => ev.stopPropagation())\r\n  .on('click', '.menu-select-multiple', function(ev) {\r\n    $('.post-menu').hide()\r\n    let $menu = $(this).parents('.post-menu')\r\n    , isFile = $menu.hasClass('file-menu')\r\n    , $md = (isFile ? $menu[0].$boundTo : $(this).parents('.posthead'))\r\n    .find('.multidel')\r\n    if (! $md.length) return;\r\n    $md.prop('checked', true).trigger('change')\r\n    $('.userdelete').addClass('ud-active')\r\n    $('body').addClass('select-multiple')\r\n  })\r\n  .on('click', '.menu-link-share', function(ev) {\r\n    let $this = $(this)\r\n    , isShown = $this.find('input').length\r\n    if (! isShown) {\r\n      let $postnode = $this.parents('.postnode')\r\n      , board = $postnode.data('board')\r\n      , id = $postnode.data('id')\r\n      , directLink = ku_boardspath + $postnode.find('.shl').attr('href')\r\n      $this.find('span').html(`<input class=\"pm-direct-link pm-link\" type=\"text\" value=\"${directLink}\" title=\"${_l.directLink}\">&nbsp;\r\n        <input class=\"pm-quote-link pm-link\" type=\"text\" value=\"&gt;&gt;/${board}/${id}\" title=\"${_l.quoteLink}\">`)\r\n      .css({'font-size': 0})\r\n      .find('.pm-direct-link').click()\r\n    }\r\n    else\r\n      $this.toggleClass('direct-or-quote')\r\n  })\r\n  .on('click', '.pm-link', function(ev) {\r\n    ev.stopPropagation()\r\n    let $this = $(this)\r\n    $('.pm-link').removeClass('selected')\r\n    $this.focus().select().addClass('selected')\r\n  })\r\n  .on('click', '.menu-delete', function() {\r\n    let $this = $(this)\r\n    , $menu = $this.parents('.post-menu')\r\n    , menu = $menu[0]\r\n    , isFile = $menu.hasClass('file-menu')\r\n    , $item = isFile ? $menu[0].$boundTo : $this.parents('.posthead')\r\n    , $pass = $menu.find('.menu-password')\r\n    $this.addClass('spin-around')\r\n    let fd = new FormData()\r\n    if ($menu.find('.menu-captcha').length) {\r\n      let $c = $menu.find('input[name=captcha]')\r\n      if (!$c.val()) {\r\n        $c.focus()\r\n        pups.warn(_l.enterCaptcha)\r\n        $this.removeClass('spin-around')\r\n        return;\r\n      }\r\n      fd.append('captcha', $c.val())\r\n    }\r\n    if (isFile)\r\n      fd.append('delete-file[]', menu.__menuProps.fileid)\r\n    else\r\n      fd.append('post[]', $item.parents('.postnode').data('id'))\r\n    let asMod = $this.hasClass('menu-delete-mod')\r\n    if (asMod)\r\n      fd.append('moddelete', 1)\r\n    fd.append('opdelete', +$this.hasClass('menu-delete-op'))\r\n    fd.append('board', isFile \r\n      ? menu.__menuProps.board\r\n      : $item.parents('.postnode').data('board'))\r\n    fd.append('postpassword', $pass.length\r\n      ? $pass.find('input').val()\r\n      : $(`#delform input[name=\"postpassword\"]`).val())\r\n    Ajax.deleteItems(fd, data => {\r\n      $this.removeClass('spin-around')\r\n      if (!data) return;\r\n      let result = data[0]\r\n      if(!result.success && $item.is(':visible')) {\r\n        if (asMod) return;\r\n        if (!$pass.length) {\r\n          $menu.prepend(`<li class=\"menu-password\">${makeIcon('password')}\r\n            <input value=\"${get_password(\"postpassword\")}\" class=\"make-me-readonly\" type=\"password\" placeholder=\"${_l.password}\" readonly onfocus=\"this.readOnly=false\"></li>`)\r\n        }\r\n        if (result.special_error && result.special_error == 'captchalocked') {\r\n          addCaptchaToMenu($menu)\r\n        }\r\n        else {\r\n          $menu.find('.menu-password input').select()\r\n          .keydown(ev => {\r\n            if (ev.key == 'Enter') {\r\n              ev.preventDefault()\r\n              ev.stopPropagation()\r\n            }\r\n          })\r\n        }\r\n      }\r\n      else if (isFile)\r\n        $('.file-menu').hide()\r\n    })\r\n  })\r\n  .on('click', '.menu-report', function() {\r\n    let $this = $(this)\r\n    , $postnode = $this.parents('.postnode')\r\n    $this.addClass('spin-around')\r\n    let fd = new FormData()\r\n    fd.append('post[]', $postnode.data('id'))\r\n    fd.append('board', $postnode.data('board'))\r\n    Ajax.reportPost(fd, data => {\r\n      $this.removeClass('spin-around')\r\n    })\r\n  })\r\n  .on('click', '.menu-hide', function() {\r\n    let $postnode = $(this).parents('.postnode')\r\n    HiddenItems.hidePost($postnode.data('id')+'-'+$postnode.data('board'))\r\n    $postnode.addClass('post-hidden')\r\n    .find('.post-menu').hide()\r\n  })\r\n  .on('click', '.menu-unhide', function() {\r\n    let $postnode = $(this).parents('.postnode')\r\n    HiddenItems.unhidePost($postnode.data('id')+'-'+$postnode.data('board'))\r\n    $postnode.removeClass('post-hidden')\r\n  })\r\n  .on('click', '.menu-cancel-timer', function() {\r\n    let $this = $(this)\r\n    , $menu = $this.parents('.post-menu')\r\n    , menu = $menu[0]\r\n    , $pass = $menu.find('.menu-password')\r\n    , $postnode = $this.parents('.postnode')\r\n    $this.addClass('spin-around')\r\n    let fd = new FormData()\r\n    if ($menu.find('.menu-captcha').length) {\r\n      let $c = $menu.find('input[name=captcha]')\r\n      if (!$c.val()) {\r\n        $c.focus()\r\n        pups.warn(_l.enterCaptcha)\r\n        $this.removeClass('spin-around')\r\n        return;\r\n      }\r\n      fd.append('captcha', $c.val())\r\n    }\r\n    fd.append('post[]', $postnode.data('id'))\r\n    fd.append('board', $postnode.data('board'))\r\n    fd.append('modsave', $this.hasClass('menu-delete-mod'))\r\n    fd.append('opsave', $this.hasClass('menu-delete-op'))\r\n    fd.append('postpassword', $pass.length\r\n      ? $pass.find('input').val()\r\n      : $(`#delform input[name=\"postpassword\"]`).val())\r\n    Ajax.cancelTimer(fd, errors => {\r\n      $this.removeClass('spin-around')\r\n      if (errors.length) {\r\n        let result = errors[0]\r\n        if (!$pass.length) {\r\n          $menu.prepend(`<li class=\"menu-password\">${makeIcon('password')}\r\n            <input value=\"${get_password(\"postpassword\")}\" class=\"make-me-readonly\" type=\"password\" placeholder=\"${_l.password}\" readonly onfocus=\"this.readOnly=false\"></li>`)\r\n        }\r\n        if (result.special_error && result.special_error == 'captchalocked') {\r\n          addCaptchaToMenu($menu)\r\n        }\r\n        else {\r\n          $menu.find('.menu-password input').select()\r\n          .keydown(ev => {\r\n            if (ev.key == 'Enter') {\r\n              ev.preventDefault()\r\n              ev.stopPropagation()\r\n            }\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $menu.find('.menu-password, .menu-captcha').remove()\r\n      }\r\n    })\r\n  })\r\n  .on('click', '.csswrap', function(ev) {\r\n    ev.preventDefault()\r\n    let cssLink = $(this).attr('href')\r\n    , styleName = $(this).parent().find('.fc-filename').text()\r\n    Styles.testStyle(cssLink, styleName)\r\n  })\r\n  .on('blur', 'input[name=\"name\"]', function() {\r\n    let isTrip = ~this.value.indexOf('#')\r\n    this.type = isTrip ? 'password' : 'text'\r\n  })\r\n  .on('focus', 'input[name=\"name\"]', function() {\r\n    this.type ='text'\r\n  })\r\n\r\n  offClick.push(ev => {\r\n    $('.post-menu').hide()\r\n  })\r\n\r\n  $(window).resize(() => {\r\n    let $fileMenu = $('.file-menu')\r\n    if (! $fileMenu.is(':visible')) return;\r\n    let $fsz = $fileMenu[0].$boundTo\r\n    , ofs = $fsz.offset()\r\n    , offsetTop = $fsz.hasClass('embed-wrap') ? 22 : $fsz.outerHeight()\r\n    $fileMenu.css({\r\n      'left': `${ofs.left}px`,\r\n      'top': `${ofs.top + offsetTop}px`,\r\n      'min-width': `${$fsz.outerWidth()}px`\r\n    })\r\n  })\r\n\r\n  $('.userdelete').addClass('content-background reflinkpreview')\r\n  .find('tbody').append(`<tr><td><input name=\"moddelete\" value=\"${_l.del} (${_l.mod_})\" type=\"submit\" class=\"styled-button bad-button\" /></td></tr>`)\r\n\r\n  $('#delform').on('submit', function(e) {\r\n    e.preventDefault()\r\n    Ajax.deleteItems(new FormData(this))\r\n    return false\r\n  })\r\n\r\n  $('.userdelete input[type=submit]').click(function(e) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    let fd = new FormData($(this).parents('form')[0])\r\n    if (this.name == 'deletepost' || this.name == 'moddelete') {\r\n      Ajax.deleteItems(fd, null, this.name == 'moddelete')\r\n    }\r\n    if (this.name == 'cancel_timer') {\r\n      Ajax.cancelTimer(fd)\r\n    }\r\n    if (this.name == 'reportpost') {\r\n      Ajax.reportPost(fd)\r\n    }\r\n  })\r\n\r\n  /*$('input[name=reportpost]').click(function(e) {\r\n    e.preventDefault()\r\n    Ajax.reportPost(new FormData($(this).parents('form')[0]))\r\n  })*/\r\n  if (!is_overboard)\r\n    $('#delform').after('<div id=\"rswapper\">[<a onclick=\"javascript:rswap.swap();return false;\" href=\"#\">'+(ispage ? _l.NewThread : _l.reply)+'</a>]<hr /></div>');\r\n\r\n  Settings.sfwMode(false);\r\n  if (localStorage) {\r\n    for(var s in Settings) {\r\n      if (s.substring(0,1) == \"_\") continue;\r\n      $(\"#js_settings\").append('<label><input type=\"checkbox\" onchange=\"javascript:Settings.'+s+'(true)\" name=\"settings_'+s+'\" id=\"settings_'+s+'\" value=\"true\"> '+_l['settings_'+s]+'</label><br />');\r\n      Settings[s](false);\r\n    }\r\n  } else {\r\n    $(\"#js_settings\").append(\"<span style=\\\"color:#F00\\\">\"+_l.noLocalStorage+\"</span><br />Твой браузер — говно. Скачай <a href=\\\"/web/20110329072959/http://google.com/chrome\\\" target=\\\"_blank\\\">Chome</a>, например.\");\r\n  }\r\n\r\n  var textbox = document.getElementById('message');\r\n  if(textbox) {\r\n    textbox.onfocus=function(){is_entering = true;}\r\n    textbox.onblur=function(){is_entering = false;}\r\n  }\r\n\r\n  // Figure menu is global because of FUCKING overflow\r\n  $('body').append(`\r\n    <div class=\"content-background post-menu file-menu\" style=\"display: none\"> \r\n      <ul>\r\n        <li class=\"menu-delete\">${makeIcon('x')}<span>${_l.del}</span></li>\r\n        <li class=\"menu-select-multiple\">${makeIcon('select-multiple')}<span>${_l.selectMultiple}</span></li>\r\n        ${kumod_set ? `\r\n          <li class=\"menu-delete menu-delete-mod\">${makeIcon('x')}<span>${_l.del} ${_l.asMod}</span></li>\r\n          <a href=\"${ku_cgipath}/manage_page.php?action=bans\" class=\"menu-banfile\">\r\n            <li>${makeIcon('ban')}<span>${_l.ban} ${_l.file.toLowerCase()}...</span></li>\r\n          </a>` \r\n        : ''}\r\n      </ul>\r\n    </div>\r\n  `)\r\n  \r\n  //animation hooks  \r\n  $(document).on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', function(event) {\r\n    var $target = $(event.target)\r\n    //detect node insertions and process them\r\n    if (event.originalEvent.animationName == \"nodeInserted\" && !$target.hasClass('_inserted_'))\r\n      processNodeInsertion($target)\r\n    //detect window resize\r\n    if (event.originalEvent.animationName == \"windowSmall\") {\r\n      document.querySelectorAll('.quick-reply-form').forEach(f => {\r\n        toggleFormFloating(f, false)\r\n        toggleFormSimplify(f, true)\r\n      })\r\n    }\r\n  });\r\n\r\n  Captcha.init(is_overboard)\r\n\r\n  initForm(document.querySelector('#postform'))\r\n\r\n  if(typeof is_catalog !== 'undefined' && is_catalog) catalog.init();\r\n\r\n  $('<div id=\"tripinfo\"></div>').addClass('content-background reflinkpreview qreplyform').hide().appendTo('body');\r\n\r\n  $('#delform').on('click', '.postertrip', function(ev) {\r\n    ev.preventDefault()\r\n    ev.stopPropagation()\r\n    var trip = $(this).text().split('!')[1]\r\n    , offset = $(this).offset(), height = $(this).height()\r\n    $.getJSON('/tripinfo.php', { trip: trip })\r\n    .done(function(data) {\r\n      var active_on = [];\r\n      _.each(data.active_on, function(board) {\r\n        active_on.push('<a target=\"_blank\" href=\"'+ku_boardspath+'/'+board+'/\">'+'/'+board+'/</a>');\r\n      })\r\n      $('#tripinfo')\r\n      .html(\r\n        '<div><b class=\"postertrip\">!'+trip+'</b> ['+'<a href=\"https://www.google.com/search?q=!'+trip+'\" target=\"_blank\">G</a>]</div>'+\r\n        '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#tripinfo\\').hide();return false;\"><svg style=\"position: absolute; top: 3px; right: 3px;\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\r\n        '<div class=\"trip-info-line\">'+_l.threads+': '+data.threads+', '+_l.comments+': '+data.comments+'</div>'+\r\n        '<div class=\"trip-info-line\">'+_l.active_since+': '+catalog.formatDate(data.active_since, true)+'</div>'+\r\n        '<div class=\"trip-info-line\">'+_l.last_active+': '+catalog.formatDate(data.last_active, true)+'</div>'+\r\n        (active_on.length ? '<div class=\"trip-info-line\">'+_l.active_on+': '+active_on.join(', ')+'</div>' : '')\r\n      )\r\n      .css({\r\n         top: offset.top + height,\r\n         left: offset.left\r\n       })\r\n      .fadeIn('fast');\r\n    })\r\n    .fail(function(error) {\r\n      console.error(error)\r\n    })\r\n  })\r\n\r\n  unreadCounter.update()\r\n\r\n  if(liveupd_ena && typeof io !== 'undefined')\r\n    updater.init()\r\n\r\n  onReady.ready()\r\n}\r\n\r\n/*\r\n * jQuery Double Tap https://gist.github.com/attenzione/7098476\r\n * Developer: Sergey Margaritov (github.com/attenzione)\r\n * License: MIT\r\n * Date: 22.10.2013\r\n * Based on jquery documentation http://learn.jquery.com/events/event-extensions/\r\n */\r\n(function($){\r\n  $.event.special.doubletap = {\r\n    bindType: 'touchend',\r\n    delegateType: 'touchend',\r\n\r\n    handle: function(event) {\r\n      var handleObj   = event.handleObj,\r\n          targetData  = jQuery.data(event.target),\r\n          now         = new Date().getTime(),\r\n          delta       = targetData.lastTouch ? now - targetData.lastTouch : 0,\r\n          delay       = delay == null ? 300 : delay,\r\n          e           = event.originalEvent\r\n\r\n      if (delta < delay && delta > 30 && !(e.touches && e.touches.length > 1)) {\r\n        targetData.lastTouch = null;\r\n        event.type = handleObj.origType;\r\n        ['clientX', 'clientY', 'pageX', 'pageY'].forEach(function(property) {\r\n          event[property] = event.originalEvent.changedTouches[0][property];\r\n        })\r\n\r\n        // let jQuery handle the triggering of \"doubletap\" event handlers\r\n        handleObj.handler.apply(this, arguments);\r\n      } else {\r\n        targetData.lastTouch = now;\r\n      }\r\n    }\r\n  };\r\n})(jQuery)\r\n\r\nconst NTP = {\r\n  calc: (t0, t1, t2, t3) => ((t1 - t0) + (t2 - t3)) / 2,\r\n  sync: function(force) {\r\n    this.pending = true\r\n    let _this = this\r\n    , t0 = (new Date()).valueOf()\r\n    $.ajax({\r\n      url: '/ntp.php',\r\n      success: function(servertime) {\r\n        let t1 = servertime,\r\n            t2 = servertime,\r\n            t3 = (new Date()).valueOf()\r\n\r\n        _this.offset = _this.calc(t0, t1, t2, t3)\r\n      },\r\n      error: function() {\r\n        pups.err('Failed to synchronize time with the server')\r\n      },\r\n      complete: function() {\r\n        _this.synced = true\r\n\r\n        while (_this.stack.length) {\r\n          _this.stack.shift().resolve(_this.timeWithOffset)\r\n        }\r\n      }\r\n    });\r\n  },\r\n  offset: 0,\r\n  stack: [],\r\n  get timeWithOffset() {\r\n    return new Date(new Date().getTime() + this.offset).getTime()\r\n  },\r\n  getServerTime: function() {\r\n    if (this.synced)\r\n      return Promise.resolve(this.timeWithOffset)\r\n\r\n    let promise = externallyResolvingPromise()\r\n    if (! this.pending)\r\n      this.sync()\r\n    this.stack.push(promise)\r\n    return promise.promise\r\n  }\r\n}\r\n\r\nfunction externallyResolvingPromise() {\r\n  let promiseResolve, promiseReject\r\n  , promise = new Promise((resolve, reject) => {\r\n    promiseResolve = resolve\r\n    promiseReject = reject\r\n  });\r\n\r\n  return {\r\n    promise: promise,\r\n    resolve: promiseResolve,\r\n    reject: promiseReject\r\n  }\r\n}\r\n\r\n// this will be applied to every new inserted node (post)\r\nfunction processNodeInsertion($node) {\r\n  if(typeof $node === 'undefined')\r\n    $node = $('body');\r\n  else {\r\n    $node.addClass('_inserted_');\r\n    $node = $node.parents(\":eq(1)\");\r\n  }\r\n  if($node.find('.prettyprint').length)\r\n    prettyPrint.apply(window);\r\n  LatexIT.render($node);\r\n\r\n  // Post time-to-live updating\r\n  $node.find('.post-ttl:not(._inserted_)').each(function() {\r\n    let $this = $(this)\r\n    $this.addClass('_inserted_')\r\n    let iv\r\n    , updateTTL = () => {\r\n      if ($this.length) {\r\n        NTP.getServerTime().then(srvTime => {\r\n          let ms_left = $this.data('deleted-timestamp')*1000 - srvTime\r\n          if (ms_left >= 0) {\r\n            let min_left = Math.round(ms_left / 60000)\r\n            , h_left = Math.floor(min_left / 60)\r\n            min_left -= h_left * 60\r\n            $this.text(`${_.padLeft(h_left, 2, '0')}:${_.padLeft(min_left, 2, '0')}`)\r\n          }\r\n          else {\r\n            $.get(document.forms.delform.action) // call board.php to force delete posts\r\n            deleteItems([{action: 'delete_post', id: $this.parents('.postnode').data('id')}], false, updater.markOnly)\r\n            clearInterval(iv)\r\n          }\r\n        })\r\n      }\r\n      else\r\n        clearInterval(iv)\r\n    }\r\n    iv = setInterval(updateTTL, 30 * 1000)\r\n    updateTTL()\r\n  })\r\n}\r\n\r\nconst chpok = {\r\n  init: function(atLoad = false) {\r\n    document.body.insertAdjacentHTML('beforeend', `<audio id=\"chpok-audio\" style=\"display:none\">\r\n      <source src=\"${ku_boardspath}/images/chpok.mp3\">\r\n      <source src=\"${ku_boardspath}/images/chpok.ogg\">\r\n    </audio>`)\r\n    this.initiated = true\r\n    this.audio = document.querySelector('#chpok-audio')\r\n  },\r\n  play: function() {\r\n    if (! this.initiated)\r\n      this.init()\r\n    // In chrome the sound won't play, causing a DOM exception, if a user hasn't clicked a page at least once (and it's unfixable)\r\n    this.audio.play().catch(e => _.noop)\r\n  }\r\n}\r\n\r\nconst updater = {\r\n  newThreads: [],\r\n  init: function () {\r\n    this.socket = io.connect(liveupd_api);\r\n    let subscribeTo\r\n    if(ispage) {\r\n      subscribeTo = [liveupd_sitename+this_board_dir+':threads']\r\n      document.querySelectorAll('.postnode.op').forEach(thr => subscribeTo.push(liveupd_sitename+thr.dataset.board+':'+thr.dataset.id))\r\n    }\r\n    else {\r\n      subscribeTo = [liveupd_sitename+this_board_dir+':'+$('input[name=replythread]').val()];\r\n      _l.noNewPosts += (\"<br>\" + _l.threadUpdationAutomatically)\r\n    }\r\n    this.socket\r\n    .on('update', this.dispatch.bind(this))\r\n    .emit('subscribe', subscribeTo)\r\n    Object.defineProperty(this, 'markOnly', {\r\n      value: true,\r\n      writable: false,\r\n      configurable: false\r\n    })\r\n  },\r\n  dispatch: function(data) {\r\n    if (! data.action) {\r\n      pups.warn('Event with unspecified action, see console')\r\n      console.warn(data)\r\n      return\r\n    }\r\n    if (data.action == 'new_thread') {\r\n      // Do nothing if it is my post\r\n      if (data.token && Ajax.postToken && data.token==Ajax.postToken) return;\r\n      this.notifyAboutNewThreads(data)\r\n    }\r\n    if (data.action == 'new_reply') {\r\n      // Do nothing if it is my post\r\n      if (data.token && Ajax.postToken && data.token==Ajax.postToken) return;\r\n      if (ispage) {\r\n        this.notifyAboutNewRepliesOnBoardPage(data)\r\n      }\r\n      else {\r\n        this.showNewReplies(data)\r\n      }\r\n    }\r\n    if (data.action == 'delete') {\r\n      // Do nothing if it is my post\r\n      if (data.token && Ajax.delToken && data.token==Ajax.delToken) return;\r\n      deleteItems(data.items, false, this.markOnly)\r\n    }\r\n    if (data.action == 'cancel_timer') {\r\n      // Do nothing if it is my post\r\n      if (data.token && Ajax.timerToken && data.token==Ajax.timerToken) return;\r\n      let postsSaved = [], msg = ''\r\n      data.items.forEach(item => {\r\n        $(`.postnode[data-id=${item.id}] .post-ttl`).remove()\r\n        postsSaved.push(item.id)\r\n      })\r\n      if(postsSaved.length) {\r\n        msg = postsSaved.length > 1 ?\r\n          `${_l.posts} #${postsSaved.join(', #')} ${_l.savedMulti}.`\r\n         :`${_l.post} #${postsSaved[0]} ${_l.saved}.`\r\n        pups.info(msg, {time: 2 + postsSaved.length})\r\n      }\r\n    }\r\n  },\r\n  showNewReplies: function(data) {\r\n    newposts.get({\r\n      silent: true,\r\n      timestamp: data.timestamp,\r\n      onSuccess: () => {\r\n        if (! document.hasFocus())\r\n          chpok.play()\r\n      }\r\n    })\r\n  },\r\n  notifyAboutNewThreads: function(data) {\r\n    this.newThreads.push({\r\n      board: data.board,\r\n      board_desc: data.board_desc || false,\r\n      thread: data.new_thread_id\r\n    });\r\n    if (! document.hasFocus()) {\r\n      scrollAnchor.save('autoload', '.postnode')\r\n      this.showNewThreads(() => scrollAnchor.restore('autoload'))\r\n      chpok.play()\r\n    }\r\n    else if(!$('#wild_thread_appeared').length) {\r\n      $('#delform').before('<a class=\"xlink\" onclick=\"updater.showNewThreads();return false\" id=\"wild_thread_appeared\"><span class=\"salient\">'+_l.newThreadsAvailable+'</span><hr /></a>')\r\n    }\r\n  },\r\n  notifyAboutNewRepliesOnBoardPage: function(data) {\r\n    let room = data.room + '-' + data.board\r\n    if (! this.repliesOnBoardPage[room])\r\n      this.repliesOnBoardPage[room] = [data.reply_id]\r\n    else\r\n      this.repliesOnBoardPage[room].push(data.reply_id)\r\n    this.refreshNewRepliesCount(data.board, data.room, data.timestamp)\r\n  },\r\n  refreshNewRepliesCount(board, threadID, timestamp=null) {\r\n    let thread = threadID + '-' + board\r\n    , count = (this.repliesOnBoardPage[thread] || []).length\r\n    , $target = $('[id^=replies'+thread+']')\r\n    , $counter = $target.find('.fresh-replies')\r\n    let clearCounter = () => this.repliesOnBoardPage[thread] = []\r\n    if (count) {\r\n      if (! $counter.length) {\r\n        function loadNewReplies(callback) {\r\n          newposts.get({\r\n            threadid: thread,\r\n            onSuccess: () => {\r\n              clearCounter()\r\n              if (callback)\r\n                callback()\r\n            },\r\n            onError: (e) => {\r\n              console.error(e)\r\n              pups.err(_l.oops)\r\n            },\r\n            silent: true,\r\n            timestamp: timestamp\r\n          })\r\n        }\r\n        if (! document.hasFocus()) {\r\n          scrollAnchor.save('autoload', '.postnode')\r\n          loadNewReplies(() => scrollAnchor.restore('autoload'))\r\n          chpok.play()\r\n        }\r\n        else {\r\n          let $freshReplies = $target.append('<br class=\"fresh-replies-breaker\"><a href=\"/'+ board +'/res/'+threadID+'.html\" class=\"salient fresh-replies\">'+_l.newReplies+': <span class=\"fresh-replies-number\"></span></a>')\r\n          .find('.fresh-replies')\r\n          , freshReplies = $freshReplies[0]\r\n          $freshReplies.click(function(e) {\r\n            e.preventDefault()\r\n            if ($freshReplies.__alreadyLoading)\r\n              return;\r\n            freshReplies.__alreadyLoading = true\r\n            freshReplies.insertAdjacentHTML('afterBegin', '<div class=\"spinner\"></div>')\r\n            loadNewReplies(() => $(freshReplies).remove())\r\n          })\r\n        }\r\n      }\r\n      $target.find('.fresh-replies-number').text(count)\r\n    }\r\n    else if($counter.length) {\r\n      $counter.remove()\r\n      clearCounter()\r\n    }\r\n  },\r\n  repliesOnBoardPage: {},\r\n  showNewThreads: function(callback) {\r\n    let $wta = $('#wild_thread_appeared')\r\n    if ($wta.length)\r\n    $wta.find('span')[0].insertAdjacentHTML('afterBegin', '<div class=\"spinner\"></div>')\r\n    this.newThreads.forEach(thr => {\r\n      HTMLoader.getThread(thr.board, thr.thread, null, (err, posts) => {\r\n        if (err)\r\n          return pups.err(_l.noDataLoaded)\r\n        $wta.remove()\r\n        document.querySelector('#delform').insertAdjacentHTML('afterBegin', `\r\n            ${posts}\r\n            <div id=\"replies${thr.thread}-${thr.board}\" class=\"replies\"></div>\r\n          </div>\r\n          <br clear=\"left\" />\r\n          <hr>`);\r\n        if (is_overboard && thr.board_desc) {\r\n          document.querySelector('#delform .posthead').insertAdjacentHTML('afterbegin', \r\n            `<a href=\"/${thr.board}\" target=\"_blank\" class=\"over-boardlabel\">/${thr.board}/ — ${thr.board_desc}</a>`)\r\n        }\r\n        this.socket.emit('subscribe', liveupd_sitename+thr.board+':'+thr.thread)\r\n        if (callback) \r\n          callback()\r\n      })\r\n    })\r\n    this.newThreads = [];\r\n  }\r\n}\r\n\r\nfunction deleteItems(items, bySelf=true, markOnly=false) {\r\n  let postsDeleted = []\r\n  , postErrors = []\r\n  , insideDeletedThread\r\n  , filesDeleted = []\r\n  , fileErrors = []\r\n\r\n  items.forEach(item => {\r\n    let deletedClasses = 'deleted'\r\n      + (item.by_op ? ' op-deleted' : '')\r\n      + (item.by_mod ? ' mod-deleted' : '')\r\n\r\n    if (item.action == 'delete_post' || item.itemtype == 'post') {\r\n      if (bySelf && !item.success) {\r\n        postErrors.push(item)\r\n        return\r\n      }\r\n      insideDeletedThread = false\r\n      let $thread = $(`#delform [id^=thread${item.id}]`)\r\n      , $reply = $(`#delform [id^=reply${item.id}]`)\r\n      if ($thread.length) {\r\n        if (markOnly || !ispage) {\r\n          $thread.addClass('deleted')\r\n          .find('.reply, figure').addClass(deletedClasses)\r\n          if (!ispage) {\r\n            insideDeletedThread = true\r\n            $('form[name=postform], .qrl, #rswapper').remove()\r\n            pups.warn(`${_l.thread} ${_l.deleted}!`, {time: 0})\r\n          }\r\n        }\r\n        else {\r\n          $thread.prev().remove() //unhidethread\r\n          $thread.next().remove() //br\r\n          $thread.next().remove() //hr\r\n          $thread.remove()\r\n        }\r\n      }\r\n      else if ($reply.length) {\r\n        if (markOnly)\r\n          $reply.addClass(deletedClasses)\r\n        else {\r\n          let $reply = $(`#delform [id^=reply${item.id}]`)\r\n          if ($reply.length) {\r\n            $reply.parents('.postnode').remove()\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (updater.repliesOnBoardPage[item.thread_id])\r\n          updater.repliesOnBoardPage[item.thread_id] = updater.repliesOnBoardPage[item.thread_id].filter(i => i!=item.id)\r\n        updater.refreshNewRepliesCount(item.thread_id)\r\n      }\r\n      if (!insideDeletedThread)\r\n        postsDeleted.push('#'+item.id)\r\n    }\r\n\r\n    if (item.action == 'delete_file'  || item.itemtype == 'file') {\r\n      if (bySelf && !item.success) {\r\n        fileErrors.push(item)\r\n        return\r\n      }\r\n      let $fig = $(`figure[data-fileid=${item.id}]`)\r\n      if (markOnly)\r\n        $fig.addClass(deletedClasses)\r\n      else\r\n        $fig.replaceWith(`<div class=\"nothumb\">${_l.fileRemoved}</div>`)\r\n      filesDeleted.push('#'+item.id)\r\n    }\r\n\r\n    if (item.action == 'delete_thread') { // A notification about deleted\r\n      updater.newThreads = updater.newThreads.filter(i => i!=item.id)\r\n      if (! updater.newThreads.length)\r\n        $('#wild_thread_appeared').remove();\r\n      pups.info(`${_l.thread} ${item.id} ${_l.deleted}.`)\r\n    }\r\n  })\r\n\r\n  if (! $('.multidel').is(\":checked\") && ! $('.multidel.delete-file').is(\":checked\")) {\r\n    $('.userdelete').removeClass('ud-active')\r\n    $('body').removeClass('select-multiple')\r\n  }\r\n    \r\n  if (postsDeleted.length) {\r\n    let msg = postsDeleted.length > 1\r\n      ? `${_l.posts} ${postsDeleted.join(', ')} ${_l.deletedMulti}.`\r\n      : `${_l.post} ${postsDeleted[0]} ${_l.deleted}.`\r\n    pups[bySelf ? 'succ' : 'info'](msg, {time: 2 + postsDeleted.length})\r\n  }\r\n  if (filesDeleted.length) {\r\n    let msg = filesDeleted.length > 1\r\n      ? `${_l.files} ${filesDeleted.join(', ')} ${_l.deletedMulti}.`\r\n      : `${_l.file} ${filesDeleted[0]} ${_l.deleted}.`\r\n    pups[bySelf ? 'succ' : 'info'](msg, {time: 2 + filesDeleted.length})\r\n  }\r\n  if (postErrors.length)\r\n    pups.err(postErrors.map(err => `${_l.post} #${err.id}: ${err.message}`).join('<br>'), \r\n      {time: 2 + postErrors.length})\r\n  if (fileErrors.length) {\r\n    pups.err(fileErrors.map(err => `${_l.file} #${err.id}: ${err.message}`).join('<br>'), \r\n      {time: 2 + fileErrors.length})\r\n  }\r\n}\r\n\r\nif (+localStorage['localmod']) {\r\n  kumod_set = true\r\n}\r\nelse {\r\n  let kumod = getCookie('kumod');\r\n  if (kumod !== '') {\r\n    if (kumod === 'allboards')\r\n      kumod_set = true\r\n    else\r\n      kumod_set = in_array(this_board_dir, kumod.split('|'));\r\n  }\r\n}\r\n\r\nfunction expandVideo_old($mov, autoplay='autoplay') {\r\n  //good luck understanding this shitcode :^)\r\n  let $reply = $mov.parents('.reply')\r\n  if($mov.data('expanded') !== '1') {\r\n    var movieurl = $mov.attr('href'), imgh = $mov.data('height'), imgw = $mov.data('width'), dt = $mov.data('thumb'), postnum = $mov.data('id');\r\n    var uid = '_vframe_'+randomString(5)+(new Date().getTime());\r\n    $mov.replaceWith(function() {\r\n      return '<span id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" data-href=\"'+movieurl+'\">'+this.innerHTML + '</span>';\r\n    });\r\n    $mov = $(\"#\"+uid);\r\n    $mov.find('img').hide();\r\n    var video = $mov.find('video').show(), notice = '';\r\n    if(!video.length) {\r\n      $mov.find('.playable-thumb').append(`<video class=\"thumb\" src=\"${movieurl}\" controls loop ${autoplay} preload=\"\" height=\"${imgh}\" width=\"${imgw}\"></video>`).promise().done(function() {\r\n        video = $mov.find('video');\r\n      });\r\n      video[0].volume = localStorage['mediaVolume'] || 1\r\n      video[0].onvolumechange = function() {\r\n        localStorage['mediaVolume'] = this.muted ? 0 : this.volume\r\n      }\r\n    }\r\n    else {\r\n      if (!autoplay) \r\n        video.get(0).pause()\r\n    }\r\n    if(!Settings.expandImgFull()) {\r\n      var offset = 50, offset_el = video[0];\r\n      var max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth;\r\n      while (offset_el != null) {\r\n        offset += offset_el.offsetLeft;\r\n        offset_el = offset_el.offsetParent;\r\n      }\r\n      var new_w = max_w - offset;\r\n      if(imgw > new_w) {\r\n        var ratio = imgw / imgh;\r\n        var zoom = 1 - new_w / imgw;\r\n        var new_h = new_w / ratio;\r\n        video.width(new_w);\r\n        video.height(new_h);\r\n        notice = _l.videoDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit;\r\n      }\r\n    }\r\n    let $fig = $mov.parents('figure');\r\n    if (! $fig.hasClass('unwrapped')) {\r\n      $fig.addClass('unwrapped')\r\n    }\r\n    let $fsz = $mov.parent().find('.filesize');\r\n    if (! $fsz.find('.collapse-btn').length) {\r\n      $fsz.append(`\r\n        <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\r\n          ${makeIcon('shrink', 'b-icon')}\r\n        </button>`);\r\n      $mov.parent().find('.collapse-video').click(function() {\r\n        $fig.removeClass('unwrapped')\r\n        var uid = '_vframe_'+randomString(5)+(new Date().getTime());\r\n        $mov.replaceWith(function() {\r\n          return '<a class=\"movie\" id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" href=\"'+movieurl+'\">'+this.innerHTML + '</a>';\r\n        }).data('expanded', '0');\r\n        $mov = $(\"#\"+uid);\r\n        $mov.find('video').hide()[0].pause();\r\n        $mov.find('img').show();\r\n        $(this).remove();\r\n        $mov.parents('.reply').removeClass('reply-expanded')\r\n        return false;\r\n      });\r\n    }\r\n    $mov.parents('.reply').addClass('reply-expanded')\r\n  }\r\n}\r\n\r\nfunction expandVideo($mov, ev) {\r\n  ev.preventDefault()\r\n  if (Settings.newMediaViewer()) {\r\n    let mv = new MediaViewer(...MediaViewer.parseVideo($mov[0]), true)\r\n    mv.onCollapse = () => mv = null\r\n  }\r\n  else {\r\n    expandVideo_old($mov)\r\n  }\r\n  return false\r\n}\r\n\r\nfunction checknamesave() {\r\n  var checkd;\r\n  if(getCookie('name') != '') {\r\n    checkd = true;\r\n  } else {\r\n    checkd = false;\r\n  }\r\n  var doc = document.getElementById('save');\r\n  if (doc != null) doc.checked = checkd;\r\n}\r\nfunction checkgotothread() {\r\n  var checkd;\r\n  if(getCookie('tothread') == 'off') {\r\n    checkd = false;\r\n  } else {\r\n    checkd = true;\r\n  }\r\n  $(\"#gotothread\").attr('checked', checkd);\r\n}\r\n\r\nfunction navigatepages (event) {\r\n  if (!document.getElementById) return;\r\n    if (is_entering) return;\r\n  if (window.event) event = window.event;\r\n  if (event.ctrlKey) {\r\n    var link = null;\r\n    var href = null;\r\n    var docloc = document.location.toString();\r\n    if (docloc.indexOf('/res/') != -1) {\r\n      if(event.key=='Enter') {\r\n        handleCtrlEnter(event)\r\n      }\r\n    }\r\n    else {\r\n      if (docloc.indexOf('.html') == -1 || docloc.indexOf('board.html') != -1) {\r\n        var page = 0;\r\n        var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\r\n      } else {\r\n        var page = docloc.substr((docloc.lastIndexOf('/') + 1));\r\n        page = (+page.substr(0, page.indexOf('.html')));\r\n        var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\r\n      }\r\n      if (page == 0) {\r\n        var docloc_valid = docloc_trimmed;\r\n      } else {\r\n        var docloc_valid  = docloc_trimmed + page + '.html';\r\n      }\r\n      let match;\r\n      if(match=/#s([0-9]+)/.exec(docloc)) {\r\n        var relativepost = (+match[1]);\r\n      } else {\r\n        var relativepost = -1;\r\n      }\r\n      var maxthreads = 0;\r\n      while(document.getElementsByName('s'+(++maxthreads)).length>0){}\r\n      switch (event.key)\r\n      {\r\n        case 'Enter':\r\n          handleCtrlEnter(event)\r\n          break;\r\n\r\n        case 'ArrowLeft':\r\n          link = document.getElementById('prevPage');\r\n          break;\r\n        case 'ArrowRight':\r\n          link = document.getElementById('nextPage');\r\n          break;\r\n\r\n        case 'ArrowDown':\r\n          if (relativepost == maxthreads - 1) {\r\n            break; //var newrelativepost = 0;\r\n          } else {\r\n            var newrelativepost = relativepost + 1;\r\n          }\r\n          href = docloc_valid + '#s' + newrelativepost;\r\n          break;\r\n\r\n        case 'ArrowUp':\r\n          if (relativepost == -1 || relativepost == 0) {\r\n            break; //var newrelativepost = maxthreads - 1;\r\n          } else {\r\n            var newrelativepost = relativepost - 1;\r\n          }\r\n          href = docloc_valid + '#s' + newrelativepost;\r\n          break;\r\n\r\n        case 'Home': // ctrl+home\r\n          document.location = docloc_trimmed;\r\n          break;\r\n      }\r\n\r\n      if (link && link.action) document.location = link.action;\r\n      if (href) redirectTo(href);\r\n    }\r\n  }\r\n  else {\r\n    let mv = document.querySelector('.media-viewer:not(.mv-transparent)')\r\n    if (mv) {\r\n      if (event.key == 'ArrowLeft')\r\n        mv.querySelector('.mv-prev').click()\r\n      if (event.key == 'ArrowRight')\r\n        mv.querySelector('.mv-next').click()\r\n      if (event.key == 'Escape')\r\n        mv.querySelector('.mv-close').click()\r\n    }\r\n  }\r\n}\r\nif (window.document.addEventListener) { // how fucking old is this jeez\r\n   window.document.addEventListener(\"keydown\", navigatepages, false);\r\n} else {\r\n   window.document.attachEvent(\"onkeydown\", navigatepages);\r\n}\r\n\r\nNodeList.prototype.forEach = Array.prototype.forEach;\r\nNodeList.prototype.map = Array.prototype.map;\r\n\r\n// More efficient parent finder\r\nElement.prototype._findParent = function(selector) {\r\n  let node = this\r\n  while(node && !node.matches(selector)) {\r\n    node = node.parentNode\r\n    if (! node.matches) return null;\r\n  }\r\n  return node\r\n}\r\nElement.prototype._findNext = function(selector) {\r\n  let node = this.nextElementSibling\r\n  while(node && !node.matches(selector)) {\r\n    node = node.nextElementSibling\r\n    if (! node) return null\r\n  }\r\n  return node\r\n}\r\nElement.prototype._findPrevious = function(selector) {\r\n  let node = this.previousElementSibling\r\n  while(node && !node.matches(selector)) {\r\n    node = node.previousElementSibling\r\n    if (! node) return null\r\n  }\r\n  return node\r\n}\r\nNode.prototype._isChildOf = function(parent) {\r\n  let node = this.parentNode\r\n  while (node) {\r\n    if (node == parent) {\r\n      return true\r\n    }\r\n    node = node.parentNode\r\n  }\r\n  return false\r\n}\r\n\r\nvar replyMap = {\r\n  showReplies: function(root=document) {\r\n    root.querySelectorAll('.postnode').forEach(post => {\r\n      let postNum = post.dataset.id\r\n      , board = post.dataset.board\r\n      , thread = post._findParent('div[id^=thread]')\r\n      , threadID = thread && thread.dataset['threadid']\r\n      , msg = post.querySelector('.postmessage')\r\n      , repliesContainer = post.querySelector('.replieslist')\r\n      if (!this.posts[board])\r\n        this.posts[board] = {}\r\n      if (this.posts[board][postNum]) {\r\n        this.posts[board][postNum].container = repliesContainer\r\n      }\r\n      else {\r\n        this.posts[board][postNum] = {\r\n          container: repliesContainer,\r\n          replies: []\r\n        }\r\n      }\r\n      let links = msg.querySelectorAll(`a[class^=ref\\\\|]`)\r\n      if (links.length) links.forEach(link => {\r\n        let linkData = link.className.split(' ')[0].split('|')\r\n        , linkDestBoard = linkData[1]\r\n        , linkPostNum = linkData[3]\r\n        , href = `/${board}/res/${threadID}.html#${postNum}`\r\n        , htm = `<a class=\"ref-reply\" href=\"${href}\">&gt;&gt;${board == linkDestBoard ? '' : `/${board}/`}${postNum}</a>`\r\n        if (this.posts[linkDestBoard] && this.posts[linkDestBoard][linkPostNum]) {\r\n          if (! _.includes(this.posts[linkDestBoard][linkPostNum].replies, htm)) {\r\n            this.posts[linkDestBoard][linkPostNum].replies.push(htm)\r\n          }\r\n        }\r\n        else {\r\n          if (!this.posts[linkDestBoard])\r\n            this.posts[linkDestBoard] = {}\r\n          this.posts[linkDestBoard][linkPostNum] = {\r\n            replies: [htm]\r\n          }\r\n        }\r\n        this.posts[linkDestBoard][linkPostNum].skip = false\r\n      })\r\n    })\r\n    _.each(this.posts, board => _.each(board, post => {\r\n      if (!post.skip && post.replies.length && post.container) {\r\n        post.container.innerHTML = `${_l.replies}: ${post.replies.join(', ')}`\r\n        post.skip = true\r\n      }\r\n    }))\r\n  },\r\n  posts: {}\r\n}\r\n\r\nvar scrollAnchor = {\r\n  save: function(id, elements, parent=window, dimensions='v') {\r\n    if (!window.scrollY) {\r\n      this.saved[id] = {_top: true}\r\n      return\r\n    }\r\n    let mid = [window.innerWidth / 2, window.innerHeight / 2]\r\n    , elMap = []\r\n    , parentBCR = (parent != window)\r\n      ? parent.getBoundingClientRect()\r\n      : {\r\n        left: 0,\r\n        top: 0,\r\n        right: window.innerWidth,\r\n        bottom: window.innerHeight\r\n      }\r\n    if (\r\n      parent != window\r\n      &&\r\n      (\r\n        (parentBCR.left <= 0 && parentBCR.right <= 0)\r\n        ||\r\n        (parentBCR.top <= 0 && parentBCR.bottom <= 0)\r\n        ||\r\n        parentBCR.left >= window.innerWidth\r\n        ||\r\n        parentBCR.top >= window.innerHeight\r\n      )\r\n    ) {\r\n      mid = [parentBCR.left + parentBCR.width/2, parentBCR.top + parentBCR.height/2]\r\n    }\r\n    let elems = elements instanceof Node\r\n      ? [elements]\r\n      : elements instanceof NodeList\r\n        ? elements\r\n        : ((parent == window ? document : parent).querySelectorAll(elements))\r\n    if (! elems.length) return;\r\n    elems.forEach(function (el) {\r\n      let bcr = el.getBoundingClientRect()\r\n      , relativeVisibleWidth = Math.pos(bcr.width - (Math.pos(parentBCR.left - bcr.left) + Math.pos(bcr.right - parentBCR.right))) / bcr.width\r\n      , relativeVisibleHeight = Math.pos(bcr.height - (Math.pos(parentBCR.top - bcr.top) + Math.pos(bcr.bottom - parentBCR.bottom))) / bcr.height\r\n      , dx = Math.abs(mid[0] - (bcr.left + bcr.width/2))\r\n      , dy = Math.abs(mid[1] - (bcr.top + bcr.height/2))\r\n      elMap.push({\r\n        el: el,\r\n        primaryVisibility: dimensions[0] == 'h' ? relativeVisibleWidth : relativeVisibleHeight,\r\n        secondaryVisibility: dimensions[0] == 'v' ? relativeVisibleWidth : relativeVisibleHeight,\r\n        primaryOffset: dimensions[0] == 'h' ? dx : dy,\r\n        secondaryOffset: dimensions[0] == 'v' ? dx : dy\r\n      })\r\n    })\r\n    elMap.sort((a, b) => {\r\n      if (b.primaryVisibility !== a.primaryVisibility) {\r\n        return b.primaryVisibility - a.primaryVisibility\r\n      }\r\n      else if (dimensions.length > 1 && b.secondaryVisibility !== a.secondaryVisibility) {\r\n        return b.secondaryVisibility - a.secondaryVisibility\r\n      }\r\n      else if (a.primaryOffset !== b.primaryOffset) {\r\n        return a.primaryOffset - b.primaryOffset\r\n      }\r\n      else if (dimensions.length > 1) {\r\n        return a.secondaryOffset - b.secondaryOffset\r\n      }\r\n    })\r\n    let anchor = elMap[0].el\r\n    , bcrBefore = anchor.getBoundingClientRect()\r\n    this.saved[id] = {\r\n      anchor: anchor,\r\n      left: bcrBefore.left,\r\n      top: bcrBefore.top,\r\n      parent: parent,\r\n      dimensions: dimensions\r\n    }\r\n  },\r\n  restore: function(id) {\r\n    return new Promise((resolve, reject) => {\r\n      let loaded = this.saved[id]\r\n      if (loaded) window.requestAnimationFrame(() => {\r\n        if (loaded._top) {\r\n          window.scrollTo(0,0)\r\n          resolve()\r\n          return\r\n        }\r\n        let bcrAfter = loaded.anchor.getBoundingClientRect()\r\n        loaded.parent.scrollBy(\r\n          loaded.dimensions.indexOf('h') !== (-1) \r\n            ? bcrAfter.left - loaded.left \r\n            : 0, \r\n          loaded.dimensions.indexOf('v') !== (-1) \r\n            ? bcrAfter.top - loaded.top \r\n            : 0\r\n        )\r\n        resolve()\r\n      })\r\n      else reject()\r\n    })\r\n  },\r\n  saved: {}\r\n}\r\nMath.pos = x => x >= 0 ? x : 0;\r\n\r\n// requestAnimationFrame polyfill https://gist.github.com/paulirish/1579671\r\n(function() {\r\n  var lastTime = 0;\r\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\r\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\r\n  }\r\n\r\n  if (!window.requestAnimationFrame)\r\n    window.requestAnimationFrame = function(callback, element) {\r\n      var currTime = new Date().getTime();\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\r\n      lastTime = currTime + timeToCall;\r\n      return id;\r\n    };\r\n\r\n  if (!window.cancelAnimationFrame)\r\n    window.cancelAnimationFrame = function(id) {\r\n      clearTimeout(id);\r\n    };\r\n}());\r\n\r\n/// overlay menu\r\nvar menu_current = '';\r\nvar menu_last = '';\r\nfunction menu_show(id)\r\n{\r\n  if(menu_current != '')\r\n  {\r\n    var dl = (id == '_off_') ? 125 : 0;\r\n    $('#'+menu_current).delay(dl).slideUp(100);\r\n    menu_last = menu_current;\r\n  }\r\n  if (id != '') {\r\n    if (menu_last == id && typeof $('#' + id).queue() !== 'undefined' && $('#' + id).queue().length > 0) {\r\n      $('#' + id).clearQueue();\r\n    } else {\r\n      $('#' + id).slideDown(150);\r\n    }\r\n  }\r\n  menu_current = id;\r\n}\r\nfunction menu_pin() {\r\n  if(document.getElementById('overlay_menu').style.position == 'absolute') {\r\n    document.getElementById('overlay_menu').style.position = 'fixed';\r\n    Cookie('ku_menutype', 'fixed', 365);\r\n  } else {\r\n    document.getElementById('overlay_menu').style.position = 'absolute';\r\n    Cookie('ku_menutype', 'absolute', 365);\r\n  }\r\n}\r\n\r\nfunction toggle_oldmenu(on=null) {\r\n  if (on===null)\r\n    on = getCookie('ku_oldmenu') != 'yes'\r\n  injector.inject('oldmenu', `#${on ? 'overlay_menu' : 'head_oldmenu'} { display: none }`)\r\n  if (on && !document.getElementById('head_oldmenu')) {\r\n    document.getElementById('boardlist_header').insertAdjacentHTML('afterBegin', `<div id=\"head_oldmenu\" class=\"boardlist\">\r\n      ${document.getElementById('ns_oldmenu').innerText}\r\n      <a href=\\\"#\\\" onclick=\\\"javascript:toggle_oldmenu();\\\" class=\"bl-sect\" style=\"order:1\">[overlay]</a>\r\n    </div>`)\r\n  }\r\n  Cookie('ku_oldmenu', on ? 'yes' : 'no', 90); \r\n}\r\n\r\nvar LatexIT = {\r\n  mode : 'gif',\r\n  init : function() {\r\n  if(document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"))\r\n    this.mode='svg';\r\n  },\r\n  odc: \"javascript:LatexIT.replaceWithSrc(this);\",\r\n  dcls: \"Double click to show source\",\r\n\r\n  pre : function(eqn) {\r\n    var txt=eqn.innerHTML;\r\n    if ( !txt.match(/<img.*?>/i) && !txt.match(/<object.*?>/i))\r\n    {\r\n      //Clean code\r\n      txt=txt.replace(/<br>/gi,\"\").replace(/<br \\/>/gi,\"\").replace(/&amp;/mg,'&');\r\n      var atxt = \"[tex]\"+txt+\"[/tex]\";\r\n      txt=escape(txt.replace(/\\\\/mg,'\\\\'));\r\n      // Add coloring according to style of text\r\n      var c = eval(\"LatexIT.normalize\"+$(eqn).parent().css('color'));\r\n      var extxt = \"{\\\\color[rgb]{\"+c.r+','+c.g+','+c.b+\"}\"+txt+\"}\";\r\n      txt = \" <img src=\\\"http://latex.codecogs.com/\"+this.mode+\".latex?\"+ extxt +\"\\\" title=\\\"\"+this.dcls+\"\\\" alt=\\\"\"+atxt+\"\\\" ondblclick=\\\"\"+this.odc+\"\\\" border=\\\"0\\\" class=\\\"latex\\\" /> \";\r\n    }\r\n    return txt;\r\n  },\r\n\r\n  replaceWithSrc: function(eqn) {\r\n    var txt = $(eqn).attr('alt');\r\n    $(eqn).parent().html(txt);\r\n  },\r\n\r\n  render : function($scope) {\r\n    var scope = (typeof $scope === 'undefined') ? window.document : $scope[0];\r\n    var eqn = scope.getElementsByTagName(\"*\");\r\n    for (var i=0; i<eqn.length; i++) {\r\n      if(eqn[i].getAttribute(\"lang\") == \"latex\" || eqn[i].getAttribute(\"xml:lang\") == \"latex\")\r\n      eqn[i].innerHTML = this.pre(eqn[i]);\r\n    }\r\n  },\r\n\r\n  normalizergb : function(r, g, b) {\r\n    return {r: (r/255).toFixed(3), g: (g/255).toFixed(2), b: (b/255).toFixed(2) }\r\n  },\r\n  normalizergba : function(r, g, b, a) {\r\n    return this.normalizergb(r, g, b);\r\n  }\r\n};\r\n\r\nfunction in_array(needle, haystack) {\r\n  return (typeof haystack !== 'object') ? (needle === haystack) : _.includes(haystack, needle)\r\n}\r\n\r\n(function($) {\r\n  $.fn.drags = function(opt) {\r\n    opt = $.extend({handle:\"\",cursor:\"move\"}, opt);\r\n\r\n    if(opt.handle === \"\") {\r\n      var $el = this;\r\n    } else {\r\n      var $el = this.find(opt.handle);\r\n    }\r\n\r\n    return $el.css('cursor', opt.cursor).on(\"mousedown\", function(e) {\r\n      if(opt.handle === \"\") {\r\n        var $drag = $(this).addClass('draggable');\r\n      } else {\r\n        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');\r\n      }\r\n      var z_idx = $drag.css('z-index'),\r\n        drg_h = $drag.outerHeight(),\r\n        drg_w = $drag.outerWidth(),\r\n        pos_y = $drag.offset().top + drg_h - e.pageY,\r\n        pos_x = $drag.offset().left + drg_w - e.pageX;\r\n      $drag.css('z-index', 1000).parents().on(\"mousemove\", function(e) {\r\n        if (opt.onMove)\r\n          opt.onMove()\r\n        $('.draggable').offset({\r\n          top:e.pageY + pos_y - drg_h,\r\n          left:e.pageX + pos_x - drg_w\r\n        }).on(\"mouseup\", function() {\r\n          $(this).removeClass('draggable').css('z-index', z_idx);\r\n        });\r\n      });\r\n      e.preventDefault(); // disable selection\r\n    }).on(\"mouseup\", function() {\r\n      if(opt.handle === \"\") {\r\n        $(this).removeClass('draggable');\r\n      } else {\r\n        $(this).removeClass('active-handle').parent().removeClass('draggable');\r\n      }\r\n    });\r\n  }\r\n  $.fn.dragsOff = function(opt) {\r\n    opt = $.extend({handle:\"\",cursor:\"default\"}, opt);\r\n\r\n    if(opt.handle === \"\") {\r\n     var $el = this;\r\n     $(this).removeClass('draggable');\r\n    } else {\r\n     var $el = this.find(opt.handle);\r\n     $(this).removeClass('active-handle')\r\n        .parent()\r\n        .removeClass('draggable');\r\n    }\r\n    return $el.css('cursor', \"default\")\r\n      .off(\"mousedown\")\r\n      .off(\"mouseup\")\r\n      .off(\"mousemove\");\r\n  }\r\n  /*$.fn.pin = function() {\r\n    if(this.css('position') !== 'fixed') {\r\n      var abs = {\r\n        top: this.position().top - $(document).scrollTop(),\r\n        left: this.position().left - $(document).scrollLeft()\r\n      }\r\n      this.css({\r\n        position: 'fixed',\r\n        left: abs.left,\r\n        top: abs.top\r\n      });\r\n      this.find('.pinner').removeClass('pinned').addClass('unpinned');\r\n      localStorage['pinForm'] = 0;\r\n    }\r\n    else {\r\n      var abs = {\r\n        top: this.position().top + $(document).scrollTop(),\r\n        left: this.position().left + $(document).scrollLeft()\r\n      }\r\n      this.css({\r\n        position: 'absolute',\r\n        left: abs.left,\r\n        top: abs.top\r\n      });\r\n      this.find('.pinner').removeClass('unpinned').addClass('pinned');\r\n      localStorage['pinForm'] = 1;\r\n    }\r\n  }*/\r\n})(jQuery);\r\n\r\nfunction unwrapEmbed($fig) {\r\n  $fig.addClass('unwrapped')\r\n  let $iw = $fig.find('.emb-iframe-wrapper')\r\n  if ($iw.data('h') > $iw.data('w'))\r\n    $iw.addClass('vertical-video')\r\n  if ($iw.data('site') == \"Soundcloud\")\r\n    $iw.addClass('soundcloud-embed')\r\n  $iw.css({\r\n    paddingBottom: `${($iw.data('h')/$iw.data('w'))*100}%`\r\n  })\r\n  let code = $iw.data('code')\r\n  , iframeOptions = `frameborder=\"0\" scrolling=\"no\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"`\r\n  if (~$iw.data('site').indexOf(\"Youtube\")) {\r\n    let start = $iw.data('startraw')\r\n    $iw.append(`<iframe src=\"https://www.youtube-nocookie.com/embed/${code}?autoplay=1${start ? `&start=${start}` : ''}\" ${iframeOptions}></iframe>`)\r\n  }\r\n  if ($iw.data('site') == \"Vimeo\") {\r\n    let start = $iw.data('start')\r\n    $iw.append(`<iframe src=\"//player.vimeo.com/video/${code}?badge=0&autoplay=1${start ? `#t=${start}` : ''}\" ${iframeOptions}></iframe>`)\r\n  }\r\n  if ($iw.data('site') == \"Soundcloud\") {\r\n    let enccode = encodeURI(code)\r\n    let start = $iw.data('start')\r\n    $iw.append(`<iframe src=\"https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F${enccode}\" ${iframeOptions}></iframe>`)\r\n  }\r\n  if ($iw.data('site') == \"Coub\")\r\n    $iw.append(`<iframe src=\"http://coub.com/embed/${code}?muted=false&autostart=true&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false\" ${iframeOptions}></iframe>`)\r\n  let $ew = $fig.find('.embed-wrap')\r\n  if (! $ew.find('.collapse-video').length)\r\n    $fig.find('.embed-wrap').append(`\r\n      <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\r\n        ${makeIcon('shrink')}\r\n      </button>`)\r\n}\r\n\r\nfunction wrapEmbed($fig) {\r\n  $fig.removeClass('unwrapped')\r\n  $fig.find('.emb-iframe-wrapper').empty()\r\n}\r\n\r\nfunction resetForm(form, isClone=false) {\r\n  let fields = form.querySelectorAll('input[type=text]:not([name=name]), input[type=file], textarea')\r\n  fields.forEach(field => field.value = null)\r\n  form.querySelectorAll('.site-indicator').forEach(i => i.remove())\r\n  richFileInput.clear(form, !isClone)\r\n  // Remove extra inputs\r\n  form.querySelectorAll('input[name^=addembed], input[name^=addfile], input[name=ttl-enable]').forEach(i => {\r\n    i.checked = false\r\n    if (i.name == 'ttl-enable' && i.onchange)\r\n      i.onchange()\r\n  })\r\n}\r\n\r\nfunction initForm(form) {\r\n  if (!form)\r\n    return\r\n  let $form = $(form)\r\n  form.querySelectorAll('input[name^=embed]').forEach(i => {\r\n    i.addEventListener('input', function() {\r\n      let indicator = this.parentElement.querySelector('.site-indicator')\r\n      if (indicator) \r\n        indicator.remove()\r\n      let match = embedLinks.process(this.value)\r\n      if(match)\r\n        this.insertAdjacentHTML('afterend', `<img src=\"${ku_boardspath}/images/site-logos/${match.site}.png\" class=\"site-indicator\">`)\r\n    })\r\n  })\r\n  form.querySelectorAll('input[name^=imagefile]').forEach(i => {\r\n    i.addEventListener('change', function() {\r\n      if (this.value) {\r\n        let nextCheckbox = this.parentElement.nextElementSibling\r\n        if (nextCheckbox)\r\n          nextCheckbox.checked = true\r\n      }\r\n    })\r\n  })\r\n  // Markup\r\n  form.querySelectorAll('.opt-exp').forEach(exp => {\r\n    exp.onclick = function(ev) {\r\n      ev.preventDefault()\r\n      this.querySelector('.expandee').classList.toggle('expanded')\r\n    }\r\n    exp.onmouseleave = function(ev) {\r\n      this.hideTimeout = setTimeout(() => this.querySelector('.expandee').classList.remove('expanded'), 250)\r\n    }\r\n    exp.onmouseenter = function() {\r\n      clearTimeout(this.hideTimeout)\r\n    }\r\n  })\r\n  let cms = form.querySelector('.code_markup_select')\r\n  if (cms) {\r\n    cms.onchange = function() {\r\n      markup($form, `[code=${this.value}]`, '[/code]')\r\n    }\r\n  }\r\n  form.querySelector('.quote_select').onchange = function() {\r\n    quotes($form, this.value)\r\n  }\r\n  // for TeX\r\n  let areaID = form.id + '_textarea'\r\n  form.querySelector('textarea').id = areaID\r\n  form.querySelector('.uib-tx').dataset.target = areaID\r\n  // captcha\r\n  if (Captcha.enabled && Captcha.enabled!=='only-access')\r\n    Captcha.initForm(form)\r\n  // readonly stuff\r\n  form.querySelectorAll('.make-me-readonly').forEach(ro => {\r\n    ro.readOnly = true\r\n    ro.addEventListener('focus', () => ro.readOnly = false)\r\n  })\r\n  // Name disabling\r\n  let name = form.querySelector('input[name=disable_name]')\r\n  if (name) {\r\n    name.onchange = function() {\r\n      let off = this.checked\r\n      form.querySelector('input[name=name]').disabled = off\r\n      localStorage.setItem('post_anonymously', +off)\r\n    }\r\n    name.checked = !!+localStorage['post_anonymously']\r\n    name.onchange()\r\n  }\r\n  // Submitting\r\n  form.addEventListener('submit', function(ev) {\r\n    ev.preventDefault()\r\n    ev.stopPropagation()\r\n    Ajax.submitPost(this)\r\n  })\r\n  form.querySelectorAll('.simplified-send-row button[type=\"submit\"]').forEach(sub => {\r\n    sub.onclick = function(ev) {\r\n      ev.preventDefault()\r\n      ev.stopPropagation()\r\n      let sage = +(this.name == 'sagebtn')\r\n      Ajax.submitPost(form, sage)\r\n    }\r\n  })\r\n  // TTL\r\n  let ttl = form.querySelector('input[name=\"ttl-enable\"]')\r\n  if (ttl) {\r\n    ttl.onchange = function() {\r\n      let on = this.checked\r\n      , input = form.ttl\r\n      input.disabled = !on\r\n      input.min = on ? 1 : 0\r\n      if (on && input.value == 0) {\r\n        input.value = 1\r\n      }\r\n    }\r\n    ttl.onchange()\r\n  }\r\n  // Detecting last active textarea\r\n  form.querySelectorAll('textarea, input[type=text]').forEach(el => {\r\n    el.onfocus = () => {\r\n      lastActiveForm = form\r\n    }\r\n  })\r\n  // Add file button\r\n  let fileButton = form.querySelector('.s-file')\r\n  if (fileButton) {\r\n    fileButton.onclick = ev => {\r\n      ev.preventDefault()\r\n      form.querySelector('input[type=file]').click()\r\n    }\r\n  }\r\n}\r\n\r\nvar injector = {\r\n  inject: function(alias, css) {\r\n    var id = `injector:${alias}`\r\n    var existing = document.getElementById(id)\r\n    if (existing) {\r\n      existing.innerHTML = css\r\n      return\r\n    }\r\n    var head = document.head || document.getElementsByTagName('head')[0]\r\n    , style = document.createElement('style')\r\n    style.type = 'text/css'\r\n    style.id = id\r\n    if (style.styleSheet) {\r\n      style.styleSheet.cssText = css\r\n    } else {\r\n      style.appendChild(document.createTextNode(css))\r\n    }\r\n    head.appendChild(style)\r\n  },\r\n  remove: function(alias) {\r\n    var id = `injector:${alias}`\r\n    var style = document.getElementById(id)\r\n    if (style) {\r\n      var head = document.head || document.getElementsByTagName('head')[0]\r\n      if (head)\r\n        head.removeChild(document.getElementById(id))\r\n    }\r\n  }\r\n}\r\n\r\nfunction randomString(length=10, chars='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ') {\r\n  let result = ''\r\n  for (let i = length; i > 0; --i) \r\n    result += chars[Math.round(Math.random() * (chars.length - 1))]\r\n  return result\r\n}\r\n\r\nfunction add_mob_menu() {\r\n  let r = 20\r\n  , pos = 10\r\n  , delay = 300\r\n  $('#overlay_menu').hide()\r\n  document.body.insertAdjacentHTML('afterbegin', `<div id=\"mobile-menu\"><div id=\"mobile-menu-contents\"></div></div>`)\r\n  let mm = document.querySelector('#mobile-menu-contents')\r\n  , $mmw = $('#mobile-menu')\r\n  , htm = ''\r\n  if (overboard_dir) {\r\n    htm += `<a href=\"/${overboard_dir}\" class=\"mm-item mm-brd\">${overboard_desc}</a>`\r\n  }\r\n  $('<div id=\"mmb-_options\" style=\"display: none\"></div>').append($('#ms-_options')).appendTo($(mm))\r\n  $mmw.append(`<div id=\"mm-toggle\">\r\n    <div class=\"mm-bars\"></div>\r\n    <div id=\"mm-circle\"></div>\r\n  </div>`)\r\n  let cats = boards10.list\r\n  cloud20.getBoards().then(b20 => {\r\n    cats.sort((a,b) => +a.order > +b.order)\r\n    .push({\r\n      id: '20',\r\n      name: '2.0',\r\n      boards: b20\r\n    })\r\n    cats.forEach((cat, ix) => {\r\n      if (cat.boards) {\r\n        htm += `<a href=\"#\" class=\"mm-item mm-cat\" data-mmbx=\"${ix}\">${cat.name}</a>\r\n          <span class=\"mm-boards\" id=\"mmb-${ix}\">`\r\n        cat.boards.forEach(b => {\r\n          b.dir = b.dir || b.name\r\n          htm += `<a class=\"mm-item mm-brd\" href=\"/${b.dir}\">/${b.dir}/ — ${b.desc}</a>`\r\n        })\r\n        htm += '</span>'\r\n      }\r\n    })\r\n    htm += `<a href=\"#\" class=\"mm-item mm-toggle-options\" onclick=\"\r\n      $('.mm-boards').toggle(false); \r\n      $('#mmb-_options').slideToggle('fast');\r\n      $('.mmc-expanded').removeClass('mmc-expanded')\r\n      return false\r\n    \">Options</a>`\r\n    mm.insertAdjacentHTML('afterBegin', `${htm}`)\r\n    $('#mm-toggle').click(function() {\r\n      if ($mmw.hasClass('mm-expanded')) return;\r\n      $mmw.addClass('mm-expanded')\r\n      let bcr = $mmw[0].getBoundingClientRect()\r\n      , x = bcr.width - r - pos  // - radius/2, -position\r\n      , y = bcr.height - r - pos // - radius/2, -position\r\n      , R = Math.sqrt(x*x + y*y) // See, math is not useless after all\r\n      , scale = Math.ceil(R / r)\r\n      $('#mm-circle').css({'transform': `scale(${scale})`})\r\n      $(mm).css({\r\n        'visibility': 'visible',\r\n        'opacity': 1\r\n      })\r\n      $mmw.addClass('bars-away')\r\n      setTimeout(() => {\r\n        $mmw.addClass('mm-expanded-full')\r\n      }, delay)\r\n    })\r\n\r\n    offClick.push(() => {\r\n      if (! $mmw.hasClass('mm-expanded-full')) return;\r\n      $mmw.removeClass('mm-expanded-full bars-away')\r\n      setTimeout(() => {\r\n        $(mm).css({'visibility': 'hidden'})\r\n        $mmw.removeClass('mm-expanded')\r\n      }, delay)\r\n      $(mm).css({\r\n        'visibility': 'visible',\r\n        'opacity': 0\r\n      })\r\n      $('#mm-circle').css({'transform': `scale(1)`})\r\n    })\r\n  })\r\n  $mmw.click(function(ev) {\r\n    ev.stopPropagation()\r\n  })\r\n  .on('click', '.mm-cat[data-mmbx]', function() {\r\n    let $target = $(`#mmb-${$(this).data('mmbx')}`)\r\n    if ($target.is(':visible')) {\r\n      $target.toggle(false)\r\n      $(this).removeClass('mmc-expanded')\r\n    }\r\n    else {\r\n      $('.mm-boards').toggle(false)\r\n      $('#mmb-_options').slideUp('fast');\r\n      $target.toggle(true)\r\n      $('.mmc-expanded').removeClass('mmc-expanded')\r\n      $(this).addClass('mmc-expanded')\r\n    }\r\n    return false\r\n  })\r\n}\r\n\r\nvar boards10 = {\r\n  get list() {\r\n    if (!this.allboards) {\r\n      this.allboards = []\r\n      document.querySelectorAll('.olm-link').forEach(o => {\r\n        o = o.querySelector('a')\r\n        if (!o) return;\r\n        let s = o.dataset.toexpand\r\n        , sd = o.innerText\r\n        , sect = document.querySelector(`#ms-${s}`)\r\n        if (!s || s=='20' || s=='_options') return;\r\n        let section = {\r\n          id: s,\r\n          name: sd,\r\n          boards: []\r\n        }\r\n        sect.querySelectorAll('a').forEach(a => {\r\n          let m = a.innerText.match(/\\/(.+?)\\/ - (.+)/)\r\n          if (m) \r\n            section.boards.push({\r\n              dir: m[1],\r\n              desc: m[2]\r\n            })\r\n        })\r\n        this.allboards.push(section)\r\n      })\r\n    }\r\n    return this.allboards\r\n  }\r\n}\r\n\r\nvar cloud20 = {\r\n  init: function() {\r\n    this.getBoards().then(() => this.filter('')).catch(_.noop)\r\n    $('#boardselect').on('input', function() {\r\n      cloud20.filter($(this).val());\r\n    });\r\n  },\r\n  getBoards: function() {\r\n    return new Promise((rs, rj) => {\r\n      if (this.allboards)\r\n        rs(this.allboards)\r\n      else {\r\n        $.getJSON(ku_cgipath + '/boards20.json', data => {\r\n          this.allboards = data\r\n          rs(data)\r\n        })\r\n        .fail(e => {\r\n          pups.err(_l.unable_load_20)\r\n          rj(e)\r\n        })\r\n      }\r\n    })\r\n  },\r\n  filter: function(query) {\r\n    var res = [];\r\n    if(typeof this.allboards === \"undefined\") return;\r\n    if(query == '') res = this.allboards;\r\n    else {\r\n      query = query.toLowerCase();\r\n      _.each(this.allboards, function(board) {\r\n        if(board.name.toLowerCase().search(query) !== -1 || board.desc.toLowerCase().search(query) !== -1)\r\n          res.push(board);\r\n      });\r\n    }\r\n    this.display(res);\r\n  },\r\n  display: function(list) {\r\n    var newhtml = '', opts = '';\r\n    _.each(list, function(item) {\r\n      newhtml += '<a class=\"menu-item\" title=\"'+ item.desc +'\" href=\"'+ku_boardsfolder+item.name+'/\">/'+item.name+'/ - '+ item.desc +'</a>';\r\n      opts += '<option value=\"'+item.name+'\">/'+item.name+'/ - '+ item.desc +'</option>';\r\n    });\r\n    $('#boards20').html(newhtml);\r\n    $('.boardsel20').append(opts);\r\n  }\r\n}\r\n\r\nvar countries = {\r\n  'A1': \"Anonymous Proxy\",\r\n  'A2': \"Satellite Provider\",\r\n  'O1': \"Other Country\",\r\n  'AD': \"Andorra\",\r\n  'AE': \"United Arab Emirates\",\r\n  'AF': \"Afghanistan\",\r\n  'AG': \"Antigua and Barbuda\",\r\n  'AI': \"Anguilla\",\r\n  'AL': \"Albania\",\r\n  'AM': \"Armenia\",\r\n  'AO': \"Angola\",\r\n  'AP': \"Asia/Pacific Region\",\r\n  'AQ': \"Antarctica\",\r\n  'AR': \"Argentina\",\r\n  'AS': \"American Samoa\",\r\n  'AT': \"Austria\",\r\n  'AU': \"Australia\",\r\n  'AW': \"Aruba\",\r\n  'AX': \"Aland Islands\",\r\n  'AZ': \"Azerbaijan\",\r\n  'BA': \"Bosnia and Herzegovina\",\r\n  'BB': \"Barbados\",\r\n  'BD': \"Bangladesh\",\r\n  'BE': \"Belgium\",\r\n  'BF': \"Burkina Faso\",\r\n  'BG': \"Bulgaria\",\r\n  'BH': \"Bahrain\",\r\n  'BI': \"Burundi\",\r\n  'BJ': \"Benin\",\r\n  'BL': \"Saint Bartelemey\",\r\n  'BM': \"Bermuda\",\r\n  'BN': \"Brunei Darussalam\",\r\n  'BO': \"Bolivia\",\r\n  'BQ': \"Bonaire, Saint Eustatius and Saba\",\r\n  'BR': \"Brazil\",\r\n  'BS': \"Bahamas\",\r\n  'BT': \"Bhutan\",\r\n  'BV': \"Bouvet Island\",\r\n  'BW': \"Botswana\",\r\n  'BY': \"Belarus\",\r\n  'BZ': \"Belize\",\r\n  'CA': \"Canada\",\r\n  'CC': \"Cocos (Keeling) Islands\",\r\n  'CD': \"Congo, The Democratic Republic of the\",\r\n  'CF': \"Central African Republic\",\r\n  'CG': \"Congo\",\r\n  'CH': \"Switzerland\",\r\n  'CI': \"Cote d'Ivoire\",\r\n  'CK': \"Cook Islands\",\r\n  'CL': \"Chile\",\r\n  'CM': \"Cameroon\",\r\n  'CN': \"China\",\r\n  'CO': \"Colombia\",\r\n  'CR': \"Costa Rica\",\r\n  'CU': \"Cuba\",\r\n  'CV': \"Cape Verde\",\r\n  'CW': \"Curacao\",\r\n  'CX': \"Christmas Island\",\r\n  'CY': \"Cyprus\",\r\n  'CZ': \"Czech Republic\",\r\n  'DE': \"Germany\",\r\n  'DJ': \"Djibouti\",\r\n  'DK': \"Denmark\",\r\n  'DM': \"Dominica\",\r\n  'DO': \"Dominican Republic\",\r\n  'DZ': \"Algeria\",\r\n  'EC': \"Ecuador\",\r\n  'EE': \"Estonia\",\r\n  'EG': \"Egypt\",\r\n  'EH': \"Western Sahara\",\r\n  'ER': \"Eritrea\",\r\n  'ES': \"Spain\",\r\n  'ET': \"Ethiopia\",\r\n  'EU': \"Europe\",\r\n  'FI': \"Finland\",\r\n  'FJ': \"Fiji\",\r\n  'FK': \"Falkland Islands (Malvinas)\",\r\n  'FM': \"Micronesia, Federated States of\",\r\n  'FO': \"Faroe Islands\",\r\n  'FR': \"France\",\r\n  'GA': \"Gabon\",\r\n  'GB': \"United Kingdom\",\r\n  'GD': \"Grenada\",\r\n  'GE': \"Georgia\",\r\n  'GF': \"French Guiana\",\r\n  'GG': \"Guernsey\",\r\n  'GH': \"Ghana\",\r\n  'GI': \"Gibraltar\",\r\n  'GL': \"Greenland\",\r\n  'GM': \"Gambia\",\r\n  'GN': \"Guinea\",\r\n  'GP': \"Guadeloupe\",\r\n  'GQ': \"Equatorial Guinea\",\r\n  'GR': \"Greece\",\r\n  'GS': \"South Georgia and the South Sandwich Islands\",\r\n  'GT': \"Guatemala\",\r\n  'GU': \"Guam\",\r\n  'GW': \"Guinea-Bissau\",\r\n  'GY': \"Guyana\",\r\n  'HK': \"Hong Kong\",\r\n  'HM': \"Heard Island and McDonald Islands\",\r\n  'HN': \"Honduras\",\r\n  'HR': \"Croatia\",\r\n  'HT': \"Haiti\",\r\n  'HU': \"Hungary\",\r\n  'ID': \"Indonesia\",\r\n  'IE': \"Ireland\",\r\n  'IL': \"Israel\",\r\n  'IM': \"Isle of Man\",\r\n  'IN': \"India\",\r\n  'IO': \"British Indian Ocean Territory\",\r\n  'IQ': \"Iraq\",\r\n  'IR': \"Iran, Islamic Republic of\",\r\n  'IS': \"Iceland\",\r\n  'IT': \"Italy\",\r\n  'JE': \"Jersey\",\r\n  'JM': \"Jamaica\",\r\n  'JO': \"Jordan\",\r\n  'JP': \"Japan\",\r\n  'KE': \"Kenya\",\r\n  'KG': \"Kyrgyzstan\",\r\n  'KH': \"Cambodia\",\r\n  'KI': \"Kiribati\",\r\n  'KM': \"Comoros\",\r\n  'KN': \"Saint Kitts and Nevis\",\r\n  'KP': \"Korea, Democratic People's Republic of\",\r\n  'KR': \"Korea, Republic of\",\r\n  'KW': \"Kuwait\",\r\n  'KY': \"Cayman Islands\",\r\n  'KZ': \"Kazakhstan\",\r\n  'LA': \"Lao People's Democratic Republic\",\r\n  'LB': \"Lebanon\",\r\n  'LC': \"Saint Lucia\",\r\n  'LI': \"Liechtenstein\",\r\n  'LK': \"Sri Lanka\",\r\n  'LR': \"Liberia\",\r\n  'LS': \"Lesotho\",\r\n  'LT': \"Lithuania\",\r\n  'LU': \"Luxembourg\",\r\n  'LV': \"Latvia\",\r\n  'LY': \"Libyan Arab Jamahiriya\",\r\n  'MA': \"Morocco\",\r\n  'MC': \"Monaco\",\r\n  'MD': \"Moldova, Republic of\",\r\n  'ME': \"Montenegro\",\r\n  'MF': \"Saint Martin\",\r\n  'MG': \"Madagascar\",\r\n  'MH': \"Marshall Islands\",\r\n  'MK': \"Macedonia\",\r\n  'ML': \"Mali\",\r\n  'MM': \"Myanmar\",\r\n  'MN': \"Mongolia\",\r\n  'MO': \"Macao\",\r\n  'MP': \"Northern Mariana Islands\",\r\n  'MQ': \"Martinique\",\r\n  'MR': \"Mauritania\",\r\n  'MS': \"Montserrat\",\r\n  'MT': \"Malta\",\r\n  'MU': \"Mauritius\",\r\n  'MV': \"Maldives\",\r\n  'MW': \"Malawi\",\r\n  'MX': \"Mexico\",\r\n  'MY': \"Malaysia\",\r\n  'MZ': \"Mozambique\",\r\n  'NA': \"Namibia\",\r\n  'NC': \"New Caledonia\",\r\n  'NE': \"Niger\",\r\n  'NF': \"Norfolk Island\",\r\n  'NG': \"Nigeria\",\r\n  'NI': \"Nicaragua\",\r\n  'NL': \"Netherlands\",\r\n  'NO': \"Norway\",\r\n  'NP': \"Nepal\",\r\n  'NR': \"Nauru\",\r\n  'NU': \"Niue\",\r\n  'NZ': \"New Zealand\",\r\n  'OM': \"Oman\",\r\n  'PA': \"Panama\",\r\n  'PE': \"Peru\",\r\n  'PF': \"French Polynesia\",\r\n  'PG': \"Papua New Guinea\",\r\n  'PH': \"Philippines\",\r\n  'PK': \"Pakistan\",\r\n  'PL': \"Poland\",\r\n  'PM': \"Saint Pierre and Miquelon\",\r\n  'PN': \"Pitcairn\",\r\n  'PR': \"Puerto Rico\",\r\n  'PS': \"Palestinian Territory\",\r\n  'PT': \"Portugal\",\r\n  'PW': \"Palau\",\r\n  'PY': \"Paraguay\",\r\n  'QA': \"Qatar\",\r\n  'RE': \"Reunion\",\r\n  'RO': \"Romania\",\r\n  'RS': \"Serbia\",\r\n  'RU': \"Russian Federation\",\r\n  'RW': \"Rwanda\",\r\n  'SA': \"Saudi Arabia\",\r\n  'SB': \"Solomon Islands\",\r\n  'SC': \"Seychelles\",\r\n  'SD': \"Sudan\",\r\n  'SE': \"Sweden\",\r\n  'SG': \"Singapore\",\r\n  'SH': \"Saint Helena\",\r\n  'SI': \"Slovenia\",\r\n  'SJ': \"Svalbard and Jan Mayen\",\r\n  'SK': \"Slovakia\",\r\n  'SL': \"Sierra Leone\",\r\n  'SM': \"San Marino\",\r\n  'SN': \"Senegal\",\r\n  'SO': \"Somalia\",\r\n  'SR': \"Suriname\",\r\n  'SS': \"South Sudan\",\r\n  'ST': \"Sao Tome and Principe\",\r\n  'SV': \"El Salvador\",\r\n  'SX': \"Sint Maarten\",\r\n  'SY': \"Syrian Arab Republic\",\r\n  'SZ': \"Swaziland\",\r\n  'TC': \"Turks and Caicos Islands\",\r\n  'TD': \"Chad\",\r\n  'TF': \"French Southern Territories\",\r\n  'TG': \"Togo\",\r\n  'TH': \"Thailand\",\r\n  'TJ': \"Tajikistan\",\r\n  'TK': \"Tokelau\",\r\n  'TL': \"Timor-Leste\",\r\n  'TM': \"Turkmenistan\",\r\n  'TN': \"Tunisia\",\r\n  'TO': \"Tonga\",\r\n  'TR': \"Turkey\",\r\n  'TT': \"Trinidad and Tobago\",\r\n  'TV': \"Tuvalu\",\r\n  'TW': \"Taiwan\",\r\n  'TZ': \"Tanzania, United Republic of\",\r\n  'UA': \"Ukraine\",\r\n  'UG': \"Uganda\",\r\n  'UM': \"United States Minor Outlying Islands\",\r\n  'US': \"United States\",\r\n  'UY': \"Uruguay\",\r\n  'UZ': \"Uzbekistan\",\r\n  'VA': \"Holy See (Vatican City State)\",\r\n  'VC': \"Saint Vincent and the Grenadines\",\r\n  'VE': \"Venezuela\",\r\n  'VG': \"Virgin Islands, British\",\r\n  'VI': \"Virgin Islands, U.S.\",\r\n  'VN': \"Vietnam\",\r\n  'VU': \"Vanuatu\",\r\n  'WF': \"Wallis and Futuna\",\r\n  'WS': \"Samoa\",\r\n  'YE': \"Yemen\",\r\n  'YT': \"Mayotte\",\r\n  'ZA': \"South Africa\",\r\n  'ZM': \"Zambia\",\r\n  'ZW': \"Zimbabwe\",\r\n  'XX': \"OMCK\",\r\n  'T1': \"Tor\"\r\n}\r\n\r\nvar bnrs = {\r\n  initiated: false,\r\n  init: function() {\r\n    $.getJSON(ku_boardspath+'/bnrs.json', function(data) {\r\n      var reduced = [];\r\n      if(data.length > 1) {\r\n        _.each(data, function(bnr) {\r\n          if(bnr.link !== this_board_dir) reduced.push(bnr);\r\n        });\r\n      }\r\n      else reduced = data;\r\n      bnrs.data = reduced;\r\n      bnrs.initiated = true;\r\n      bnrs.display();\r\n    });\r\n  },\r\n  display: function() {\r\n    if(!this.initiated) return;\r\n    if(!this.data.length) return;\r\n    var reduced = [];\r\n    if(typeof this.current !== 'undefined') {\r\n      _.each(this.data, function(item) {\r\n        if(item.path !== bnrs.current) reduced.push(item)\r\n      });\r\n    }\r\n    else reduced = this.data;\r\n    var toDisplay = randomItem(reduced);\r\n    this.current = toDisplay.path;\r\n    var link = (toDisplay.link.indexOf('http') === (-1)) ? ku_boardspath+'/'+toDisplay.link : toDisplay.link;\r\n    var newhtml = '<a class=\"bnrsupdate\" href=\"#\" onclick=\"javascript:bnrs.display();return false;\"></a><a href=\"'+link+'\"><img src=\"'+ku_boardspath+'/images/bnrs/'+toDisplay.path+'\" /></a>';\r\n    if($('.bnr').length) {\r\n      $('.bnr').html(newhtml);\r\n    }\r\n    else $('.logo').before('<div class=\"bnr-wrap\"><div class=\"bnr\">'+newhtml+'</div></div>');\r\n  },\r\n}\r\n\r\nfunction getRandomInt (min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction randomItem(array) {\r\n  return array[getRandomInt(0, array.length-1)];\r\n}\r\n\r\nvar embedLinks = {\r\n  sites: [\r\n    {id: 'youtube', rx: /(?:youtu(?:\\.be|be\\.com)\\/(?:.*v(?:\\/|=)|(?:.*\\/)?)([\\w'-]+))/i },\r\n    {id: 'vimeo', rx: /[\\w\\W]*vimeo\\.com\\/(?:.*?)([0-9]+)(?:.*)?/ },\r\n    {id: 'coub', rx: /[\\w\\W]*coub\\.com\\/view\\/([\\w\\W]*)[\\w\\W]*/ },\r\n    {id: 'soundcloud', rx: /[\\w\\W]*soundcloud.com\\/([\\w\\W]*)[\\w\\W]*/i },\r\n  ],\r\n  process: function(val) {\r\n    var result = null;\r\n    _.find(this.sites, function(site) {\r\n      var fruit = site.rx.exec(val);\r\n      if(fruit != null) {\r\n        result = {\r\n          site: site.id,\r\n          code: fruit[1]\r\n        }\r\n      }\r\n    })\r\n    return result;\r\n  }\r\n}\r\n\r\nvar catalog = {\r\n  conf: {\r\n    sortBy: 'bumped',\r\n    layout: 'text',\r\n    respectStickied: true,\r\n    showHidden: true,\r\n    expandOnHover: true\r\n  },\r\n  saveConfig: function() {\r\n    localStorage['catalogSettings'] = JSON.stringify(this.conf);\r\n  },\r\n  init: function() {\r\n    document.body.classList.add('is-catalog')\r\n    // apply settings\r\n    if(localStorage['catalogSettings']) {\r\n      try {\r\n        var myConf = JSON.parse(localStorage['catalogSettings']);\r\n        _.each(myConf, function(val, key) {\r\n          this.conf[key] = val\r\n        }, this)\r\n      }\r\n      catch(e) {\r\n        console.error('Invalid catalog config');\r\n        localStorage.removeItem('catalogSettings');\r\n      }\r\n    }\r\n    // Catalog refresh button\r\n    var refreshBtn = `<div class=\"refresh-catalog\" title=\"${_l.refreshCatalog}\"><svg class=\"icon i-16in20\"><use xlink:href=\"#i-refresh\"></use></svg></div>`\r\n    // catalog control buttons\r\n    var sortBtns = '<div class=\"button-group\" data-select=\"sortBy\">';\r\n    _.each([\r\n      ['bumped', 'bumpOrder', 'bump', 'i-20'],\r\n      ['timestamp', 'creationDate', 'creation', 'i-20'],\r\n      ['replied', 'lastReply', 'reply', 'i-16in20'],\r\n      ['reply_count', 'replyCount', 'replies', 'i-20']\r\n    ], (function(v_d_i) {\r\n      sortBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.sortBy ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l.sortBy+' '+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    sortBtns += '</div>';\r\n    var pinBtns = '<div class=\"button-group'+(this.conf.sortBy !== 'bumped' ? ' disabled' : '')+'\" data-select=\"respectStickied\" id=\"pinControl\">';\r\n    _.each([\r\n      [1, 'doStick', 'pin', 'i-16in20'],\r\n      [0, 'doNotStick', 'unpin', 'i-16in20']\r\n    ], (function(v_d_i) {\r\n      pinBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.respectStickied ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    pinBtns += '</div>';\r\n    var hideBtns = '<div class=\"button-group\" data-select=\"showHidden\">';\r\n    _.each([\r\n      [0, 'hideHidden', 'hide', 'i-16in20'],\r\n      [1, 'showHidden', 'unhide', 'i-16in20']\r\n    ], (function(v_d_i) {\r\n      hideBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.showHidden ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    hideBtns += '</div>';\r\n    var layoutBtns = '<div class=\"button-group\" data-select=\"layout\">';\r\n    _.each([\r\n      ['text', 'smallPics', 'grid-small', 'i-20'],\r\n      ['gallery', 'largePics', 'gallery-grid', 'i-20'],\r\n      /*['legacy', 'legacyMode', 'legacy-grid', 'i-20']*/\r\n    ], (function(v_d_i) {\r\n      layoutBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.layout ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    layoutBtns += '</div>';\r\n    // searck input\r\n    var searchInput = '<input name=\"subject\" autocomplete=\"false\" class=\"button-group\" type=\"text\" id=\"cat-search\" placeholder=\"'+_l.search+'...\" /><input type=\"text\" name=\"FUCKYOUCHROMEFUCKYOU\" style=\"display:none;\"/>'\r\n\r\n    $('#catalog-controls').html(\r\n      refreshBtn+sortBtns+pinBtns+searchInput+hideBtns+layoutBtns\r\n    );\r\n    this.load();\r\n    if(this.conf.expandOnHover)\r\n      $('#catalog-contents').addClass('expand-on-hover-enabled');\r\n    // Card events\r\n    $('#catalog-contents')\r\n    .on('click', '.namedate-overlay', function() {\r\n      $(this).toggleClass('date-on name-on');\r\n    })\r\n    .on('click', '.ce-text .bigThumb', function(ev) {\r\n      ev.stopPropagation(); ev.preventDefault();\r\n      var $card = $(this).parents('.cat-entry');\r\n      $card.toggleClass('thumbExpanded');\r\n    })\r\n    .on('click', '.bigThumb audio, .bigThumb video', function(ev) {\r\n      ev.stopPropagation();\r\n    })\r\n    .on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', (function(event) {\r\n      var $target = $(event.target);\r\n      if (event.originalEvent.animationName == \"embed-image-insert\" && !$target.hasClass('_inserted_'))\r\n        this.getEmbedThumb($target);\r\n    }).bind(this))\r\n    .on('mousedown', '.cat-prv', function(ev) {\r\n      ev.preventDefault();\r\n      PostPreviews._mouseover.bind(this)(ev);\r\n    })\r\n    .on('click', '.cat-prv', function(ev) {\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n    })\r\n    .on('mouseleave', '.cat-prv', function(ev) {\r\n      PostPreviews._mouseout.bind(this)(/*ev*/);\r\n    })\r\n    .on('click', '.i-hide', (function(ev) {\r\n      var $target = $(ev.currentTarget)\r\n      , $card = $target.parents('.cat-entry')\r\n      , threadID = $card.data('id')\r\n      , threadIX = _.findIndex(this.model, {'id': threadID})\r\n      , thread = this.model[threadIX];\r\n      thread.hidden = !thread.hidden;\r\n      // addClass won't work here for some reason\r\n      if(thread.hidden) {\r\n        $target[0].classList.add('pressed');\r\n        $target.html(makeIcon('unhide', '', true));\r\n        HiddenItems.hideItem('thread', threadID);\r\n        $card.addClass('thread-hidden')\r\n      }\r\n      else {\r\n        $target[0].classList.remove('pressed');\r\n        $target.html(makeIcon('hide', '', true));\r\n        HiddenItems.unhideItem('thread', threadID);\r\n        $card.removeClass('thread-hidden')\r\n      }\r\n      //invalidate rendered cache\r\n      this.model[threadIX] = thread;\r\n      delete this.rendered[this.conf.layout][threadID];\r\n    }).bind(this))\r\n    // catalog configuration\r\n    $('.bg-button').click((function(ev) {\r\n      var $target = $(ev.currentTarget);\r\n      if($target.hasClass('bgb-selected')) return;\r\n      var $group = $target.parent()\r\n      , val = $target.data('val')\r\n      , key = $group.data('select');\r\n      $group.find('.bg-button').removeClass('bgb-selected');\r\n      $target.addClass('bgb-selected');\r\n      if(key !== 'sortBy' && key !== 'layout') val = !!val;\r\n      else {\r\n        if(val == 'bumped') $('#pinControl').removeClass('disabled');\r\n        else $('#pinControl').addClass('disabled');\r\n      }\r\n      this.conf[key] = val;\r\n      this.saveConfig();\r\n      if(key !== 'showHidden') this.build();\r\n      else {\r\n        if(val) $('#catalog-contents').removeClass('hideHidden');\r\n        else $('#catalog-contents').addClass('hideHidden');\r\n      }\r\n    }).bind(this))\r\n    $('.refresh-catalog').click((function(ev) {\r\n      ev.preventDefault();\r\n      this.load();\r\n    }).bind(this));\r\n    //search\r\n    $('#cat-search').on('input', function() {\r\n      var query = $(this).val().toLowerCase().replace(/\\\"/, '\\\\\"');\r\n      try {\r\n        injector.remove('cat-search');\r\n      } catch(e) {}\r\n      if(query.length)\r\n        injector.inject('cat-search', '#catalog-contents .cat-entry:not([data-search *= \"'+query+'\"]) { display:none; }');\r\n      else injector.remove('cat-search');\r\n    }).trigger('input');\r\n  },\r\n  load: function() {\r\n    $('#catalog-contents').html(`<div class=\"cat-loading\"><div class=\"spinner\"></div>${_l.loading}...</div>`);\r\n    // clear data\r\n    this.rendered = {text: {}, gallery: {}};\r\n    this.model = null;\r\n    // get contents\r\n    $.getJSON('catalog.json?v='+(new Date().getTime()))\r\n    .done(this.build.bind(this))\r\n    .fail(function(err) {\r\n      throw err;\r\n    })\r\n  },\r\n  fileTypes: {\r\n    image: ['jpg', 'gif', 'png'],\r\n    jpgThumb: ['webm', 'mp4', 'cob', 'vim', 'you', 'yts'],\r\n    iconsAvailable: ['swf', 'mp3', 'ogg', 'css', 'flv'],\r\n    audio: ['mp3', 'ogg'],\r\n    embed: ['cob', 'vim', 'you', 'yts']\r\n  },\r\n  authorities: ['', 'Admin', 'Mod', '?', 'God'],\r\n  formatDate: function(timestamp, short) {\r\n    if(typeof short === 'undefined') short = false;\r\n    var date = new Date(timestamp * 1000)\r\n    , Dow = this.dateLocal.dows.hasOwnProperty(locale) ? this.dateLocal.dows[locale][date.getDay()] : this.dateLocal.dows.en[date.getDay()]\r\n    , yy = _.padLeft(date.getFullYear() % 100, 2, 0)\r\n    , mo = _.padLeft(date.getMonth()+1, 2, 0)\r\n    , Mon = (locale === 'ru') ? this.dateLocal.mons.ru[date.getMonth()] : date.getMonth()+1\r\n    , dd = _.padLeft(date.getDate(), 2, 0)\r\n    , hh = _.padLeft(date.getHours(), 2, 0)\r\n    , mm = _.padLeft(date.getMinutes(), 2, 0)\r\n    , ss = _.padLeft(date.getSeconds(), 2, 0);\r\n    return (short\r\n      ? ( (locale === 'ru')\r\n        ? (dd+'.'+mo+'.'+yy+' в ')\r\n        : (mo+'/'+dd+'/'+yy+' @ ') )\r\n      : ( (locale === 'ru')\r\n        ? (Dow+' '+dd+' '+Mon+'’'+yy+' в ')\r\n        : (mo+'/'+dd+'/'+yy+' ('+Dow+') @ ') )\r\n    ) + hh+':'+mm+':'+ss;\r\n  },\r\n  dateLocal: {\r\n    dows: {\r\n      ru: ['Пнд','Втр','Срд','Чтв','Птн','Сбт','Вск'],\r\n      en: ['Sun','Mon','Tue','Wen','Thu','Fri','Sat']\r\n    },\r\n    mons: {\r\n      ru: ['Янв','Фев','Мар','Апр','Май','Июн','Июл','Авг','Сен','Окт','Ноя','Дек']\r\n    }\r\n  },\r\n  build: function(data) {\r\n    if(typeof data === 'undefined') data = this.model;\r\n    if(!data) return;\r\n    // normalize\r\n    _.each(data, function(entry, i) {\r\n      _.each(['id', 'reply_count', 'bumped', 'replied', 'reply_count', 'timestamp', 'page', 'locked', 'stickied', 'deleted_timestamp'], function(prop) {\r\n        entry[prop] = ~~entry[prop];\r\n      })\r\n      data[i] = entry;\r\n    })\r\n    // Sort threads\r\n    if(this.conf.sortBy === 'bumped' && this.conf.respectStickied)\r\n      this.model = _.sortByOrder(data, ['stickied', 'bumped'], ['desc', 'desc']);\r\n    else {\r\n      var sby = [this.conf.sortBy];\r\n      if(this.conf.sortBy !== 'bumped')\r\n        sby.push('bumped')\r\n      this.model = _.sortByOrder(data, sby, _.repeat('desc', sby.length));\r\n    }\r\n\r\n    var html = '';\r\n\r\n    _.each(this.model, function(thread) {\r\n      html += this.buildEntry(thread);\r\n    }, this);\r\n\r\n    $('#catalog-contents').html(html);\r\n  },\r\n  getEmbedThumb: function($el) {\r\n    var site = $el.data('site'), id = $el.data('id'), img\r\n    , $thread = $el.parents('.cat-entry')\r\n    , threadID = $thread.data('id');\r\n    if(site == 'cob')\r\n      $.get(ku_boardspath+'/corpsy.php?code='+id, (function(res) {\r\n        $el.replaceWith('<img src=\"'+res.thumbnail_url+'\">');\r\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML;\r\n      }).bind(this));\r\n    if(site == 'vim')\r\n      $.get('http://vimeo.com/api/v2/video/'+id+'.json', (function(res) {\r\n        $el.replaceWith('<img src=\"'+res[0].thumbnail_medium+'\">');\r\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML\r\n      }).bind(this));\r\n  },\r\n\r\n  buildEntry: function(thread) {\r\n    if(this.rendered[this.conf.layout].hasOwnProperty(thread.id))\r\n      return this.rendered[this.conf.layout][thread.id];\r\n\r\n    if(!thread.processed) {\r\n      thread.url = '/'+this_board_dir+'/res/'+thread.id+'.html';\r\n      // --- Building blocks ---\r\n      // Thumbnails\r\n      var expanderBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-expand\"></use></svg>',\r\n      playerBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-play\"></use></svg>';\r\n      // Find first non-deleted file\r\n      let embed = thread.embeds ? (thread.embeds.find(e => e.file != 'removed') || 'removed') : null\r\n      //  for images\r\n      if(!embed || embed === 'removed') {\r\n        thread.smallThumb =\r\n        '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\r\n          <div class=\"nofile-removed ctx\">'+(embed === 'removed' ? 'Удалён' : 'No File')+'</div>'\r\n        +'</a>';\r\n      }\r\n      else {\r\n        if (\r\n          _.includes(this.fileTypes.image, embed.file_type)\r\n          ||\r\n          _.includes(this.fileTypes.jpgThumb, embed.file_type)\r\n          ||\r\n          (\r\n            _.includes(this.fileTypes.audio, embed.file_type)\r\n            &&\r\n            (+embed.thumb_w) > 0\r\n            &&\r\n            (+embed.thumb_h) > 0\r\n          )\r\n        ) {\r\n          let ftype = _.includes(this.fileTypes.image, embed.file_type)\r\n            ? embed.file_type\r\n            : 'jpg'\r\n          , thumbURL = _.includes(this.fileTypes.embed, embed.file_type)\r\n            ? `${embed.file_type}-${embed.file}-`\r\n            : embed.file\r\n          , vartype = embed.file_type == 'mp3' ? ' onerror=\"switchFileType(this)\" extset=\"jpg,png,gif\"' : ''\r\n          thread.smallThumb =\r\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\r\n            <img src=\"thumb/'+thumbURL+'c.'+ftype+'\"'+vartype+'>'\r\n          +'</a>';\r\n          thread.bigThumb =\r\n          '<img src=\"thumb/'+thumbURL+'s.'+ftype+'\"'+vartype+'>';\r\n        }\r\n        /*if(_.includes(this.fileTypes.image, thread.file_type)) {\r\n          thread.fileTypeClass = 'image';\r\n          thread.smallThumb =\r\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\r\n            <img src=\"thumb/'+thread.file+'c.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">'\r\n          +'</a>';\r\n          thread.bigThumb =\r\n          '<img src=\"thumb/'+thread.file+'s.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">';\r\n        }*/\r\n        //  small thumbnail for embeds and generic files\r\n        else {\r\n          let isGeneric = !_.includes(this.fileTypes.iconsAvailable, embed.file_type)\r\n          , thumb = isGeneric\r\n            ? makeGenericFileIcon(embed.file_type)\r\n            : `<img src=\"${(_.includes(this.fileTypes.embed, embed.file_type)\r\n              ? `/inc/filetypes/generic-embed.png`\r\n              : `/inc/filetypes/${embed.file_type}.png`)}\">`\r\n          // , expandable = _.includes(this.fileTypes.embed, embed.file_type) || _.includes(this.fileTypes.audio, embed.file_type)\r\n          thread.smallThumb =\r\n          `<a target=\"_blank\" href=\"${thread.url}\" class=\"smallThumb\">${thumb}</a>`\r\n          //  for audios\r\n          if(_.includes(this.fileTypes.audio, embed.file_type)) {\r\n            thread.bigThumb =\r\n            '<audio src=\"src/'+embed.file+'.'+embed.file_type+'\" controls></audio>';\r\n          }\r\n        }\r\n        /*//  for embeds\r\n        if(_.includes(this.fileTypes.embed, thread.file_type)) {\r\n          thread.bigThumb = (thread.file_type == 'you')\r\n          ? '<img src=\"http://i.ytimg.com/vi/'+thread.file+'/mqdefault.jpg\">'\r\n          : '<div class=\"cat-bt-embed\" data-site=\"'+thread.file_type+'\" data-id=\"'+thread.file+'\"></div>';\r\n        }\r\n        //  for audios\r\n        if(_.includes(this.fileTypes.audio, thread.file_type)) {\r\n          thread.bigThumb =\r\n          '<audio src=\"src/'+thread.file+'.'+thread.file_type+'\" controls></audio>';\r\n        }*/\r\n        if (thread.bigThumb)\r\n          thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';\r\n      }\r\n      /*if(!embed || embed === 'removed')\r\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';*/\r\n\r\n      //OP\r\n      thread.op = '<a target=\"_blank\" title=\"'+_l.goToThread+'\" target=\"_blank\" href=\"'+thread.url+'\" class=\"op-number ctx\">#'+thread.id+'</a>';\r\n\r\n      //preview\r\n      thread.preview =\r\n      '<a href=\"'+thread.url+'#'+thread.id+'\" class=\"actor cat-prv\">\\\r\n        <svg class=\"icon\"><use xlink:href=\"#i-eye\"></use></svg>\\\r\n      </a>';\r\n\r\n      //counters\r\n      var repliesLabel =\r\n      '<svg class=\"icon\"><use xlink:href=\"#i-reply\"></use></svg>\\\r\n      <span class=\"ctx reply-count\">'+thread.reply_count+'</span>';\r\n      if(thread.last_reply)\r\n        repliesLabel = '<a href=\"'+thread.url+'#'+thread.last_reply+'\" class=\"actor cat-prv\">'+repliesLabel+'</a>';\r\n      var replies =\r\n      '<div class=\"infolabel\">'+repliesLabel+'</div>',\r\n      images =\r\n      '<div class=\"infolabel\">\\\r\n        <svg class=\"icon\"><use xlink:href=\"#i-picture\"></use></svg>\\\r\n        <span class=\"ctx image-count\">'+thread.images+'</span>\\\r\n      </div>',\r\n      page =\r\n      '<div class=\"infolabel il-page\">\\\r\n        <a title=\"'+_l.threadOnPage+' '+thread.page+'\" target=\"_blank\" href=\"/'+this_board_dir+'/' + ((thread.page > 0) ? thread.page+'.html' : '')+'#'+thread.id+'\" class=\"actor\">\\\r\n          <svg class=\"icon\"><use xlink:href=\"#i-page\"></use></svg>\\\r\n          <span class=\"ctx page-number\">'+thread.page+'</span>\\\r\n        </a>\\\r\n      </div>';\r\n      thread.countersCombined = replies+images+page;\r\n\r\n      //Poster name+date\r\n      thread.posterauthority = +thread.posterauthority;\r\n      thread.nameDatePriority = 'date';\r\n      if(localStorage['cat_nameDatePriority'] == 'name' ||\r\n          (localStorage['cat_nameDatePriority'] != 'date' &&\r\n            (thread.name || thread.tripcode || thread.posterauthority)\r\n          )\r\n        ) thread.nameDatePriority = 'name';\r\n\r\n      // Poster name\r\n      var poster =\r\n      (thread.name ? '<span class=\"ctx postername\">'+thread.name+'</span>' : '') +\r\n      (thread.tripcode ? '<span class=\"ctx postertrip\">!'+thread.tripcode+'</span>' : '') +\r\n      (thread.posterauthority ? '<span class=\"ctx admin\">&nbsp;##'+this.authorities[thread.posterauthority]+'##</span>' : '');\r\n      thread.poster = '<div class=\"cat-poster\"><span class=\"ctx\">by&nbsp;</span>'+ (poster || '<span class=\"ctx c-postername\">'+(this_board_defaultName || _l.anonymous)+'</span>')+'</div>';\r\n\r\n      // Date\r\n      var dn = ' style=\"display:none\"';\r\n      thread.date = '<div class=\"ctx cat-date cat-date-long\">'+this.formatDate(thread.timestamp)+'</div>';\r\n      thread.dateCompact = '<div class=\"ctx cat-date cat-date-short\">'+this.formatDate(thread.timestamp, 1)+'</div>';\r\n\r\n      //search data\r\n      thread.searchData = _.escape(stripHTML(thread.subject + ' ' + thread.message).toLowerCase());\r\n\r\n      thread.message = thread.message.replace(/\\\\\"/mg, '\"');\r\n\r\n      thread.processed = true;\r\n      this.model[_.findIndex(this.model, {id: thread.id})] = thread;\r\n    }\r\n    //indicators\r\n    thread = this.buildIndicators(thread);\r\n\r\n    var html = this.layouts[this.conf.layout].bind(this)(thread);\r\n    this.rendered[this.conf.layout][thread.id] = html;\r\n    return html\r\n  },\r\n  buildIndicators: function(thread) {\r\n    thread.hidden =  HiddenItems.isHidden('thread', thread.id)\r\n    var pin = thread.stickied ? '<svg class=\"foradmin-act icon i-layer-1 i-pin\"><use xlink:href=\"#i-pin\"></use></svg>' : '',\r\n    lock = thread.locked ? '<svg class=\"foradmin-act icon i-layer-1 i-lock\"><use xlink:href=\"#i-lock\"></use></svg>' : '',\r\n    deathmark = thread.deleted_timestamp ? '<svg class=\"foradmin-act icon i-layer-1 i-deathmark\"><use xlink:href=\"#i-skull\"></use></svg>' : '',\r\n    hide = '<svg class=\"actor icon i-layer-1 i-hide'+(thread.hidden ? ' pressed' : '')+'\"><use xlink:href=\"#i-'+(thread.hidden ? 'unhide' : 'hide')+'\"></use></svg>',\r\n    burger = '<svg class=\"actor icon i-burger foradmin-show\"><use xlink:href=\"#i-burger\"></use></svg>',\r\n    del = '<svg class=\"actor icon i-layer-2 i-delete foradmin-show\"><use xlink:href=\"#i-x\"></use></svg>',\r\n    and = '<svg class=\"actor icon i-layer-2 i-dnb foradmin-show\"><use xlink:href=\"#i-and\"></use></svg>',\r\n    ban = '<svg class=\"actor icon i-layer-2 i-ban foradmin-show\"><use xlink:href=\"#i-ban\"></use></svg>';\r\n    thread.indicatorsCombined = '<div class=\"indicators\">'+burger+'<span class=\"i-layer-1\">'+deathmark+pin+lock+hide+'</span><span class=\"i-layer-2\">'+del+and+ban+'</span></div>';\r\n    return thread;\r\n  },\r\n  layouts: {\r\n    text: function(thread) {\r\n      return ''+\r\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-text'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\r\n        <div class=\"cat-card\">\\\r\n          <div class=\"ce-heda\">'\r\n            +thread.smallThumb+\r\n            '<div class=\"cat-infoline ci-op-link\">'\r\n              +thread.op\r\n              +thread.indicatorsCombined+\r\n            '</div>\\\r\n            <div class=\"cat-infoline namedate-overlay '+thread.nameDatePriority+'-on\">'\r\n              +thread.poster\r\n              +thread.date\r\n            +'</div>\\\r\n            <div class=\"cat-infoline\">'\r\n              +thread.preview\r\n              +thread.countersCombined+\r\n            '</div>\\\r\n          </div>\\\r\n          <div class=\"ce-opcontent ctx\">\\\r\n            <h5>'+thread.subject+'</h5>'+\r\n            thread.message+\r\n          '</div>\\\r\n        </div>'\r\n        +thread.bigThumb+\r\n      '</div>'\r\n    },\r\n    gallery: function(thread) {\r\n      return ''+\r\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-gallery'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\r\n        <div class=\"cat-card\">'+\r\n          thread.bigThumb+\r\n          '<div class=\"cat-infoline\">\\\r\n            <div class=\"ci-op-link\">'+thread.op+'</div>\\\r\n            <div class=\"counters\">'+thread.countersCombined+'</div>\\\r\n          </div>\\\r\n          <div class=\"cat-infoline\">'\r\n            +thread.preview+\r\n            '<div class=\"namedate-overlay '+thread.nameDatePriority+'-on\">'\r\n              +thread.poster\r\n              +thread.dateCompact\r\n            +'</div>'\r\n            +thread.indicatorsCombined+\r\n          '</div>\\\r\n          <div class=\"ce-opcontent ctx\">\\\r\n            <h5>'+thread.subject+'</h5>'+\r\n            thread.message+\r\n          '</div>\\\r\n        </div>\\\r\n      </div>'\r\n    }\r\n  }\r\n}\r\n\r\nfunction stripHTML(html) {\r\n  var tmp = document.implementation.createHTMLDocument(\"New\").body;\r\n  tmp.innerHTML = html;\r\n  return tmp.textContent || tmp.innerText || \"\";\r\n}\r\n\r\nvar overboard = {\r\n  get boards() {\r\n    if (!is_overboard)\r\n      return [boardid]\r\n    if (!this._boards)\r\n      this._boards = _.unique([].map.call(document.querySelectorAll('div[id^=thread]'), e => e.dataset.boardid))\r\n    return this._boards\r\n  },\r\n  idFromName: name => name!==null && $(`div[data-board=\"${name}\"]`).parents('div[id^=thread]').data('boardid')\r\n}\r\n\r\nvar unreadCounter = {\r\n  init: function(built) {\r\n    if (!built) {\r\n      built = + document.querySelector('meta[property=\"i0:buildtime\"]').content\r\n    }\r\n    this.lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { }\r\n    overboard.boards.forEach(boardid => {\r\n      let last_ts = this.lastvisits.hasOwnProperty(boardid) ? parseInt(this.lastvisits[boardid]) : 0;\r\n      if(last_ts < built) {\r\n        this.lastvisits[boardid] = built\r\n        localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\r\n      }\r\n    })\r\n  },\r\n  refreshTimestamp: function(timestamp, boardName=null) { // PHP standard timestamp length\r\n    if (!this.lastvisits)\r\n      this.init()\r\n    let id = !is_overboard ? boardid : overboard.idFromName(boardName)\r\n    if (id) {\r\n      if (timestamp===null || typeof timestamp === 'undefined')\r\n        timestamp = Math.round(new Date().getTime() / 1000)\r\n      this.lastvisits[id] = timestamp\r\n      localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\r\n    }\r\n  },\r\n  update: function() {\r\n    if (!this.lastvisits)\r\n      this.init()\r\n    $.ajax({\r\n      url: '/newpostscount.php',\r\n      data: this.lastvisits,\r\n      dataType: 'json',\r\n      success: function(data) {\r\n        $('.newposts-counter').remove()\r\n        $('.got-updates').removeClass('got-updates')\r\n        _.each(data, function(val, brd) {\r\n          if ((+val) > 0) {\r\n            let valstr = `<span class=\"newposts-counter\"> (${val})</span>`\r\n            , $brd = $(`.menu-item[href=\"/${brd}/\"]`)\r\n            if ($brd.length) {\r\n              $brd.append(valstr)\r\n              $(`.sect-exr[data-toexpand=\"${$brd.parents('.menu-sect').attr('id').split('ms-')[1]}\"]`).parent().addClass('got-updates')\r\n            }\r\n            $(`.mobile-nav option[value=\"${brd}\"]`).append(valstr)\r\n          }\r\n        })\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nvar HTMLoader = {\r\n  loadThread: function(boardID, threadID, done, postID) {\r\n    $.get(threadID === '?'\r\n      ? `${ku_boardspath}/postbynumber.php?b=${boardID}&p=${postID}`\r\n      : `${ku_boardspath}/${boardID}/res/${threadID}.html?${force_html_nocache ? Math.random() : ''}`)\r\n    .then(data => {\r\n      let posts = data.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd:[0-9]+\\s*?<\\/div\\s*?>[\\s\\S]+?<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd-end\\s*?<\\/div\\s*?>/gi)\r\n      .map(match => {\r\n        let res = match.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd:([0-9]+)\\s*?<\\/div\\s*?>([\\s\\S]+?)<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd-end\\s*?<\\/div\\s*?>/i);\r\n        return {\r\n          id: +res[1],\r\n          body: res[2]\r\n        }\r\n      })\r\n      if (threadID === '?') {\r\n        let thrno = data.match(/<!--i0:thrno=([0-9]+)-->/) //wtf\r\n        if (thrno)\r\n          threadID = thrno[1]\r\n      }\r\n      if (posts.length) {\r\n        let postMap = posts.map(post => {\r\n          this.cached[`${boardID}_${post.id}`] = post.body\r\n          return post.id\r\n        })\r\n        if (threadID !== '?') {\r\n          this.threadMaps[`${boardID}_${threadID}`] = postMap\r\n        }\r\n      }\r\n      done()\r\n    })\r\n    .fail(err => {\r\n      done(err.status || 'null')\r\n    })\r\n  },\r\n  loadPage: function(page, callback, boardID=this_board_dir) {\r\n    $.get(`${ku_boardspath}/${boardID}/${page==0 ? '' : `${page}.html`}`)\r\n    .then(data => {\r\n      let chunk = data.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-page-start\\s*?<\\/div\\s*?>\\s*([\\s\\S]+?)\\s*<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-page-end\\s*?<\\/div\\s*?>/i)?.[1]\r\n      if (chunk) {\r\n        document.querySelector('#delform hr:last-of-type').insertAdjacentHTML('afterend', chunk)\r\n        this.pageCleanUp()\r\n      }\r\n      callback()\r\n    })\r\n  },\r\n  pageCleanUp() {\r\n    let existingIDs = []\r\n    document.querySelectorAll('div[id^=thread]').forEach(thr => {\r\n      if (existingIDs.includes(thr.id)) {\r\n        thr.previousElementSibling.remove() // remove #unhidethread\r\n        thr.nextElementSibling.remove() // remove <br>\r\n        thr.nextElementSibling.remove() // remove </hr>\r\n        thr.remove()\r\n      }\r\n      existingIDs.push(thr.id)\r\n    })\r\n  },\r\n  getPost: function(boardID, threadID, postID, callback, secondTry) {\r\n    let cachedPost = this.cached[`${boardID}_${postID}`]\r\n    if (cachedPost) {\r\n      callback(false, cachedPost)\r\n      return\r\n    }\r\n    else {\r\n      if (!secondTry) {\r\n        let found = false\r\n        if (boardID === this_board_dir) {\r\n          let $post = $(`a[name=${postID}]`)\r\n          if ($post.length) {\r\n            let post = $post.parents('.postnode')[0].outerHTML\r\n            this.cached[`${boardID}_${postID}`] = post\r\n            found = true\r\n            callback(false, post)\r\n          }\r\n        }\r\n        if (!found) {\r\n          this.loadThread(boardID, threadID, err => {\r\n            if (err) {\r\n              callback(err)\r\n            }\r\n            else {\r\n              this.getPost(boardID, threadID, postID, callback, true)\r\n            }\r\n          }, postID)\r\n        }\r\n      }\r\n      else {\r\n        callback(null)\r\n      }\r\n    }\r\n  },\r\n  getThread: function(boardID, threadID, range, callback, secondTry, force) {\r\n    let threadMap = force ? false : this.threadMaps[`${boardID}_${threadID}`]\r\n    if (threadMap) {\r\n      if (range) {\r\n        threadMap = threadMap.filter(n => n > range[0] && n < range[1])\r\n      }\r\n      callback(false, threadMap.reduce((htm, postID) => htm + this.cached[`${boardID}_${postID}`], ''))\r\n    }\r\n    else {\r\n      if (!secondTry) {\r\n        this.loadThread(boardID, threadID, err => {\r\n          if (err) {\r\n            callback(err)\r\n          }\r\n          else {\r\n            this.getThread(boardID, threadID, range, callback, true)\r\n          }\r\n        })\r\n      }\r\n      else {\r\n        callback(null)\r\n      }\r\n    }\r\n  },\r\n  cached: {},\r\n  threadMaps: {},\r\n  cachedPostboxes: {},\r\n  getPostbox: function(boardID) {\r\n    return new Promise((resolve, reject) => {\r\n      if (boardID===false) // not overboard\r\n        return resolve(document.querySelector('#postform'))\r\n      if (this.cachedPostboxes[boardID])\r\n        return resolve(this.cachedPostboxes[boardID])\r\n      $.get(`${ku_boardspath}/${boardID}/`) // dirty deeds done dirt cheap\r\n      .then(data => {\r\n        let pb = data.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pb\\s*?<\\/div\\s*?>([\\s\\S]+?)<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pb-end\\s*?<\\/div\\s*?>/i)\r\n        if (!pb)\r\n          reject(404)\r\n        let c = document.createElement('div')\r\n        c.innerHTML = pb[1]\r\n        let hcaptchaScript\r\n        if (typeof hcaptcha === 'undefined' && (hcaptchaScript = pb[1].match(/<script src=\"(.+?js\\.hcaptcha\\.com.+?)\"/))) {\r\n          head.js(hcaptchaScript[1], () => console.log('hcaptcha loaded'))\r\n        }\r\n        this.cachedPostboxes[boardID] = c.firstChild\r\n        resolve(this.cachedPostboxes[boardID])\r\n      })\r\n      .fail(err => {\r\n        reject(err.status || 'null')\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nvar endlessScroll = {\r\n  toggle: function(enabled = this.enabled) {\r\n    if (enabled) {\r\n      if (!this.bound)\r\n        this.bound = this.onScroll.bind(this)\r\n      window.addEventListener('scroll', this.bound)\r\n      this.onScroll()\r\n    }\r\n    else\r\n      window.removeEventListener('scroll', this.bound)\r\n    this.enabled = enabled\r\n  },\r\n  enabled: false,\r\n  onScroll: function() {\r\n    if (this.busy || window.scrollY + window.innerHeight < document.body.scrollHeight) return;\r\n    this.busy = true\r\n    // determine next page\r\n    let next = document.querySelector('#pagination a')\r\n    if (next) {\r\n      let loader = document.querySelector('#delform hr:last-of-type')._ins('afterend', `<div class=\"endless-scroll-loading spin-around\"></div>`)\r\n      let page = +next.innerText\r\n      HTMLoader.loadPage(page, () => {\r\n        next.insertAdjacentHTML('afterend', `<span>${page}</span>`)\r\n        next.remove()\r\n        loader.remove()\r\n        this.busy = false\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nfunction switchFileType(el) {\r\n  let exp = /\\.([a-z0-9]+)(?=$|\\?)/i\r\n  , match = el.src.match(exp)\r\n  if (!match) return;\r\n  let exts = el.getAttribute('extset').toLowerCase().split(',')\r\n  if (!exts.length) return;\r\n  let i = exts.indexOf(match[1].toLowerCase())\r\n  if (i == -1 || i >= (exts.length-1)) return;\r\n  el.src = el.src.replace(exp, `.${exts[i+1]}`)\r\n}\r\n\r\nfunction LSfetchJSON(key) {\r\n  let val = null, data = localStorage[key]\r\n  if (typeof data !== 'undefined') {\r\n    try {\r\n      val = JSON.parse(data)\r\n    }\r\n    catch(e) {\r\n      console.error(e)\r\n      localStorage.removeItem(key)\r\n    }\r\n  }\r\n  return val\r\n}\r\n\r\n// YOBA alerts\r\nvar pups = {\r\n  push: function(a) {\r\n    // generate a unique alert ID\r\n    a.id = (+_.uniqueId(_.now())).toString(16)\r\n    this.container.insertAdjacentHTML('afterBegin', this.buildAlert(a))\r\n    a.el = document.getElementById(`pup_${a.id}`)\r\n    // Add the popup to the animation queue\r\n    a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\r\n    a.el.getBoundingClientRect() // This forces browser to respect the element's updated position for future animations (no idea why but it works)\r\n    // Close on click\r\n    a.el.onclick = () => {\r\n      delete a.timeout\r\n      a.onHold = false\r\n      a.old = true\r\n      a.el.classList.add('pup-away')\r\n      a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\r\n    }\r\n    // Do not close if mouse is over\r\n    a.el.onmouseenter = () => {\r\n      // iterate stack from end to start\r\n      this.stack.slice(0).reverse().find(ar => {\r\n        ar.onHold = true\r\n        return (ar.id == a.id) // break\r\n      })\r\n    }\r\n    // Close after mouse leave\r\n    a.el.onmouseleave = () => {\r\n      this.stack.forEach(ae => {\r\n        ae.onHold = false\r\n      })\r\n      this.holdOffTimeout = setTimeout(() => {\r\n        this.stack.forEach(ae => {\r\n          if (!ae.onHold && ae.old && ae.el) {\r\n            ae.el.classList.add('pup-away')\r\n            ae.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\r\n          }\r\n        })\r\n      }, 200)\r\n    }\r\n    this.queue.add(() => {\r\n      this.scheduleClose(a)\r\n      a.el.classList.remove('pup-pre')\r\n      a.el.style.marginTop = null\r\n      a.el.classList.remove('pup-noshadow')\r\n    })\r\n    this.stack.push(a)\r\n    this.save()\r\n    return a.id\r\n  },\r\n  closeByID: function(aid) {\r\n    let a = this.byID(aid)\r\n    if (a)\r\n      a.el.onclick()\r\n  },\r\n  queue: {\r\n    stack: [],\r\n    busy: false,\r\n    add: function(fn) {\r\n      return new Promise((resolve, reject) => {\r\n        if (! this.busy) {\r\n          this.timeout = setTimeout(this.next.bind(this), this.cooldown * 1000)\r\n          this.busy = true\r\n          resolve(fn())\r\n        }\r\n        else {\r\n          this.stack.push(() => resolve(fn()))\r\n        }\r\n      })\r\n    },\r\n    next: function() {\r\n      let next = this.stack.shift()\r\n      if (! next)\r\n        this.busy = false\r\n      else {\r\n        next()\r\n        this.timeout = setTimeout(this.next.bind(this), this.cooldown * 1000)\r\n      }\r\n    },\r\n    cooldown: .3\r\n  },\r\n  byID: function(aid) {\r\n    return this.stack.find(a => a.id == aid)\r\n  },\r\n  update: function(aid, upd) {\r\n    let a = this.byID(aid)\r\n    if (typeof upd !== 'object')\r\n      a = {msg: upd}\r\n    _.extend(a, upd)\r\n    // reset timeout\r\n    this.scheduleClose(a)\r\n    a.el.setAttribute('pupclass', a.cls)\r\n    a.el.querySelector('.pup-wrapped').innerHTML = this.buildAlert(a, 1)\r\n    this.save()\r\n  },\r\n  buildAlert: function(a, contentsOnly=false) {\r\n    let contents = `\r\n      <div class=\"alert-icon\">\r\n        <svg class=\"icon\"><use xlink:href=\"#i-${this.iconMap[a.cls]}\"></use></svg>\r\n      </div>\r\n      <div class=\"alert-msg\">${a.msg}</div>`\r\n    if (contentsOnly)\r\n      return contents\r\n    return `<div class=\"pup ${a.old ? 'pup-away pup-away-full' : 'pup-pre pup-noshadow'}\" pupclass=\"${a.cls}\" id=\"pup_${a.id}\">\r\n      <div class=\"pup-wrapped\">\r\n        ${contents}\r\n      </div>\r\n    </div>`\r\n  },\r\n  iconMap: {\r\n    succ: 'success',\r\n    err: 'error',\r\n    info: 'info',\r\n    warn: 'warning'\r\n  },\r\n  historyToggle: function() {\r\n    if (!this.stack.length) {\r\n      this.push({cls: 'info', msg: _l.historyEmpty, destroy: true})\r\n      return\r\n    }\r\n    let on = this.container.classList.toggle('history-mode')\r\n    setTimeout(() => this.container.style.overflow = (on ? 'auto' : null), on ? 300 : 0)\r\n  },\r\n  scheduleClose: function(a) {\r\n    if (a.timeout)\r\n      clearTimeout(a.timeout)\r\n    if (a.onHold)\r\n      a.onHold = false\r\n    let time = (a.time || a.time === 0) ? a.time : this.defaultTimeout\r\n    if (time) // If time is 0 it means no timeout\r\n      a.timeout = setTimeout(() => {\r\n        a.old = true\r\n        if (! a.onHold) {\r\n          a.el.classList.add('pup-away')\r\n          a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\r\n        }\r\n      }, time * 1000)\r\n  },\r\n  defaultTimeout: 3.5, // in seconds\r\n  init: function(container_id=\"pups-container\") {\r\n    document.body.insertAdjacentHTML('beforeEnd', `<div id=\"${container_id}\"><div class=\"pup-history-shadow\"></div></div>`)\r\n    this.container = document.getElementById(container_id)\r\n    if (! this.container) {\r\n      console.error('No popup container found')\r\n      return;\r\n    }\r\n    this.container.onclick = () => {\r\n      if (this.container.classList.contains('history-mode')) {\r\n        return this.historyToggle()\r\n      }\r\n    }\r\n    // make aliases for error classes\r\n    ['err', 'warn', 'info', 'succ', 'wait'].forEach(pupclass => {\r\n      this[pupclass] = function(a, options={}) {\r\n        if (typeof a !== 'object')\r\n          a = {msg: a}\r\n        a.cls = pupclass\r\n        _.extend(a, options)\r\n        return this.push(a)\r\n      }\r\n    })\r\n    // load history from LS\r\n    let log = LSfetchJSON('I0_event_log') || []\r\n    log.forEach(a => {\r\n      a.old = true\r\n      this.container.insertAdjacentHTML('afterBegin', this.buildAlert(a))\r\n      this.stack.push(a)\r\n    })\r\n  },\r\n  historySize: 10,\r\n  save: function() {\r\n    let ss = [] \r\n    _.cloneDeep(this.stack).forEach(a => {\r\n      if (a.save) {\r\n        // Clear stack from the properties that don't need to be saved\r\n        ['old', 'onHold', 'timeout', 'el', 'save'].forEach(junkProperty => delete a[junkProperty])\r\n        ss.push(a)\r\n      }\r\n    })\r\n    while (ss.length > this.historySize) {\r\n      ss.shift()\r\n    }\r\n    localStorage['I0_event_log'] = JSON.stringify(ss)\r\n  },\r\n  stack: []\r\n}\r\n\r\nfunction logJSONexpectedError(output) {\r\n  pups.err(_l.xhrError)\r\n  console.error('Malformed response (JSON expected):\\n', output.replace(/<br\\s*\\/?>/g, '\\n'))\r\n}"],"mappings":"AAAA,YAAY,CAAC,qtIAETA,aAAY,CACZC,gBAAgB,CAChBC,iBAAiB,CAEjBC,MAAM,CADNC,SAAS,GAAM,CAEfC,WAAW,GAAM,CAEjBC,SAAS,CAAG,CACdC,EAAE,CAAE,CACFC,cAAc,CAAE,4CAA4C,CAC5DC,IAAI,CAAE,yBAAyB,CAC/BC,aAAa,CAAE,gBAAgB,CAC/BC,eAAe,CAAE,qBAAqB,CACtCC,SAAS,CAAE,YAAY,CACvBC,SAAS,CAAE,YAAY,CACvBC,OAAO,CAAE,UAAU,CACnBC,MAAM,CAAE,QAAQ,CAChBC,MAAM,CAAE,QAAQ,CAChBC,cAAc,CAAE,aAAa,CAC7BC,YAAY,CAAE,2BAA2B,CACzCC,UAAU,CAAE,cAAc,CAC1BC,OAAO,CAAE,SAAS,CAClBC,kBAAkB,CAAE,mBAAmB,CACvCC,oBAAoB,CAAE,2BAA2B,CACjDC,gBAAgB,CAAE,WAAW,CAC7BC,sBAAsB,CAAE,4BAA4B,CACpDC,uBAAuB,CAAE,yBAAyB,CAClDC,uBAAuB,CAAE,2BAA2B,CACpDC,oBAAoB,CAAE,mBAAmB,CACzCC,sBAAsB,CAAE,mBAAmB,CAC3CC,YAAY,CAAE,uBAAuB,CACrCC,UAAU,CAAE,kBAAkB,CAC9BC,IAAI,CAAE,6BAA6B,CACnCC,OAAO,CAAE,UAAU,CACnBC,UAAU,CAAE,oBAAoB,CAChCC,2BAA2B,CAAE,uCAAuC,CACpEC,gBAAgB,CAAE,sYAA+F,CACjHC,GAAG,CAAE,QAAQ,CACbC,SAAS,CAAE,gBAAgB,CAC3BC,GAAG,CAAE,KAAK,CACVC,WAAW,CAAE,cAAc,CAC3BC,aAAa,CAAE,gBAAgB,CAC/BC,UAAU,CAAE,aAAa,CACzBC,YAAY,CAAE,eAAe,CAC7BC,aAAa,CAAE,6BAA6B,CAC5CC,WAAW,CAAE,2BAA2B,CACxCC,YAAY,CAAE,yBAAyB,CACvCC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,kBAAkB,CAC/BC,KAAK,CAAE,OAAO,CACdC,iBAAiB,CAAE,yBAAyB,CAC5CC,iBAAiB,CAAE,yBAAyB,CAC5CC,KAAK,CAAE,gBAAgB,CACvBC,UAAU,CAAE,aAAa,CACzBC,mBAAmB,CAAE,wBAAwB,CAC7CC,OAAO,CAAE,SAAS,CAClBC,SAAS,CAAE,WAAW,CACtBC,MAAM,CAAE,SAAS,CACjBC,SAAS,CAAE,YAAY,CACvBC,SAAS,CAAE,YAAY,CACvBC,YAAY,CAAE,eAAe,CAC7BC,UAAU,CAAE,aAAa,CACzBC,OAAO,CAAE,kBAAkB,CAC3BC,UAAU,CAAE,aAAa,CACzBC,UAAU,CAAE,iBAAiB,CAC7BC,UAAU,CAAE,aAAa,CACzBC,MAAM,CAAE,QAAQ,CAChBC,YAAY,CAAE,mBAAmB,CACjCC,UAAU,CAAE,cAAc,CAC1BC,SAAS,CAAE,gBAAgB,CAC3BC,SAAS,CAAE,gBAAgB,CAC3BC,UAAU,CAAE,aAAa,CACzBC,OAAO,CAAE,SAAS,CAClBC,QAAQ,CAAE,SAAS,CACnBC,YAAY,CAAE,cAAc,CAC5BC,WAAW,CAAE,WAAW,CACxBC,SAAS,CAAE,WAAW,CACtBC,QAAQ,CAAE,WAAW,CACrBC,QAAQ,CAAE,WAAW,CACrBC,OAAO,CAAE,SAAS,CAClBC,MAAM,CAAE,QAAQ,CAChBC,IAAI,CAAE,MAAM,CACZC,KAAK,CAAE,OAAO,CACdC,OAAO,CAAC,kBAAkB,CAC1BC,YAAY,CAAE,mBAAmB,CACjCC,MAAM,CAAE,QAAQ,CAChBC,QAAQ,CAAC,mBAAmB,CAC5BC,aAAa,CAAE,oBAAoB,CACnCC,WAAW,CAAE,kBAAkB,CAC/BC,IAAI,CAAE,MAAM,CACZC,KAAK,CAAE,OAAO,CACdC,QAAQ,CAAE,UAAU,CACpBC,KAAK,CAAE,QAAQ,CACfC,IAAI,CAAE,OAAO,CACbC,YAAY,CAAE,kBAAkB,CAChCC,YAAY,CAAE,oBAAoB,CAClCC,cAAc,CAAE,gCAAgC,CAChDC,kBAAkB,CAAE,yBAAyB,CAC7CC,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,OAAO,CACdC,cAAc,CAAE,iBAAiB,CACjCC,QAAQ,CAAE,UAAU,CACpBC,UAAU,CAAE,aAAa,CACzBC,SAAS,CAAE,YAAY,CACvBC,gBAAgB,CAAE,mCAAmC,CACrDC,mBAAmB,CAAE,uBAAuB,CAC5CC,QAAQ,CAAE,gBAAgB,CAC1BC,UAAU,CAAE,aAAa,CACzBC,YAAY,CAAE,eAAe,CAC7BC,QAAQ,CAAE,WAAW,CACrBC,UAAU,CAAE,aAAa,CACzBC,uBAAuB,CAAE,uBAAuB,CAChDC,QAAQ,CAAE,WAAW,CACrBC,QAAQ,CAAE,WAAW,CACrBC,cAAc,CAAE,iBAAiB,CACjCC,QAAQ,CAAE,WAAW,CACrBC,QAAQ,CAAE,2BAA2B,CACrCC,WAAW,CAAE,yBAAyB,CACtCC,UAAU,CAAE,kBAAkB,CAC9BC,YAAY,CAAE,0BAA0B,CACxCC,OAAO,CAAE,8BAA8B,CACvCC,UAAU,CAAE,gBAAgB,CAC5BC,qBAAqB,CAAE,yBAAyB,CAChDC,UAAU,CAAE,kBAAkB,CAC9BC,cAAc,CAAE,iBAAiB,CACjCC,WAAW,CAAE,cAAc,CAC3BC,KAAK,CAAC,qBAAqB,CAC3BC,UAAU,CAAE,qBAAqB,CACjCC,QAAQ,CAAE,UAAU,CACpBC,OAAO,CAAE,SAAS,CAClBC,YAAY,CAAE,eAAe,CAC7BC,cAAc,CAAE,iBAAiB,CACjCC,WAAW,CAAE,cAAc,CAC3BC,cAAc,CAAE,sBAAsB,CACtCC,IAAI,CAAE,MAAM,CACZC,eAAe,CAAE,mBAAmB,CACpCC,eAAe,CAAE,yBACnB,CAAC,CACDC,EAAE,CAAE,CACFhI,cAAc,CAAE,uKAA0C,CAC1DC,IAAI,CAAE,mGAAwB,CAC9BC,aAAa,CAAE,qEAAc,CAC7BC,eAAe,CAAE,4GAAuB,CACxCC,SAAS,CAAE,yDAAY,CACvBC,SAAS,CAAE,qEAAc,CACzBC,OAAO,CAAE,6CAAU,CACnBC,MAAM,CAAE,sCAAQ,CAChBC,MAAM,CAAE,kDAAU,CAClBC,cAAc,CAAE,2FAAqB,CACrCC,YAAY,CAAE,kKAAgC,CAC9CC,UAAU,CAAE,wFAAkB,CAC9BC,OAAO,CAAE,sCAAQ,CACjBC,kBAAkB,CAAE,2HAAuB,CAC3CC,oBAAoB,CAAE,uKAAgC,CACtDC,gBAAgB,CAAE,kFAAiB,CACnCC,sBAAsB,CAAE,gPAA6C,CACrEC,uBAAuB,CAAE,gKAA8B,CACvDC,uBAAuB,CAAE,0MAAqC,CAC9DC,oBAAoB,CAAE,sHAAuB,CAC7CC,sBAAsB,CAAE,2HAAuB,CAC/CC,YAAY,CAAE,0IAA4B,CAC1CC,UAAU,CAAE,wFAAkB,CAC9BC,IAAI,CAAE,6BAA6B,CACnCC,OAAO,CAAE,+DAAa,CACtByG,GAAG,CAAE,0CAA0C,CAC/CxG,UAAU,CAAE,iFAAgB,CAC5BC,2BAA2B,CAAE,4KAAgC,CAC7DC,gBAAgB,CAAE,sYAA+F,CACjHC,GAAG,CAAE,4CAAS,CACdC,SAAS,CAAE,oGAAoB,CAC/BC,GAAG,CAAE,kDAAU,CACfC,WAAW,CAAE,uFAAiB,CAC9BC,aAAa,CAAE,2EAAe,CAC9BC,UAAU,CAAE,qEAAc,CAC1BC,YAAY,CAAE,qEAAc,CAC5BC,aAAa,CAAE,iNAAuC,CACtDC,WAAW,CAAE,uKAAgC,CAC7CC,YAAY,CAAE,yBAAyB,CACvCC,IAAI,CAAE,0BAAM,CACZC,WAAW,CAAE,yDAAY,CACzBC,KAAK,CAAE,kDAAU,CACjBC,iBAAiB,CAAE,8FAAmB,CACtCC,iBAAiB,CAAE,4EAAgB,CACnCC,KAAK,CAAE,kFAAiB,CACxBC,UAAU,CAAE,2EAAe,CAC3BC,mBAAmB,CAAE,iHAAuB,CAC5CC,OAAO,CAAE,wDAAW,CACpBC,SAAS,CAAE,sCAAQ,CACnBC,MAAM,CAAE,iFAAgB,CACxBC,SAAS,CAAE,sCAAQ,CACnBC,SAAS,CAAE,qEAAc,CACzBC,YAAY,CAAE,2EAAe,CAC7BC,UAAU,CAAE,2EAAe,CAC3BC,OAAO,CAAE,oEAAa,CACtBC,UAAU,CAAE,yGAAoB,CAChCC,UAAU,CAAE,iFAAgB,CAC5BC,UAAU,CAAE,6FAAkB,CAC9BC,MAAM,CAAE,gCAAO,CACfC,YAAY,CAAE,uKAAgC,CAC9CC,UAAU,CAAE,4EAAgB,CAC5BC,SAAS,CAAE,uFAAiB,CAC5BC,SAAS,CAAE,6FAAkB,CAC7BC,UAAU,CAAE,uFAAiB,CAC7BC,OAAO,CAAE,sCAAQ,CACjBC,QAAQ,CAAE,4CAAS,CACnBC,YAAY,CAAE,gFAAe,CAC7BC,WAAW,CAAE,+DAAa,CAC1BC,SAAS,CAAE,yDAAY,CACvBC,QAAQ,CAAE,mGAAmB,CAC7BC,QAAQ,CAAE,0CAAY,CACtBC,OAAO,CAAE,oEAAa,CACtBC,MAAM,CAAE,0BAAM,CACdC,IAAI,CAAE,0BAAM,CACZC,KAAK,CAAE,gCAAO,CACdC,OAAO,CAAC,sCAAQ,CAChBC,YAAY,CAAE,4CAAS,CACvBC,MAAM,CAAE,0EAAc,CACtBC,QAAQ,CAAC,qGAAqB,CAC9BC,aAAa,CAAE,qGAAqB,CACpCC,WAAW,CAAE,mEAAiB,CAC9BC,IAAI,CAAE,0BAAM,CACZC,KAAK,CAAE,gCAAO,CACdC,QAAQ,CAAE,kDAAU,CACpBC,KAAK,CAAE,oGAAoB,CAC3BC,IAAI,CAAE,0DAAa,CACnBC,YAAY,CAAE,2EAAe,CAC7BC,YAAY,CAAE,0GAAqB,CACnCC,cAAc,CAAE,gCAAgC,CAChDC,kBAAkB,CAAE,oGAAoB,CACxCC,KAAK,CAAE,4CAAS,CAChBC,KAAK,CAAE,sCAAQ,CACfC,cAAc,CAAE,mGAAmB,CACnCC,QAAQ,CAAE,4CAAS,CACnBC,UAAU,CAAE,iHAAuB,CACnCC,SAAS,CAAE,4HAAwB,CACnCC,gBAAgB,CAAE,sMAAsC,CACxDC,mBAAmB,CAAE,4HAAwB,CAC7CC,QAAQ,CAAE,wFAAkB,CAC5BC,UAAU,CAAE,qEAAc,CAC1BC,YAAY,CAAE,wFAAkB,CAChCC,QAAQ,CAAE,+DAAa,CACvBC,UAAU,CAAE,2EAAe,CAC3BC,uBAAuB,CAAE,8KAAkC,CAC3DC,QAAQ,CAAE,qHAAsB,CAChCC,QAAQ,CAAE,qEAAc,CACxBC,cAAc,CAAE,+GAAqB,CACrCC,QAAQ,CAAE,uFAAiB,CAC3BC,QAAQ,CAAE,+IAA4B,CACtCC,WAAW,CAAE,yIAA2B,CACxCC,UAAU,CAAE,wIAA0B,CACtCC,YAAY,CAAE,oLAAmC,CACjDC,OAAO,CAAE,qJAA6B,CACtCC,UAAU,CAAE,0FAAoB,CAChCC,qBAAqB,CAAE,sKAA+B,CACtDC,UAAU,CAAE,wIAA0B,CACtCC,cAAc,CAAE,6FAAkB,CAClCC,WAAW,CAAE,uFAAiB,CAC9BC,KAAK,CAAC,oGAAoB,CAC1BC,UAAU,CAAE,0GAAqB,CACjCC,QAAQ,CAAE,sCAAQ,CAClBC,OAAO,CAAE,SAAS,CAClBC,YAAY,CAAE,eAAe,CAC7BC,cAAc,CAAE,iFAAgB,CAChCC,WAAW,CAAE,iFAAgB,CAC7BC,cAAc,CAAE,kFAAiB,CACjCC,IAAI,CAAE,qBAAM,CACZC,eAAe,CAAE,kIAAyB,CAC1CC,eAAe,CAAE,qJACnB,CACF,CAAC,CACGG,EAAE,CAAsB,WAAW,EAA7B,MAAOC,OAAsB,EAAIrI,SAAS,CAACsI,cAAc,CAACD,MAAM,CAAC,CAAIrI,SAAS,CAACqI,MAAM,CAAC,CAAGrI,SAAS,CAACkI,EAAE,CAE3GK,OAAO,CAAG,CACZC,QAAQ,CAAE,kBAASC,CAAE,CAAE,CACjB,IAAI,CAACC,OAAO,CACdD,CAAE,EAAE,CAEJ,IAAI,CAACE,KAAK,CAACC,IAAI,CAACH,CAAE,CACtB,CAAC,CACDE,KAAK,CAAE,EAAE,CACTE,KAAK,CAAE,gBAAW,CAChB,IAAI,CAACH,OAAO,GAAO,CACnB,IAAI,CAACC,KAAK,CAACG,OAAO,CAAC,SAAAL,CAAE,QAAEA,EAAE,EAAE,EAC7B,CACF,CAAC,CAGIM,KAAK,CAACC,SAAS,CAACC,OAAO,GAC1BF,KAAK,CAACC,SAAS,CAACC,OAAO,CAAG,SAASC,CAAG,CAAa,OAM9CC,IAAI,CAACC,KAAK,GADVD,IAAI,CAACE,IAAI,CAJVC,CAAG,CAAG,IAAI,CAACC,MAAM,CAEjBC,CAAI,CAAG,CAAOC,SAAS,CAAC,CAAC,CAAC,EAAK,CAAC,CAOpC,IANAD,CAAI,CAAW,CAAC,CAARA,CAAQ,CACX,EAAUA,CAAI,CAAC,CACf,EAAWA,CAAI,CAAC,CACV,CAAC,CAARA,CAAQ,GACVA,CAAI,EAAIF,CAAG,EAENE,CAAI,CAAGF,CAAG,CAAEE,CAAI,EAAE,CACvB,GAAIA,CAAI,GAAI,KAAI,EACd,IAAI,CAACA,CAAI,CAAC,GAAKN,CAAG,CACpB,MAAOM,EAAI,CAEb,MAAO,CAAC,CACR,CAAC,EAIH,GAAIE,KAAI,CAAG,CAETC,MAAM,CAAG,gBAAUC,CAAM,CAAE,OAMVC,MAAM,CAACC,YAAY,CALlCF,CAAM,CAAGA,CAAM,CAACG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAErC,OACMC,EAAC,CAFHC,CAAO,CAAG,EAAE,CACPC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGN,CAAM,CAACL,MAAM,CAAEW,CAAC,EAAE,CAChCF,CAAC,CAAGJ,CAAM,CAACO,UAAU,CAACD,CAAC,CAAC,CACpB,GAAG,CAAPF,CAAO,CACTC,CAAO,EAAI,EAAoBD,CAAC,CAAC,CAEtB,GAAG,CAAPA,CAAO,EAAU,IAAI,CAARA,CAAS,EAC7BC,CAAO,EAAI,EAA+B,GAAG,CAAbD,CAAC,EAAI,CAAQ,CAAC,CAC9CC,CAAO,EAAI,EAA+B,GAAG,CAAT,EAAE,CAAND,CAAa,CAAC,GAG9CC,CAAO,EAAI,EAAgC,GAAG,CAAdD,CAAC,EAAI,EAAS,CAAC,CAC/CC,CAAO,EAAI,EAAsC,GAAG,CAAT,EAAE,CAAZD,CAAC,EAAI,CAAc,CAAC,CACrDC,CAAO,EAAI,EAA+B,GAAG,CAAT,EAAE,CAAND,CAAa,CAAC,EAGlD,MAAOC,EACT,CAAC,CAEDG,MAAM,CAAG,gBAAUH,CAAO,CAAE,WAKZJ,MAAM,CAACC,YAAY,CAJ7BF,CAAM,CAAG,EAAE,CAAES,CAAC,CAAG,CAAC,CAAEL,CAAC,CAAG,CAAC,CAAUM,CAAE,CAAG,CAAC,CAAEC,CAAE,CAAG,CAAC,CAC7CF,CAAC,CAAGJ,CAAO,CAACV,MAAM,EACxBS,CAAC,CAAGC,CAAO,CAACE,UAAU,CAACE,CAAC,CAAC,CACjB,GAAG,CAAPL,CAAO,EACTJ,CAAM,EAAI,EAAoBI,CAAC,CAAC,CAChCK,CAAC,EAAE,EAEQ,GAAG,CAAPL,CAAO,EAAU,GAAG,CAAPA,CAAQ,EAC5BM,CAAE,CAAGL,CAAO,CAACE,UAAU,CAACE,CAAC,CAAC,CAAC,CAAC,CAC5BT,CAAM,EAAI,EAAqB,CAAK,EAAE,CAANI,CAAM,GAAK,CAAC,CAAU,EAAE,CAAPM,CAAQ,CAAC,CAC1DD,CAAC,EAAI,CAAC,GAGNC,CAAE,CAAGL,CAAO,CAACE,UAAU,CAACE,CAAC,CAAC,CAAC,CAAC,CAC5BE,CAAE,CAAGN,CAAO,CAACE,UAAU,CAACE,CAAC,CAAC,CAAC,CAAC,CAC5BT,CAAM,EAAI,EAAqB,CAAK,EAAE,CAANI,CAAM,GAAK,EAAE,CAAK,CAAM,EAAE,CAAPM,CAAO,GAAK,CAAE,CAAS,EAAE,CAAPC,CAAQ,CAAC,CAC9EF,CAAC,EAAI,CAAC,EAGV,MAAOT,EACT,CACF,CAAC,CAED,QAASY,OAAM,CAACC,CAAI,CAAE,CACpB,GAAwB,CAAC,EAArBhB,SAAS,CAACF,MAAW,CAAE,IAEnBmB,EAAM,CAAC,GAAIC,OAAM,CAAC,WAAW,CAACF,CAAI,CAAC,aAAa,CAAC,CACjDG,CAAG,CAACF,CAAM,CAACG,IAAI,CAACC,QAAQ,CAACC,MAAM,CAAC,OACjCH,EAAG,EAAa,CAAC,CAAZA,CAAG,CAACrB,MAAQ,CAASG,IAAI,CAACU,MAAM,CAACY,QAAQ,CAACC,UAAU,CAACL,CAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CACpE,EAEhB,CACE,GAAIM,EAAK,CAAGzB,SAAS,CAAC,CAAC,CAAC,CACtB0B,CAAI,CAAG1B,SAAS,CAAC,CAAC,CAAC,CACnB2B,CAAO,CAAC,EAAE,CACZ,GAAGD,CAAI,CAAE,CACP,GAAIE,EAAI,CAAC,GAAIC,KAAM,CACnBD,CAAI,CAACE,OAAO,CAACF,CAAI,CAACG,OAAO,EAAE,CAAgB,GAAI,EAAP,EAAE,EAAL,EAAE,EAAL,EAAE,CAAPL,CAAO,CAAG,CAAG,CAAM,CAAC,CACjDC,CAAO,CAAC,YAAY,CAACC,CAAI,CAACI,WAAW,EACvC,CACAX,QAAQ,CAACC,MAAM,CAACN,CAAI,CAAC,GAAG,CAACS,CAAK,CAACE,CAAO,CAAC,UAE3C,CAEA,QAASH,WAAU,CAACS,CAAG,CAAElC,CAAI,CAAEmC,CAAE,CAAE,KACjC,GAAIC,EAAG,CAAGF,CAAG,CAACzC,OAAO,CAAEO,CAAI,CAAG,CAChB,CAAC,CAAC,CAARoC,CAAQ,EACdF,CAAG,CAAGA,CAAG,CAAC3B,OAAO,CAAEP,CAAI,CAAEmC,CAAE,CAAE,CAC7BC,CAAG,CAAGF,CAAG,CAACzC,OAAO,CAAEO,CAAI,CAAE,CAE3B,MAAOkC,EACT,CAEA,GAAIG,gBAAe,GAAQ,CAC3BC,MAAM,CAACC,cAAc,CAACC,MAAM,CAAE,gBAAgB,CAAE,CAC9CC,GAAG,CAAE,cAAW,CAId,MAHKJ,gBAAe,EAAKA,eAAe,CAACK,cAAc,EAAE,CAAC3C,MAAM,EAC9D4C,gBAAgB,EAAE,CAEbN,eACT,CAAC,CACDO,GAAG,CAAE,aAASC,CAAE,CAAE,CAEhB,GADAvB,QAAQ,CAACwB,gBAAgB,CAAC,aAAa,CAAC,CAACxD,OAAO,CAAC,SAAAyD,CAAC,QAAIA,EAAC,CAACC,SAAS,CAACC,MAAM,CAAC,YAAY,CAAC,EAAC,CACnFJ,CAAE,CAAE,CACN,GAAIK,EAAI,CAAGL,CAAE,CAACM,WAAW,CAAC,MAAM,CAAC,CACjCD,CAAI,CAACF,SAAS,CAACI,GAAG,CAAC,YAAY,CAAC,CAC5BF,CAAI,CAACF,SAAS,CAACK,QAAQ,CAAC,WAAW,CAAC,EACtCC,kBAAkB,CAACJ,CAAI,OAA6C,CAEtEb,eAAe,CAAIa,CACrB,CAAC,IAECb,gBAAe,GACnB,CACF,CAAC,CAAC,CACF,QAASM,iBAAgB,EAAG,CAC1B,GAAIY,EAAQ,CAAGjC,QAAQ,CAACkC,aAAa,CAAC,+BAA+B,CAAC,OAClED,EAAQ,MACVE,cAAc,CAAGF,CAAQ,OAG3BE,cAAc,CAAGC,WAAW,CAAC,qDAAqD,CAAC,CAErF,CAEA,QAASA,YAAW,CAACC,CAAQ,CAAE,CAC7B,GAAIC,EAAM,CAAGpB,MAAM,CAACqB,WAAW,CAE7BC,CAAI,CAAGxC,QAAQ,CAACwB,gBAAgB,CAACa,CAAQ,CAAC,CAC5C,GAAI,CAACG,CAAI,CAAE,SACX,GAAIC,EAAO,CAAG,EAAE,CAACC,GAAG,CAACC,IAAI,CAACH,CAAI,CAAE,SAAAjB,CAAE,CAAI,CACpC,GAAIqB,EAAI,CAAGrB,CAAE,CAACH,cAAc,EAAE,CAC5ByB,CAAM,CAAGD,CAAI,CAACnE,MAAM,CAClBJ,IAAI,CAACyE,GAAG,CANPR,CAAM,CAAG,CAAC,EAMIM,CAAI,CAAC,CAAC,CAAC,CAACG,CAAC,CAAGH,CAAI,CAAC,CAAC,CAAC,CAACN,MAAM,CAAC,CAAC,CAAC,CAAC,CAC7C,IAAI,CACR,MAAO,CAAEf,EAAE,CAAEA,CAAE,CAAEsB,MAAM,CAAEA,CAAO,CAClC,CAAC,CAAC,CACDG,MAAM,CAAC,SAAAvB,CAAC,QAAiB,KAAI,GAAjBA,CAAC,CAACoB,MAAe,EAAC,CAC9BI,IAAI,CAAC,SAACC,CAAE,CAAEC,CAAE,QAAKD,EAAE,CAACL,MAAM,CAAGM,CAAE,CAACN,MAAM,CAAG,CAAC,CAAC,CAAG,CAAC,EAAC,CACjD,QAAOJ,CAAO,CAAChE,MAAM,EAAGgE,CAAO,CAAC,CAAC,CAAC,CAAClB,EACrC,CAEA,QAAS6B,OAAM,CAACC,CAAI,CAAqC,IAAnCC,EAAW,4DAAOC,CAAU,4DAC5C3B,CAAI,CAAGO,cAAc,EAAInC,QAAQ,CAACkC,aAAa,CAAC,WAAW,CAAC,CAC9DsB,CAAQ,CAAG5B,CAAI,EAAIA,CAAI,CAACM,aAAa,CAAC,UAAU,CAAC,CACnD,GAAGsB,CAAQ,CAAE,CACP5B,CAAI,CAACF,SAAS,CAACK,QAAQ,CAAC,WAAW,CAAC,EACtCC,kBAAkB,CAACJ,CAAI,OAA6C,CAEtE,GAAI6B,EAAK,CAAGD,CAAQ,CAACE,cAAc,CACjCC,CAAG,CAAGH,CAAQ,CAACI,YAAY,CAC3BC,CAAG,CAAGL,CAAQ,CAACpD,KAAK,CAAC0D,MAAM,CAAC,CAAC,CAACL,CAAK,CAAC,CACpC7J,CAAI,CAAG4J,CAAQ,CAACpD,KAAK,CAAC0D,MAAM,CAACH,CAAG,CAAC,CACjCI,CAAU,CAAGF,CAAG,CAACA,CAAG,CAACpF,MAAM,CAAC,CAAC,CAAC,CAC9BuF,CAAS,CAAGpK,CAAI,CAAC,CAAC,CAAC,CACjB0J,CAAW,EAAgB,IAAI,GAAhBD,CAAI,CAAC,CAAC,CAAU,EAAIU,CAAU,EAAmB,IAAI,GAAnBA,CAAmB,GACtEV,CAAI,CAAG,IAAI,CAACA,CAAI,EACdE,CAAU,EAA4B,IAAI,GAA5BF,CAAI,CAACA,CAAI,CAAC5E,MAAM,CAAC,CAAC,CAAU,EAAkB,IAAI,GAAlBuF,CAAkB,GAClEX,CAAI,EAAI,IAAI,EACd,GAAIY,EAAc,CAAGR,CAAK,CAAGJ,CAAI,CAAC5E,MAAM,CACxC+E,CAAQ,CAACpD,KAAK,CAAGyD,CAAG,CAAGR,CAAI,CAAGzJ,CAAI,CAClC4J,CAAQ,CAACU,iBAAiB,CAACD,CAAc,CAAEA,CAAc,CAAC,CAC1DT,CAAQ,CAACW,KAAK,EAChB,CACF,CAEA,QAASC,OAAM,CAACC,CAAO,CAAEZ,CAAK,CAAEE,CAAG,CAAEW,CAAM,CAAEC,CAAI,CAAE,CACjD,GAAIC,EAAO,CAAGH,CAAO,CAACI,IAAI,CAAC,UAAU,CAAC,CAACtD,GAAG,CAAC,CAAC,CAAC,CAC7C,GAAIqD,CAAO,CAACd,cAAc,EAA8B,GAAG,EAA7Bc,CAAO,CAACd,cAAqB,CAAE,CAC3Dc,CAAO,CAACL,KAAK,EAAE,CACf,GAAIO,EAAQ,CAAGF,CAAO,CAACd,cAAc,CACnCiB,CAAM,CAAGH,CAAO,CAACZ,YAAY,CAC7B5I,CAAQ,CAAGwJ,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CACvB,CAAC,CAAC,GAA9B3J,CAAQ,CAACmD,OAAO,CAAC,IAAI,CAAU,EAAsB,WAAW,EAA7B,MAAOmG,EAAsB,EAAoB,WAAW,EAA3B,MAAOC,EAAoB,GAChGd,CAAK,CAAGa,CAAM,CAAEX,CAAG,CAAGY,CAAI,EAE5BC,CAAO,CAACpE,KAAK,CAAGoE,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAAC,CAAC,CAAEF,CAAQ,CAAC,CAAGjB,CAAK,CAAGe,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CAAGhB,CAAG,CAAGa,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAACD,CAAM,CAAEH,CAAO,CAACpE,KAAK,CAAC3B,MAAM,CACvK,CAAC,IACC+F,EAAO,CAACpE,KAAK,EAAIqD,CAAK,CAAGE,CAE7B,CAEA,QAASkB,QAAO,CAACR,CAAO,CAAES,CAAM,CAAER,CAAM,CAAEC,CAAI,CAAE,CAC9C,GAAIQ,EAAK,CAAGV,CAAO,CAACI,IAAI,CAAC,UAAU,CAAC,CAClCD,CAAO,CAAGO,CAAK,CAAC,CAAC,CAAC,CAClBL,CAAQ,CAAGF,CAAO,CAACd,cAAc,CACjCiB,CAAM,CAAGH,CAAO,CAACZ,YAAY,CAC7B5I,CAAQ,CAAG+J,CAAK,CAACC,GAAG,EAAE,CAACJ,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CACpD,GAAG,CAAC,CAAC3J,CAAQ,CAACmD,OAAO,CAAC,IAAI,CAAC,EAAsB,WAAW,EAA7B,MAAOmG,EAAsB,EAAoB,WAAW,EAA3B,MAAOC,EAAoB,CACzFC,CAAO,CAACpE,KAAK,CAAGoE,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAAC,CAAC,CAAEF,CAAQ,CAAC,CAAGJ,CAAM,CAAGE,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CAAGJ,CAAI,CAAGC,CAAO,CAACpE,KAAK,CAACwE,SAAS,CAACD,CAAM,CAAEH,CAAO,CAACpE,KAAK,CAAC3B,MAAM,CAAC,KAErK,CACHzD,CAAQ,CAAG+J,CAAK,CAACC,GAAG,EAAE,CAACJ,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CAACM,KAAK,CAAC,IAAI,CAAC,CAE9D,OADIC,EAAM,CAAG,EAAE,CACP3F,CAAC,CAAC,CAAC,CAAEA,CAAC,CAACvE,CAAQ,CAACyD,MAAM,CAAEc,CAAC,EAAE,CACjC2F,CAAM,EAAKJ,CAAM,CAAG9J,CAAQ,CAACuE,CAAC,CAAE,CAC7BA,CAAC,CAAIvE,CAAQ,CAACyD,MAAM,CAAG,CAAE,GAAEyG,CAAM,EAAI,IAAI,EAE9CH,CAAK,CAACC,GAAG,CACPD,CAAK,CAACC,GAAG,EAAE,CAACJ,SAAS,CAAC,CAAC,CAAEF,CAAQ,CAAC,CAChCQ,CAAM,CACRH,CAAK,CAACC,GAAG,EAAE,CAACJ,SAAS,CAACD,CAAM,CAAC,CAEjC,CACF,CAEA,QAASQ,OAAM,CAACd,CAAO,CAAEe,CAAI,CAAE,CAC7B,GAAIL,EAAK,CAAGV,CAAO,CAACI,IAAI,CAAC,UAAU,CAAC,CAClCY,CAAO,CAAGN,CAAK,CAACC,GAAG,EAAE,CACrBR,CAAO,CAAGO,CAAK,CAAC,CAAC,CAAC,CAClBL,CAAQ,CAAGF,CAAO,CAACd,cAAc,CACjCiB,CAAM,CAAGH,CAAO,CAACZ,YAAY,CAC7B5I,CAAQ,CAAGqK,CAAO,CAACT,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CAC9CO,CAAM,CAAG,EAAE,CACb,GAAI,CAAClK,CAAQ,CAACmD,OAAO,CAAC,IAAI,CAAC,CAAE,CAC3BnD,CAAQ,CAAGqK,CAAO,CAACT,SAAS,CAACF,CAAQ,CAAEC,CAAM,CAAC,CAACM,KAAK,CAAC,IAAI,CAAC,CAC1D,IAAI,GACEH,EAAM,CADJvF,CAAC,CAAC,CAAC,CAAEA,CAAC,CAACvE,CAAQ,CAACyD,MAAM,CAAEc,CAAC,EAAE,CAC7BuF,CAAM,CAAU,GAAG,EAATM,CAAS,CAAI,GAAG,CACnB,GAAG,EAATA,CAAS,CAAI,GAAG,CACd7F,CAAC,CAAC,CAAC,CAAI,GAAG,CACT,GAAG,CACX2F,CAAM,EAAKJ,CAAM,CAAG,GAAG,CAAG9J,CAAQ,CAACuE,CAAC,CAAE,CACnCA,CAAC,CAAIvE,CAAQ,CAACyD,MAAM,CAAG,CAAE,GAAEyG,CAAM,EAAI,IAAI,CAEhD,CAAC,IACI,CACH,GAAII,EAAG,CAAS,GAAG,EAATF,CAAS,CAAG,IAAI,CAAG,GAAG,CAChCF,CAAM,YAAOI,CAAG,aAAItK,CAAQ,cAAKsK,CAAG,KACtC,CACAd,CAAO,CAACpE,KAAK,CACXiF,CAAO,CAACT,SAAS,CAAC,CAAC,CAAEF,CAAQ,CAAC,CAC5BQ,CAAM,CACRG,CAAO,CAACT,SAAS,CAACD,CAAM,CAC5B,CAEA,QAASY,MAAK,CAACC,CAAC,CAAE/D,CAAC,CAAE,CACnB,GAAIgE,EAAC,CAAGC,IAAI,CAAC,WAAW,CAAGjE,CAAC,CAAG,UAAU,CAAC,CAC1CgE,CAAC,CAACrF,KAAK,EAAI,IAAI,CAAGoF,CAAC,CAAG,IAAI,CAC1BC,CAAC,CAACtB,KAAK,EACT,CAEA,QAASwB,eAAc,EAAG,CACxB,GAAIC,EAAK,CAAC,CACPA,CAAK,CAAC,YAAY,CAAC7F,IAAI,CAACC,QAAQ,CAAC6F,QAAQ,CAACC,QAAQ,EAAE,CAAC,GACnD,CAACC,CAAC,CAAC,oBAAoB,CAAC,CAACf,GAAG,EAAE,EAC/B5B,MAAM,CAAC,IAAI,CAACwC,CAAK,CAAC,CAAC,CAAC,CAAC,EACtBA,CAAK,CAAC,WAAW,CAAC7F,IAAI,CAACC,QAAQ,CAAC6F,QAAQ,CAACC,QAAQ,EAAE,CAAC,GACrDE,SAAS,CAACJ,CAAK,CAAC,CAAC,CAAC,CACtB,CAEA,QAASI,UAAS,CAACC,CAAE,CAAmB,IAAjBC,EAAU,wDAAC,GAAI,CACpCH,CAAC,CAAC,YAAY,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CACnC,CAAC,EAAE,CAACF,CAAE,EAAEhB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GACxBgB,CAAE,EAAI,GAAG,CAACG,cAAc,EAC1B,GAAIC,EAAK,CAAGN,CAAC,oBAAaE,CAAE,EAAG,CAACK,OAAO,CAAC,QAAQ,CAAC,CACjD,GAAI,CAACD,CAAK,CAAC5H,MAAM,CAAE,SACnB,GAAI7E,EAAI,CAAGyM,CAAK,CAAC,CAAC,CAAC,CACnBA,CAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,CACvBL,CAAU,EACZM,UAAU,CAAC,iBAAMH,EAAK,CAACF,WAAW,CAAC,WAAW,CAAC,EAAED,CAAU,CAAC,CAG9D,GAAIO,EAAG,CAAG7M,CAAI,CAAC8M,qBAAqB,EAAE,CACpCC,CAAS,CAAG3G,QAAQ,CAAC4G,eAAe,CAACC,YAAY,CACnD,GAAIJ,CAAG,CAACK,MAAM,CAAGH,CAAS,EAAc,CAAC,CAAXF,CAAG,CAACM,GAAO,CAAE,CACzC,GAAIC,EAAK,CAAGP,CAAG,CAACM,GAAG,CAAG/G,QAAQ,CAAC4G,eAAe,CAACK,SAAS,CACtDC,CAAW,CAAGP,CAAS,CAAGF,CAAG,CAACnE,MAAM,CACtCpB,MAAM,CAACiG,QAAQ,CAAC,CAAC,CAAEH,CAAK,EAAIE,CAAW,CAAG7I,IAAI,CAACE,IAAI,CAAC2I,CAAW,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CACzE,CACA,QACF,CAEA,GAAME,gBAAe,CAAG,EAAE,CAE1B,QAASC,aAAY,CAAC1H,CAAI,CAAE,CAC1B,GAAI2H,EAAI,CAAGC,SAAS,CAAC5H,CAAI,CAAC,CAAC,MACxB2H,EAAI,CAASA,CAAI,EACpBA,CAAI,CAAGE,YAAY,CAACJ,eAAe,CAAC,CACpC1H,MAAM,CAACC,CAAI,CAAE2H,CAAI,CAAE,GAAG,CAAC,CAChBA,CAAI,CACb,CAEA,QAASG,eAAc,EAAG,IACpBC,EAAgB,CAAG3B,CAAC,CAAC,cAAc,CAAC,CAAC4B,IAAI,EAAE,CAACC,WAAW,EAAE,CACzDC,CAAO,CAAG,oBAAoB,CAKlC,MAJIH,EAAgB,EAAIG,CAAO,GAC7BA,CAAO,CAAG,yoBAAimB,EAE7mB9B,CAAC,CAAC,cAAc,CAAC,CAAC4B,IAAI,CAACE,CAAO,CAAC,CAACC,IAAI,EAAE,GAExC,CAGA,QAASP,UAAS,CAAC5H,CAAI,CAAiB,CAAI,MAAOD,OAAM,CAACC,CAAI,CAAsB,CACpF,QAASoI,WAAU,CAACpI,CAAI,CAACS,CAAK,CAACC,CAAI,CAAK,CAAI,MAAOX,OAAM,CAACC,CAAI,CAACS,CAAK,CAACC,CAAI,CAAW,CAEpF,GAAI2H,OAAM,CAAG,CACXC,GAAG,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAE,CACnBC,IAAI,CAAE,eAAW,CACfC,CAAC,CAACC,IAAI,CAACrI,QAAQ,CAACsI,oBAAoB,CAAC,MAAM,CAAC,CAAE,SAASC,CAAI,CAAE,CACb,CAAC,CAAC,EAA7CA,CAAI,CAACC,YAAY,CAAC,KAAK,CAAC,CAACrK,OAAO,CAAC,OAAO,CAAK,EAAIoK,CAAI,CAACC,YAAY,CAAC,OAAO,CAAC,GAC5E,IAAI,CAACP,GAAG,CAACnK,IAAI,CAACyK,CAAI,CAAC,CACnB,IAAI,CAACL,MAAM,CAACpK,IAAI,CAACyK,CAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAAC,CACO,CAAC,CAAC,GAAlDD,CAAI,CAACC,YAAY,CAAC,KAAK,CAAC,CAACrK,OAAO,CAAC,WAAW,CAAM,GACnD,IAAI,CAACsK,QAAQ,CAAGF,CAAI,CAACC,YAAY,CAAC,OAAO,CAAC,EAEzCD,CAAI,CAACG,YAAY,CAAC,aAAa,CAAC,GACjC,IAAI,CAACC,MAAM,CAAGJ,CAAI,CAACC,YAAY,CAAC,OAAO,CAAC,EAG9C,CAAC,CAAE,IAAI,CAAC,CACR,IAAI,CAACI,OAAO,CAAG,IAAI,CAACH,QAAQ,CAC5B,GAAII,EAAY,CAAGtB,SAAS,CAAC,cAAc,CAAC,CAC5C,IAAI,CAACsB,YAAY,IAAIA,CAAY,CAACpK,MAAM,EAA8B,WAAW,EAArC,MAAO2H,eAA8B,EAAI0C,QAAQ,CAAC1C,cAAc,CAAEyC,CAAY,CAAC5D,KAAK,CAAC,GAAG,CAAC,CAAC,CAAgB,CACtJ,IAAI,CAAC8D,SAAS,GAChB,CAAC,CACDC,MAAM,CAAE,iBAAW,CACjB,IAAI,CAACb,IAAI,EAAE,CACX,GAAIc,EAAU,CAAGC,WAAW,CAAC,aAAa,CAAC,CAC3C,GAAGD,CAAU,CAAE,CACb,GAAIE,EAAK,CAAG,IAAI,CAACC,QAAQ,CAACH,CAAU,CAACI,GAAG,CAAEJ,CAAU,CAACE,KAAK,CAAC,CAC3D,IAAI,CAACG,QAAQ,CAACH,CAAK,CAAC,CACpB,GAAII,EAAM,CAAGxD,CAAC,CAAC,gJAAqC,CAACoD,CAAK,CAAC,UAAU,CAAC,CAOtE,MANAI,EAAM,CAACC,KAAK,CAAC,SAASC,CAAE,CAAE,CACxBA,CAAE,CAACC,cAAc,EAAE,CACnB1B,MAAM,CAAC2B,QAAQ,EAAE,CACjB5D,CAAC,CAAC,IAAI,CAAC,CAAC6D,MAAM,EAAE,CAACC,OAAO,EAC1B,CAAC,CAAC,MACF,IAAI,CAACC,WAAW,CAAG/D,CAAC,CAAC,yCAAuC,CAAC,CAACgE,MAAM,CAACR,CAAM,CAAC,CAE9E,CACA,GAAG,IAAI,CAAC/L,cAAc,CAAC,QAAQ,CAAC,EAAI,CAAC,IAAI,CAACqL,YAAY,CACpD,MAAO,KAAI,CAACmB,SAAS,EAAE,CACzB,GAAIC,EAAE,CAAG1C,SAAS,CAAC3S,YAAY,CAAC,CAC7BqV,CAAE,EAAInB,QAAQ,CAACmB,CAAE,CAAE,IAAI,CAAC/B,MAAM,CAAC,CAChC,IAAI,CAACoB,QAAQ,CAACW,CAAE,CAAC,EAEjB,IAAI,CAACC,UAAU,EAAE,CACjBnC,UAAU,CAAC,cAAc,CAAC,IAAI,CAACU,QAAQ,CAAC,GAAG,CAAC,CAC5CV,UAAU,CAAC,SAAS,CAAC,IAAI,CAACU,QAAQ,CAAC,GAAG,CAAC,CAE3C,CAAC,CACD0B,MAAM,CAAE,gBAASC,CAAS,CAAE,CACtBtB,QAAQ,CAACsB,CAAS,CAAE,IAAI,CAAClC,MAAM,CAAC,EAAI,IAAI,CAACU,OAAO,GAAKwB,CAAS,GAClE,IAAI,CAACd,QAAQ,CAACc,CAAS,CAAC,CACrB,IAAI,CAAC5M,cAAc,CAAC,QAAQ,CAAC,EAAI,IAAI,CAACmL,MAAM,GAAKyB,CAAS,CAC3D,IAAI,CAACC,YAAY,EAAE,EAGhB,IAAI,CAAC7M,cAAc,CAAC,QAAQ,CAAC,EAC9B,IAAI,CAAC8M,SAAS,EAAE,CAClBvC,UAAU,CAAC,cAAc,CAACqC,CAAS,CAAC,GAAG,CAAC,CACxCrC,UAAU,CAAC,SAAS,CAACqC,CAAS,CAAC,GAAG,CAAC,EAEvC,CAAC,CACDC,YAAY,CAAE,uBAAW,CACvB,GAAI,IAAI,CAACxB,YAAY,EAA8B,WAAW,EAArC,MAAOzC,eAA8B,EAC9D,IAAI,CAACyC,YAAY,GAAQ,CACzB,GAAI0B,EAAS,CAAGhD,SAAS,CAAC,cAAc,CAAC,CAACtC,KAAK,CAAC,GAAG,CAAC,CAAEuF,CAAS,CAAG,EAAE,CACpEpC,CAAC,CAACC,IAAI,CAACkC,CAAS,CAAE,SAASE,CAAG,CAAE,CAC3BA,CAAG,GAAKrE,cAAc,EAAEoE,CAAS,CAAC1M,IAAI,CAAC2M,CAAG,CAC/C,CAAC,CAAC,CACFD,CAAS,CAAGA,CAAS,CAAC/L,MAAM,CAAG+L,CAAS,CAACE,IAAI,CAAC,GAAG,CAAC,CAAG,EAAE,CACvD3C,UAAU,CAAC,cAAc,CAACyC,CAAS,CAAC,GAAG,CAAC,CAC1C,CAAC,CACDF,SAAS,CAAE,oBAAW,CACpB,KAAG,IAAI,CAACzB,YAAY,EAA8B,WAAW,EAArC,MAAOzC,eAA8B,GAC7D,IAAI,CAACyC,YAAY,GAAO,CACxB,GAAI5I,EAAM,CAAGsH,SAAS,CAAC,cAAc,CAAC,CAACtC,KAAK,CAAC,GAAG,CAAC,CAC7C6D,QAAQ,CAAC1C,cAAc,CAAEnG,CAAM,CAAC,GAClCA,CAAM,CAACnC,IAAI,CAACsI,cAAc,CAAC,CAC3B2B,UAAU,CAAC,cAAc,CAAC9H,CAAM,CAACyK,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAEnD,CAAC,CACDR,UAAU,CAAE,qBAAW,CAClB,IAAI,CAAC1M,cAAc,CAAC,UAAU,CAAC,EAAI,IAAI,CAACoL,OAAO,GAAK,IAAI,CAACH,QAAQ,EAClE,IAAI,CAACa,QAAQ,CAAC,IAAI,CAACb,QAAQ,CAC/B,CAAC,CACDuB,SAAS,CAAE,oBAAW,CACjB,IAAI,CAACxM,cAAc,CAAC,QAAQ,CAAC,EAC9B,IAAI,CAAC8L,QAAQ,CAAC,IAAI,CAACX,MAAM,CAC7B,CAAC,CACDW,QAAQ,CAAE,kBAASc,CAAS,CAAE,CACxBtB,QAAQ,CAACsB,CAAS,CAAE,IAAI,CAAClC,MAAM,CAAC,GAChCyC,YAAY,EAAIA,YAAY,CAACC,IAAI,EACnCD,YAAY,CAACC,IAAI,CAAC,UAAU,CAAE,WAAW,CAAC,CAC5CxC,CAAC,CAACC,IAAI,CAAC,IAAI,CAACJ,GAAG,CAAE,SAAS4C,CAAK,CAAE,CAC/BA,CAAK,CAACC,QAAQ,GAAK,CACnBD,CAAK,CAACE,YAAY,CAAC,KAAK,CAAE,sBAAsB,CAClD,CAAC,CAAC,CACF3C,CAAC,CAACC,IAAI,CAAC,IAAI,CAACJ,GAAG,CAAE,SAAS4C,CAAK,CAAE,CAC5BA,CAAK,CAACrC,YAAY,CAAC,OAAO,CAAC,GAAK4B,CAAS,EAC1CY,qBAAqB,CAAC,UAAM,CAC1BH,CAAK,CAACC,QAAQ,GAAM,CACpBD,CAAK,CAACE,YAAY,CAAC,KAAK,CAAE,YAAY,CACxC,CAAC,CAEL,CAAC,CAAC,CACEJ,YAAY,EAAIA,YAAY,CAACM,OAAO,EACtCN,YAAY,CAACM,OAAO,CAAC,UAAU,CAAC,CAClC,IAAI,CAACrC,OAAO,CAAGwB,CAAS,CAC1B,CAAC,CACDc,MAAM,CAAE,IAAI,CACZ9B,QAAQ,CAAE,kBAASC,CAAG,CAAY,IAAVF,EAAK,wDAAC,EAAE,CAC9B,GAAI,CAAEA,CAAK,CAAE,CACX,GAAIgC,EAAC,CAAG,qBAAqB,CAACpL,IAAI,CAACsJ,CAAG,CAAC,CACvC,GAAG,CAAC8B,CAAC,CAAE,OACPhC,CAAK,CAAGgC,CAAC,CAAC,CAAC,CACb,CAEA,GADAhC,CAAK,CAAGf,CAAC,CAACgD,UAAU,CAAChD,CAAC,CAACiD,MAAM,CAAClC,CAAK,CAAC,CAAC,CAClC,CAACL,QAAQ,CAACK,CAAK,CAAE,IAAI,CAACjB,MAAM,CAAC,CAAE,CAChC,GAAIoD,EAAK,CAAGvF,CAAC,CAAC,oDAA+C,CAACsD,CAAG,CAAC,aAAW,CAACF,CAAK,CAAC,cAAa,CAAC,CAClGpD,CAAC,CAAC,MAAM,CAAC,CAACgE,MAAM,CAACuB,CAAK,CAAC,CACvB,IAAI,CAACpD,MAAM,CAACpK,IAAI,CAACqL,CAAK,CAAC,CACvB,IAAI,CAAClB,GAAG,CAACnK,IAAI,CAACwN,CAAK,CAAC,CAAC,CAAC,CACxB,CACA,MAAOnC,EACT,CAAC,CACDoC,SAAS,CAAE,mBAASlC,CAAG,CAAEF,CAAK,CAAE,CAC9BA,CAAK,CAAG,IAAI,CAACC,QAAQ,CAACC,CAAG,CAAEF,CAAK,CAAC,CACjC,IAAI,CAACG,QAAQ,CAACH,CAAK,CAAC,CACpB,IAAI,CAAC+B,MAAM,CAAG,CACZ7B,GAAG,CAAEA,CAAG,CACRF,KAAK,CAAEA,CACT,CAAC,CACDqC,IAAI,CAACC,IAAI,uGAAqBtC,CAAK,yKAGO7L,EAAE,CAAC3H,MAAM,4BACxC,CAAC+V,IAAI,CAAE,CAAC,CAAEd,IAAI,GAAM,CAAC,CAClC,CAAC,CACDe,mBAAmB,CAAE,8BAAW,CAC3B,IAAI,CAACT,MAAM,EACZU,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACb,MAAM,CAAC,CACnE,CAAC,CACDvB,QAAQ,CAAE,mBAAW,CACnBiC,YAAY,CAACI,UAAU,CAAC,aAAa,CAAC,CACtC,IAAI,CAAChD,MAAM,EACb,CACF,CAAC,CACEpU,YAAY,EAAEoT,MAAM,CAACgB,MAAM,EAAE,CAEhC,GAAIiD,YAAW,CAAG,CAChB9D,IAAI,CAAE,eAAW,YACf,IAAI,CAAC+D,cAAc,CAAmD,MAAM,EAAtDN,YAAY,CAAC,iBAAiB,CAACxF,cAAc,CAAS,CAC3E,CAAC,OAAO,CAAE,SAAS,CAAC,CAACpI,OAAO,CAAC,SAAAmO,CAAI,CAAI,CACpC,GAAIC,EAAE,CAAGR,YAAY,iBAAUxD,CAAC,CAACgD,UAAU,CAACe,CAAI,CAAC,EAAG,CAClD3J,CAAI,CAAG4J,CAAE,CAAGA,CAAE,CAACnH,KAAK,CAAC,GAAG,CAAC,CAACjC,MAAM,CAAC,SAAAvB,CAAC,QAAIA,EAAC,EAAC,CAAG,EAAE,CAC/C,CAAI,CAAC4K,KAAK,CAACF,CAAI,CAAC,CAAG3J,CACrB,CAAC,CAAC,CACFxC,QAAQ,CAACsM,KAAK,4CAAmC,IAAI,CAACC,QAAQ,EAAE,aAClE,CAAC,CACDA,QAAQ,CAAE,mBAAW,YACfC,CAAM,CAAG,EAAE,CAAEC,CAAI,CAAG,EAAE,CAAEC,CAAW,CAAG,EAAE,CA6B5C,MA5BC,CAAC,OAAO,CAAE,SAAS,CAAC,CAAC1O,OAAO,CAAC,SAAAmO,CAAI,CAAI,CACpC,CAAI,CAACE,KAAK,CAACF,CAAI,CAAC,CAACnO,OAAO,CAAC,SAAAiI,CAAE,CAAI,CAC7B,GAAU,OAAO,EAAbkG,CAAa,CAAE,CACjB,GAAIQ,EAAI,oBAAe1G,CAAE,CAAE,CAC3ByG,CAAW,CAAC5O,IAAI,CAAC6O,CAAI,CAAC,CAClB,CAAI,CAACT,cAAc,CACrBO,CAAI,CAAC3O,IAAI,CAAC6O,CAAI,CAAC,CAEfF,CAAI,CAAC3O,IAAI,oBAAamI,CAAE,EAC5B,CAAC,IACOlR,OAAM,GACZ0X,CAAI,CAAC3O,IAAI,kBAAWmI,CAAE,EAAG,CACrB,CAAI,CAACiG,cAAc,EACrBO,CAAI,CAAC3O,IAAI,wBAAiBmI,CAAE,EAAG,CAC/BwG,CAAI,CAAC3O,IAAI,kBAAWmI,CAAE,UAAQ,CAC9BwG,CAAI,CAAC3O,IAAI,kBAAWmI,CAAE,eAAa,EAGnCuG,CAAM,CAAC1O,IAAI,wBAAiBmI,CAAE,EAAG,CAGvC,CAAC,CACH,CAAC,CAAC,CACEyG,CAAW,CAACjO,MAAM,EACpBhB,OAAO,CAACC,QAAQ,CAAC,UAAM,CACrBqI,CAAC,CAAC2G,CAAW,CAAChC,IAAI,CAAC,GAAG,CAAC,CAAC,CAACnE,QAAQ,CAAC,aAAa,CACjD,CAAC,CAAC,CAEG,CAACkG,CAAI,CAAChO,MAAM,CAAGgO,CAAI,CAAC/B,IAAI,CAAC,GAAG,CAAC,CAAG,mBAAmB,CAAG,EAAE,GAC5D8B,CAAM,CAAC/N,MAAM,CAAG+N,CAAM,CAAC9B,IAAI,CAAC,GAAG,CAAC,CAAG,2BAA2B,CAAG,EAAE,CACxE,CAAC,CACDkC,SAAS,CAAE,oBAAW,CACpBC,QAAQ,CAACC,MAAM,CAAC,WAAW,CAAE,IAAI,CAACP,QAAQ,EAAE,CAC9C,CAAC,CACDL,cAAc,GAAO,CACrBG,KAAK,CAAE,CAAC,CAAC,CACTU,QAAQ,CAAE,kBAASZ,CAAI,CAAElG,CAAE,CAAE,CAC3B,MAAsD,CAAC,CAAC,EAAjD,IAAI,CAACoG,KAAK,CAACF,CAAI,CAAC,GAAG,CAAC,CAAChO,OAAO,CAAC8H,CAAE,CAACH,QAAQ,EAAE,CACnD,CAAC,CACDkH,QAAQ,CAAE,kBAASb,CAAI,CAAElG,CAAE,CAAE,CACvB,IAAI,CAAC8G,QAAQ,CAACZ,CAAI,CAAElG,CAAE,CAAC,GAC3B,IAAI,CAACoG,KAAK,CAACF,CAAI,CAAC,GAAG,CAAC,CAACrO,IAAI,CAACmI,CAAE,CAAC,CAC7B,IAAI,CAACgH,QAAQ,CAACd,CAAI,CAAC,CACrB,CAAC,CACDe,UAAU,CAAE,oBAASf,CAAI,CAAElG,CAAE,CAAE,CACxB,IAAI,CAAC8G,QAAQ,CAACZ,CAAI,CAAElG,CAAE,CAAC,GAC5B,IAAI,CAACoG,KAAK,CAACF,CAAI,CAAC,GAAG,CAAC,CAAG,IAAI,CAACE,KAAK,CAACF,CAAI,CAAC,GAAG,CAAC,CAACnJ,MAAM,CAAC,SAAAvB,CAAC,QAAIA,EAAC,EAAEwE,CAAE,EAAC,CAC9D,IAAI,CAACgH,QAAQ,CAACd,CAAI,CAAC,CACrB,CAAC,CACDgB,UAAU,CAAE,oBAASlH,CAAE,CAAmB,6DACxC,IAAI,CAAC+G,QAAQ,CAAC,QAAQ,CAAE/G,CAAE,CAAC,CAC3BF,CAAC,CAAC,eAAe,CAAGE,CAAE,CAAC,CAACmH,SAAS,EAAE,CACnC,GAAIC,EAAO,CAAGtH,CAAC,CAAC,SAAS,CAAGE,CAAE,CAAC,CAC7BqH,CAAK,CAAGD,CAAO,CAAC5I,IAAI,CAAC,eAAe,CAAC,CACvC4I,CAAO,CAACxD,OAAO,EAAE,CAAC0D,OAAO,EAAE,CAACC,IAAI,CAACnM,gBAAgB,CAAC,CAC9CiM,CAAK,CAAC7O,MAAM,EACdgP,kBAAkB,CAACH,CAAK,CAAC,CAAC,CAAC,OAC/B,CAAC,CACDI,YAAY,CAAE,sBAASzH,CAAE,CAAmB,6DAC1C,IAAI,CAACiH,UAAU,CAAC,QAAQ,CAAEjH,CAAE,CAAC,CAC7BF,CAAC,CAAC,SAAS,CAAGE,CAAE,CAAC,CAACmH,SAAS,EAAE,CAC7BrH,CAAC,CAAC,eAAe,CAAGE,CAAE,CAAC,CAAC4D,OAAO,EACjC,CAAC,CACDrO,QAAQ,CAAE,kBAASyK,CAAE,CAAE,CACrB,IAAI,CAAC+G,QAAQ,CAAC,MAAM,CAAE/G,CAAE,CAAC,CACzBF,CAAC,CAAC,WAAW,CAAGE,CAAE,CAAC,CAAC4D,OAAO,CAAC,MAAM,CACpC,CAAC,CACDpO,UAAU,CAAE,oBAASwK,CAAE,CAAE,CACvB,IAAI,CAACiH,UAAU,CAAC,MAAM,CAAEjH,CAAE,CAAC,CAC3BF,CAAC,CAAC,WAAW,CAAGE,CAAE,CAAC,CAACmH,SAAS,CAAC,MAAM,CACtC,CAAC,CACDO,UAAU,CAAE,oBAAS1H,CAAE,CAAE,CACvB,GAAI2H,EAAK,CAAG7H,CAAC,CAAC,WAAW,CAAGE,CAAE,CAAC,CAC7B4H,CAAI,CAAGD,CAAK,CAAChE,MAAM,EAAE,CAACnF,IAAI,CAAC,gBAAgB,CAAC,CAClB,MAAM,EAA9BmJ,CAAK,CAACE,GAAG,CAAC,SAAS,CAAW,EAChC,IAAI,CAACrS,UAAU,CAACwK,CAAE,CAAC,CACnB4H,CAAI,CAACE,IAAI,CAAC,OAAO,CAAEzQ,EAAE,CAAC9B,QAAQ,CAAC,CAC9BiJ,IAAI,CAAC,KAAK,CAAC,CAACsJ,IAAI,CAAC,YAAY,CAAE,SAAS,CAAC,GAG1C,IAAI,CAACvS,QAAQ,CAACyK,CAAE,CAAC,CACjB4H,CAAI,CAACE,IAAI,CAAC,OAAO,CAAEzQ,EAAE,CAAC7B,UAAU,CAAC,CAChCgJ,IAAI,CAAC,KAAK,CAAC,CAACsJ,IAAI,CAAC,YAAY,CAAE,WAAW,CAAC,CAEhD,CAAC,CACDd,QAAQ,CAAE,kBAASd,CAAI,CAAE,CACvBP,YAAY,iBAAUxD,CAAC,CAACgD,UAAU,CAACe,CAAI,CAAC,MAAI,CAAG,IAAI,CAACE,KAAK,CAACF,CAAI,CAAC,GAAG,CAAC,CAACzB,IAAI,CAAC,GAAG,CAC9E,CACF,CAAC,CACDuB,WAAW,CAAC9D,IAAI,EAAE,CAElB,QAAS6F,aAAY,CAACC,CAAQ,CAAEC,CAAK,CAAEzE,CAAE,CAAE,CACzCA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAI2D,EAAO,CAAGtH,CAAC,kBAAWkI,CAAQ,aAAIC,CAAK,EAAG,CAC9C,GAAIb,CAAO,CAAC5O,MAAM,CAAE,CAClB,GAAI0P,EAAU,CAAG,CAAEd,CAAO,CAAC5I,IAAI,CAAC,cAAc,CAAC,CAAC2J,IAAI,CAAC,IAAI,CAAC,CACxDC,CAAQ,CAAG,CAAEhB,CAAO,CAAC5I,IAAI,CAAC,0BAA0B,CAAC,CAAC2J,IAAI,CAAC,IAAI,CAAC,CAChEE,CAAQ,CAAGjB,CAAO,CAAC5I,IAAI,CAAC,eAAe,CAAC,CAC1C6J,CAAQ,CAAC7J,IAAI,CAAC,GAAG,CAAC,CAACgI,IAAI,EAAE,CACnB6B,CAAQ,CAAC7J,IAAI,CAAC,MAAM,CAAC,CAAChG,MAAM,CAIhC6P,CAAQ,CAAC7J,IAAI,CAAC,UAAU,CAAC,CAACqD,IAAI,EAAE,CAHhC/B,CAAC,8CAAqCzI,EAAE,CAACpF,OAAO,eAAa,CAACqW,SAAS,CAACD,CAAQ,CAAC,CAKnFE,SAAS,CAACC,SAAS,CAACP,CAAK,CAAE,CAACD,CAAQ,CAAE,CAACE,CAAU,CAAEE,CAAQ,CAAC,CAAE,SAACK,CAAG,CAAE7U,CAAK,CAAK,CACxEA,CAAK,EACPwT,CAAO,CAAC5I,IAAI,CAAC,eAAe,CAAC,CAACkK,WAAW,CAAC9U,CAAK,CAAC,CAChD+U,QAAQ,CAACC,WAAW,EAAE,GAGtBrI,UAAU,CAAC,iBAAM8H,EAAQ,CAAC7J,IAAI,CAAC,UAAU,CAAC,CAACgI,IAAI,EAAE,EAAE,GAAI,CAAC,CACxD6B,CAAQ,CAAC7J,IAAI,CAAC,MAAM,CAAC,CAACpB,IAAI,CAAC/F,EAAE,CAACjI,IAAI,EAAI,KAAAqZ,CAAa,CAAiB,EAAE,aAAXA,CAAG,KAAQ,CAAC,CAAC,CACxEJ,CAAQ,CAAC7J,IAAI,CAAC,GAAG,CAAC,CAACpB,IAAI,CAAC/F,EAAE,CAAC9D,QAAQ,CAAC,CAACsO,IAAI,EAAE,CAE/C,CAAC,CACH,CACA,QACF,CAEA,GAAIgH,SAAQ,CAAG,CACbC,IAAI,GAAO,CACX5N,GAAG,CAAE,cAAqB,IAAZ6N,EAAO,wDAAC,CAAC,CAAC,CAStB,GARAA,CAAO,CAAG5G,CAAC,CAAC6G,QAAQ,CAACD,CAAO,CAAE,CAC5Bf,QAAQ,CAAE,IAAI,CACdiB,YAAY,CAAE,IAAI,CAClBC,MAAM,GAAO,CACbC,OAAO,CAAE,iBAAAV,CAAG,QAAIlD,KAAI,CAACkD,GAAG,mCAA4BA,CAAG,MAAI,EAC3DW,SAAS,CAAE,IAAI,CACfC,SAAS,CAAE,IACb,CAAC,CAAC,CACE,CAACN,CAAO,CAACf,QAAQ,CAAE,CACrB,GAAIlZ,MAAM,CACR,MAAOia,EAAO,CAACI,OAAO,EAAE,CAC1BJ,CAAO,CAACf,QAAQ,CAAG,CAAClI,CAAC,CAAC,yBAAyB,CAAC,CAACf,GAAG,EACtD,CAEA,MADA,KAAI,CAACtH,QAAQ,CAACsR,CAAO,CAAC,GAExB,CAAC,CACDO,OAAO,CAAE,iBAASC,CAAI,CAAE,YACtB,IAAI,CAACT,IAAI,GAAO,CAChB,GAAId,EAAQ,CAAG,EAAE,CAACuB,CAAI,CAACvB,QAAQ,CAC7BiB,CAAY,CAAGM,CAAI,CAACN,YAAY,CAChCE,CAAO,CAAG,SAAAV,CAAG,CAAI,CACjB,CAAI,CAACe,IAAI,EAAE,CACXD,CAAI,CAACJ,OAAO,CAACV,CAAG,CAClB,CAAC,CACIT,CAAQ,CAAChJ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GACzBgJ,CAAQ,EAAI,GAAG,CAAC7H,cAAc,EAChC,GAAIsJ,EAAiB,CAAEC,CAAa,CACpC,GAAI,CAAC5a,MAAM,CACT4a,CAAa,CAAG5J,CAAC,CAAC,eAAe,CAAC,CAClC4J,CAAa,CAACxJ,WAAW,CAAC,cAAc,CAAC,CAACI,QAAQ,CAAC,cAAc,CAAC,CAClEmJ,CAAiB,CAAG1P,QAAQ,CAACkC,aAAa,CAAC,UAAU,CAAC,KAItD,IADAwN,CAAiB,CAAG1P,QAAQ,CAACkC,aAAa,kBAAW+L,CAAQ,cAAY,CACrE,CAACyB,CAAiB,CAAE,MAAON,EAAO,CAAC,uBAAuB,CAAC,CAGjE,GAAIF,CAAY,EAAIlJ,SAAS,CAACkJ,CAAY,CAAC,CAGzC,MAFAS,EAAa,CAACxJ,WAAW,CAAC,cAAc,CAAC,KACzC,KAAI,CAACsJ,IAAI,EAAE,CAGb,GAAIG,EAAQ,CAAG7J,CAAC,8BAAsBkI,CAAQ,QAAK,CAAC4B,IAAI,EAAE,CACxDC,CAAQ,CAAG,CAACF,CAAQ,CAACxB,IAAI,CAAC,SAAS,CAAC,EAAIwB,CAAQ,CAACxB,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,CACrE,GAAI,CAAE0B,CAAQ,CAAE,MAAOV,EAAO,EAAE,CAChC,GAAIW,EAAG,CAAG9B,CAAQ,CAAChJ,KAAK,CAAC,GAAG,CAAC,CAC3BgB,CAAE,CAAG8J,CAAG,CAAC,CAAC,CAAC,CAAEC,CAAE,CAAGD,CAAG,CAAC,CAAC,CAAC,CAC1BvB,SAAS,CAACC,SAAS,CAACuB,CAAE,CAAE/J,CAAE,CAAE,CAAC,CAAE6J,CAAQ,CAAC7K,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE,KAAU,CAAE,SAACyJ,CAAG,CAAE7U,CAAK,CAAK,OAC3E9E,OAAM,EACT4a,CAAa,CAACxJ,WAAW,CAAC,cAAc,CAAC,CAEvCtM,CAAK,EACP6V,CAAiB,CAACO,kBAAkB,CAAC,WAAW,CAAEpW,CAAK,CAAC,CACxD+U,QAAQ,CAACC,WAAW,EAAE,CACtBqB,aAAa,CAACC,gBAAgB,CAACX,CAAI,CAACF,SAAS,EAAI,IAAI,CAAEU,CAAE,CAAC,CACtDR,CAAI,CAACH,SAAS,EAChBG,CAAI,CAACH,SAAS,EAAE,EAGd,CAACG,CAAI,CAACL,MAAM,EACd3D,IAAI,CAAC4E,IAAI,CAAW,EAAE,GAAZvW,CAAY,CAAGyD,EAAE,CAACvH,UAAU,CAAGuH,EAAE,CAACjI,IAAI,EAAI,KAAAqZ,CAAa,CAAiB,EAAE,aAAXA,CAAG,KAAQ,CAAC,CAAE,CAAChD,IAAI,CAAE,CAAC,CAAC,CAAC,CAGjGwD,CAAY,EAAI,CAAClJ,SAAS,CAACkJ,CAAY,CAAC,CACnCE,CAAO,CAAC,kBAAkB,CAAC,KAEpC,EAAI,CAACK,IAAI,EACX,CAAC,OACH,CAAC,CACD/R,QAAQ,CAAE,kBAAS8R,CAAI,CAAE,CACnB,IAAI,CAACT,IAAI,CACX,IAAI,CAACsB,KAAK,CAACvS,IAAI,CAAC0R,CAAI,CAAC,CAErB,IAAI,CAACD,OAAO,CAACC,CAAI,CACrB,CAAC,CACDC,IAAI,CAAE,UAAW,CACf,GAAIA,EAAI,CAAG,IAAI,CAACY,KAAK,CAACC,KAAK,EAAE,CACzBb,CAAI,CACN,IAAI,CAACF,OAAO,CAACE,CAAI,CAAC,CAElB,IAAI,CAACV,IAAI,GACb,CAAC,CACDsB,KAAK,CAAE,EACT,CAAC,CAGD,QAASE,MAAK,CAAChP,CAAE,CAAEiP,CAAI,CAAE,CACvB,GAAIC,EAAO,CAAGD,CAAI,CAAC9J,qBAAqB,EAAE,CACxCgK,CAAK,CAAGD,CAAO,CAACE,CAAC,CAAIF,CAAO,CAACG,KAAK,CAAG,CAAE,CACvCC,CAAK,CAAGJ,CAAO,CAAC1N,CAAC,CAAI0N,CAAO,CAACnO,MAAM,CAAG,CAAE,CACxCwO,CAAK,CAAGvP,CAAE,CAACmF,qBAAqB,EAAE,CAGpC,MAFAnF,EAAE,CAACwP,KAAK,CAACC,eAAe,WAAON,CAAK,CAAGI,CAAK,CAACH,CAAC,CAAI,IAAI,aAAKE,CAAK,CAAGC,CAAK,CAAC/N,CAAC,CAAI,IAAI,CAAE,CACpFxB,CAAE,CAACG,SAAS,CAACI,GAAG,CAAC,aAAa,CAAC,CACxB,GAAImP,QAAO,CAAC,SAACC,CAAO,CAAa,CACtC1K,UAAU,CAAC,UAAM,CACfjF,CAAE,CAACG,SAAS,CAACC,MAAM,CAAC,aAAa,CAAC,CAClCJ,CAAE,CAACwP,KAAK,CAACC,eAAe,CAAG,IAAI,CAC/BE,CAAO,CAAC3P,CAAE,CACZ,CAAC,CAAuE,GAAI,CAAxE,CAAC4P,gBAAgB,CAAC5P,CAAE,CAAC,CAAC6P,UAAU,CAACxL,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAQ,CAAI,GAAG,CACrF,CAAC,CACH,CAEA,QAAS5D,mBAAkB,CAACJ,CAAI,CAAuE,IAArEtH,EAAQ,wDAAG,CAACsH,CAAI,CAACF,SAAS,CAACK,QAAQ,CAAC,WAAW,CAAC,CAAEoC,CAAK,wDAAG,CAAC7J,CAAQ,CAC/F+W,CAAM,CAAGzP,CAAI,CAAC8E,qBAAqB,EAAE,CACvC4K,CAAQ,CAAGD,CAAM,CAACE,KAAK,EAAIrQ,MAAM,CAACsQ,UAAU,CAAG,EAAE,CAAC,CACpD5P,CAAI,CAACF,SAAS,CAAC+P,MAAM,CAAC,WAAW,CAAEnX,CAAQ,CAAC,CAC5C,GAAIoX,EAAG,CAAG9P,CAAI,CAAC8E,qBAAqB,EAAE,CACpCiL,CAAQ,CAAGD,CAAG,CAACd,KAAK,CACtBhP,CAAI,CAACmP,KAAK,CAACa,IAAI,CACbF,CAAG,CAACE,IAAI,EACLP,CAAM,CAACT,KAAK,CAAGe,CAAQ,CAAC,EACb,CAAC,CAAZL,CAAY,CAAGA,CAAQ,CAAG,CAAC,CAAC,CAC7B,IAAI,CACR1P,CAAI,CAACM,aAAa,CAAC,YAAY,CAAC,CAACR,SAAS,CAAC+P,MAAM,CAAC,WAAW,CAAEnX,CAAQ,CAAC,CACpE6J,CAAK,EACPvC,CAAI,CAACM,aAAa,CAAC,UAAU,CAAC,CAACiC,KAAK,EAExC,CAEA,QAAS0N,cAAa,CAACjQ,CAAI,CAAEkQ,CAAG,CAAE,CAChC,GAAI7L,EAAE,CAAG6L,CAAG,CAACC,OAAO,CAACN,MAAM,CACzBO,CAAG,CAAGpQ,CAAI,CAACM,aAAa,YAAK4P,CAAG,CAACC,OAAO,CAACN,MAAM,SAAO,CACxD,GAAMO,CAAG,EACT,GAAIlK,EAAI,CAAGkK,CAAG,CAACtQ,SAAS,CAAC+P,MAAM,CAAC,WAAW,CAAC,CAC5CK,CAAG,CAAC5P,aAAa,CAAC,KAAK,CAAC,CAACR,SAAS,CAAC+P,MAAM,CAAC,SAAS,CAAE3J,CAAI,CAAC,CAC1D,GAAImK,EAAG,CAAGnK,CAAI,CAAG,CAAC,CAAGoK,UAAU,CAACF,CAAG,CAAE/L,CAAE,CAAC,CASxC,GARA6L,CAAG,CAACpQ,SAAS,CAAC+P,MAAM,CAAC,sBAAsB,CAAEQ,CAAG,CAAC,CAC7CA,CAAG,EACD,CAAEH,CAAG,CAACK,cAAc,GACtBL,CAAG,CAACK,cAAc,CAAGL,CAAG,CAAC3I,KAAK,EAChC2I,CAAG,CAAC3I,KAAK,WAAM2I,CAAG,CAACK,cAAc,cAAK7U,EAAE,CAACxB,QAAQ,KAAG,EAE7CgW,CAAG,CAACK,cAAc,GACzBL,CAAG,CAAC3I,KAAK,CAAG2I,CAAG,CAACK,cAAc,EAC5BrK,CAAI,CAAE,CACR,GAAIsK,EAAK,CAAG,IAAI,CAChB,GAAU,cAAc,EAApBnM,CAAoB,CAAE,CACxB,GAAI1G,EAAC,CAAGqC,CAAI,CAACM,aAAa,CAAC,qBAAqB,CAAC,CAC5C3C,CAAC,CAACa,KAAK,GACVgS,CAAK,CAAG7S,CAAC,CACb,CACA,GAAU,MAAM,EAAZ0G,CAAY,CAAE,CAChB,GAAI1G,EAAC,CAAGqC,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,CACzC3C,CAAC,CAACa,KAAK,EAAKb,CAAC,CAACuL,QAAQ,GACzBsH,CAAK,CAAG7S,CAAC,CACb,CACA,GAAU,OAAO,EAAb0G,CAAa,CAAE,CACjB,GAAIoM,EAAM,CAAG,EAAE,CAACrP,MAAM,CAACL,IAAI,CAACf,CAAI,CAACJ,gBAAgB,CAAC,+BAA+B,CAAC,CAChF,SAAAD,CAAE,QAAIA,EAAE,CAACH,cAAc,EAAE,CAAC3C,MAAM,EAAI,CAAC8C,CAAE,CAACnB,KAAK,EAAC,CAC5CiS,CAAM,CAAC5T,MAAM,GACf2T,CAAK,CAAGC,CAAM,CAAC,CAAC,CAAC,CACrB,CACID,CAAK,EACPA,CAAK,CAACjO,KAAK,EACf,CAAC,CACH,CAEA,QAAS+N,WAAU,CAACF,CAAG,CAAE/L,CAAE,CAAE,CAC3B,MAAO,CAAC,EACC,MAAM,EAAZA,CAAY,EACoC,EAAE,EAAjD+L,CAAG,CAAC9P,aAAa,CAAC,kBAAkB,CAAC,CAAC9B,KAAW,EAEjD,CAAC4R,CAAG,CAAC9P,aAAa,CAAC,0BAA0B,CAAC,CAACoQ,OAAO,EAEjD,cAAc,EAApBrM,CAAoB,EAC+B,EAAE,EAApD+L,CAAG,CAAC9P,aAAa,CAAC,qBAAqB,CAAC,CAAC9B,KAC1C,EACM,OAAO,EAAb6F,CAAa,EACZ,EAAE,CAACxB,IAAI,CAAC9B,IAAI,CAACqP,CAAG,CAACxQ,gBAAgB,CAAC,kBAAkB,CAAC,CAAE,SAAAjC,CAAC,QAAIA,EAAC,CAACa,KAAK,CAACmS,IAAI,EAAE,EAC3E,EACM,KAAK,EAAXtM,CAAW,EACV+L,CAAG,CAAC9P,aAAa,CAAC,wBAAwB,CAAC,CAACoQ,OAC7C,CAEL,CAEA,QAASE,gBAAe,CAAC5Q,CAAI,CAAE,CAC7B,CAAC,MAAM,CAAE,cAAc,CAAE,OAAO,CAAE,KAAK,CAAC,CAAC5D,OAAO,CAAC,SAAAiI,CAAE,CAAI,CACrD,GAAI+L,EAAG,CAAGpQ,CAAI,CAACM,aAAa,YAAK+D,CAAE,yBAAuB,CACxD6L,CAAG,CAAGE,CAAG,EAAIpQ,CAAI,CAACM,aAAa,4CAAoC+D,CAAE,QAAK,CACxE6L,CAAG,EACLA,CAAG,CAACpQ,SAAS,CAAC+P,MAAM,CAAC,sBAAsB,CAAES,UAAU,CAACF,CAAG,CAAE/L,CAAE,CAAC,CACpE,CAAC,CACH,CAEA,QAASwH,mBAAkB,CAAC7L,CAAI,CAAE6Q,CAAK,CAAc,IAAZtO,EAAK,4DACxCuO,CAAM,CAAG9Q,CAAI,CAACM,aAAa,CAAC,SAAS,CAAC,CAC1CwQ,CAAM,CAAChR,SAAS,CAAC+P,MAAM,CAAC,QAAQ,CAAE,CAACgB,CAAK,CAAC,CACzCC,CAAM,CAAChR,SAAS,CAAC+P,MAAM,CAAC,UAAU,CAAEgB,CAAK,CAAC,CACtCA,CAAK,EAEP9H,YAAY,CAACC,IAAI,CAAC,oBAAoB,CAAEhJ,CAAI,CAAC+Q,aAAa,EAAE,CAAC,CAC7D3S,QAAQ,CAACwB,gBAAgB,CAAC,eAAe,CAAC,CAACxD,OAAO,CAAC,SAAA4U,CAAC,QAAInF,mBAAkB,CAACmF,CAAC,IAAQ,EAAC,CACrFjI,YAAY,CAACM,OAAO,CAAC,oBAAoB,CAAC,CACzC4H,IAAI,CAAC,UAAM,CACV,GAAInB,EAAG,CAAG9P,CAAI,CAAC8E,qBAAqB,EAAE,CACtC9E,CAAI,CAACF,SAAS,CAACI,GAAG,CAAC,cAAc,CAAC,CAClCF,CAAI,CAACF,SAAS,CAACC,MAAM,CAAC,aAAa,CAAE,kBAAkB,CAAC,CACxDC,CAAI,CAACmP,KAAK,CAAChK,GAAG,CAAG2K,CAAG,CAAC3K,GAAG,CAAG,IAAI,CAC/BnF,CAAI,CAACmP,KAAK,CAACa,IAAI,CAAGF,CAAG,CAACE,IAAI,CAAG,IAAI,CACjC7L,CAAC,CAACnE,CAAI,CAAC,CAACkR,KAAK,EAAE,CACdrO,IAAI,CAAC,mEAAmE,CAAC,CAACsO,SAAS,CAAC,SAASC,CAAC,CAAE,CAC/FA,CAAC,CAACC,eAAe,EACnB,CAAC,CACH,CAAC,CAAC,GAGFrR,CAAI,CAACF,SAAS,CAACC,MAAM,CAAC,cAAc,CAAE,WAAW,CAAC,CAClDC,CAAI,CAACM,aAAa,CAAC,YAAY,CAAC,CAACR,SAAS,CAACC,MAAM,CAAC,WAAW,CAAC,CAC9DC,CAAI,CAACF,SAAS,CAACI,GAAG,CAAC,aAAa,CAAE,kBAAkB,CAAC,CACrDiE,CAAC,CAACnE,CAAI,CAAC,CAACsR,QAAQ,EAAE,CACjB,CAAC,KAAK,CAAE,MAAM,CAAE,QAAQ,CAAC,CAAClV,OAAO,CAAC,SAAAmV,CAAI,QAAIvR,EAAI,CAACmP,KAAK,CAACoC,CAAI,CAAC,CAAG,IAAI,EAAC,EAEjEhP,CAAK,EACPvC,CAAI,CAACM,aAAa,CAAC,UAAU,CAAC,CAACiC,KAAK,EACxC,CAEA,QAASiP,aAAY,CAACxR,CAAI,CAAE,CAO1B,GANAA,CAAI,CAACF,SAAS,CAACI,GAAG,CAAC,QAAQ,CAAC,CAC5B2L,kBAAkB,CAAC7L,CAAI,IAAQ,CAC/BI,kBAAkB,CAACJ,CAAI,IAAQ,CAC/B4E,UAAU,CAAC,UAAM,CACf5E,CAAI,CAACF,SAAS,CAACC,MAAM,CAAC,kBAAkB,CAC1C,CAAC,CAAE,GAAG,CAAC,CACHC,CAAI,CAACyR,QAAQ,CAAE,CACjB,GAAIX,EAAM,CAAG9Q,CAAI,CAACyR,QAAQ,CAACnR,aAAa,CAAC,SAAS,CAAC,CAC/CwQ,CAAM,GACRA,CAAM,CAAChR,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC,CACjC+Q,CAAM,CAAChR,SAAS,CAACI,GAAG,CAAC,UAAU,CAAC,EAElCF,CAAI,CAACyR,QAAQ,CAACC,OAAO,GACvB,CACAjS,gBAAgB,EAClB,CAEA,QAASkS,mBAAkB,CAAC3R,CAAI,CAAE4R,CAAQ,CAAE,CAC1C,GAAIC,EAAU,CAAG7R,CAAI,CAACF,SAAS,CAAC+P,MAAM,CAAC,qBAAqB,CAAE+B,CAAQ,CAAC,CACnEC,CAAU,EACZjB,eAAe,CAAC5Q,CAAI,CACxB,CAEA,QAAS8R,cAAa,CAACC,CAAQ,CAAEC,CAAO,CAAmB,IAAjBC,EAAS,6DACjD,MAAO,IAAI5C,QAAO,CAAC,SAACC,CAAO,CAAa,CACtC1C,SAAS,CAACsF,UAAU,CAACD,CAAS,CAAC,CAAChB,IAAI,CAAC,SAAAkB,CAAO,CAAI,CAC1CC,OAAO,CAACC,OAAO,GACjBD,OAAO,CAACE,KAAK,CAAG,MAAM,EACxB,GAAIC,EAAO,CAAGJ,CAAO,CAACK,SAAS,IAAM,CACrCD,CAAO,CAAClO,EAAE,CAAG0N,CAAQ,CAAG,MAAM,CAC9BQ,CAAO,CAACpC,OAAO,CAAC4B,QAAQ,CAAGA,CAAQ,CACnCQ,CAAO,CAACzS,SAAS,CAACC,MAAM,CAAC,iBAAiB,CAAC,CAC3CwS,CAAO,CAACjS,aAAa,CAAC,oCAAoC,CAAC,CAACmS,SAAS,CAAG/W,EAAE,CAAC1F,KAAK,CAChFuc,CAAO,CAACjS,aAAa,CAAC,8BAA4B,CAAC,CAAC9B,KAAK,CAAGiH,YAAY,CAAC,cAAc,CAAC,CACxF8M,CAAO,CAACjS,aAAa,CAAC,eAAe,CAAC,CAAC9B,KAAK,CAAG9C,EAAE,CAAC1F,KAAK,CACvDuc,CAAO,CAACjS,aAAa,CAAC,WAAW,CAAC,CAACP,MAAM,EAAE,CAC3C,GAAI2S,EAAO,CAAGH,CAAO,CAACjS,aAAa,CAAC,cAAc,CAAC,CAC/C0R,CAAO,GACTO,CAAO,CAACd,QAAQ,CAAGO,CAAO,EAC5BU,CAAO,CAACrE,kBAAkB,CAAC,UAAU,6EAE/BkE,CAAO,CAACjS,aAAa,CAAC,WAAW,CAAC,gGACgC5E,EAAE,CAACvB,QAAQ,yHAG3E,EAAE,uGACoEuB,EAAE,CAACtB,WAAW,iMAG3BsB,EAAE,CAAChB,UAAU,8HAGxE6X,CAAO,CAACjS,aAAa,CAAC,YAAY,CAAC,iGACgC5E,EAAE,CAACrB,UAAU,0HAG9E,EAAE,mGACgEqB,EAAE,CAACpB,YAAY,gIAGnFiY,CAAO,CAACjS,aAAa,CAAC,UAAU,CAAC,+FACgC5E,EAAE,CAACnB,OAAO,0HAGzE,EAAE,sBACC,CAEXqW,eAAe,CAAC2B,CAAO,CAAC,CAExBA,CAAO,CAAC3S,gBAAgB,CAAC,oBAAoB,CAAC,CAACxD,OAAO,CAAC,SAAAyD,CAAC,CAAI,CAC1DA,CAAC,CAAC8S,OAAO,CAAG,SAAA9K,CAAE,CAAI,CAChBA,CAAE,CAACC,cAAc,EAAE,CACnBmI,aAAa,CAACsC,CAAO,CAAE1S,CAAC,CAC1B,CACF,CAAC,CAAC,CACF0S,CAAO,CAACjS,aAAa,CAAC,WAAW,CAAC,CAACqS,OAAO,CAAG,SAAS9K,CAAE,CAAE,CACxDA,CAAE,CAACC,cAAc,EAAE,CACnB,IAAI,CAACxH,aAAa,CAAC,OAAO,CAAC,CAACR,SAAS,CAAC+P,MAAM,CAAC,SAAS,CAAC,CACvD0C,CAAO,CAACjS,aAAa,CAAC,cAAc,CAAC,CAACR,SAAS,CAAC+P,MAAM,CAAC,gBAAgB,CACzE,CAAC,CACD6C,CAAO,CAAC3S,MAAM,EAAE,CAEhB,GAAIG,EAAG,CAAG,GAAG,CAACsG,CAAC,CAACoM,QAAQ,EAAE,CAE1BL,CAAO,CAAC3S,gBAAgB,CAAC,OAAO,CAAC,CAACxD,OAAO,CAAC,SAAAyW,CAAC,CAAI,CAC7C,GAAIxO,EAAE,CAAGwO,CAAC,CAACjM,YAAY,CAAC,KAAK,CAAC,CAC5BkM,CAAK,CAAGzO,CAAE,CAAGnE,CAAG,CAChB6S,CAAK,CAAGR,CAAO,CAACjS,aAAa,CAAC,GAAG,CAAC+D,CAAE,CAAC,CACnC0O,CAAK,GACPA,CAAK,CAAC1O,EAAE,CAAGyO,CAAK,EAClBD,CAAC,CAAC1J,YAAY,CAAC,KAAK,CAAE2J,CAAK,CAC7B,CAAC,CAAC,CACFP,CAAO,CAACzS,SAAS,CAACI,GAAG,CAAC,kBAAkB,CAAC,CACzCqS,CAAO,CAACzS,SAAS,CAACI,GAAG,CAAC,qBAAqB,CAAC,CAE5C8S,SAAS,CAACT,CAAO,IAAuB,CAExCU,aAAa,CAACC,QAAQ,CAACX,CAAO,CAAC,CAE/BA,CAAO,CAAClE,kBAAkB,CAAC,WAAW,2LAGb3S,EAAE,CAACjB,qBAAqB,uTAMxBiB,EAAE,CAACzB,cAAc,kVAMFyB,EAAE,CAAC3B,QAAQ,8RAO1B2B,EAAE,CAAC1B,QAAQ,8IAGzB,CAEXuY,CAAO,CAACxB,aAAa,CAAG,UAAM,CAC5B,GAAIoC,EAAS,CAAGZ,CAAO,CAACa,aAAa,CAAC,iBAAiB,CAAC,CACxD,MAAOD,EAAS,CAACE,OAAO,CAAC,WAAW,CAAC,CAAGF,CAAS,CAAG,IACtD,CAAC,CACDZ,CAAO,CAACjS,aAAa,CAAC,eAAe,CAAC,CAACqS,OAAO,CAAG,SAAA9K,CAAE,CAAI,CACrDA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAIwL,EAAI,GAAQ,CAChB,GAAIf,CAAO,CAACzS,SAAS,CAACK,QAAQ,CAAC,cAAc,CAAC,CAAE,CAC9C,GAAIoT,EAAM,CAAGhB,CAAO,CAACxB,aAAa,EAAE,CAChCwC,CAAM,GACR5E,KAAK,CAAC4D,CAAO,CAAEgB,CAAM,CAACjT,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC2Q,IAAI,CAACO,YAAY,CAAC,CACxE8B,CAAI,GAAO,CAEf,CACKA,CAAI,EACP9B,YAAY,CAACe,CAAO,CAExB,CAAC,CACDA,CAAO,CAACjS,aAAa,CAAC,mBAAmB,CAAC,CAACqS,OAAO,CAAG,SAAA9K,CAAE,CAAI,CACzDA,CAAE,CAACC,cAAc,EAAE,CACnB6J,kBAAkB,CAACY,CAAO,CAC5B,CAAC,CACDA,CAAO,CAACjS,aAAa,CAAC,SAAS,CAAC,CAACqS,OAAO,CAAG,SAAS9K,CAAE,CAAE,CACtDA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAI0L,EAAM,CAAGjB,CAAO,CAACzS,SAAS,CAACK,QAAQ,CAAC,aAAa,CAAC,CACtD0L,kBAAkB,CAAC0G,CAAO,CAAEiB,CAAM,CACpC,CAAC,CACDjB,CAAO,CAACjS,aAAa,CAAC,mBAAmB,CAAC,CAACqS,OAAO,CAAG,SAAA9K,CAAE,CAAI,CACzDA,CAAE,CAACC,cAAc,EAAE,CACnB1H,kBAAkB,CAACmS,CAAO,CAC5B,CAAC,CAEDA,CAAO,CAAC3S,gBAAgB,CAAC,GAAG,CAAC,CAACxD,OAAO,CAAC,SAAAyD,CAAC,CAAI,CACzCA,CAAC,CAAC4T,WAAW,CAAG,oBAAW,CAC3B5T,CAAC,CAAC6T,MAAM,CAAG,oBACb,CAAC,CAAC,CAEFR,QAAQ,CAACX,CAAO,CAAC,CAEjBjD,CAAO,CAACiD,CAAO,CACjB,CAAC,CACH,CAAC,CACH,CAEA,QAASoB,WAAU,EAAG,CACpB,GAAIC,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACjB0P,CAAQ,CAAGD,CAAK,CAACpH,IAAI,CAAC,QAAQ,CAAC,CAC/BsH,CAAM,CAAG3P,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,SAAS,CAAC,EAAIqH,CAAQ,CAACxQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC1DoB,CAAK,CAAGmP,CAAK,CAAClP,OAAO,CAAC,WAAW,CAAC,CAClCuN,CAAS,CAAGxN,CAAK,CAAC+H,IAAI,CAAC,OAAO,CAAC,CAC/BuH,CAAiB,CAAI,CAACC,YAAY,EAAI/B,CAAS,EAAIzN,cAAe,CAClExM,CAAI,CAAGyM,CAAK,CAAC,CAAC,CAAC,CACfwP,CAAQ,CAAGxP,CAAK,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAE3CwP,CAAU,GAAO,CACjBlU,CAAI,CAAGhI,CAAI,CAACmc,SAAS,CAAC,iBAAiB,CAAC,CACxCC,CAAU,CAAGpU,CAAI,EAAiC,UAAU,EAAvCA,CAAI,CAAC4G,YAAY,CAAC,MAAM,CAAe,CAC5DyN,CAAU,CAAGD,CAAU,EAAIpU,CAAI,CAACF,SAAS,CAACK,QAAQ,CAAC,QAAQ,CAAC,CAC5DmU,CAAY,CAAGF,CAAU,EAAIpU,CAAI,CAACF,SAAS,CAACK,QAAQ,CAAC,cAAc,CAAC,CAEpE6R,CAAO,CAAGha,CAAI,CAACiI,WAAW,CAAC,iBAAiB,CAAC,CAC7CsU,CAAS,CAAGL,CAAU,CAAGM,gBAAgB,CAACxc,CAAI,CAACsI,aAAa,CAAC,WAAW,CAAC,CAAC,CAAG,EAAE,CAwCjF,MAtCI8T,EAAU,EACRE,CAAY,EACdlU,kBAAkB,CAACJ,CAAI,IAAQ,CAC/B6L,kBAAkB,CAAC7L,CAAI,IAAQ,GAG1BqU,CAAU,CAKbrU,CAAI,CAACF,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC,EAJ/ByR,YAAY,CAACxR,CAAI,CAAC,CAClBqU,CAAU,GAAO,EAKnBA,CAAU,CAAG,CAACA,CAAU,EAE1BH,CAAU,GAAQ,GAGlBN,CAAK,CAACjP,QAAQ,CAAC,aAAa,CAAC,CAC7BmN,aAAa,CAAC9Z,CAAI,CAACqM,EAAE,EAAIrM,CAAI,CAACyc,aAAa,CAACpQ,EAAE,CAAE2N,CAAO,GAAGgC,YAAY,EAAG/B,CAAS,CAAU,CAAChB,IAAI,CAAC,SAAAjR,CAAI,CAAI,CACxG4T,CAAK,CAACrP,WAAW,CAAC,aAAa,CAAC,CAChCvE,CAAI,CAACF,SAAS,CAACI,GAAG,CAAC,aAAa,CAAC,CACjCF,CAAI,CAACM,aAAa,CAAC,SAAS,CAAC,CAACR,SAAS,CAAC+P,MAAM,CAAC,QAAQ,CAAC,CACxD7P,CAAI,CAACM,aAAa,CAAC,yBAAyB,CAAC,CAAC9B,KAAK,CAAGqV,CAAQ,CAC9D7b,CAAI,CAAC0c,qBAAqB,CAAC,UAAU,CAAE1U,CAAI,CAAC,CAC5C5B,QAAQ,CAACwB,gBAAgB,CAAC,+BAA+B,CAAC,CACzDxD,OAAO,CAAC,SAAAuY,CAAY,QAAIvU,mBAAkB,CAACuU,CAAY,CAAC,EAAC,CAC1D3U,CAAI,CAACM,aAAa,CAAC,UAAU,CAAC,CAACiC,KAAK,EAAE,CAClC2R,CAAU,EACZ1S,MAAM,aAAMuS,CAAiB,YAAO9B,CAAS,MAAM,EAAE,SAAG6B,CAAM,cAAKS,CAAS,EAAG,CAG7EvC,CAAO,EAAI,CAACA,CAAO,CAACN,OAAO,EAC7B1Z,CAAI,CAACsI,aAAa,CAAC,SAAS,CAAC,CAACsH,KAAK,EAEvC,CAAC,CAAC,IAIN,CAEA,QAASgN,cAAa,EAAG,CACvB,GAAI,CAAEtV,MAAM,CAACuV,YAAY,CAAE,MAAO,KAAI,CACtC,GAAIC,EAAS,CAAGxV,MAAM,CAACuV,YAAY,EAAE,CACrC,GAAuB,OAAO,GAA1BC,CAAS,CAACtR,IAAgB,CAAE,MAAO,KAAI,CAC3C,GAAIuR,EAAY,CAAGD,CAAS,CAAC5Q,QAAQ,EAAE,OACjC6Q,EAAY,CACX,CACLtT,IAAI,CAAEsT,CAAY,CAClBhK,IAAI,CAAE+J,CAAS,CAACE,UAClB,CAAC,CAJ0B,IAK7B,CAGA,QAASC,kBAAiB,CAACjN,CAAM,CAAE,CACjC,GAAIkN,EAAG,CAAGN,aAAa,EAAE,CACzB,MAAOM,EAAG,EAAIA,CAAG,CAACnK,IAAI,CAACoK,UAAU,CAACnN,CAAM,CAAC,CACrCkN,CAAG,CAACzT,IAAI,CACR,IACN,CAEA,QAAS+S,iBAAgB,CAACxc,CAAI,CAAE,CAC9B,GAAIyJ,EAAI,CAAGwT,iBAAiB,CAACjd,CAAI,CAAC,OAC7ByJ,EAAI,EACTA,CAAI,CAAGA,CAAI,CACRpE,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAACA,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CACrCA,OAAO,CAAC,MAAM,CAAE,IAAI,CAAC,CAACA,OAAO,CAAC,KAAK,CAAE,IAAI,CAAC,CACtCoE,CAAI,EAAa,EAAE,EAJR,EAKpB,CAEA,QAAS2T,aAAY,CAACC,CAAO,CAAc,IAAZC,EAAK,wDAAC,GAAI,CACvC1L,IAAI,CAAC4E,IAAI,CAAC6G,CAAO,CAAE,CAACvL,IAAI,CAAEwL,CAAK,CAAC,GAAI,CAAC,CAAC,CACtCC,OAAO,CAACC,IAAI,CAAC,+DAA+D,CAC9E,CAEA,GAAIpD,QAAO,CAAG,CACZ7L,IAAI,CAAE,eAA4B,IAAnBkP,EAAW,6DACpBxa,CAAY,CAAGmD,QAAQ,CAACkC,aAAa,CAAC,eAAe,CAAC,CAC1D,IAAI,CAAC+R,OAAO,CAAGoD,CAAW,EAAI,CAAC,CAACxa,CAAY,CACvC,IAAI,CAACoX,OAAO,GACjBpH,QAAQ,CAACC,MAAM,CAAC,iBAAiB,+EAEDwK,cAAc,kDACdA,cAAc,qHAIjBA,cAAc,+CACdA,cAAc,QAAM,CAC7Cza,CAAY,EACd,IAAI,CAAC0a,kBAAkB,CAAC1a,CAAY,CAAC,CAEzC,CAAC,CACDiY,QAAQ,CAAE,SAASlT,CAAI,CAAE,YACnB4V,CAAE,CAAG5V,CAAI,CAACM,aAAa,CAAC,cAAc,CAAC,CAC3C,GAAKsV,CAAE,EACPA,CAAE,CAACjD,OAAO,CAAG,IAAI,CAACkD,OAAO,CAACC,IAAI,CAAC,IAAI,CAAC,CACnC,CAAC,OAAO,CAAE,OAAO,CAAC,CAAC1Z,OAAO,CAAC,SAAA2Z,CAAG,CAAI,CACjC/V,CAAI,CAACM,aAAa,CAAC,qBAAqB,CAAC,CAAC0V,gBAAgB,CAACD,CAAG,CAAE,CAAI,CAACE,YAAY,CAACH,IAAI,CAAC,CAAI,CAAC,CAC9F,CAAC,CAAC,CACF,GAAI7a,EAAY,CAAG+E,CAAI,CAACM,aAAa,CAAC,eAAe,CAAC,CAClDrF,CAAY,EACd,IAAI,CAAC0a,kBAAkB,CAAC1a,CAAY,CAAC,CAEzC,CAAC,CACD0a,kBAAkB,CAAE,4BAAS1a,CAAY,CAAE,YACzCA,CAAY,CAACib,MAAM,CAAG,IAAI,CAACC,WAAW,CAACL,IAAI,CAAC,IAAI,CAAC,CAChD,CAAC,cAAc,CAAE,oBAAoB,CAAE,gBAAgB,CAAC,CAAC1Z,OAAO,CAAC,SAAAga,CAAM,CAAI,CAC1Enb,CAAY,CAAC+a,gBAAgB,CAACI,CAAM,CAAE,CAAI,CAACC,cAAc,CAACP,IAAI,CAAC,CAAI,CAAC,CACtE,CAAC,CACH,CAAC,CACDQ,MAAM,CAAE,MAAM,CACd,GAAIhE,MAAK,EAAG,CACV,MAAO,KAAI,CAACgE,MACd,CAAC,CACD,GAAIhE,MAAK,CAACiE,CAAC,CAAE,CACXnY,QAAQ,CAACwB,gBAAgB,CAAC,cAAc,CAAC,CAACxD,OAAO,CAAC,SAAAkB,CAAC,CAAI,CAC5C,MAAM,EAAXiZ,CAAW,GACbjZ,CAAC,CAACwC,SAAS,CAACC,MAAM,CAAC,YAAY,CAAC,CAChCzC,CAAC,CAACwC,SAAS,CAACI,GAAG,CAAC,YAAY,CAAC,GAEtB,MAAM,EAAXqW,CAAW,EAAS,MAAM,EAAXA,CAAW,GAC5BjZ,CAAC,CAACwC,SAAS,CAACI,GAAG,CAAC,wBAAwB,CAAC,CAElC,MAAM,EAAXqW,CAAW,EACbjZ,CAAC,CAACwC,SAAS,CAACC,MAAM,CAAC,YAAY,CAAE,YAAY,CAAC,CAC9C,IAAKzC,EAAC,CAACkZ,WAAW,CAClBlZ,CAAC,CAACwC,SAAS,CAACI,GAAG,CAAC,YAAY,CAAE,YAAY,CAAC,EAG3C5C,CAAC,CAACwC,SAAS,CAACC,MAAM,CAAC,YAAY,CAAC,CAEzB,KAAK,EAAVwW,CAAU,EACZjZ,CAAC,CAACwC,SAAS,CAACC,MAAM,CAAC,wBAAwB,CAE/C,CAAC,CAAC,CACQ,KAAK,GAAXwW,CAAW,EACb,IAAI,CAACE,KAAK,EAAE,CACd,IAAI,CAACH,MAAM,CAAGC,CAChB,CAAC,CACDV,OAAO,CAAE,iBAAShO,CAAE,CAAE,CACpB,IAAI,CAAC6O,OAAO,CAAC7O,CAAE,CAAC8O,OAAO,EAAI9O,CAAE,CAAC+O,MAAM,CAAC,CACrC/O,CAAE,CAACgP,MAAM,CAAC5W,WAAW,CAAC,MAAM,CAAC,CAACK,aAAa,CAAC,qBAAqB,CAAC,CAACiC,KAAK,EAC1E,CAAC,CACD0T,YAAY,CAAE,uBAAW,EACL,MAAM,EAApB,IAAI,CAAC3D,KAAe,EAAkB,SAAS,EAAvB,IAAI,CAACA,KAAkB,GACjD,IAAI,CAACoE,OAAO,EAChB,CAAC,CACDP,WAAW,CAAE,sBAAW,CACJ,MAAM,EAApB,IAAI,CAAC7D,KAAe,GACtB,IAAI,CAACA,KAAK,CAAG,KAAK,CACtB,CAAC,CACD+D,cAAc,CAAE,yBAAW,CACzB,IAAI,CAAC/D,KAAK,CAAG,SACf,CAAC,CACDmE,KAAK,CAAE,gBAAW,CAChBrY,QAAQ,CAACwB,gBAAgB,CAAC,yBAAuB,CAAC,CAACxD,OAAO,CAAC,SAAAuB,CAAC,QAAIA,EAAC,CAACa,KAAK,CAAG,EAAE,EAC9E,CAAC,CACDkY,OAAO,CAAE,kBAA4B,IAAnBI,EAAW,6DACvBC,CAAM,CAAG5S,CAAC,CAAC,cAAc,CAAC,CAAC+H,GAAG,CAAC,OAAO,CAAC,CAAClI,KAAK,CAAC,wBAAwB,CAAC,CAC3E+S,CAAM,CAAqB,CAAC,EAAlBA,CAAM,CAACla,MAAW,CAAI,SAAS,CAACka,CAAM,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAClO,IAAI,CAAC,GAAG,CAAC,CAAG,EAAE,CAC3E,GAAIrB,EAAG,CAAGwP,aAAa,CAAC,eAAe,CAACxa,IAAI,CAACya,MAAM,EAAE,CAACH,CAAM,EAAED,CAAW,CAAG,SAAS,CAAG,EAAE,CAAC,CAC3F1Y,QAAQ,CAACwB,gBAAgB,CAAC,eAAe,CAAC,CAACxD,OAAO,CAAC,SAAA+a,CAAG,QAAIA,EAAG,CAACC,GAAG,CAAG3P,CAAG,EAAC,CACxE,IAAI,CAAC6K,KAAK,CAAG,MACf,CACF,CAAC,CAED,QAAS+E,eAAc,CAACC,CAAK,CAAE,OAKjB7a,IAAI,CAAC8a,KAAK,OAJV,IAAI,CAAZD,CAAY,WACJA,CAAK,MAEA,GAAO,CAAfA,CAAe,WACZ,EAAWA,CAAK,CAAC,GAAI,CAAC,iBAGtB,EAAWA,CAAK,CAAC,GAAM,CAAC,CAAC,EAAE,MAEzC,CAEA,GAAMrE,cAAa,CAAG,CACpBuE,WAAW,CAAE,qBAAS/e,CAAK,CAAEuH,CAAI,CAAuB,CAKtD,OALiCyX,EAAa,6DAC1CC,CAAQ,CAAG,CAAC1X,CAAI,CAACmQ,OAAO,CAACuH,QAAQ,CACnCC,CAAS,CAAGD,CAAQ,CAAGvT,CAAC,CAACnE,CAAI,CAAC,CAAC6C,IAAI,CAAC,aAAa,CAAC,CAAChG,MAAM,CACzD+a,CAAS,CAAGnf,CAAK,CAACoE,MAAM,CACxBc,CAAC,CAAG,CAAC,CACAga,CAAS,EAAIC,CAAS,CAAEja,CAAC,EAAE,CAAE,CAClC,GAAIka,EAAY,CAAG,IAAI,CAACC,UAAU,CAACrf,CAAK,CAACkF,CAAC,CAAC,CAAEqC,CAAI,CAAEyX,CAAa,CAAC,CACjEE,CAAS,EAAIE,CAAY,CACzBD,CAAS,EACX,CACiB,CAAC,EAAdD,CAAc,EAAIC,CAAS,EAC7BhO,IAAI,CAAC4L,IAAI,CAAC9Z,EAAE,CAACnC,gBAAgB,CACjC,CAAC,CACDue,UAAU,CAAE,oBAAStf,CAAI,CAAEwH,CAAI,CAAuB,YAArByX,CAAa,6DACxCM,CAAE,CAAG,CAAC,CAAC,CAEPC,CAAE,CAAGxf,CAAI,CAACuF,IAAI,CAACsF,KAAK,CAAC,GAAG,CAAC,CAK7B,GAJA0U,CAAE,CAACE,GAAG,CAAiB,CAAC,CAAdD,CAAE,CAACnb,MAAW,CAAGmb,CAAE,CAACE,GAAG,EAAE,CAAClS,WAAW,EAAE,CAAG,EAAE,CACxC,MAAM,EAAhB+R,CAAE,CAACE,GAAa,GAClBF,CAAE,CAACE,GAAG,CAAG,KAAK,EAGsB,GAAG,EAAvCjY,CAAI,CAACmQ,OAAO,CAACgI,mBAA0B,EAEvC,CAAC3R,CAAC,CAACrG,QAAQ,CAACH,CAAI,CAACmQ,OAAO,CAACiI,gBAAgB,CAAC/U,KAAK,CAAC,GAAG,CAAC,CAAE0U,CAAE,CAACE,GAAG,CAAC,CAG7D,MADArO,KAAI,CAACkD,GAAG,WAAItU,CAAI,CAACuF,IAAI,cAAKrC,EAAE,CAAClC,mBAAmB,MAAI,CAC7C,CAAC,CAMV,GAJAue,CAAE,CAACM,KAAK,CAAGL,CAAE,CAAClP,IAAI,CAAC,GAAG,CAAC,CAEvBiP,CAAE,CAACO,aAAa,CAAGjB,cAAc,CAAC7e,CAAI,CAAC+f,IAAI,CAAC,CAEV,CAAC,CAAC,EAAhC/f,CAAI,CAACgL,IAAI,CAACjH,OAAO,CAAC,OAAO,CAAO,CAAE,CACpC,GAAIic,EAAM,CAAG,GAAIC,WAAY,CAC7BD,CAAM,CAACtC,MAAM,CAAG,SAAArO,CAAE,CAAI,CACpBkQ,CAAE,CAACZ,GAAG,CAAGtP,CAAE,CAACgP,MAAM,CAAC6B,MAAM,CACzB,CAAI,CAACC,OAAO,CAACngB,CAAI,CAAEuf,CAAE,CAAE/X,CAAI,CAAEyX,CAAa,CAC5C,CAAC,CACDe,CAAM,CAACI,aAAa,CAACpgB,CAAI,CAAEuf,CAAE,CAAE/X,CAAI,CACrC,CAAC,IAEC,KAAI,CAAC2Y,OAAO,CAACngB,CAAI,CAAEuf,CAAE,CAAE/X,CAAI,CAAEyX,CAAa,CAAC,CAE7C,MAAO,EACT,CAAC,CACDkB,OAAO,CAAE,iBAASngB,CAAI,CAAEqgB,CAAK,CAAE7Y,CAAI,CAAuB,IAArByX,EAAa,6DAC5CqB,CAAK,CAAG,IAAI,CAACC,KAAK,CAAC7c,IAAI,CAAC1D,CAAI,CAAC,CAAC,CAAC,CACnCwH,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,CAAC+N,kBAAkB,CAAC,WAAW,0CAC3CoJ,CAAa,CAAG,iBAAiB,CAAG,EAAE,4BAAiBqB,CAAK,uBAAYtgB,CAAI,CAACuF,IAAI,6DAEnG8a,CAAK,CAAC1B,GAAG,oBAAe0B,CAAK,CAAC1B,GAAG,MAAO6B,mBAAmB,CAACH,CAAK,CAACZ,GAAG,CAAC,mEAE9CY,CAAK,CAACR,KAAK,+BAAmBZ,CAAa,CAAG,WAAW,CAAG,EAAE,kGAChB/b,EAAE,CAACjC,QAAQ,qPAGdiC,EAAE,CAAChC,UAAU,8OAGZgC,EAAE,CAAC/B,YAAY,qNAKzF,CACF,IAAI,CAACsf,UAAU,CAACjZ,CAAI,CAAC,CACrB,GAAIkZ,EAAM,CAAGlZ,CAAI,CAACM,aAAa,oCAA4BwY,CAAK,QAAK,CACnE3B,CAAG,GAAQ,CACXgC,CAAU,CAAG,iBAAMD,EAAM,CAAC5Y,aAAa,YAAY,CAACmS,SAAS,WACxDoG,CAAK,CAACZ,GAAG,CAACmB,WAAW,EAAE,SAAIjC,CAAG,aAAQA,CAAG,CAACkC,YAAY,gBAAIlC,CAAG,CAACmC,aAAa,EAAI,EAAE,cAAMT,CAAK,CAACP,aAAa,CAAE,EAC/GO,CAAK,CAAC1B,GAAG,EACXA,CAAG,CAAG+B,CAAM,CAAC5Y,aAAa,CAAC,KAAK,CAAC,CACjC6W,CAAG,CAACjB,MAAM,CAAGiD,CAAU,CACvBhC,CAAG,CAACoC,OAAO,CAAGJ,CAAU,EAErBA,CAAU,EAAE,CACjBD,CAAM,CAACM,IAAI,CAAGX,CAAK,CAACZ,GAAG,CACvB,IAAI,CAACwB,WAAW,CAACtV,CAAC,CAAC+U,CAAM,CAAC,CAC5B,CAAC,CACDD,UAAU,CAAE,oBAASjZ,CAAI,CAAE,CACzB,GAAI0Z,EAAK,CAAG1Z,CAAI,CAACJ,gBAAgB,CAAC,aAAa,CAAC,CAAC/C,MAAM,CACrD6a,CAAQ,CAAG,CAAC1X,CAAI,CAACmQ,OAAO,CAACuH,QAAQ,CACnC1X,CAAI,CAACF,SAAS,CAAC+P,MAAM,CAAC,eAAe,CAAU,CAAC,CAAT6J,CAAS,CAAC,CACjD1Z,CAAI,CAACF,SAAS,CAAC+P,MAAM,CAAC,eAAe,CAAE6J,CAAK,EAAIhC,CAAQ,CAAC,CACzD1X,CAAI,CAACM,aAAa,CAAC,aAAa,CAAC,CAACqZ,SAAS,CAAW,CAAC,CAATD,CAAS,WAChDhe,EAAE,CAACjD,KAAK,iBAAQihB,CAAK,aAAIhC,CAAQ,gBACjChc,EAAE,CAAClD,IAAI,CAChB,CAAC,CACDihB,WAAW,CAAE,qBAASG,CAAG,CAAE,CACzB,GAAI/V,EAAC,CAAG+V,CAAG,CAAC/W,IAAI,CAAC,QAAQ,CAAC,CAACO,GAAG,EAAE,CAC9BiV,CAAK,CAAG,CAACuB,CAAG,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAIhW,CAAC,CAAGA,CAAC,CAAG,OAAO,CAC5D+V,CAAG,CAAC,CAAC,CAAC,CAACrS,KAAK,WAAM8Q,CAAK,aAAIuB,CAAG,CAAC,CAAC,CAAC,CAACJ,IAAI,CACxC,CAAC,CACDM,SAAS,CAAE,mBAAS9Z,CAAI,CAAE+Z,CAAE,CAAE,YAC5B/Z,CAAI,CAACJ,gBAAgB,CAAC,aAAa,CAAC,CAACxD,OAAO,CAAC,SAAC4d,CAAE,CAAErc,CAAC,CAAK,CACtDoc,CAAE,CAAC5R,MAAM,CAAC,aAAa,CAAE,CAAI,CAAC4Q,KAAK,CAAC,CAACiB,CAAE,CAAC7J,OAAO,CAAC2I,KAAK,CAAC,CAAC,CACnDkB,CAAE,CAACla,SAAS,CAACK,QAAQ,CAAC,YAAY,CAAC,EACrC4Z,CAAE,CAAC5R,MAAM,mBAAYxK,CAAC,EAAI,CAAC,CAAC,CAC9B,GAAI0a,EAAK,CAAG2B,CAAE,CAAC1Z,aAAa,CAAC,QAAQ,CAAC,CAAC9B,KAAK,CACxCwb,CAAE,CAACla,SAAS,CAACK,QAAQ,CAAC,gBAAgB,CAAC,EAAY,EAAE,GAAVkY,CAAU,CACvD0B,CAAE,CAAC5R,MAAM,oBAAaxK,CAAC,EAAI,CAAC,CAAC,CAE7Boc,CAAE,CAAC5R,MAAM,oBAAaxK,CAAC,EAAI0a,CAAK,CACpC,CAAC,CACH,CAAC,CACDU,KAAK,CAAE,EAAE,CACT5R,SAAS,GAAO,CAChBZ,IAAI,CAAE,cAASvG,CAAI,CAAE,CAEnB,GADA,IAAI,CAACqS,OAAO,CAAGrS,CAAI,CAACM,aAAa,CAAC,WAAW,CAAC,EAAI,YAAY,EAAIhB,OAAM,CACpE,IAAI,CAAC+S,OAAO,CAAE,CAChB,GAAI4H,EAAK,CAAG,IAAI,CAChB9V,CAAC,CAAC,MAAM,CAAC,CACR+V,EAAE,CAAC,OAAO,CAAE,cAAc,CAAE,SAASrS,CAAE,CAAE,CACxCA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpB,GAAI8I,EAAM,CAAGhW,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,aAAa,CAAC,CAC3CuV,CAAK,CAAClB,KAAK,CAAC,CAACoB,CAAM,CAAC3N,IAAI,CAAC,OAAO,CAAC,CAAC,CAAG,IAAI,CACzC,GAAId,EAAK,CAAGyO,CAAM,CAACzV,OAAO,CAAC,qBAAqB,CAAC,CACjDyV,CAAM,CAACpa,MAAM,EAAE,CACfka,CAAK,CAAChB,UAAU,CAACvN,CAAK,CAAC,CAAC,CAAC,CAC3B,CAAC,CAAC,CACDwO,EAAE,CAAC,OAAO,CAAE,aAAa,CAAE,UAAa,YACvC/V,CAAC,CAAC,IAAI,CAAC,CAACiW,WAAW,CAAC,aAAa,CAAC,CAClCxV,UAAU,CAAC,iBAAMT,EAAC,CAAC,CAAI,CAAC,CAACtB,IAAI,CAAC,OAAO,CAAC,CAACwX,MAAM,EAAE,EAAE,GAAG,CACtD,CAAC,CAAC,CACDH,EAAE,CAAC,OAAO,CAAE,mBAAmB,CAAE,SAASrS,CAAE,CAAE,CAC7CA,CAAE,CAACwJ,eAAe,EACpB,CAAC,CAAC,CACD6I,EAAE,CAAC,OAAO,CAAE,eAAe,CAAE,SAASrS,CAAE,CAAE,CACzCA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpBlN,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,aAAa,CAAC,CAAC0V,WAAW,CAAC,YAAY,CACzD,CAAC,CAAC,CACDF,EAAE,CAAC,OAAO,CAAE,iBAAiB,CAAE,SAASrS,CAAE,CAAE,CAC3CA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpB,GAAI8I,EAAM,CAAGhW,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,aAAa,CAAC,CAC3CyV,CAAM,CAACtX,IAAI,CAAC,QAAQ,CAAC,CAAC0O,IAAI,CAAC,UAAU,CAAE,CAAC4I,CAAM,CAACN,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAC1EM,CAAM,CAACC,WAAW,CAAC,gBAAgB,CAAC,CACpCH,CAAK,CAACR,WAAW,CAACU,CAAM,CAC1B,CAAC,CAAC,CACDD,EAAE,CAAC,QAAQ,CAAE,QAAQ,CAAE,UAAa,CACnCD,CAAK,CAACR,WAAW,CAACtV,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,aAAa,CAAC,CAClD,CAAC,CAAC,CACDwV,EAAE,CAAC,QAAQ,CAAE,kBAAkB,CAAE,SAASrS,CAAE,CAAE,CAC7C,GAAI7H,EAAI,CAAGmE,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CACpDuV,CAAK,CAACzC,WAAW,CAAC3P,CAAE,CAACgP,MAAM,CAACpe,KAAK,CAAEuH,CAAI,CAAC,CACxC,IAAI,CAACxB,KAAK,CAAG,IACf,CAAC,CAAC,CACD0b,EAAE,CAAC,OAAO,CAAE,YAAY,CAAE,SAASrS,CAAE,CAAE,CACtCA,CAAE,CAACC,cAAc,EAAE,CACnB3D,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,qBAAqB,CAAC,CAAC7B,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC+E,KAAK,EAC1E,CAAC,CAAC,CACDsS,EAAE,CAAC,OAAO,CAAE,qBAAqB,CAAE,SAASrS,CAAE,CAAE,CAG/C,OACMyS,EAAI,CAHNC,CAAK,CAAG,CAAC1S,CAAE,CAAC2S,aAAa,EAAI3S,CAAE,CAAC4S,aAAa,CAACD,aAAa,EAAED,KAAK,CACpEG,CAAG,CAAG,EAAE,CACD/c,CAAC,CAAG,CAAC,CAAGA,CAAC,CAAG4c,CAAK,CAAC1d,MAAM,CAAGc,CAAC,EAAE,CACjC2c,CAAI,CAAGC,CAAK,CAAC5c,CAAC,CAAC,CACF,MAAM,EAAnB2c,CAAI,CAAC/P,IAAc,EACrBmQ,CAAG,CAACxe,IAAI,CAACoe,CAAI,CAACK,SAAS,EAAE,CAAC,CAG9BV,CAAK,CAACzC,WAAW,CAACkD,CAAG,CAAE,IAAI,IAC7B,CAAC,CACH,CAAC,IAECvW,EAAC,CAAC,MAAM,CAAC,CACR+V,EAAE,CAAC,OAAO,CAAE,cAAc,CAAE,SAASrS,CAAE,CAAE,CACxCA,CAAE,CAACC,cAAc,EAAE,CACnB3D,CAAC,CAAC,IAAI,CAAC,CAAC6D,MAAM,EAAE,CAACnF,IAAI,CAAC,kBAAkB,CAAC,CACtCO,GAAG,CAAC,IAAI,CAAC,CACTmB,WAAW,CAAC,sBAAsB,CACvC,CAAC,CAAC,CACD2V,EAAE,CAAC,QAAQ,CAAE,kBAAkB,CAAE,UAAW,CAC3C/V,CAAC,CAAC,IAAI,CAAC,CAACiW,WAAW,CAAC,sBAAsB,CAAE,IAAI,CAAC5b,KAAK,CACxD,CAAC,CAAC,CAEJ,IAAI,CAAC2I,SAAS,GAGhB,CAAC,CACD+L,QAAQ,CAAE,SAASlT,CAAI,CAAE,CAClB,IAAI,CAACmH,SAAS,EACjB,IAAI,CAACZ,IAAI,CAACvG,CAAI,CAAC,CACjB,GAAIia,EAAK,CAAG,IAAI,CAChB,GAAI,IAAI,CAAC5H,OAAO,CAEdlO,CAAC,CAACnE,CAAI,CAAC,CACNka,EAAE,CAAC,2CAA2C,CAAE,SAASrS,CAAE,CAAE,CAC5DA,CAAE,CAAC4S,aAAa,CAACpJ,eAAe,EAAE,CACN,UAAU,EAAhCxJ,CAAE,CAACgP,MAAM,CAAC+D,QAAsB,EAA0B,OAAO,EAA7B/S,CAAE,CAACgP,MAAM,CAAC+D,QAAmB,EACrE/S,CAAE,CAACC,cAAc,EACrB,CAAC,CAAC,CACDoS,EAAE,CAAC,MAAM,CAAE,SAASrS,CAAE,CAAE,CACvBA,CAAE,CAAC4S,aAAa,CAACpJ,eAAe,EAAE,CAC9BxJ,CAAE,CAAC4S,aAAa,CAACI,YAAY,EAAIhT,CAAE,CAAC4S,aAAa,CAACI,YAAY,CAACpiB,KAAK,CAACoE,MAAM,GAC7EgL,CAAE,CAAC4S,aAAa,CAAC3S,cAAc,EAAE,CACjCmS,CAAK,CAACzC,WAAW,CAAC3P,CAAE,CAAC4S,aAAa,CAACI,YAAY,CAACpiB,KAAK,CAAE,IAAI,CAAC,CAEhE,CAAC,CAAC,CAECuH,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,EACvCwa,QAAQ,CAACC,MAAM,CAAC/a,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,CAAE,CACtD0a,SAAS,CAAE,GAAG,CACdC,MAAM,CAAE,WACV,CAAC,CAAC,CAGJjb,CAAI,CAACJ,gBAAgB,CAAC,wBAAwB,CAAC,CAACxD,OAAO,CAAC,SAAAuB,CAAC,QAAIA,EAAC,CAACud,eAAe,CAAC,MAAM,CAAC,EAAC,KAEpF,CACH,GAAIC,EAAI,CAAGnb,CAAI,CAACM,aAAa,CAAC,YAAY,CAAC,CAC3C,GAAI,CAAC6a,CAAI,CAAE,OACXA,CAAI,CAACC,sBAAsB,CAACtb,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC,CACxDob,CAAI,CAACpb,MAAM,EACb,CACF,CAAC,CACD0W,KAAK,CAAE,eAASzW,CAAI,CAAoB,YAAlBqb,CAAU,6DAC1B,IAAI,CAAChJ,OAAO,GACdrS,CAAI,CAACJ,gBAAgB,CAAC,aAAa,CAAC,CAACxD,OAAO,CAAC,SAAA4d,CAAE,CAAI,CAC7CqB,CAAU,GACZ,CAAI,CAACtC,KAAK,CAACiB,CAAE,CAAC7J,OAAO,CAAC2I,KAAK,CAAC,CAAG,IAAI,EACrCkB,CAAE,CAACja,MAAM,EACX,CAAC,CAAC,CACF,IAAI,CAACkZ,UAAU,CAACjZ,CAAI,CAAC,CAEzB,CACF,CAAC,CAED,QAASgZ,oBAAmB,CAACf,CAAG,CAAE,CAChC,GAAIqD,EAAI,CAAG,CAAC,CACZrD,CAAG,CAACjS,WAAW,EAAE,CAAC3C,KAAK,CAAC,EAAE,CAAC,CAACkY,OAAO,EAAE,CAACnf,OAAO,CAAC,SAACof,CAAI,CAAE7d,CAAC,CAAK,CACzD6d,CAAI,CAAGA,CAAI,CAAC/d,UAAU,CAAC,CAAC,CAAC,CACzB6d,CAAI,EAAIE,CAAI,EAAI,EAAE,CAAJ7d,CAAI,CAAG,CAAC,CACxB,CAAC,CAAC,CACF,GAAI8d,EAAK,CAAGH,CAAI,CAAG,GAAG,CACtB,+EAAsEG,CAAK,uDAA2CxD,CAAG,gBAC3H,CAEA,QAASyD,gBAAe,CAAC7T,CAAE,CAAE,CAC3BA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAIqT,EAAI,CAAG/c,QAAQ,CAACud,aAAa,CAC/B3b,CAAI,CAAGmb,CAAI,CAAClb,WAAW,CAAC,qBAAqB,CAAC,CAC5CD,CAAI,EACN4b,IAAI,CAACC,UAAU,CAAC7b,CAAI,CAExB,CAEA,QAAS8b,WAAU,CAACC,CAAI,CAAE,CAExB3d,QAAQ,CAAC6F,QAAQ,CAAC8X,IAAI,CAAGA,CAC3B,CAEA,GAAMH,KAAI,CAAG,CACXC,UAAU,CAAE,oBAAS7b,CAAI,CAAEgc,CAAI,CAAE,YAC3Bhc,CAAI,CAACM,aAAa,CAAC,0CAAwC,CAAC,CAC9D2b,QAAQ,CAACtO,OAAO,CAAC,CAAEuO,KAAK,GAAO,CAAC,CAAC,CAChCjL,IAAI,CAAC,WAAuB,IAApBkL,EAAQ,GAARA,QAAQ,CAAEC,CAAG,GAAHA,GAAG,CACpB,CAAI,CAACC,kBAAkB,CAACrc,CAAI,CAAEgc,CAAI,CAAEG,CAAQ,CAC9C,CAAC,CAAC,SACI,CAAC,SAAArP,CAAG,CAAI,CACZyI,OAAO,CAAC+G,KAAK,CAAC,WAAW,CAAExP,CAAG,CAAC,CACpB,mBAAmB,EAA1BA,CAA0B,EAC5B,CAAI,CAACyP,WAAW,CAACrgB,IAAI,CAAC0N,IAAI,CAAC4L,IAAI,CAAC9Z,EAAE,CAACN,cAAc,CAAC,CACtD,CAAC,CAAC,CAGF,IAAI,CAACihB,kBAAkB,CAACrc,CAAI,CAAEgc,CAAI,CAEtC,CAAC,CACDK,kBAAkB,CAAE,4BAASrc,CAAI,CAAEgc,CAAI,CAA0B,YAAxBQ,CAAgB,6DACnDC,CAAc,CAAGjW,CAAC,CAACkW,KAAK,CAAC,IAAI,CAACH,WAAW,CAAC,CAC9C3X,UAAU,CAAC,UAAM,CACf6X,CAAc,CAACrgB,OAAO,CAAC,SAAAyD,CAAC,CAAI,CAC1B+J,IAAI,CAAC+S,SAAS,CAAC9c,CAAC,CAClB,CAAC,CACH,CAAC,CAAE,GAAG,CAAC,CACP,IAAI,CAAC0c,WAAW,CAAG,EAAE,IACjBK,EAAS,CAAG,SAAC/c,CAAC,KAAE+D,EAAC,wDAAC,CAAC,CAAC,OAAK,EAAI,CAAC2Y,WAAW,CAACrgB,IAAI,CAAC0N,IAAI,CAACkD,GAAG,CAACjN,CAAC,CAAE+D,CAAC,CAAC,CAAC,EAG9DiZ,CAAY,CAAG7c,CAAI,CAAChF,OAAO,CAC/B,GAAI6hB,CAAY,EAAI,CAACA,CAAY,CAACre,KAAK,CAAC3B,MAAM,CAE5C,MADAggB,EAAY,CAACta,KAAK,EAAE,CAJJ,QAAdua,YAAW,CAAIjd,CAAC,KAAE+D,EAAC,wDAAC,CAAC,CAAC,OAAK,EAAI,CAAC2Y,WAAW,CAACrgB,IAAI,CAAC0N,IAAI,CAAC4L,IAAI,CAAC3V,CAAC,CAAE+D,CAAC,CAAC,CAAC,EAKhDlI,EAAE,CAAC7G,YAAY,CAAC,CAGrCmL,CAAI,CAACF,SAAS,CAACI,GAAG,CAAC,cAAc,CAAC,CAClC,GAAI6Z,EAAE,CAAG,GAAIgD,SAAQ,CAAC/c,CAAI,CAAC,CAEP,WAAW,EAA3B,MAAOgc,EAAoB,EAC7BjC,CAAE,CAAC5R,MAAM,CAAC,SAAS,CAAE6T,CAAI,CAAC,CAExBQ,CAAgB,EAClBzC,CAAE,CAAC5R,MAAM,CAAC,oBAAoB,CAAEqU,CAAgB,CAAC,CAG/CvJ,aAAa,CAACZ,OAAO,EACvBY,aAAa,CAAC6G,SAAS,CAAC9Z,CAAI,CAAE+Z,CAAE,CAAC,CACnC,GAAIiD,EAAE,CAAG,GAAIC,eAAgB,CAC7BlD,CAAE,CAAC5R,MAAM,CAAC,MAAM,CAAE,CAAC,CAAC,CAGpB,IAAI,CAAC+U,SAAS,CAAGtX,YAAY,EAAE,CAC/BmU,CAAE,CAAC5R,MAAM,CAAC,OAAO,CAAE,IAAI,CAAC+U,SAAS,CAAC,CAElCF,CAAE,CAACG,IAAI,CAAC,MAAM,CAAEnd,CAAI,CAACod,MAAM,CAAC,CAC5BJ,CAAE,CAAC9G,MAAM,CAAG,UAAK,CAEf,GADAlW,CAAI,CAACF,SAAS,CAACC,MAAM,CAAC,cAAc,CAAC,CACnB,GAAG,GAAjBid,CAAE,CAACK,MAAc,CAEnB,WADAT,EAAS,CAAClhB,EAAE,CAAC7D,QAAQ,CAAC,CAGvB,EAAE,CAACuE,OAAO,CAAC2E,IAAI,CAACf,CAAI,CAACJ,gBAAgB,CAAC,sBAAsB,CAAC,CAAE,SAAAD,CAAE,QAAIA,EAAE,CAACG,SAAS,CAACC,MAAM,CAAC,qBAAqB,CAAC,EAAC,CAC7GqS,OAAO,CAACC,OAAO,GACjBD,OAAO,CAACE,KAAK,CAAG,MAAM,EACxB,GAAIgL,EAAG,CAAG,IAAI,CACd,GAAI,CACFA,CAAG,CAAGpT,IAAI,CAACqT,KAAK,CAACP,CAAE,CAACb,QAAQ,CAC9B,CACA,MAAM/K,CAAC,CAAE,CAEP,WADAoM,qBAAoB,CAACR,CAAE,CAACb,QAAQ,CAElC,CACA,GAAImB,CAAG,CAAChB,KAAK,CAAE,CAGb,GAFIgB,CAAG,CAACG,aAAa,GACnBH,CAAG,CAAChB,KAAK,WAAMgB,CAAG,CAAChB,KAAK,gBAAOgB,CAAG,CAACG,aAAa,CAAE,GAChDH,CAAG,CAACI,UAAU,CAiBhBd,CAAS,CAACU,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,KAT/B,IAPsB,KAAK,EAAvBwT,CAAG,CAACI,UAAmB,EACzBd,CAAS,WAAIU,CAAG,CAAChB,KAAK,wBAAcqB,UAAU,4CAAgCjiB,EAAE,CAAC5D,OAAO,UAAS,CAACgS,IAAI,CAAE,CAAC,CAAEd,IAAI,GAAM,CAAC,CAAC,CAEnG,gBAAgB,EAAlCsU,CAAG,CAACI,UAA8B,GACpCd,CAAS,CAACU,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,CAC/B9J,CAAI,CAACM,aAAa,CAAC,2BAAyB,CAAC,CAAC9B,KAAK,CAAG,IAAI,EAEtC,cAAc,EAAhC8e,CAAG,CAACI,UAA4B,CAAE,CACpCd,CAAS,CAACU,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,CAC/B,GAAI8T,EAAM,CAAG5d,CAAI,CAACM,aAAa,sCAA8Bgd,CAAG,CAACO,UAAU,CAACC,cAAc,aAAIR,CAAG,CAACO,UAAU,CAACE,QAAQ,CAAC,CAAC,QAAK,CACxHH,CAAM,EACRA,CAAM,CAAC9d,SAAS,CAACI,GAAG,CAAC,qBAAqB,CAE9C,CAKF,MACF,CAEMod,CAAG,CAACU,OAAO,EACbzI,OAAO,CAAC0I,GAAG,CAAC,UAAU,CAAEX,CAAG,CAACU,OAAO,CAAC,CAEtChL,SAAS,CAAChT,CAAI,CAAC,CACXA,CAAI,CAACF,SAAS,CAACK,QAAQ,CAAC,kBAAkB,CAAC,EAC7CqR,YAAY,CAACxR,CAAI,CAAC,CAIpB,GAAIke,EAAS,CAAGle,CAAI,CAACM,aAAa,CAAC,kCAAgC,CAAC,CAClE6d,CAAI,CAAGD,CAAS,EAAIA,CAAS,CAACxN,OAAO,CACb,CAAC,EAAvB4M,CAAG,CAACc,cAAmB,CAcrBD,CAAI,CACNrC,UAAU,WAAI7E,aAAa,aAAIqG,CAAG,CAAChR,KAAK,iBAAQgR,CAAG,CAACe,OAAO,UAAQ,CAGnEvC,UAAU,WAAI7E,aAAa,aAAIqG,CAAG,CAAChR,KAAK,EAAG,CAjB7CY,QAAQ,CAAC3N,GAAG,CAAC,CACX8M,QAAQ,CAAElZ,MAAM,CAAGmqB,CAAG,CAACc,cAAc,CAAC,GAAG,CAACd,CAAG,CAAChR,KAAK,CAAG,IAAI,CAC1DgB,YAAY,CAAEgQ,CAAG,CAACe,OAAO,CAAC,GAAG,CAACf,CAAG,CAAChR,KAAK,CACvCkB,OAAO,CAAE,iBAACV,CAAG,CAAK,CAChByI,OAAO,CAAC+G,KAAK,CAACxP,CAAG,CAAC,CAClBgP,UAAU,WAAI7E,aAAa,aAAIqG,CAAG,CAAChR,KAAK,iBAAQgR,CAAG,CAACc,cAAc,kBAASd,CAAG,CAACe,OAAO,EAAG,CACnFlrB,MAAM,EACViL,QAAQ,CAAC6F,QAAQ,CAACqa,MAAM,EAC5B,CAAC,CACD7Q,SAAS,CAAE,2BAAMtJ,EAAC,kCAA2BmZ,CAAG,CAACc,cAAc,qBAAmB,CAACre,MAAM,EAAE,CAC7F,CAAC,CAWP,CAAC,CACDid,CAAE,CAACzD,OAAO,CAAG,SAAAnI,CAAC,CAAI,CAIhB,MAHApR,EAAI,CAACF,SAAS,CAACC,MAAM,CAAC,cAAc,CAAC,CACrCwV,OAAO,CAAC0I,GAAG,CAAC7M,CAAC,CAAC,KACdwL,EAAS,CAAClhB,EAAE,CAAC7D,QAAQ,CAEvB,CAAC,CACDmlB,CAAE,CAACuB,IAAI,CAACxE,CAAE,CACZ,CAAC,CACDwC,WAAW,CAAE,EAAE,CACfiC,UAAU,CAAE,oBAASzE,CAAE,CAAiB,IAAf0E,EAAQ,wDAAC,IAAI,CAChCzB,CAAE,CAAG,GAAIC,eAAgB,CAC7BlD,CAAE,CAAC5R,MAAM,CAAC,MAAM,CAAE,CAAC,CAAC,CACpB4R,CAAE,CAAC5R,MAAM,CAAC,YAAY,CAAE,CAAC,CAAC,CAC1B6U,CAAE,CAACG,IAAI,CAAC,MAAM,CAAE/e,QAAQ,CAACsgB,KAAK,CAACC,OAAO,CAACvB,MAAM,CAAC,CAC9CJ,CAAE,CAAC9G,MAAM,CAAG,UAAK,CACf,GAAkB,GAAG,GAAjB8G,CAAE,CAACK,MAAc,CAEnB,MADAzT,KAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC7D,QAAQ,CAAC,CACd4mB,CAAQ,IAAO,CAExB,GAAInB,EAAG,CAAG,IAAI,CACd,GAAI,CACFA,CAAG,CAAGpT,IAAI,CAACqT,KAAK,CAACP,CAAE,CAACb,QAAQ,CAC9B,CACA,MAAM/K,CAAC,CAAE,CAEP,MADAoM,qBAAoB,CAACR,CAAE,CAACb,QAAQ,CAAC,CAC1BsC,CAAQ,IACjB,CAGA,GAFIA,CAAQ,EACVA,CAAQ,CAACnB,CAAG,CAAC9Q,IAAI,CAAC,CAChB8Q,CAAG,CAAChB,KAAK,CAIX,MAHIgB,EAAG,CAACG,aAAa,GACnBH,CAAG,CAAChB,KAAK,WAAMgB,CAAG,CAAChB,KAAK,gBAAOgB,CAAG,CAACG,aAAa,CAAE,MACpD7T,KAAI,CAACkD,GAAG,CAACwQ,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,CAI9B3F,CAAC,CAAC,MAAM,CAAC,CAACI,WAAW,CAAC,iBAAiB,CAAC,CACxCJ,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CACzC,GAAIqa,EAAa,CAAG,EAAE,CACpBC,CAAU,CAAG,EAAE,CACjBvB,CAAG,CAAC9Q,IAAI,CAACpQ,OAAO,CAAC,SAAAke,CAAI,CAAI,OAClBA,EAAI,CAACwE,OAAO,MAIjBF,CAAa,CAAC1iB,IAAI,CAACoe,CAAI,CAACjW,EAAE,CAAC,CACvB,CAAEF,CAAC,CAAC,gCAA8B,CAAC,CAACtH,MAAM,EAC5CsH,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,MALzCsa,EAAU,CAAC3iB,IAAI,CAACoe,CAAI,CAMxB,CAAC,CAAC,CACF,GAAIyE,EAAG,CAAG,EAAE,CACRH,CAAa,CAAC/hB,MAAM,GACtB+hB,CAAa,CAAGA,CAAa,CAAC9d,GAAG,CAAC,SAAA9I,CAAI,QAAI,GAAG,CAACA,CAAI,EAAC,CACnD+mB,CAAG,EAA2B,CAAC,CAAxBH,CAAa,CAAC/hB,MAAU,WAC1BnB,EAAE,CAACzD,KAAK,aAAI2mB,CAAa,CAAC9V,IAAI,CAAC,IAAI,CAAC,aAAIpN,EAAE,CAACpD,aAAa,gBACxDoD,EAAE,CAAC1D,IAAI,aAAI4mB,CAAa,CAAC,CAAC,CAAC,aAAIljB,EAAE,CAACrD,QAAQ,KAAG,CAClDuR,IAAI,CAACC,IAAI,CAACkV,CAAG,CAAE,CAACjV,IAAI,CAAE,CAAC,CAAG8U,CAAa,CAAC/hB,MAAM,CAAC,CAAC,EAElDgiB,CAAU,CAACziB,OAAO,CAAC,SAAA0Q,CAAG,CAAI,CACxBlD,IAAI,CAACkD,GAAG,WAAIpR,EAAE,CAAC1D,IAAI,cAAK8U,CAAG,CAACzI,EAAE,cAAKyI,CAAG,CAACkS,OAAO,EAChD,CAAC,CAEL,CAAC,CACDhC,CAAE,CAACuB,IAAI,CAACxE,CAAE,CACZ,CAAC,CACDnf,WAAW,CAAE,qBAASmf,CAAE,CAAiB,IAAf0E,EAAQ,wDAAC,IAAI,CACjCzB,CAAE,CAAG,GAAIC,eAAgB,CAC7BlD,CAAE,CAAC5R,MAAM,CAAC,MAAM,CAAE,CAAC,CAAC,CACpB4R,CAAE,CAAC5R,MAAM,CAAC,cAAc,CAAE,CAAC,CAAC,CAG5B,IAAI,CAAC8W,UAAU,CAAGrZ,YAAY,EAAE,CAChCmU,CAAE,CAAC5R,MAAM,CAAC,OAAO,CAAE,IAAI,CAAC8W,UAAU,CAAC,CAEnCjC,CAAE,CAACG,IAAI,CAAC,MAAM,CAAE/e,QAAQ,CAACsgB,KAAK,CAACC,OAAO,CAACvB,MAAM,CAAC,CAC9CJ,CAAE,CAAC9G,MAAM,CAAG,UAAK,CACf,GAAkB,GAAG,GAAjB8G,CAAE,CAACK,MAAc,CAEnB,MADAzT,KAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC7D,QAAQ,CAAC,CACd4mB,CAAQ,IAAO,CAExB,GAAInB,EAAG,CAAG,IAAI,CACd,GAAI,CACFA,CAAG,CAAGpT,IAAI,CAACqT,KAAK,CAACP,CAAE,CAACb,QAAQ,CAC9B,CACA,MAAM/K,CAAC,CAAE,CAEP,MADAoM,qBAAoB,CAACR,CAAE,CAACb,QAAQ,CAAC,CAC1BsC,CAAQ,IACjB,CACA,GAAInB,CAAG,CAAChB,KAAK,CAIX,MAHIgB,EAAG,CAACG,aAAa,GACnBH,CAAG,CAAChB,KAAK,WAAMgB,CAAG,CAAChB,KAAK,gBAAOgB,CAAG,CAACG,aAAa,CAAE,EACpD7T,IAAI,CAACkD,GAAG,CAACwQ,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,CACvB2U,CAAQ,IAAO,CAGtBta,CAAC,CAAC,MAAM,CAAC,CAACI,WAAW,CAAC,iBAAiB,CAAC,CACxCJ,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CACzC,GAAI2a,EAAU,CAAG,EAAE,CACjBL,CAAU,CAAG,EAAE,CACjBvB,CAAG,CAAC9Q,IAAI,CAACpQ,OAAO,CAAC,SAAAke,CAAI,CAAI,OAClBA,EAAI,CAACwE,OAAO,MAIjBI,CAAU,CAAChjB,IAAI,CAACoe,CAAI,CAACjW,EAAE,CAAC,CACpB,CAAEF,CAAC,CAAC,gCAA8B,CAAC,CAACtH,MAAM,EAC5CsH,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,MALzCsa,EAAU,CAAC3iB,IAAI,CAACoe,CAAI,CAMxB,CAAC,CAAC,CACF,GAAIyE,EAAG,CAAG,EAAE,CACRG,CAAU,CAACriB,MAAM,GACnBqiB,CAAU,CAAC9iB,OAAO,CAAC,SAAAiI,CAAE,CAAI,CACvB,GAAI8a,EAAM,CAAGhb,CAAC,6BAAsBE,CAAE,MAAI,CAC1C8a,CAAM,CAACtc,IAAI,CAAC,WAAW,CAAC,CAAC9C,MAAM,EAAE,CACjCof,CAAM,CAACtc,IAAI,CAAC,YAAY,CAAC,CAACgI,IAAI,EAChC,CAAC,CAAE,CACHkU,CAAG,EAAwB,CAAC,CAArBG,CAAU,CAACriB,MAAU,WACvBnB,EAAE,CAACzD,KAAK,cAAKinB,CAAU,CAACpW,IAAI,CAAC,KAAK,CAAC,aAAIpN,EAAE,CAACZ,UAAU,gBACpDY,EAAE,CAAC1D,IAAI,cAAKknB,CAAU,CAAC,CAAC,CAAC,aAAIxjB,EAAE,CAACb,KAAK,KAAG,CAC7C+O,IAAI,CAACC,IAAI,CAACkV,CAAG,CAAE,CAACjV,IAAI,CAAE,CAAC,CAAGoV,CAAU,CAACriB,MAAM,CAAC,CAAC,EAE/CgiB,CAAU,CAACziB,OAAO,CAAC,SAAA0Q,CAAG,CAAI,CACxBlD,IAAI,CAACkD,GAAG,WAAIpR,EAAE,CAAC1D,IAAI,cAAK8U,CAAG,CAACzI,EAAE,cAAKyI,CAAG,CAACkS,OAAO,EAChD,CAAC,CAAC,CACFP,CAAQ,CAACI,CAAU,CAEvB,CAAC,CACD7B,CAAE,CAACuB,IAAI,CAACxE,CAAE,CACZ,CAAC,CACDqF,SAAS,CAAE,mBAASvf,CAAC,CAAEud,CAAM,CAAE,CAC7B,GAAIiC,EAAE,CAAGlb,CAAC,CAACtE,CAAC,CAAC,CACXka,CAAE,CAAG,GAAIgD,SAAU,CACnBC,CAAE,CAAG,GAAIC,eAAgB,CACzBqC,CAAG,CAAGD,CAAE,CAACxc,IAAI,CAAC,IAAI,CAAC,CACrByc,CAAG,CAAC3a,QAAQ,CAAC,aAAa,CAAC,CAC3BoV,CAAE,CAAC5R,MAAM,CAAC,MAAM,CAAE,CAAC,CAAC,CACpB6U,CAAE,CAACG,IAAI,CAAC,MAAM,CAAEtd,CAAC,CAAC+G,YAAY,CAAC,MAAM,CAAC,CAAC,CACvCoW,CAAE,CAAC9G,MAAM,CAAG,UAAK,CAEf,GADAoJ,CAAG,CAAC/a,WAAW,CAAC,aAAa,CAAC,CACZ,GAAG,GAAjByY,CAAE,CAACK,MAAc,CAEnB,WADAzT,KAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC7D,QAAQ,CAAC,CAGvB,GAAIylB,EAAG,CAAG,IAAI,CACd,GAAI,CACFA,CAAG,CAAGpT,IAAI,CAACqT,KAAK,CAACP,CAAE,CAACb,QAAQ,CAC9B,CACA,MAAM/K,CAAC,CAAE,CAEP,WADAoM,qBAAoB,CAACR,CAAE,CAACb,QAAQ,CAElC,CACA,GAAImB,CAAG,CAAChB,KAAK,CAIX,MAHIgB,EAAG,CAACG,aAAa,GACnBH,CAAG,CAAChB,KAAK,WAAMgB,CAAG,CAAChB,KAAK,gBAAOgB,CAAG,CAACG,aAAa,CAAE,MACpD7T,KAAI,CAACkD,GAAG,CAACwQ,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,CAI9B,GAAIyV,EAAS,CAAGF,CAAE,CAAC3a,OAAO,CAAC,WAAW,CAAC,CACrC8a,CAAU,CAAGD,CAAS,CAAC1c,IAAI,CAAC,YAAY,CAAC,CAC7B,YAAY,EAAtBua,CAAsB,GACxBoC,CAAU,CAACC,OAAO,CAACC,QAAQ,CAAC,KAAK,CAAE,cAAc,CAAC,CAAC,CACnDH,CAAS,CAAC5a,QAAQ,CAAC,iBAAiB,CAAC,EAEzB,cAAc,EAAxByY,CAAwB,GAC1BoC,CAAU,CAAC3c,IAAI,CAAC,kBAAkB,CAAC,CAAC9C,MAAM,EAAE,CAC5Cwf,CAAS,CAAChb,WAAW,CAAC,iBAAiB,CAAC,EAE5B,UAAU,EAApB6Y,CAAoB,GACtBoC,CAAU,CAACC,OAAO,CAACC,QAAQ,CAAC,MAAM,CAAE,eAAe,CAAC,CAAC,CACrDH,CAAS,CAAC5a,QAAQ,CAAC,eAAe,CAAC,EAEvB,YAAY,EAAtByY,CAAsB,GACxBoC,CAAU,CAAC3c,IAAI,CAAC,mBAAmB,CAAC,CAAC9C,MAAM,EAAE,CAC7Cwf,CAAS,CAAChb,WAAW,CAAC,eAAe,CAAC,EAExCqF,IAAI,CAACC,IAAI,CAACyT,CAAG,CAAC0B,OAAO,CAEzB,CAAC,CACDhC,CAAE,CAACuB,IAAI,CAACxE,CAAE,CACZ,CAAC,CACD4F,WAAW,CAAE,qBAAS5F,CAAE,CAA8B,IAA5B0E,EAAQ,wDAAC,IAAI,CAAE9lB,CAAK,6DACxC4R,CAAI,CAAG,OAAO,CAIlB,GAHI5R,CAAK,EACPohB,CAAE,CAAC5R,MAAM,CAAC,WAAW,CAAE,CAAC,CAAC,EAEvB4R,CAAE,CAAC6F,GAAG,CAWR7F,CAAE,CAAC5R,MAAM,CAAC,YAAY,CAAE,CAAC,CAAC,KAV1B,IAAI4R,CAAE,CAAC6F,GAAG,CAAC,QAAQ,CAAC,CACb7F,CAAE,CAAC6F,GAAG,CAAC,eAAe,CAAC,GAC1BrV,CAAI,CAAG,OAAO,EAChBwP,CAAE,CAAC5R,MAAM,CAAC,YAAY,CAAE,CAAC,CAAC,KAEvB,IAAI4R,CAAE,CAAC6F,GAAG,CAAC,eAAe,CAAC,CAC9BrV,CAAI,CAAG,OAAO,KACX,QAMP,GAAIyS,EAAE,CAAG,GAAIC,eAAgB,CAC7BlD,CAAE,CAAC5R,MAAM,CAAC,MAAM,CAAE,CAAC,CAAC,CAGpB,IAAI,CAAC0X,QAAQ,CAAGja,YAAY,EAAE,CAC9BmU,CAAE,CAAC5R,MAAM,CAAC,OAAO,CAAE,IAAI,CAAC0X,QAAQ,CAAC,CAEjC7C,CAAE,CAACG,IAAI,CAAC,MAAM,CAAE/e,QAAQ,CAACsgB,KAAK,CAACC,OAAO,CAACvB,MAAM,CAAC,CAC9CJ,CAAE,CAAC9G,MAAM,CAAG,UAAK,CACf,GAAkB,GAAG,GAAjB8G,CAAE,CAACK,MAAc,CAEnB,MADAzT,KAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC7D,QAAQ,CAAC,CACd4mB,CAAQ,CAAGA,CAAQ,CAAC,IAAI,CAAC,CAAG,IAAI,CAEzC,GAAInB,EAAG,CAAG,IAAI,CACd,GAAI,CACFA,CAAG,CAAGpT,IAAI,CAACqT,KAAK,CAACP,CAAE,CAACb,QAAQ,CAC9B,CACA,MAAM/K,CAAC,CAAE,CAEP,MADAoM,qBAAoB,CAACR,CAAE,CAACb,QAAQ,CAAC,CAC1BsC,CAAQ,CAAGA,CAAQ,CAAC,IAAI,CAAC,CAAG,IACrC,CAAC,MACGA,EAAQ,EACVA,CAAQ,CAACnB,CAAG,CAAC9Q,IAAI,CAAC,CAChB8Q,CAAG,CAAChB,KAAK,EACPgB,CAAG,CAACG,aAAa,GACnBH,CAAG,CAAChB,KAAK,WAAMgB,CAAG,CAAChB,KAAK,gBAAOgB,CAAG,CAACG,aAAa,CAAE,MACpD7T,KAAI,CAACkD,GAAG,CAACwQ,CAAG,CAAChB,KAAK,CAAE,CAACxS,IAAI,CAAE,CAAC,CAAC,CAAC,MAI9B6V,aAAW,CAACrC,CAAG,CAAC9Q,IAAI,CAExB,CAAC,CACDwQ,CAAE,CAACuB,IAAI,CAACxE,CAAE,CACZ,CACF,CAAC,CAED,QAAS+F,gBAAe,CAACC,CAAQ,CAAE,oCAChBA,CAAQ,CAACC,OAAO,EAAE,MAAnC,2BAAqC,IAA5BC,EAAI,SACX1K,OAAO,CAAC0I,GAAG,CAACgC,CAAI,CAAC,CAAC,CAAC,CAAE,IAAI,CAAGA,CAAI,CAAC,CAAC,CAAC,CACrC,CAAC,+BACH,CAEA,QAASP,SAAQ,CAAC/hB,CAAC,CAA0B,IAAxBuiB,EAAO,wDAAC,EAAE,CAAEC,CAAI,6DACnC,gBAAUA,CAAI,CAAG,EAAE,6BAAuBD,CAAO,OAAI,oFACcviB,CAAC,yBAClEwiB,CAAI,CAAG,EAAE,CAAG,QAAQ,CACxB,CAEA,QAASC,iBAAgB,CAACC,CAAK,CAAE,OAC3BA,EAAK,CAACxd,IAAI,CAAC,cAAc,CAAC,CAAChG,MAAM,MACnCuV,OAAO,CAACE,KAAK,CAAG,MAAM,OAGpB,CAACF,OAAO,CAACC,OAAO,EAClBD,OAAO,CAAC7L,IAAI,CAAC,aAAa,CAAC,CAE7B8Z,CAAK,CAACZ,OAAO,iHACyD/jB,EAAE,CAACR,cAAc,uDACnDQ,EAAE,CAACP,WAAW,2FACcO,EAAE,CAACT,YAAY,oGAE7CS,EAAE,CAACN,cAAc,wFAEAM,EAAE,CAACV,OAAO,sCACtD,CACPoX,OAAO,CAACc,QAAQ,CAACmN,CAAK,CAAC,CAAC,CAAC,CAAC,CAC1BA,CAAK,CAACxd,IAAI,CAAC,qBAAqB,CAAC,CAACyd,OAAO,CAAC,SAAAzY,CAAE,CAAI,CAChC,OAAO,EAAjBA,CAAE,CAACuU,GAAc,GACnBvU,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CAExB,CAAC,CAAC,CACJ,CAAC,GAGKkP,YAAW,kBA8BO9jB,IAAI,CAAC+jB,GAAG,GAuKmC/jB,IAAI,CAAC8a,KAAK,GAhB1D9a,IAAI,CAACyE,GAAG,CApKzB,WAAYuf,CAAO,CAAEC,CAAM,CAAEC,CAAQ,CAAEC,CAAI,CAAEC,CAAI,CAAiC,YAAfC,CAAO,qFACxE,GAAIC,EAAK,CAAG3iB,QAAQ,CAACkC,aAAa,iBAAUmgB,CAAO,SAAO,CAC1D,GAAa,IAAI,EAAbM,CAAa,CAAE,SACnB,IAAI,CAAC/oB,IAAI,CAAG+oB,CAAK,CAAC9gB,WAAW,CAAC,WAAW,CAAC,CAC1C,IAAI,CAAC+gB,QAAQ,EAAE,CACf,IAAI,CAACC,eAAe,EAAE,CACtB,IAAI,CAACC,cAAc,EAAE,CACrB,GAAIjf,EAAG,CAAG8e,CAAK,CAAC9gB,WAAW,CAAC,iBAAiB,CAAC,CAC1CgC,CAAG,EACLkf,YAAY,CAACC,UAAU,CAACnf,CAAG,OAAa,CAC1C,GAAIof,EAAK,CAAGN,CAAK,CAACjc,qBAAqB,EAAE,CACvCwc,CAAO,CAAGD,CAAK,CAACtS,CAAC,CAAEwS,CAAO,CAAGF,CAAK,CAAClgB,CAAC,CAAEqgB,CAAO,CAAGH,CAAK,CAACrS,KAAK,CAAEyS,CAAO,CAAGJ,CAAK,CAAC3gB,MAAM,CACnFghB,CAAK,CAAG,IAAI,CAACC,MAAM,CAACC,WAAW,CAAEC,CAAK,CAAG,IAAI,CAACF,MAAM,CAAC1c,YAAY,CACjE6c,CAAe,CAAG,EAASJ,CAAK,CAAGd,CAAI,CAAEiB,CAAK,CAAGhB,CAAI,CAAE,CAAC,CAAC,CACzDkB,CAAK,CAAGnB,CAAI,CAAGkB,CAAe,CAE9BE,CAAI,CAAG,EAASN,CAAK,CAAEd,CAAI,CAAC,CAAEqB,CAAI,CAAG,EAASJ,CAAK,CAAEhB,CAAI,CAAC,CAG1DqB,CAAK,wCADKZ,CAAO,CAAGE,CAAO,CAAC,CAAC,CAAIE,CAAK,CAAC,CAAC,gBAAYH,CAAO,CAAGE,CAAO,CAAC,CAAC,CAAII,CAAK,CAAC,CAAC,sBAD1DL,CAAO,CAACO,CAAK,OAE2D,CAChGI,CAAE,CAAG,IAAI,CAACR,MAAM,CAACS,IAAI,CAAC,YAAY,CAAE,IAAI,CAACC,kBAAkB,CAACtB,CAAK,CAAC3J,GAAG,CAAEwJ,CAAI,CAAEC,CAAI,CAAEH,CAAM,CAAEwB,CAAK,CAAEpB,CAAO,CAAC,CAAC,CAC7G,IAAI,CAACwB,WAAW,EAAE,CAClB,IAAI,CAACC,YAAY,CAAGxB,CAAK,CACzBA,CAAK,CAAC5R,KAAK,CAACqT,UAAU,CAAG,QAAQ,CACjC,IAAI,CAACC,aAAa,EAAE,CACpB,IAAI,CAACC,cAAc,CAACZ,CAAe,CAAC,CACpCK,CAAE,CAACQ,QAAQ,CAAG7B,CAAO,CACrB,IAAI,CAAC8B,SAAS,CAACT,CAAE,CAAC,CAClBA,CAAE,CAACU,gBAAgB,CAAGf,CAAe,CACrC,IAAI,CAACgB,gBAAgB,CAAGX,CAAE,CAC1BA,CAAE,CAACY,UAAU,CAAGnC,CAAI,CACpB,IAAI,CAACA,IAAI,CAAGA,CAAI,CAChB,IAAI,CAACC,IAAI,CAAGA,CAAI,CAChBziB,QAAQ,CAAC4kB,IAAI,CAAC7T,KAAK,CAAC8T,QAAQ,CAAG,QAAQ,CACvC7Z,qBAAqB,CAAC,UAAM,CAC1B,CAAI,CAAC8Z,SAAS,CAACpjB,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC,CAChDoiB,CAAE,CAAChT,KAAK,CAACgU,SAAS,CAAG,IACvB,CAAC,CACH,CAAC,gDACD,sBAAc,CACZ,IAAI,CAACviB,IAAI,CAAGxC,QAAQ,CAACwB,gBAAgB,CAAC,WAAW,CACnD,CAAC,yBACD,mBAAUmhB,CAAK,CAAE,CACf,MAAO1kB,MAAK,CAACC,SAAS,CAAC8mB,SAAS,CAACriB,IAAI,CAAC,IAAI,CAACH,IAAI,CAAE,SAAAwQ,CAAC,QAAIA,EAAC,EAAE2P,CAAK,EAChE,CAAC,+BAED,0BAAkB,YAChB,IAAI,CAACmC,SAAS,CAAG9kB,QAAQ,CAAC4kB,IAAI,CAACZ,IAAI,CAAC,WAAW,ycAUjC,CACd,IAAI,CAACT,MAAM,CAAG,IAAI,CAACuB,SAAS,CAAC5iB,aAAa,CAAC,eAAe,CAAC,CAC3D,IAAI,CAACqhB,MAAM,CAAC3L,gBAAgB,CAAC,OAAO,CAAE,IAAI,CAACqN,UAAU,CAACvN,IAAI,CAAC,IAAI,CAAC,CAAC,CACjE,IAAI,CAAC6L,MAAM,CAAC3L,gBAAgB,CAAC,WAAW,CAAE,SAAAnO,CAAE,CAAI,CAC9C,CAAI,CAACyb,MAAM,CAAGzb,CAAE,CAAC0b,OAAO,CACxB,CAAI,CAACC,MAAM,CAAG3b,CAAE,CAAC4b,OAAO,CACpB,CAAI,CAACC,WAAW,EAClB,CAAI,CAACC,UAAU,EAEnB,CAAC,CAAC,CACF,IAAI,CAAChC,MAAM,CAAC3L,gBAAgB,CAAC,WAAW,CAAE,SAAAnO,CAAE,CAAI,CAC9C,GAAe,CAAC,EAAZA,CAAE,CAAC+b,MAAS,EAAI,CAAI,CAACd,gBAAgB,CAACH,QAAQ,CAAE,CAClD,GAAIkB,EAAE,CAAG,CAAI,CAACf,gBAAgB,CAACxiB,aAAa,CAAC,sBAAsB,CAAC,CACpEujB,CAAE,CAAC1U,KAAK,CAAC2U,aAAa,CAAC,MAAM,CAC7Blf,UAAU,CAAC,iBAAMif,EAAE,CAAC1U,KAAK,CAAC2U,aAAa,CAAC,KAAK,EAAE,GAAG,CACpD,CACA,CAAI,CAACC,KAAK,CAAGlc,CAAE,CAAC0b,OAAO,CACvB,CAAI,CAACS,KAAK,CAAGnc,CAAE,CAAC4b,OAAO,CACvB,CAAI,CAACC,WAAW,GAAO,EACnB7b,CAAE,CAACgP,MAAM,CAAC/W,SAAS,CAACK,QAAQ,CAAC,cAAc,CAAC,EAAI0H,CAAE,CAACgP,MAAM,CAAC/W,SAAS,CAACK,QAAQ,CAAC,UAAU,CAAC,IAC1F,CAAI,CAAC8jB,UAAU,GAAO,CAC1B,CAAC,CAAC,CACF,IAAI,CAACtC,MAAM,CAAC3L,gBAAgB,CAAC,aAAa,CAAE,UAAM,CAChD,GAAI,CAAI,CAAC8M,gBAAgB,CAACH,QAAQ,CAAE,CAClC,GAAIkB,EAAE,CAAG,CAAI,CAACf,gBAAgB,CAACxiB,aAAa,CAAC,sBAAsB,CAAC,CACpEujB,CAAE,CAAC1U,KAAK,CAAC2U,aAAa,CAAC,MAAM,CAC7Blf,UAAU,CAAC,iBAAMif,EAAE,CAAC1U,KAAK,CAAC2U,aAAa,CAAC,KAAK,EAAE,GAAG,CACpD,CACF,CAAC,CAAC,CACF,IAAI,CAACnC,MAAM,CAAC3L,gBAAgB,CAAC,OAAO,CAAE,SAAAnO,CAAE,CAAG,CACrC,CAAI,CAACqc,SAAS,GAChB,CAAI,CAACA,SAAS,GAAQ,CACtBrc,CAAE,CAACC,cAAc,EAAE,CAEvB,CAAC,CAAC,CACF,IAAI,CAAC6Z,MAAM,CAAC3L,gBAAgB,CAAC,SAAS,CAAE,SAAAnO,CAAE,CAAI,CAC5C,CAAI,CAAC6b,WAAW,GAAQ,CACxB,CAAI,CAACZ,gBAAgB,CAAChjB,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC,CACnD,CAAI,CAACmkB,SAAS,CAChBrc,CAAE,CAACC,cAAc,EAAE,CAEC,CAAC,EAAdD,CAAE,CAAC+b,MAAW,EACrB,CAAI,CAAClrB,QAAQ,EAAE,CAEjB,CAAI,CAACurB,UAAU,GACjB,CAAC,CAAC,CACF,IAAI,CAACtC,MAAM,CAAC3L,gBAAgB,CAAC,WAAW,CAAE,SAAAnO,CAAE,CAAI,CAC9CA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EACpB,CAAC,CAAC,CACF,IAAI,CAACsQ,MAAM,CAAC/hB,gBAAgB,CAAC,YAAY,CAAC,CAACxD,OAAO,CAAC,SAAA+nB,CAAG,CAAI,CACxDA,CAAG,CAACnO,gBAAgB,CAAC,OAAO,CAAE,SAAAnO,CAAE,CAAI,CAClCA,CAAE,CAACwJ,eAAe,EAAE,CACpB,CAAI,CAACiR,WAAW,EAAE,CAClB,GAAIxJ,EAAK,CAAG,CAAI,CAACsK,SAAS,CAAC,CAAI,CAACb,YAAY,CAAC,CACzC4B,CAAG,CAACrkB,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,EAAIgkB,CAAG,CAACrkB,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,EACpEgkB,CAAG,CAACrkB,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,EACnC2Y,CAAK,EAAI,CAAC,CACE,CAAC,CAATA,CAAS,GACXA,CAAK,CAAG,CAAI,CAAClY,IAAI,CAAC/D,MAAM,CAAC,CAAC,IAG5Bic,CAAK,EAAI,CAAC,CACNA,CAAK,EAAI,CAAI,CAAClY,IAAI,CAAC/D,MAAM,GAC3Bic,CAAK,CAAG,CAAC,GAEb,CAAI,CAACsL,UAAU,CAAC,CAAI,CAACxjB,IAAI,CAACkY,CAAK,CAAC,CAAC,EAE1BqL,CAAG,CAACrkB,SAAS,CAACK,QAAQ,CAAC,UAAU,CAAC,CACzC,CAAI,CAACzH,QAAQ,EAAE,CAERyrB,CAAG,CAACrkB,SAAS,CAACK,QAAQ,CAAC,YAAY,CAAC,EAC3C,CAAI,CAACkkB,cAAc,CAAC,CAAC,CAEzB,CAAC,CAAC,CACD,CAAC,SAAS,CAAE,WAAW,CAAC,CAACjoB,OAAO,CAAC,SAAA2Z,CAAG,QAAIoO,EAAG,CAACnO,gBAAgB,CAACD,CAAG,CAAE,SAAAlO,CAAE,QAAIA,EAAE,CAACwJ,eAAe,EAAE,EAAC,EAChG,CAAC,CAAC,CACF,IAAI,CAACsQ,MAAM,CAAC3L,gBAAgB,CAAC,YAAY,CAAE,UAAM,CAC/C,CAAI,CAAC0N,WAAW,GAAQ,CACxB,CAAI,CAACQ,SAAS,GAChB,CAAC,CACH,CAAC,8BAED,yBAAiB,CACf,GAAI/B,EAAE,CAAG,IAAI,CAACW,gBAAgB,CACzBX,CAAE,GACPA,CAAE,CAAChT,KAAK,CAACgU,SAAS,qBAAgB,IAAI,CAACmB,UAAU,gBAAO,IAAI,CAACC,UAAU,sBAAa,IAAI,CAACC,KAAK,KAAG,CACnG,CAAC,8BACD,yBAAiB,CACf,IAAI,CAACF,UAAU,CAAG,CAAC,CACnB,IAAI,CAACC,UAAU,CAAG,CAAC,CACnB,IAAI,CAACC,KAAK,CAAG,CACf,CAAC,wBAED,mBAAW,CACT,IAAI,CAACC,UAAU,CAAG,EAAG,CACrB,IAAI,CAACC,QAAQ,CAAG,EAAG,CACnB,IAAI,CAACC,SAAS,CAAG,CAAC,EAAG,CAAE,GAAI,CAAE,GAAI,CAAE,EAAG,CAAE,GAAI,CAAE,CAAC,CAAE,GAAG,CAAE,CAAC,CAAE,GAAG,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,EAAE,CACjF,CAAC,0BACD,oBAAW9c,CAAE,CAAE,OAKFpL,IAAI,CAACmoB,IAAI,QAJhBzC,CAAE,CAAG,IAAI,CAACW,gBAAgB,CAC9B,GAAKX,CAAE,EACPta,CAAE,CAACwJ,eAAe,EAAE,CACpBxJ,CAAE,CAACC,cAAc,EAAE,CACnB,GAAI+c,EAAG,CAAG,CAAC,EAAUhd,CAAE,CAACid,MAAM,CAAC,CAC7BC,CAAY,CAAG,CAAC,CAAC5C,CAAE,CAACU,gBAAgB,CACpCmC,CAAM,CAAG3oB,KAAK,CAACS,IAAI,CAAC,IAAI,CAAC6nB,SAAS,CAAC,CAClCvjB,MAAM,CAAC,SAAA6jB,CAAC,QAA8C,GAAG,CAA7C,EAAS,CAACA,CAAC,CAACF,CAAY,EAAEA,CAAY,CAAO,EAAC,CAC1DG,MAAM,CAAC,CAACH,CAAY,CAAC,CAAC,CACvBI,CAAO,CAAG,IAAI,CAACxD,MAAM,CAACC,WAAW,CAAG,CAAC,CAAG,IAAI,CAAC0C,UAAU,CACvDc,CAAO,CAAG,IAAI,CAACzD,MAAM,CAAC1c,YAAY,CAAG,CAAC,CAAG,IAAI,CAACsf,UAAU,CACxDc,CAAQ,CAAGL,CAAM,CAAClkB,GAAG,CAAC,SAAAmkB,CAAC,QAAIA,EAAC,CAAG,CAAI,CAACT,KAAK,EAAC,CAACpjB,MAAM,CAAC,SAAA6jB,CAAC,QAAY,EAAC,CAATA,CAAC,CAACJ,CAAO,EAAC,CAChExjB,IAAI,CAAC,SAACxB,CAAC,CAAC+D,CAAC,QAAK,CAAC/D,CAAC,CAAC+D,CAAC,EAAEihB,CAAG,EAAC,CAAC,CAAC,CAAC,CAAG,IAAI,CAACL,KAAK,CACtCc,KAAK,CAACD,CAAQ,CAAC,GAClB,IAAI,CAAC3C,cAAc,CAACP,CAAE,CAACU,gBAAgB,CAAGwC,CAAQ,CAAC,CACnD,IAAI,CAACf,UAAU,EAAI,CAACa,CAAO,CAAG,IAAI,CAAC7B,MAAM,EAAE,IAAI,CAACkB,KAAK,EAAIa,CAAQ,CAAC,IAAI,CAACb,KAAK,CAAC,CAC7E,IAAI,CAACD,UAAU,EAAI,CAACa,CAAO,CAAG,IAAI,CAAC5B,MAAM,EAAE,IAAI,CAACgB,KAAK,EAAIa,CAAQ,CAAC,IAAI,CAACb,KAAK,CAAC,CAC7E,IAAI,CAACA,KAAK,CAAGa,CAAQ,CACrB,IAAI,CAACE,cAAc,EAAE,CACrB,IAAI,CAACC,UAAU,EAAE,EAErB,CAAC,8BACD,wBAAehB,CAAK,CAAE,CACpB,IAAI,CAAC7C,MAAM,CAACrhB,aAAa,CAAC,kBAAkB,CAAC,CAACmS,SAAS,aAAQ,EAAmB,GAAG,CAAX+R,CAAW,CAAC,KACxF,CAAC,0BAED,qBAAe,CACb,GAAIrC,EAAE,CAAG,IAAI,CAACW,gBAAgB,CAC9B,GAAKX,CAAE,EACP,GAAIsD,EAAE,CAAG,IAAI,CAACnC,MAAM,CAAG,IAAI,CAACS,KAAK,CAC/B2B,CAAE,CAAG,IAAI,CAAClC,MAAM,CAAG,IAAI,CAACQ,KAAK,EACrB,CAAC,EAAPyB,CAAO,EAAU,CAAC,EAAPC,CAAO,IAChB,CAAC,IAAI,CAACxB,SAAS,GACjB,IAAI,CAACpB,gBAAgB,CAAChjB,SAAS,CAACI,GAAG,CAAC,eAAe,CAAC,CACpD,IAAI,CAACgkB,SAAS,GAAO,CACrB,IAAI,CAACyB,aAAa,CAAG,IAAI,CAACrB,UAAU,CACpC,IAAI,CAACsB,aAAa,CAAG,IAAI,CAACrB,UAAU,EAEtC,IAAI,CAACD,UAAU,CAAG,IAAI,CAACqB,aAAa,CAACF,CAAE,CACvC,IAAI,CAAClB,UAAU,CAAG,IAAI,CAACqB,aAAa,CAACF,CAAE,CACvC,IAAI,CAACH,cAAc,EAAE,EAEzB,CAAC,0BAED,oBAAWxE,CAAK,CAAE,IACZpa,EAAI,CAAGoa,CAAK,CAAC9gB,WAAW,CAAC,GAAG,CAAC,CAC/B6gB,CAAO,CAAGna,CAAI,CAAC7G,SAAS,CAACK,QAAQ,CAAC,OAAO,CAAC,GACkB2gB,CAAO,CACjEP,CAAW,CAACsF,UAAU,CAAClf,CAAI,CAAC,CAC5B4Z,CAAW,CAACuF,QAAQ,CAACnf,CAAI,CAAC,uBAFzB8Z,CAAO,MAAEC,CAAM,MAAEC,CAAQ,MAAEC,CAAI,MAAEC,CAAI,MAAEkF,CAAM,MAAEC,CAAM,MAGtDtE,CAAK,CAAG,IAAI,CAACC,MAAM,CAACC,WAAW,CAAEC,CAAK,CAAG,IAAI,CAACF,MAAM,CAAC1c,YAAY,CACnE6c,CAAe,CAAG,EAASJ,CAAK,CAAGd,CAAI,CAAEiB,CAAK,CAAGhB,CAAI,CAAE,CAAC,CAAC,CAC3D,IAAI,CAAC6B,cAAc,CAACZ,CAAe,CAAC,CACpC,IAAI,CAACZ,cAAc,EAAE,CACrB,IAAI,CAACqE,cAAc,EAAE,CACrB,IAAI,CAACzC,gBAAgB,CAACH,QAAQ,CAAG7B,CAAO,CACxC,IAAI,CAACgC,gBAAgB,CAACD,gBAAgB,CAAGf,CAAe,CACxD,IAAI,CAACgB,gBAAgB,CAAChjB,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC,CACvD,IAAI,CAAC+iB,gBAAgB,CAACnJ,SAAS,CAAG,IAAI,CAAC0I,kBAAkB,CAACtB,CAAK,CAAC3J,GAAG,CAAEwJ,CAAI,CAAEC,CAAI,CAAEH,CAAM,CAAE,IAAI,CAAEI,CAAO,CAAC,CACvG,IAAI,CAAC8B,SAAS,CAAC,IAAI,CAACE,gBAAgB,CAAC,CACrC,IAAI,CAACP,YAAY,CAACpT,KAAK,CAACqT,UAAU,CAAG,SAAS,CAC9CzB,CAAK,CAAC5R,KAAK,CAACqT,UAAU,CAAG,QAAQ,CACjC,IAAI,CAACxqB,IAAI,CAAG+oB,CAAK,CAAC9gB,WAAW,CAAC,WAAW,CAAC,CAC1C,IAAI,CAACsiB,YAAY,CAAGxB,CAAK,CACzB,IAAI,CAAC0B,aAAa,EAAE,CACpB,IAAI,CAACH,WAAW,EAClB,CAAC,yBACD,mBAAUH,CAAE,CAAE,CACZ,GAAKA,CAAE,CAACQ,QAAQ,EAChB,GAAIsD,EAAG,CAAG9D,CAAE,CAAC7hB,aAAa,CAAC,OAAO,CAAC,CACnC2lB,CAAG,CAACC,MAAM,CAAGlc,YAAY,YAAe,EAAI,CAAC,CAC7Cic,CAAG,CAACE,cAAc,CAAG,UAAW,CAC9Bnc,YAAY,YAAe,CAAG,IAAI,CAACoc,KAAK,CAAG,CAAC,CAAG,IAAI,CAACF,MACtD,CAAC,CACH,CAAC,6BACD,wBAAgB,CACd,GAAIpN,EAAK,CAAG,IAAI,CAACsK,SAAS,CAAC,IAAI,CAACb,YAAY,CAAC,CAC7C,IAAI,CAACZ,MAAM,CAACrhB,aAAa,CAAC,eAAe,CAAC,CAACmS,SAAS,WAAMqG,CAAK,CAAC,CAAC,aAAI,IAAI,CAAClY,IAAI,CAAC/D,MAAM,CAAE,CACvF,IAAI,CAAC2oB,UAAU,EACjB,CAAC,0BACD,qBAAa,YACXa,YAAY,CAAC,IAAI,CAACC,iBAAiB,CAAC,CACpC,IAAI,CAAC3E,MAAM,CAACrhB,aAAa,CAAC,WAAW,CAAC,CAACR,SAAS,CAACI,GAAG,CAAC,aAAa,CAAC,CACnE,IAAI,CAAComB,iBAAiB,CAAG1hB,UAAU,CAAC,iBAAM,EAAI,CAAC+c,MAAM,CAACrhB,aAAa,CAAC,WAAW,CAAC,CAACR,SAAS,CAACC,MAAM,CAAC,aAAa,CAAC,EAAE,GAAI,CACxH,CAAC,wBAED,mBAAW,YACT3B,QAAQ,CAAC4kB,IAAI,CAAC7T,KAAK,CAAC8T,QAAQ,CAAG,EAAE,CACjC,GAAId,EAAE,CAAG,IAAI,CAACW,gBAAgB,CAC5Bd,CAAI,CAAGG,CAAE,CAACP,WAAW,CAAEK,CAAI,CAAGE,CAAE,CAACld,YAAY,CAC7CshB,CAAG,CAAGpE,CAAE,CAAC7hB,aAAa,CAAC,kBAAkB,CAAC,CAC1CkmB,CAAY,CAAG,EAAS,IAAI,CAAC7E,MAAM,CAAC1c,YAAY,CAACshB,CAAG,CAACjN,aAAa,CAAE,IAAI,CAACqI,MAAM,CAACC,WAAW,CAAC2E,CAAG,CAAClN,YAAY,CAAC,CAC3G8I,CAAE,CAACQ,QAAQ,EACbR,CAAE,CAAC7hB,aAAa,CAAC,OAAO,CAAC,CAACP,MAAM,EAAE,CAEpC,IAAI,CAACmkB,SAAS,GAAQ,CACH,CAAC,CAAhBsC,CAAgB,GAClBxE,CAAI,CAAGuE,CAAG,CAAClN,YAAY,CAAGmN,CAAY,CACtCvE,CAAI,CAAGsE,CAAG,CAACjN,aAAa,CAAGkN,CAAY,EAEzC,GAAIC,EAAS,GAAO,CACpB,GAAIroB,QAAQ,CAAC4kB,IAAI,CAAC7iB,QAAQ,CAAC,IAAI,CAACoiB,YAAY,CAAC,CAAE,CAC7C,GAAImE,EAAQ,CAAG,IAAI,CAACnE,YAAY,CAACzd,qBAAqB,EAAE,CAUxD,GATA2hB,CAAS,CAAG,EACVC,CAAQ,CAACvlB,CAAC,CAAG7B,MAAM,CAACqB,WAAW,EAEE,CAAC,CAAjC+lB,CAAQ,CAACvlB,CAAC,CAAGulB,CAAQ,CAAChmB,MAAW,EAElCgmB,CAAQ,CAAC3X,CAAC,CAAGzP,MAAM,CAACsQ,UAAU,EAEE,CAAC,CAAhC8W,CAAQ,CAAC3X,CAAC,CAAG2X,CAAQ,CAAC1X,KAAU,CAClC,CACG,CAACyX,CAAS,CAAE,CACd,GAAIE,EAAM,CAAID,CAAQ,CAAC3X,CAAC,CAAG2X,CAAQ,CAAC1X,KAAK,CAAC,CAAC,CAAI,IAAI,CAAC2S,MAAM,CAACC,WAAW,CAAC,CAAC,CACtEgF,CAAM,CAAIF,CAAQ,CAACvlB,CAAC,CAAGulB,CAAQ,CAAChmB,MAAM,CAAC,CAAC,CAAI,IAAI,CAACihB,MAAM,CAAC1c,YAAY,CAAC,CAAC,CACxEkd,CAAE,CAAChT,KAAK,CAACgU,SAAS,qBAAgBwD,CAAM,gBAAOC,CAAM,sBAAaF,CAAQ,CAAC1X,KAAK,CAACgT,CAAI,KACvF,CACF,CACIyE,CAAS,GACXtE,CAAE,CAAChT,KAAK,CAACgU,SAAS,CAAG,8BAA8B,EAErDhB,CAAE,CAACriB,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC,CACpC,IAAI,CAACmjB,SAAS,CAACpjB,SAAS,CAACI,GAAG,CAAC,eAAe,CAAC,CAC7C0E,UAAU,CAAC,UAAM,CACf,CAAI,CAACse,SAAS,CAACnjB,MAAM,EAAE,CACvB,CAAI,CAACwiB,YAAY,CAACpT,KAAK,CAACqT,UAAU,CAAG,SAAS,CAC1C,CAAI,CAACqE,UAAU,EAAE,CAAI,CAACA,UAAU,EACtC,CAAC,CAAE,GAAG,CACR,CAAC,8BAED,wBAAe3M,CAAE,CAAE,CACjB9b,QAAQ,CAAC4kB,IAAI,CAAC7T,KAAK,CAAC8T,QAAQ,CAAG/I,CAAE,CAAG,QAAQ,CAAG,EAAE,CAC7CA,CAAE,CACJ,IAAI,CAACyH,MAAM,CAAC7hB,SAAS,CAACC,MAAM,CAAC,gBAAgB,CAAC,CAE9C,IAAI,CAAC4hB,MAAM,CAAC7hB,SAAS,CAACI,GAAG,CAAC,gBAAgB,CAC9C,CAAC,kCAED,4BAAmB4mB,CAAa,CAAElG,CAAI,CAAEC,CAAI,CAAEH,CAAM,CAA2B,IAAzBwB,EAAK,wDAAC,EAAE,CAAEpB,CAAO,6DACrE,wCAAiCA,CAAO,CAAG,QAAQ,CAAG,EAAE,eAAKoB,CAAK,wDAC5B4E,CAAa,0BAAiBlG,CAAI,mDACnEE,CAAO,CAAG,8BAA8B,CAAG,KAAK,mBAASJ,CAAM,iCAAqBI,CAAO,2JACsDF,CAAI,sBAAa,EAASC,CAAI,CAAEvhB,MAAM,CAACqB,WAAW,CAAC,CAAC,EAAE,uEAChJ,uJACwEigB,CAAI,sBAAaC,CAAI,0BAE3J,CAAC,4BA/TD,oBAAkBla,CAAI,CAAE,CACtB,GAAI8Z,EAAO,CAAG9Z,CAAI,CAACwJ,OAAO,CAAC9L,EAAE,CAC3Bqc,CAAM,CAAG/Z,CAAI,CAACoV,IAAI,CAClB4E,CAAQ,CAAGha,CAAI,CAACwJ,OAAO,CAAC4Q,KAAK,CAC7BH,CAAI,CAAGja,CAAI,CAACwJ,OAAO,CAACnB,KAAK,CACzB6R,CAAI,CAAGla,CAAI,CAACwJ,OAAO,CAACzP,MAAM,CAC1BqgB,CAAK,CAAGpa,CAAI,CAACrG,aAAa,CAAC,KAAK,CAAC,CACjCylB,CAAM,CAAGhF,CAAK,CAAC/R,KAAK,CACpBgX,CAAM,CAAGjF,CAAK,CAACrgB,MAAM,CACvB,MAAO,CAAC+f,CAAO,CAAEC,CAAM,CAAEC,CAAQ,CAAEC,CAAI,CAAEC,CAAI,CAAEkF,CAAM,CAAEC,CAAM,CAC/D,CAAC,wBACD,kBAAgBrf,CAAI,CAAE,CACpB,MAAOA,EAAI,CAACC,YAAY,CAAC,SAAS,CAAC,CAClC5C,KAAK,CAAC,gFAAgF,CAAC,CACvFgT,KAAK,CAAC,CAAC,CACV,CAAC,SAoTH+P,OAAO,CAACzqB,SAAS,CAAC8lB,IAAI,CAAG,UAAqC,IAA5BrE,EAAQ,wDAAC,WAAW,CAAEhY,CAAI,8CAC1D,KAAI,CAACsI,kBAAkB,CAAC0P,CAAQ,CAAEhY,CAAI,CAAC,CACvCgY,CAAQ,CAAGA,CAAQ,CAAC/X,WAAW,EAAE,CACjB,YAAY,EAAxB+X,CAAwB,CACnB,IAAI,CAACiJ,iBAAiB,CACV,WAAW,EAAvBjJ,CAAuB,CACvB,IAAI,CAACkJ,gBAAgB,CACT,aAAa,EAAzBlJ,CAAyB,CACzB,IAAI,CAAC3C,sBAAsB,CAE3B,IAAI,CAAC8L,kBAChB,CAAC,CAED,QAASC,cAAa,CAAC1G,CAAO,CAAEC,CAAM,CAAEC,CAAQ,CAAEC,CAAI,CAAEC,CAAI,CAAEkF,CAAM,CAAEC,CAAM,CAAE,OA2BFvpB,IAAI,CAAC8a,KAAK,CA1BhF3U,CAAO,CAAGxE,QAAQ,CAACgpB,cAAc,CAAC,OAAO,CAAG3G,CAAO,CAAC,CACxD,GAAe,IAAI,EAAf7d,CAAe,CAAE,SACrB,GAGEykB,EAAQ,CAHNC,CAAQ,CAAGnjB,CAAC,CAACvB,CAAO,CAAC,CACvB2kB,CAAS,CAAGD,CAAQ,CAAC5iB,OAAO,CAAC,WAAW,CAAC,CACzC8iB,CAAY,CAAGF,CAAQ,CAAC5iB,OAAO,CAAC,QAAQ,CAAC,CAAC7B,IAAI,CAAC,cAAc,CAAC,CAEhE,GAA+E,MAAM,EAAjFD,CAAO,CAAC8D,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACE,YAAY,CAAC,KAAK,CAAC,CAAC5D,SAAS,CAAC,CAAC,CAAC,CAAC,CAAS,CAAE,CAErF,GADAskB,CAAQ,CAACvhB,IAAI,CAAC,aAAY,CAAC2a,CAAM,CAAC,eAAa,CAACD,CAAO,CAAC,8BAA0B,CAACI,CAAI,CAAC,aAAW,CAACD,CAAI,CAAC,KAAI,CAAC,CAC1G,CAAE6G,QAAQ,CAACC,aAAa,EAAE,CAAE,KAC9B,GAAIvQ,EAAG,CAAGvU,CAAO,CAAC8D,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC9CihB,CAAK,CAAGvpB,QAAQ,CAAC4G,eAAe,CAAC5G,QAAQ,CAAC4G,eAAe,CAAC4c,WAAW,CAAGxjB,QAAQ,CAAC4kB,IAAI,CAACpB,WAAW,CACjG3gB,CAAM,CAAG,EAAE,CACX2mB,CAAS,CAAGzQ,CAAG,CAEG,IAAI,EAAjByQ,CAAiB,EACtB3mB,CAAM,EAAI2mB,CAAS,CAACC,UAAU,CAC9BD,CAAS,CAAGA,CAAS,CAACE,YAAY,CAEpC,GAAIC,EAAK,CAAGJ,CAAK,CAAG1mB,CAAM,CAC1B,GAAIkW,CAAG,CAACnI,KAAK,CAAG+Y,CAAK,CAAE,IACjBC,EAAK,CAAG7Q,CAAG,CAACnI,KAAK,CAAGmI,CAAG,CAACzW,MAAM,CAC9BunB,CAAI,CAAG,CAAC,CAAGF,CAAK,CAAG5Q,CAAG,CAACnI,KAAK,CAE5BkZ,CAAM,CAAG9pB,QAAQ,CAAC+pB,aAAa,CAAC,KAAK,CAAC,CAC1CD,CAAM,CAAC/e,YAAY,CAAC,OAAO,CAAE,UAAU,CAAC,CACxC+e,CAAM,CAAC/Y,KAAK,CAACiZ,cAAc,CAAG,WAAW,CACzC,GAAIC,EAAQ,CAAGjqB,QAAQ,CAACkqB,cAAc,CAAC5sB,EAAE,CAACzF,iBAAiB,CAAG,GAAG,CAAG,EAAgB,GAAG,CAARgyB,CAAQ,CAAC,CAAG,IAAI,CAACvsB,EAAE,CAACvF,KAAK,CAAC,CACzG+xB,CAAM,CAACK,WAAW,CAACF,CAAQ,CAAC,CAC5BzlB,CAAO,CAAC4lB,YAAY,CAACN,CAAM,CAAE/Q,CAAG,CAAC,CACjChT,CAAC,CAACgT,CAAG,CAAC,CAACnI,KAAK,CAAC+Y,CAAK,CAAC,CACnB5jB,CAAC,CAACgT,CAAG,CAAC,CAACzW,MAAM,CARDqnB,CAAK,CAAGC,CAAK,CAS3B,CACAX,CAAQ,CAAGU,CACb,CAAC,IAECV,EAAQ,CAAGzG,CAAI,CACb2G,CAAS,EAAEA,CAAS,CAAC5iB,QAAQ,CAAC,mBAAmB,CACvD,CAAC,IAEC/B,EAAO,CAAC+W,SAAS,CAAG,aAAY,CAAGgH,CAAQ,CAAG,WAAS,CAAGF,CAAO,CAAG,8BAA0B,CAAGuF,CAAM,CAAG,aAAW,CAAGD,CAAM,CAAG,KAAI,CACrIsB,CAAQ,CAAGtB,CAAM,CACbwB,CAAS,EAAEA,CAAS,CAAChjB,WAAW,CAAC,mBAAmB,CAAC,CAG3D,MADAijB,EAAY,CAAC,CAAC,CAAC,CAACrY,KAAK,CAACsZ,QAAQ,WAAMpB,CAAQ,CAAG,EAAE,MAAI,GAEvD,CAEA,QAASqB,UAAS,CAACjI,CAAO,CAAEC,CAAM,CAAEC,CAAQ,CAAEC,CAAI,CAAEC,CAAI,CAAEkF,CAAM,CAAEC,CAAM,CAAE,CACxE,GAAIyB,QAAQ,CAACkB,cAAc,EAAE,CAAE,CAC7B,GAAIC,EAAE,CAAG,GAAIrI,YAAW,CAACE,CAAO,CAAEC,CAAM,CAAEC,CAAQ,CAAEC,CAAI,CAAEC,CAAI,CAAEkF,CAAM,CAAEC,CAAM,CAAC,CAC/E4C,CAAE,CAAC/B,UAAU,CAAG,iBAAM+B,EAAE,CAAG,IAAI,CACjC,CAAC,IAECzB,cAAa,CAAC1G,CAAO,CAAEC,CAAM,CAAEC,CAAQ,CAAEC,CAAI,CAAEC,CAAI,CAAEkF,CAAM,CAAEC,CAAM,CAAC,CAEtE,QACF,CAEA,QAAS1qB,gBAAe,EAAG,CACzB8C,QAAQ,CAACwB,gBAAgB,CAAC,6CAA2C,CAAC,CAACxD,OAAO,CAAC,SAAAyD,CAAC,CAAI,SAC9B,CAAC,CAAC,aAAlDA,CAAC,CAACS,aAAa,CAAC,KAAK,CAAC,yBAAtB,EAAwBuoB,GAAG,qBAA3B,EAA6BtsB,OAAO,CAAC,MAAM,CAAC,CAAM,EACpD4qB,aAAa,iCAAI5G,WAAW,CAACuF,QAAQ,CAACjmB,CAAC,CAAC,EAE5C,CAAC,CAGH,CAEA,QAAStE,gBAAe,EAAG,CACzB,GAAIutB,EAAS,CAAGxpB,MAAM,CAAC6d,IAAI,EAAE,CAC7B2L,CAAS,CAAC1qB,QAAQ,CAAC4kB,IAAI,CAACrJ,SAAS,CAAG,EAAE,CAAC7Y,GAAG,CAACC,IAAI,CAAC3C,QAAQ,CAACwB,gBAAgB,CAAC,aAAa,CAAC,CAAE,SAAAC,CAAC,QAAEA,EAAC,CAACkc,IAAI,EAAC,CAACjT,IAAI,CAAC,MAAM,CAClH,CAGA,GAAIqY,aAAY,CAAG,CACjB4H,MAAM,CAAG,CAAC,CACV/gB,MAAM,CAAE,CAAC,CAAC,CAEVghB,UAAU,CAAE,oBAASrpB,CAAE,CAAE,CACvB,GAAI8H,EAAG,CAAG9H,CAAE,CAACiH,YAAY,CAAC,MAAM,CAAC,CACjC,GAAIa,CAAG,CAAE,CACP,GAAI4L,EAAO,CAAG5L,CAAG,CAACzD,KAAK,CAAC,4EAA4E,CAAC,CACrG,GAAIqP,CAAO,CAAE,MAAO,CAClB/G,KAAK,CAAE+G,CAAO,CAAC,CAAC,CAAC,EAAIA,CAAO,CAAC,CAAC,CAAC,CAC/BrL,MAAM,CAAEqL,CAAO,CAAC,CAAC,CAAC,EAAI,GAAG,CACzBrb,IAAI,CAAEqb,CAAO,CAAC,CAAC,CAAC,EAAIA,CAAO,CAAC,CAAC,CAC/B,CACF,CACA,GAAI4V,EAAE,CAAG,EAAE,CAACpmB,IAAI,CAAC9B,IAAI,CAACpB,CAAE,CAACG,SAAS,CAAE,SAAAxC,CAAC,QAAIA,EAAC,CAAC0G,KAAK,CAAC,+BAA+B,CAAC,EAAC,OAC9EilB,EAAE,EACJA,CAAE,CAAGA,CAAE,CAAC5lB,KAAK,CAAC,GAAG,CAAC,CACX,CACLiJ,KAAK,CAAE2c,CAAE,CAAC,CAAC,CAAC,CACZjhB,MAAM,CAAEihB,CAAE,CAAC,CAAC,CAAC,CACbjxB,IAAI,CAAEixB,CAAE,CAAC,CAAC,CACZ,CAAC,EAEI,IACT,CAAC,CAEDC,UAAU,CAAE,oBAAS9X,CAAC,CAAE,YACtBA,CAAC,CAACC,eAAe,EAAE,CACnB,GAAI8X,EAAS,CAAGhlB,CAAC,CAAC,IAAI,CAAC,CAAC0V,QAAQ,CAAC,eAAe,CAAC,CAC/CuP,CAAS,CAAGjI,YAAY,CAAC6H,UAAU,CAAC,IAAI,CAAC,CAC3C,GAAI,CAACI,CAAS,CAAE,SAChB,GAAI9c,EAAK,CAAG8c,CAAS,MAAS,CAC5BC,CAAQ,CAAGD,CAAS,OAAU,CAC9BE,CAAM,CAAGF,CAAS,KAAQ,CAC1BG,CAAS,CAAG,UAAU,CAACjd,CAAK,CAAC,GAAG,CAACgd,CAAM,CACvCrV,CAAQ,CAAG9P,CAAC,CAAC,GAAG,CAAGolB,CAAS,CAAC,CAC/B,GAAuB,CAAC,EAApBtV,CAAQ,CAACpX,MAAW,CACtBsH,CAAC,CAAC,MAAM,CAAC,CAACqlB,QAAQ,EAAE,CAACC,KAAK,EAAE,CAACC,MAAM,CAAC,YAAW,CAACH,CAAS,CAAC,WAAU,CAAC,CACrEtV,CAAQ,CAAG9P,CAAC,CAAC,GAAG,CAAGolB,CAAS,CAAC,CAC7BtV,CAAQ,CAACtP,QAAQ,CAAC,oEAAoE,CAAC,CACvFsP,CAAQ,CAAC0V,UAAU,CAACxI,YAAY,CAACyI,SAAS,CAAC,CAC3C3V,CAAQ,CAAC4V,SAAS,CAAC1I,YAAY,CAAC2I,gBAAgB,CAAC,KAGjD,IAAI7V,CAAQ,CAAC,CAAC,CAAC,CAACvC,OAAO,CACrB,SAEJ,GAAI1J,EAAM,CAAG7D,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,kBAAkB,CAAC,CAChD,GAAoB,CAAC,CAAjBsD,CAAM,CAACnL,MAAU,CAAE,CACrB,GAAI0sB,CAAS,EAAIvhB,CAAM,CAACmE,IAAI,CAAC,IAAI,CAAC,CAAE,OACpC,IAAK,GAAI9H,EAAE,GAAI8c,aAAY,CAACnZ,MAAM,CAChC,GAAI3D,CAAE,EAAIklB,CAAS,EAAIpI,YAAY,CAACnZ,MAAM,CAAC3D,CAAE,CAAC,EAAIklB,CAAS,CACzD,OAEJpI,YAAY,CAACnZ,MAAM,CAACuhB,CAAS,CAAC,CAAGvhB,CAAM,CAACmE,IAAI,CAAC,IAAI,CACnD,CACA,GAAIiD,EAAe,CAChBgC,CAAC,CAACqS,OAAO,CAAItf,CAAC,CAAC7E,MAAM,CAAC,CAACoB,MAAM,EAAE,CAAG,GAAI,EACvCuT,CAAQ,CAAC/H,GAAG,CAAC,CAAC/G,GAAG,CAACiM,CAAC,CAAC2Y,KAAK,CAAC,CAAC,CAAC,CAAC,CAC7B3a,CAAe,CAAG,MAAM,GAExB6E,CAAQ,CAAC/H,GAAG,CAAC,CAAChH,MAAM,CAACf,CAAC,CAAC7E,MAAM,CAAC,CAACoB,MAAM,EAAE,CAAC0Q,CAAC,CAAC2Y,KAAK,CAAC,CAAC,CAAC,CAAC,CACnD3a,CAAe,CAAG,SAAS,EAE1BgC,CAAC,CAACmS,OAAO,CAAIpf,CAAC,CAAC7E,MAAM,CAAC,CAAC0P,KAAK,EAAE,CAAG,GAAI,EACtCiF,CAAQ,CAAC/H,GAAG,CAAC,CAAC8D,IAAI,CAACoB,CAAC,CAAC4Y,KAAK,CAAC,EAAE,CAAC,CAAC,CAC/B5a,CAAe,EAAI,MAAM,GAEzB6E,CAAQ,CAAC/H,GAAG,CAAC,CAACyD,KAAK,CAACxL,CAAC,CAAC7E,MAAM,CAAC,CAAC0P,KAAK,EAAE,CAACoC,CAAC,CAAC4Y,KAAK,CAAC,EAAE,CAAC,CAAC,CAClD5a,CAAe,EAAI,OAAO,EAE5B6E,CAAQ,CAAC/H,GAAG,CAAC,CAAC+d,MAAM,CAAE9I,YAAY,CAAC4H,MAAM,EAAE,CAAE,mBAAoB3Z,CAAe,CAAC,CAAC,CAClF,IAAI,CAACD,KAAK,CAAC+a,MAAM,CAAG,UAAU,CAC9B,GAAIlY,EAAO,CAAGiC,CAAQ,CAAC,CAAC,CAAC,CACzBrH,SAAS,CAACud,OAAO,CAAC7d,CAAK,CAAE+c,CAAQ,CAAEC,CAAM,CAAE,SAACxc,CAAG,CAAE9U,CAAI,CAAK,CACxDsH,MAAM,CAACsF,UAAU,CAAC,UAAM,CACtBoN,CAAO,CAAClN,qBAAqB,EAAE,CAC/BmP,CAAQ,CAAClO,IAAI,CAAC/N,CAAI,CAAGA,CAAI,CAAI0D,EAAE,CAACjI,IAAI,EAAI,KAAAqZ,CAAa,CAAiB,EAAE,aAAXA,CAAG,KAAQ,CAAE,CAAC,CAC1EvI,WAAW,CAAC,YAAY,CAAC,CAC1B,CAAI,CAAC4K,KAAK,CAAC+a,MAAM,CAAG,SAAS,CAE7B,GAAIE,EAAK,CAAGpY,CAAO,CAAC1R,aAAa,CAAC,YAAY,CAAC,CAC/C,GAAK8pB,CAAK,EACVA,CAAK,CAAC/b,kBAAkB,CAAC,WAAW,iFACqB3S,EAAE,CAAC3B,QAAQ,+SAK9D,CACN,GAAI+W,EAAM,CAAGsZ,CAAK,CAAC9pB,aAAa,CAAC,SAAS,CAAC,CAC3CwQ,CAAM,CAAC6B,OAAO,CAAG,SAAC9K,CAAE,CAAK,CACvBA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpB8P,YAAY,CAACC,UAAU,CAACnN,CAAQ,CAAC,CAAC,CAAC,CACrC,CAAC,CACH,CAAC,CAAE,CAAC,CACN,CAAC,CAAC,CACF7C,CAAC,CAACtJ,cAAc,EAClB,CAAC,CAEDgiB,gBAAgB,CAAE,2BAAW,CAC3B,GAAI9X,EAAO,CAAG7N,CAAC,CAAC,IAAI,CAAC,CACrB,GAAIA,CAAC,CAAC,IAAI,CAAC,CAACkmB,EAAE,CAAC,GAAG,CAAC,CAAE,CACnB,GAAIjB,EAAS,CAAGjI,YAAY,CAAC6H,UAAU,CAAC,IAAI,CAAC,CAC7C,GAAI,CAACI,CAAS,CAAE,OAChB,GAAI9c,EAAK,CAAG8c,CAAS,MAAS,CAC5BE,CAAM,CAAGF,CAAS,KAAQ,CAC5BpX,CAAO,CAAG7N,CAAC,CAAC,WAAW,CAACmI,CAAK,CAAC,GAAG,CAACgd,CAAM,CAAC,CAACG,KAAK,EACjD,CAAC,KACuB,CAAC,CAAlBzX,CAAO,CAACnV,MAAU,EACvBwpB,YAAY,CAACrU,CAAO,CAAC,CAAC,CAAC,CAACsY,OAAO,CAAC,CAChCtY,CAAO,CAAG7N,CAAC,CAAC,GAAG,CAAGgd,YAAY,CAACnZ,MAAM,CAACgK,CAAO,CAAC7F,IAAI,CAAC,IAAI,CAAC,CAAC,CAE7D,CAAC,CAEDyd,SAAS,CAAE,oBAA4B,IAAfW,EAAO,6DACzBvY,CAAO,CAAG7N,CAAC,CAAC,IAAI,CAAC,CACrB,GAAIA,CAAC,CAAC,IAAI,CAAC,CAACkmB,EAAE,CAAC,GAAG,CAAC,CAAE,CACf,IAAI,CAACG,QAAQ,EACfnE,YAAY,CAAC,IAAI,CAACmE,QAAQ,CAAC,CAE7B,GAAIpB,EAAS,CAAGjI,YAAY,CAAC6H,UAAU,CAAC,IAAI,CAAC,CAC7C,GAAI,CAACI,CAAS,CAAE,OAChB,GAAI9c,EAAK,CAAG8c,CAAS,MAAS,CAC5BE,CAAM,CAAGF,CAAS,KAAQ,CAC5BpX,CAAO,CAAG7N,CAAC,CAAC,WAAW,CAACmI,CAAK,CAAC,GAAG,CAACgd,CAAM,CAAC,CAACG,KAAK,EACjD,CAAC,0BAC0B,CACzBpD,YAAY,CAACrU,CAAO,CAAC,CAAC,CAAC,CAACsY,OAAO,CAAC,CAChC,GAAIroB,EAAG,CAAG+P,CAAO,OACb/P,EAAG,CAAC,CAAC,CAAC,CAACyP,OAAO,iBAElBM,CAAO,CAAC,CAAC,CAAC,CAACsY,OAAO,CAAG1lB,UAAU,CAAC,UAAM,CACpC3C,CAAG,CAAC0C,QAAQ,CAAC,YAAY,CAAC,CAC1BC,UAAU,CAAC,UAAM,CACf,MAAOuc,aAAY,CAACnZ,MAAM,CAAC/F,CAAG,CAACkK,IAAI,CAAC,IAAI,CAAC,CAAC,CAC1ClK,CAAG,CAAClC,MAAM,EACZ,CAAC,CAAEohB,YAAY,CAACsJ,QAAQ,CAACjb,UAAU,CACrC,CAAC,CAAE+a,CAAO,CAAG,CAAC,CAAGpJ,YAAY,CAACsJ,QAAQ,CAACC,IAAI,CAAC,CAC5C1Y,CAAO,CAAG7N,CAAC,CAAC,GAAG,CAAGgd,YAAY,CAACnZ,MAAM,CAACgK,CAAO,CAAC7F,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAC5D,CAAC,CAbuB,CAAC,CAAlB6F,CAAO,CAACnV,MAAU,iDAc3B,CAAC,CAEDukB,UAAU,CAAE,oBAASnf,CAAG,CAAE0oB,CAAG,CAAmB,IAAjBC,EAAS,6DAClC9Z,CAAM,CAAG7O,CAAG,CAAC3B,aAAa,CAAC,SAAS,CAAC,CAKzC,GAJkB,WAAW,EAAzB,MAAOqqB,EAAkB,GAC3BA,CAAG,CAAG,CAAC7Z,CAAM,CAAChR,SAAS,CAACK,QAAQ,CAAC,QAAQ,CAAC,EAC5C2Q,CAAM,CAAChR,SAAS,CAAC+P,MAAM,CAAC,QAAQ,CAAE8a,CAAG,CAAC,CACtC7Z,CAAM,CAAChR,SAAS,CAAC+P,MAAM,CAAC,UAAU,CAAE,CAAC8a,CAAG,CAAC,CACrCC,CAAS,CAAE,CACb,GAAIC,EAAC,CAAG5oB,CAAG,CACX4oB,CAAC,CAAC7U,gBAAgB,CAAC,YAAY,CAAE,iBAAMmL,aAAY,CAACC,UAAU,CAACyJ,CAAC,IAAQ,EAAC,CACzEA,CAAC,CAAC/qB,SAAS,CAACI,GAAG,CAAC,oBAAoB,CACtC,CAAC,KACM+B,CAAG,EACRA,CAAG,CAACyP,OAAO,CAAGiZ,CAAG,CACjB1oB,CAAG,CAAG7D,QAAQ,CAACkC,aAAa,YAAK6gB,YAAY,CAACnZ,MAAM,CAAC/F,CAAG,CAACoC,EAAE,CAAC,EAEhE,CAAC,CAEDomB,QAAQ,CAAE,CACRD,QAAQ,CAAE,EAAE,CACZhb,UAAU,CAAE,GAAG,CACfkb,IAAI,CAAE,GACR,CACF,CAAC,CAED,QAASI,WAAU,CAACzmB,CAAE,CAAE,CACtB,GAAIrE,EAAI,CAAG5B,QAAQ,CAACgpB,cAAc,CAAC/iB,CAAE,CAAC,CACtC,GAAIrE,CAAI,CAAE,CACR,GAAIjC,EAAI,CAAGiC,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,CACjD,GAAGvC,CAAI,EAAI,CAACA,CAAI,CAACS,KAAK,CAAE,CACtB,GAAIusB,EAAS,CAAGplB,SAAS,CAAC,MAAM,CAAC,CAC7B,CAAColB,CAAS,CAACxuB,OAAO,CAAC,GAAG,CAAC,GACzBwB,CAAI,CAACyF,IAAI,CAAG,UAAU,EACxBzF,CAAI,CAACS,KAAK,CAAGusB,CACf,CACI/qB,CAAI,CAACgrB,EAAE,CAACxsB,KAAK,GAAEwB,CAAI,CAACgrB,EAAE,CAACxsB,KAAK,CAAGmH,SAAS,CAAC,OAAO,CAAC,EACjD3F,CAAI,CAACirB,YAAY,CAACzsB,KAAK,GAAEwB,CAAI,CAACirB,YAAY,CAACzsB,KAAK,CAAGiH,YAAY,CAAC,cAAc,CAAC,CACrF,CACF,CAEA,QAASylB,YAAW,CAAC7mB,CAAE,CAAE,CACvB,GAAIrE,EAAI,CAAG5B,QAAQ,CAACgpB,cAAc,CAAC/iB,CAAE,CAAC,CACtC,GAAMrE,CAAI,EACV,GAAIirB,EAAY,CAAGjrB,CAAI,CAACirB,YAAY,CAChCA,CAAY,EAAI,CAACA,CAAY,CAACzsB,KAAK,GACrCysB,CAAY,CAACzsB,KAAK,CAAGiH,YAAY,CAAC,cAAc,CAAC,EAErD,CAEC,UAAUtB,CAAC,CAAE,CACZA,CAAC,CAACgnB,KAAK,CAACC,OAAO,CAACC,IAAI,CAAG,CACrBnrB,GAAG,CAAE,aAAUue,CAAQ,CAAE,CACA,CAAC,GAAnB,IAAI,CAAC6M,QAAc,EAAmC,KAAK,GAApC,IAAI,CAACC,OAAO,CAACvlB,WAAW,EAAY,EAAiB,EAAE,GAAf,IAAI,CAACoR,GAAU,GAC5E,IAAI,CAACoU,QAAQ,EAAwB,CAAC,GAArB,IAAI,CAACC,UAAgB,CACzChN,CAAQ,CAACiN,OAAO,CAACC,KAAK,CAAC,IAAI,CAAC,CAEA,eAAe,GAAnC,IAAI,CAACF,UAA8B,EAAkC,CAAC,GAA/B,IAAI,CAACrU,GAAG,CAAC7a,OAAO,CAAC,OAAO,CAAO,CAC9E4H,CAAC,CAAC,IAAI,CAAC,CAACynB,OAAO,CAAC,OAAO,CAAC,CAIxBznB,CAAC,CAAC,IAAI,CAAC,CAAC2R,IAAI,CAAC,MAAM,CAAE2I,CAAQ,CAACiN,OAAO,CAAC,CAG5C,CACF,CACF,CAAC,EAACG,MAAM,CAAC,IAELpE,SAAQ,CAAG,CACbqE,SAAS,CAAE,mBAASC,CAAO,CAAEC,CAAW,CAAEC,CAAY,CAAkB,IAAhBC,EAAQ,6DAC1DC,CAAkB,CAAGH,CAAW,QAChCE,CAAQ,GACVF,CAAW,CAAGA,CAAW,CAAC,GAAG,CAACxnB,cAAc,EAC1B,IAAI,EAApBwF,YAAoB,MACtBJ,KAAI,CAACkD,GAAG,CAACpR,EAAE,CAAClI,cAAc,CAAC,EAGI,IAAI,EAAjCwW,YAAY,CAACgiB,CAAW,CAAS,GACnChiB,YAAY,CAACgiB,CAAW,CAAC,CAAGC,CAAY,EAEtC,IAAAF,CAAe,CAEjB/hB,YAAY,CAACgiB,CAAW,CAAC,CAAG7nB,CAAC,CAAC,YAAY,CAAGgoB,CAAkB,CAAC,CAAC9B,EAAE,CAAC,UAAU,CAAC,CAG9C,MAAM,EAAnCrgB,YAAY,CAACgiB,CAAW,CAAW,CACrC7nB,CAAC,CAAC,YAAY,CAAGgoB,CAAkB,CAAC,CAAChgB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAE9DhI,CAAC,CAAC,YAAY,CAAGgoB,CAAkB,CAAC,CAACC,UAAU,CAAC,SAAS,CAAC,CAEzB,MAAM,EAAnCpiB,YAAY,CAACgiB,CAAW,CAAW,EAAM,IAAAhiB,YAAY,CAACgiB,CAAW,CAAU,CACrF,CAAC,CAEDK,SAAS,CAAE,mBAASC,CAAO,CAAE,CAC3B,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,WAAW,IAAO,CAI5D,MAHe,KAAI,EAAfA,CAAe,GACjBnoB,CAAC,CAAC4T,EAAE,CAACwU,GAAG,CAAG,CAACla,CAAO,EAEdA,CACT,CAAC,CAEDpF,WAAW,CAAE,qBAASqf,CAAO,CAAE,CAC7B,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,aAAa,IAAO,CAY9D,MAXe,KAAI,EAAfA,CAAe,EAA2B,WAAW,EAAjC,MAAOE,WAA0B,EAAKA,UAAW,GACvEzjB,YAAY,CAACC,IAAI,CAAC,UAAU,CAAE,WAAW,CAAC,CACtCqJ,CAAO,EACTrF,QAAQ,CAACC,WAAW,EAAE,CACtBhC,QAAQ,CAAClL,MAAM,CAAC,cAAc,CAAC,EAG/BkL,QAAQ,CAACC,MAAM,CAAC,cAAc,CAAE,8BAA8B,CAAC,CAEjEnC,YAAY,CAACM,OAAO,CAAC,UAAU,CAAC,EAE3BgJ,CACT,CAAC,CAEDoa,OAAO,CAAE,iBAASH,CAAO,CAAE,CACzB,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,SAAS,IAAQ,CAO3D,MANIja,EAAO,CACTpH,QAAQ,CAACC,MAAM,CAAC,SAAS,CAAE,8FAA8F,CAAC,CAG1HD,QAAQ,CAAClL,MAAM,CAAC,SAAS,CAAC,CAErBsS,CACT,CAAC,CAED/H,cAAc,CAAE,wBAASgiB,CAAO,CAAE,CAChC,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,gBAAgB,OAAc,CAKxE,MAJIA,EAAO,GACTjiB,WAAW,CAACC,cAAc,CAAG+H,CAAO,CACpChI,WAAW,CAACW,SAAS,EAAE,EAElBqH,CACT,CAAC,CAEDqV,aAAa,CAAE,uBAAS4E,CAAO,CAAE,CAC/B,MAAO7E,SAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,eAAe,IACpD,CAAC,CAEDI,cAAc,CAAE,wBAASJ,CAAO,CAAE,CAChC,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,gBAAgB,IAAO,CAC7Dja,CAAO,CACTpH,QAAQ,CAACC,MAAM,CAAC,gBAAgB,yEAG7B,CAGHD,QAAQ,CAAClL,MAAM,CAAC,gBAAgB,CAEpC,CAAC,CAED4oB,cAAc,CAAE,wBAAS2D,CAAO,CAAE,CAChC,MAAO7E,SAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,gBAAgB,IACrD,CAAC,CAEDK,WAAW,CAAE,qBAASL,CAAO,CAAE,CAC7B,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,aAAa,IAAO,CAa9D,MAZKja,EAAO,CAIVpH,QAAQ,CAAClL,MAAM,CAAC,aAAa,CAAC,CAH9BkL,QAAQ,CAACC,MAAM,CAAC,aAAa,kCAAmC,CAK7DohB,CAAO,EACVjiB,WAAW,CAACI,KAAK,CAACxS,KAAK,CAACmE,OAAO,CAAC,SAAAiI,CAAE,CAAI,CACpCF,CAAC,oBAAaE,CAAE,EAAG,CAACxB,IAAI,CAAC,gBAAgB,CAAC,CAACsJ,IAAI,CAAC,OAAO,CAAEzQ,EAAE,CAAC7B,UAAU,CAAC,CACtEgJ,IAAI,CAAC,KAAK,CAAC,CAACsJ,IAAI,CAAC,YAAY,CAAE,WAAW,CAC7C,CAAC,CAAC,CAEGkG,CACT,CAAC,CAEDua,aAAa,CAAE,uBAASN,CAAO,CAAE,CAC/B,GAAIja,EAAO,CAAGoV,QAAQ,CAACqE,SAAS,CAACQ,CAAO,CAAE,eAAe,IAAQ,CACjEM,cAAa,CAAC/c,MAAM,CAACwC,CAAO,CAC9B,CACF,CAAC,CAEGwa,KAAK,CAAG,CACVlvB,CAAC,GAAM,CACPmvB,IAAI,CAAE,eAAW,CACZ,IAAI,CAACnvB,CAAC,CAAEwG,CAAC,CAAC,UAAU,CAAC,CAACulB,MAAM,CAACvlB,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC4oB,KAAK,CAAC5oB,CAAC,CAAC,WAAW,CAAC,CAAC,CAChEA,CAAC,CAAC,UAAU,CAAC,CAACulB,MAAM,CAACvlB,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC4oB,KAAK,CAAC5oB,CAAC,CAAC,WAAW,CAAC,CAAC,CAC/D,IAAI,CAACxG,CAAC,CAAG,CAAC,IAAI,CAACA,CACjB,CACF,CAAC,CAEG5H,WAAW,CAAG4P,SAAS,CAAC,aAAa,CAAC,EAAI,IAAI,CAClD,QAASqnB,eAAc,CAACC,CAAI,CAAE,CACxB/lB,QAAQ,CAAC+lB,CAAI,CAAE,CAAC,IAAI,CAAE,IAAI,CAAE,KAAK,CAAC,CAAC,GACvCl3B,WAAW,CAAGk3B,CAAI,CAClB9mB,UAAU,CAAC,aAAa,CAAE8mB,CAAI,CAAE,GAAG,CAAC,CACpCrjB,IAAI,CAACC,IAAI,CAACnO,EAAE,CAAC1C,kBAAkB,CAAC,CAClC,CAEA,GAAMk0B,SAAQ,CAAG,EAAE,CAEnB,QAASC,SAAQ,EAAG,CAClBhpB,CAAC,CAAC,mBAAmB,CAAC,CAACsC,IAAI,CAAC,UAAW,CACrCtC,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,UAAU,IAAO,CAC7B+N,EAAE,CAAC,OAAO,CAAE,UAAW,CACtB/V,CAAC,CAAC,IAAI,CAAC,CAACioB,UAAU,CAAC,UAAU,CAC/B,CAAC,CACH,CAAC,CAAC,CAEEj5B,MAAM,EAAEgR,CAAC,CAAC,UAAU,CAAC,CAAC+B,IAAI,EAAE,CAC7BknB,OAAO,CACRjpB,CAAC,CAAC,cAAc,CAAC,CAACsb,OAAO,CAAC,+FAAiG,CAAC/jB,EAAE,CAAC/F,aAAa,CAAC,UAAU,CAAC,CAExJwO,CAAC,CAAC,cAAc,CAAC,CAACsb,OAAO,CAAC,6FAA+F,CAAC/jB,EAAE,CAAC9F,WAAW,CAAC,UAAU,CAAC,CAEtJuO,CAAC,CAAC,cAAc,CAAC,CAACsb,OAAO,CAAC/jB,EAAE,CAAC3F,WAAW,CAAC,wLAAwL,CAAC,CAElOoO,CAAC,CAAC,cAAc,CAAC,CAACgE,MAAM,0DACmBzM,EAAE,CAACJ,eAAe,mEAClBI,EAAE,CAACH,eAAe,aAAW,CAErE6K,MAAM,CAAC8B,WAAW,EACnB/D,CAAC,CAAC,cAAc,CAAC,CAACsb,OAAO,CAACrZ,MAAM,CAAC8B,WAAW,CAAC,CAE/C,GAAImlB,EAAE,CAAGjvB,QAAQ,CAACkC,aAAa,CAAC,WAAW,CAAC,CAc5C,GAbI+sB,CAAE,EACJpa,aAAa,CAACC,QAAQ,CAACma,CAAE,CAAC,CAE5BzjB,IAAI,CAACrD,IAAI,EAAE,CACX+mB,KAAK,CAAC/mB,IAAI,IAAM,CAEhBgnB,OAAO,CAAChnB,IAAI,EAAE,CACdxC,cAAc,EAAE,CAChBypB,eAAe,EAAE,CACjBC,aAAa,EAAE,CAEfC,IAAI,CAACnnB,IAAI,EAAE,CAERZ,SAAS,CAAC,aAAa,CAAC,CAAE,CAC3B,GAAIrI,EAAC,CAAGQ,MAAM,CAAC,aAAa,CAAC,CACrB,SAAS,EAAdR,CAAc,EAAS,EAAE,EAAPA,CAAO,GAC1Bc,QAAQ,CAACgpB,cAAc,CAAC,cAAc,CAAC,CAACjY,KAAK,CAAC4O,QAAQ,CAAGzgB,CAAC,CAC9D,CAweA,GAreAqwB,oBAAoB,EAAE,CAElBP,OAAO,EAiBTQ,YAAY,EAAE,CACdzpB,CAAC,CAAC,MAAM,CAAC,CAACQ,QAAQ,CAAC,YAAY,CAAC,CAChCR,CAAC,CAAC,6CAA2C,CAAC,CAAC6D,MAAM,EAAE,CAAC6C,IAAI,EAAE,CAC9D1G,CAAC,CAAC,WAAW,CAAC,CAACyD,KAAK,CAAC,UAAW,CAO9B,MANGzD,EAAC,CAAC,cAAc,CAAC,CAACkmB,EAAE,CAAC,UAAU,CAAC,CACjCwD,SAAS,CAAC,OAAO,CAAC,CAGlBA,SAAS,CAAC,aAAa,CAAC,GAG5B,CAAC,CAAC,CACFX,QAAQ,CAAChxB,IAAI,CAAC,SAAA2L,CAAE,CAAI,CAClBgmB,SAAS,CAAC,OAAO,CAAC,CAClBzvB,QAAQ,CAACwB,gBAAgB,CAAC,eAAe,CAAC,CAACxD,OAAO,CAAC,SAAA6F,CAAG,QAAIkf,aAAY,CAACyI,SAAS,CAAC9T,IAAI,CAAC7T,CAAG,CAAC,CAAC,IAAI,IAAO,EACxG,CAAC,CAAC,CACFkC,CAAC,CAAC,MAAM,CAAC,CAAC+V,EAAE,CAAC,OAAO,CAAE,iBAAiB,CAAEiH,YAAY,CAAC+H,UAAU,CAAC,CAChEhP,EAAE,CAAC,WAAW,CAAE,WAAW,CAAE,SAASrS,CAAE,CAAE,CACzCA,CAAE,CAACwJ,eAAe,EAAE,CACpBxJ,CAAE,CAACC,cAAc,EAAE,CACnB,IAAI,CAACxH,aAAa,CAAC,MAAM,CAAC,CAACsH,KAAK,EAClC,CAAC,CAAC,GArCFkmB,OAAO,CAACvnB,IAAI,EAAE,CACdpC,CAAC,CAAC,WAAW,CAAC,CAAC4pB,UAAU,CAAC,UAAW,CAAEF,SAAS,CAAC,KAAK,CAAC1pB,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,UAAU,CAAC,CAAG,CAAC,CAAC,CACpFrI,CAAC,CAAC,eAAe,CAAC,CAACwlB,UAAU,CAAC,UAAW,CAAEkE,SAAS,CAAC,OAAO,CAAG,CAAC,CAAC,CACjE1pB,CAAC,CAAC,MAAM,CAAC,CAAC+V,EAAE,CAAC,YAAY,CAAE,iBAAiB,CAAE,SAASrS,CAAE,CAAE,YACzD,IAAI,CAAC2iB,QAAQ,CAAG5lB,UAAU,CAAC,iBAAMuc,aAAY,CAAC+H,UAAU,CAACpT,IAAI,CAAC,CAAI,CAAC,CAACjO,CAAE,CAAC,EAAEsZ,YAAY,CAACsJ,QAAQ,CAACD,QAAQ,CACzG,CAAC,CAAC,CACDtQ,EAAE,CAAC,YAAY,CAAE,iBAAiB,CAAEiH,YAAY,CAACyI,SAAS,CAAC,CAC3D1P,EAAE,CAAC,OAAO,CAAE,iBAAiB,CAAE,SAAS9I,CAAC,CAAE,CAC1CA,CAAC,CAACtJ,cAAc,EAAE,CAClB,GAAIiU,EAAI,CAAG,IAAI,CAACnV,YAAY,CAAC,MAAM,CAAC,CAC/BxC,SAAS,CAAC2X,CAAI,CAAC1Y,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,EACnCyY,UAAU,CAACC,CAAI,CAEnB,CAAC,CAAC,EA2BJ5X,CAAC,CAAC,MAAM,CAAC,CAACyD,KAAK,CAAC,SAAAC,CAAE,QAAIqlB,SAAQ,CAAC9wB,OAAO,CAAC,SAAAL,CAAE,QAAIA,EAAE,CAAC8L,CAAE,CAAC,EAAC,EAAC,CAGrD1D,CAAC,CAAC,MAAM,CAAC,CACR+V,EAAE,CAAC,OAAO,CAAE,UAAU,CAAE,UAAW,CAElC,MADA1X,OAAM,CAAC2B,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,MAAM,CAAC,CAAEP,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,MAAM,CAAC,CAAErI,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,MAAM,CAAC,CAAErI,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,OAAO,CAAC,CAAErI,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,OAAO,CAAC,CAAC,GAE3H,CAAC,CAAC,CACD0N,EAAE,CAAC,OAAO,CAAE,UAAU,CAAE,UAAW,CAElC,MADAjX,QAAO,CAACkB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,MAAM,CAAC,CAAEP,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,KAAK,CAAC,CAAErI,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,OAAO,CAAC,CAAErI,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,OAAO,CAAC,CAAC,GAErG,CAAC,CAAC,CACD0N,EAAE,CAAC,OAAO,CAAE,SAAS,CAAE,UAAW,CACjC,GAAIrD,EAAM,CAAG1S,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,QAAQ,CAAC,CAInC,MAHAwhB,KAAI,CAACC,EAAE,CAAC,sCAAsC,CAAE,UAAW,CACzDC,eAAe,CAACrX,CAAM,CAAC,OAAO,CAAC,OAAO,IAAS,EAAE,CAAC,MAAM,CAC1D,CAAC,CAAC,GAEJ,CAAC,CAAC,CAEDqD,EAAE,CAAC,OAAO,CAAE,QAAQ,CAAE,SAASiR,CAAK,CAAE,CAACgD,WAAW,CAAChqB,CAAC,CAAC,IAAI,CAAC,CAAEgnB,CAAK,CAAC,CAAC,CAAC,CAEpEjR,EAAE,CAAC,OAAO,CAAE,MAAM,CAAEvG,UAAU,CAAC,CAE/BuG,EAAE,CAAC,OAAO,CAAE,UAAU,CAAE,UAAW,CAClC/V,CAAC,CAAC,YAAY,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CACxC,GAAItL,EAAK,CAAGkL,CAAC,wBAAiBA,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,KAAK,CAAC,MAAI,CAAC1F,IAAI,CAAC,UAAW,CACpEtC,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,WAAW,CAAC,CAACsD,MAAM,EAAE,CAACrD,QAAQ,CAAC,WAAW,CAC5D,CAAC,CAAC,CAAC9H,MAAM,CACT+M,IAAI,CAAC4E,IAAI,CAAC9S,EAAE,CAACzC,KAAK,CAAC,IAAI,CAACA,CAAK,CAAE,CAAC6Q,IAAI,CAAE,GAAG,CAAC,CAC5C,CAAC,CAAC,CACDoQ,EAAE,CAAC,OAAO,CAAE,sBAAsB,CAAE,UAAW,IAC1CkU,EAAE,CAAGjqB,CAAC,CAAC,IAAI,CAAC,CACZlD,CAAM,CAAGkD,CAAC,CAAC,UAAS,CAAGiqB,CAAE,CAACjiB,IAAI,CAAC,MAAM,CAAC,CAACjK,MAAM,CAAC,CAAC,CAAC,CAAG,KAAI,CAAC,CAACjB,MAAM,EAAE,EAAIkD,CAAC,CAAC,UAAS,CAAGiqB,CAAE,CAAC3sB,IAAI,EAAE,CAAC4B,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAG,KAAI,CAAC,CAACpC,MAAM,EAAE,IAAS,CAMzI,MALGA,EAAM,EACPkD,CAAC,CAAC,YAAY,CAAC,CAACkqB,OAAO,CAAC,CACtBhpB,SAAS,CAAEpE,CAAM,CAACkE,GAAG,EAAKhB,CAAC,CAAC,eAAe,CAAC,CAACzD,MAAM,EAAE,CAAG,EAAE,CAC5D,CAAC,CAAE,GAAG,CAAC,GAGX,CAAC,CAAC,CACDwZ,EAAE,CAAC,OAAO,CAAE,OAAO,CAAE,UAAW,CACI,WAAW,EAA3C,MAAO/V,EAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,MAAM,CAAiB,EAAErI,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,MAAM,CAAErI,CAAC,CAAC,IAAI,CAAC,CAAC4B,IAAI,EAAE,CAAC,CACpF,GAAIuoB,EAAG,CAAGC,SAAS,CAACpqB,CAAC,CAAC,IAAI,CAAC,CAAC4B,IAAI,EAAE,CAAC,CACnC5B,CAAC,CAAC,IAAI,CAAC,CAAC4B,IAAI,CAAC5B,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,OAAO,CAAC,CAAC,CACnChI,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,OAAO,CAAEmiB,CAAG,CAC3B,CAAC,CAAC,CACDpU,EAAE,CAAC,OAAO,CAAE,YAAY,CAAE,SAASrS,CAAE,CAAE,CACtCA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAI0mB,EAAG,CAAG,IAAI,CAAC/Z,aAAa,CAC1Bga,CAAQ,CAAGD,CAAG,CAACvuB,WAAW,CAAC,WAAW,CAAC,CACzC,GAAI,CAACM,cAAc,CACjBoT,UAAU,CAACmC,IAAI,CAAC2Y,CAAQ,CAACnuB,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,KAE9C,IACCouB,EAAS,CAAG1a,YAAY,CACxBzT,cAAc,CAACqG,YAAY,CAAC,IAAI,CAAC,CAAC5C,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAC/DQ,cAAc,CACdmqB,CAAQ,CAAGF,CAAQ,CAACnuB,aAAa,CAAC,WAAW,CAAC,CAChDsuB,CAAS,CAAGpa,gBAAgB,CAACma,CAAQ,CAAC,CACxCntB,MAAM,aAAMgtB,CAAG,CAACre,OAAO,CAACvM,CAAC,EAAI8qB,CAAS,CAAG,EAAE,YAAOF,CAAG,CAACre,OAAO,CAACvM,CAAC,KAAG,SAAG4qB,CAAG,CAACre,OAAO,CAAC9L,EAAE,cAAKuqB,CAAS,EACnG,CACF,CAAC,CAAC,CAED1U,EAAE,CAAC,OAAO,CAAC,oBAAoB,CAAE,SAASrS,CAAE,CAAE,CAC7CA,CAAE,CAACC,cAAc,EAAE,CACnB+mB,WAAW,CAAC1qB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,QAAQ,CAAC,CACvC,CAAC,CAAC,CACDwV,EAAE,CAAC,OAAO,CAAC,iBAAiB,CAAE,SAASrS,CAAE,CAAE,CAC1CA,CAAE,CAACC,cAAc,EAAE,CACnBgnB,SAAS,CAAC3qB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,QAAQ,CAAC,CACrC,CAAC,CAAC,CACDwV,EAAE,CAAC,YAAY,CAAE,YAAY,CAAE,UAAW,CACL,WAAW,EAA5C,MAAO/V,EAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,OAAO,CAAiB,EAC7ChI,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,OAAO,CAAE4iB,SAAS,CAAC5qB,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,KAAK,CAAC,CAAC9I,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC+V,WAAW,EAAE,CAAC,CAE1G,CAAC,CAAC,CACDc,EAAE,CAAC,OAAO,CAAE,YAAY,CAAE,SAASrS,CAAE,CAAE,CACtCA,CAAE,CAACC,cAAc,EAAE,IACf8L,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACfiT,CAAG,CAAGxD,CAAK,CAACzH,IAAI,CAAC,MAAM,CAAC,CACxB6iB,CAAI,CAAGpb,CAAK,CAAClP,OAAO,CAAC,QAAQ,CAAC,CAC5BsqB,CAAI,CAACnV,QAAQ,CAAC,WAAW,CAAC,EAC9BmV,CAAI,CAACrqB,QAAQ,CAAC,2BAA2B,CAAC,CAE5C,GAAIsqB,EAAI,CAAGD,CAAI,CAACnsB,IAAI,CAAC,WAAW,CAAC,CAC3BosB,CAAI,CAACpsB,IAAI,CAAC,eAAe,CAAC,CAAChG,MAAM,EACrCoyB,CAAI,CAAC9mB,MAAM,qCACQzM,EAAE,CAAChD,QAAQ,+DACxBgnB,QAAQ,CAAC,QAAQ,CAAE,QAAQ,CAAC,wBACrB,CACT9L,CAAK,CAAC/Q,IAAI,CAAC,OAAO,CAAC,CAAChG,MAAM,EAC9B+W,CAAK,CAACzL,MAAM,CAAC,eAAc,CAACiP,CAAG,CAAC,wCAAqC,CAAC,CACxE6X,CAAI,CAACpsB,IAAI,CAAC,iBAAiB,CAAC,CAAC+E,KAAK,CAAC,UAAW,CAC5ConB,CAAI,CAACzqB,WAAW,CAAC,2BAA2B,CAAC,CAC5C1B,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAACqsB,KAAK,EACzB,CAAC,CACH,CAAC,CAAC,CACDhV,EAAE,CAAC,QAAQ,CAAE,WAAW,CAAE,UAAW,CACpC,GAAIiV,EAAS,CAAGhrB,CAAC,CAAC,mBAAmB,CAAC,CAACtH,MAAM,CAEvCsH,CAAC,CAAC,aAAa,CAAC,CAACtH,MAAM,GAC3BsH,CAAC,CAAC,mBAAmB,CAAC,CAACsb,OAAO,6BAC1B/jB,EAAE,CAACtC,QAAQ,4HAC+CsC,EAAE,CAAC3H,MAAM,eAAK2rB,QAAQ,CAAC,GAAG,CAAE,SAAS,IAAQ,gCAC/F,CACZvb,CAAC,CAAC,iBAAiB,CAAC,CAACyD,KAAK,CAAC,SAASC,CAAE,CAAE,CACtCA,CAAE,CAACC,cAAc,EAAE,CACnB3D,CAAC,CAAC,WAAW,CAAC,CAACoN,IAAI,CAAC,SAAS,IAAQ,CACrCpN,CAAC,CAAC,MAAM,CAAC,CAACI,WAAW,CAAC,iBAAiB,CAAC,CACxCJ,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAC1C,CAAC,CAAC,EAGY,CAAC,CAAb4qB,CAAa,CACfhrB,CAAC,CAAC,aAAa,CAAC,CAAC1C,IAAI,CAAC0tB,CAAS,CAAC,EAGhChrB,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CACzCJ,CAAC,CAAC,MAAM,CAAC,CAACI,WAAW,CAAC,iBAAiB,CAAC,CAE5C,CAAC,CAAC,CAED2V,EAAE,CAAC,OAAO,CAAE,gBAAgB,CAAE,SAASrS,CAAE,CAAE,CAC1C,GAAI,CAAE1D,CAAC,CAAC,IAAI,CAAC,CAACtB,IAAI,CAAC,WAAW,CAAC,CAACwnB,EAAE,CAAC,UAAU,CAAC,CAAE,CAC9CxiB,CAAE,CAACwJ,eAAe,EAAE,CACpBxJ,CAAE,CAACC,cAAc,EAAE,IACf8L,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACjBkc,CAAK,CAAGzM,CAAK,CAAC5L,MAAM,EAAE,CAACnF,IAAI,CAAC,YAAY,CAAC,CACvCqX,CAAE,CAAG,CAACmG,CAAK,CAACgK,EAAE,CAAC,UAAU,CAAC,CAE9B,GADAlmB,CAAC,CAAC,YAAY,CAAC,CAAC0G,IAAI,EAAE,CAClB,CAAEwV,CAAK,CAACxjB,MAAM,CAAE,CAClB,GAAIuyB,EAAS,CAAGjrB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,WAAW,CAAC,CAC1C4H,CAAK,CAAG8iB,CAAS,CAAC5iB,IAAI,CAAC,OAAO,CAAC,CAC/BnI,CAAE,CAAG+qB,CAAS,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CACzB6iB,CAAI,CAAGD,CAAS,CAACvV,QAAQ,CAAC,IAAI,CAAC,CAGjC,IAAI,CAACxL,kBAAkB,CAAC,UAAU,wIAEJqR,QAAQ,CAAC,GAAG,CAAC,kBAAShkB,EAAE,CAACtG,GAAG,sCACnDi6B,CAAI,CAIJ,EAAE,2BAHgB,WAAW,EAA5B,MAAOC,MAAqB,EAAI,CAACA,KAAK,EAAI,CAAC,oDAA6C5P,QAAQ,CAAC,GAAG,CAAC,kBAAShkB,EAAE,CAACtG,GAAG,aAAIsG,EAAE,CAAC9C,IAAI,iBAAgB,EAAE,oDAC3H8mB,QAAQ,CAAC,MAAM,CAAC,kBAAShkB,EAAE,CAAC9B,QAAQ,kEAClC8lB,QAAQ,CAAC,QAAQ,CAAC,kBAAShkB,EAAE,CAAC7B,UAAU,8BAC/D,oDACqB6lB,QAAQ,CAAC,SAAS,CAAC,kBAAShkB,EAAE,CAACtD,MAAM,oEACjCsnB,QAAQ,CAAC,MAAM,CAAC,kBAAShkB,EAAE,CAACxC,KAAK,sCAC7Dk2B,CAAS,CAACvsB,IAAI,CAAC,WAAW,CAAC,CAAChG,MAAM,2DACF6iB,QAAQ,CAAC,SAAS,CAAC,kBAAShkB,EAAE,CAACd,WAAW,+BACzE,EAAE,6DAC8B8kB,QAAQ,CAAC,iBAAiB,CAAC,kBAAShkB,EAAE,CAACvC,cAAc,sCACtF/F,SAAS,qEACiCssB,QAAQ,CAAC,GAAG,CAAC,kBAAShkB,EAAE,CAACtG,GAAG,aAAIsG,EAAE,CAAC/C,KAAK,kDACvEglB,UAAU,sDAA6CrR,CAAK,yBAAgBjI,CAAE,wDAChEqb,QAAQ,CAAC,KAAK,CAAC,kBAAShkB,EAAE,CAACpG,GAAG,8DAErD+5B,CAAI,8IAEI1R,UAAU,yDAAgDrR,CAAK,wBAAejI,CAAE,uCAChFqb,QAAQ,CAAC,KAAK,CAAC,kBAAShkB,EAAE,CAACnG,WAAW,oLAGtCooB,UAAU,2DAAkDrR,CAAK,wBAAejI,CAAE,uCAClFqb,QAAQ,CAAC,OAAO,CAAC,kBAAShkB,EAAE,CAAClG,aAAa,4KAG1CmoB,UAAU,uDAA8CrR,CAAK,wBAAejI,CAAE,uCAC9Eqb,QAAQ,CAAC,MAAM,CAAC,kBAAShkB,EAAE,CAACjG,UAAU,gLAGtCkoB,UAAU,yDAAgDrR,CAAK,wBAAejI,CAAE,uCAChFqb,QAAQ,CAAC,QAAQ,CAAC,kBAAShkB,EAAE,CAAChG,YAAY,sCAElD,EAAE,EACJ,EAAE,sCAEA,CACR2qB,CAAK,CAAGzM,CAAK,CAAC5L,MAAM,EAAE,CAACnF,IAAI,CAAC,YAAY,CAC1C,CACAwd,CAAK,CAACxQ,MAAM,CAACqK,CAAE,CACjB,CACF,CAAC,CAAC,CAEDA,EAAE,CAAC,OAAO,CAAE,mBAAmB,CAAE,SAASrS,CAAE,CAAE,CAC7CA,CAAE,CAACwJ,eAAe,EAAE,CACpBxJ,CAAE,CAACC,cAAc,EAAE,CACnB,GAAIuY,EAAK,CAAGlc,CAAC,CAAC,YAAY,CAAC,CACzByP,CAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACf8qB,CAAI,CAAGrb,CAAK,CAAC5L,MAAM,EAAE,CACrBunB,CAAO,CAAGlP,CAAK,CAACgK,EAAE,CAAC,UAAU,CAAC,CAEhC,GADAlmB,CAAC,CAAC,YAAY,CAAC,CAAC0G,IAAI,EAAE,GAClB0kB,CAAO,EAAIlP,CAAK,CAAC,CAAC,CAAC,CAACmP,QAAQ,CAAC,CAAC,CAAC,EAAIP,CAAI,CAAC,CAAC,CAAC,GAC9C,GAAIQ,EAAG,CAAGR,CAAI,CAAChuB,MAAM,EAAE,CACrByuB,CAAS,CAAGT,CAAI,CAACpV,QAAQ,CAAC,YAAY,CAAC,CAAG,EAAE,CAAGoV,CAAI,CAACU,WAAW,EAAE,CACnEtP,CAAK,CAACnU,GAAG,CAAC,CACR,eAAWujB,CAAG,CAACzf,IAAI,MAAI,CACvB,cAAUyf,CAAG,CAACtqB,GAAG,CAAGuqB,CAAS,MAAI,CACjC,sBAAgBT,CAAI,CAACW,UAAU,EAAE,MACnC,CAAC,CAAC,CAAC1pB,IAAI,EAAE,CACT,GAAI2pB,EAAM,CAAGZ,CAAI,CAACvqB,OAAO,CAAC,QAAQ,CAAC,CAAC8H,IAAI,CAAC,QAAQ,CAAC,CAChDsjB,CAAG,CAAGb,CAAI,CAACvqB,OAAO,CAAC,WAAW,CAAC,CAC/B4H,CAAK,CAAGwjB,CAAG,CAACtjB,IAAI,CAAC,OAAO,CAAC,CACzBujB,CAAG,CAAGD,CAAG,CAACtjB,IAAI,CAAC,IAAI,CAAC,CACtB6T,CAAK,CAAC,CAAC,CAAC,CAAC2P,WAAW,CAAG,CACrBH,MAAM,CAAEA,CAAM,CACdvjB,KAAK,CAAEA,CACT,CAAC,CACD+T,CAAK,CAAC,CAAC,CAAC,CAACmP,QAAQ,CAAGP,CAAI,CAExB5O,CAAK,CAACxd,IAAI,CAAC,eAAe,CAAC,CAACsJ,IAAI,CAAC,MAAM,WAAKwR,UAAU,kDAAyCrR,CAAK,qBAAYyjB,CAAG,qBAAYF,CAAM,EAAG,CAC1I,CAAC,CAAC,CACD3V,EAAE,CAAC,OAAO,CAAE,eAAe,CAAE,SAAArS,CAAE,QAAIA,EAAE,CAACwJ,eAAe,EAAE,EAAC,CACxD6I,EAAE,CAAC,OAAO,CAAE,uBAAuB,CAAE,SAASrS,CAAE,CAAE,CACjD1D,CAAC,CAAC,YAAY,CAAC,CAAC0G,IAAI,EAAE,CACtB,GAAIwV,EAAK,CAAGlc,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,YAAY,CAAC,CACvCurB,CAAM,CAAG5P,CAAK,CAACxG,QAAQ,CAAC,WAAW,CAAC,CACpCqW,CAAG,CAAG,CAACD,CAAM,CAAG5P,CAAK,CAAC,CAAC,CAAC,CAACmP,QAAQ,CAAGrrB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,WAAW,CAAC,EACjE7B,IAAI,CAAC,WAAW,CAAC,CACZqtB,CAAG,CAACrzB,MAAM,GAChBqzB,CAAG,CAAC3e,IAAI,CAAC,SAAS,IAAO,CAACqa,OAAO,CAAC,QAAQ,CAAC,CAC3CznB,CAAC,CAAC,aAAa,CAAC,CAACQ,QAAQ,CAAC,WAAW,CAAC,CACtCR,CAAC,CAAC,MAAM,CAAC,CAACQ,QAAQ,CAAC,iBAAiB,CAAC,CACvC,CAAC,CAAC,CACDuV,EAAE,CAAC,OAAO,CAAE,kBAAkB,CAAE,SAASrS,CAAE,CAAE,CAC5C,GAAI+L,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACjBgsB,CAAO,CAAGvc,CAAK,CAAC/Q,IAAI,CAAC,OAAO,CAAC,CAAChG,MAAM,CACtC,GAAI,CAAEszB,CAAO,CAAE,CACb,GAAIf,EAAS,CAAGxb,CAAK,CAAClP,OAAO,CAAC,WAAW,CAAC,CACxC4H,CAAK,CAAG8iB,CAAS,CAAC5iB,IAAI,CAAC,OAAO,CAAC,CAC/BnI,CAAE,CAAG+qB,CAAS,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CACzBnT,CAAU,CAAG4d,aAAa,CAAGmY,CAAS,CAACvsB,IAAI,CAAC,MAAM,CAAC,CAACsJ,IAAI,CAAC,MAAM,CAAC,CAClEyH,CAAK,CAAC/Q,IAAI,CAAC,MAAM,CAAC,CAACkD,IAAI,yEAA6D1M,CAAU,uBAAYqC,EAAE,CAACrC,UAAU,qGAClDiT,CAAK,aAAIjI,CAAE,uBAAY3I,EAAE,CAACpC,SAAS,QAAK,CAC5G4S,GAAG,CAAC,CAAC,YAAa,CAAC,CAAC,CAAC,CACrBrJ,IAAI,CAAC,iBAAiB,CAAC,CAAC+E,KAAK,EAChC,CAAC,IAECgM,EAAK,CAACwG,WAAW,CAAC,iBAAiB,CACvC,CAAC,CAAC,CACDF,EAAE,CAAC,OAAO,CAAE,UAAU,CAAE,SAASrS,CAAE,CAAE,CACpCA,CAAE,CAACwJ,eAAe,EAAE,CACpB,GAAIuC,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACnBA,CAAC,CAAC,UAAU,CAAC,CAACI,WAAW,CAAC,UAAU,CAAC,CACrCqP,CAAK,CAACrR,KAAK,EAAE,CAAC8X,MAAM,EAAE,CAAC1V,QAAQ,CAAC,UAAU,CAC5C,CAAC,CAAC,CACDuV,EAAE,CAAC,OAAO,CAAE,cAAc,CAAE,UAAW,CACtC,GAAItG,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACjBkc,CAAK,CAAGzM,CAAK,CAAClP,OAAO,CAAC,YAAY,CAAC,CACnC0rB,CAAI,CAAG/P,CAAK,CAAC,CAAC,CAAC,CACf4P,CAAM,CAAG5P,CAAK,CAACxG,QAAQ,CAAC,WAAW,CAAC,CACpCwW,CAAK,CAAGJ,CAAM,CAAG5P,CAAK,CAAC,CAAC,CAAC,CAACmP,QAAQ,CAAG5b,CAAK,CAAClP,OAAO,CAAC,WAAW,CAAC,CAC/D4rB,CAAK,CAAGjQ,CAAK,CAACxd,IAAI,CAAC,gBAAgB,CAAC,CACtC+Q,CAAK,CAACjP,QAAQ,CAAC,aAAa,CAAC,CAC7B,GAAIoV,EAAE,CAAG,GAAIgD,SAAU,CACvB,GAAIsD,CAAK,CAACxd,IAAI,CAAC,eAAe,CAAC,CAAChG,MAAM,CAAE,CACtC,GAAI0zB,EAAE,CAAGlQ,CAAK,CAACxd,IAAI,CAAC,qBAAqB,CAAC,CAC1C,GAAI,CAAC0tB,CAAE,CAACntB,GAAG,EAAE,CAIX,MAHAmtB,EAAE,CAAChuB,KAAK,EAAE,CACVqH,IAAI,CAAC4L,IAAI,CAAC9Z,EAAE,CAAC7G,YAAY,CAAC,KAC1B+e,EAAK,CAACrP,WAAW,CAAC,aAAa,CAAC,CAGlCwV,CAAE,CAAC5R,MAAM,CAAC,SAAS,CAAEooB,CAAE,CAACntB,GAAG,EAAE,CAC/B,CACI6sB,CAAM,CACRlW,CAAE,CAAC5R,MAAM,CAAC,eAAe,CAAEioB,CAAI,CAACJ,WAAW,CAACH,MAAM,CAAC,CAEnD9V,CAAE,CAAC5R,MAAM,CAAC,QAAQ,CAAEkoB,CAAK,CAAC3rB,OAAO,CAAC,WAAW,CAAC,CAAC8H,IAAI,CAAC,IAAI,CAAC,CAAC,CAC5D,GAAI7T,EAAK,CAAGib,CAAK,CAACiG,QAAQ,CAAC,iBAAiB,CAAC,CACzClhB,CAAK,EACPohB,CAAE,CAAC5R,MAAM,CAAC,WAAW,CAAE,CAAC,CAAC,CAC3B4R,CAAE,CAAC5R,MAAM,CAAC,UAAU,CAAE,CAACyL,CAAK,CAACiG,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CACxDE,CAAE,CAAC5R,MAAM,CAAC,OAAO,CAAE8nB,CAAM,CACrBG,CAAI,CAACJ,WAAW,CAAC1jB,KAAK,CACtB+jB,CAAK,CAAC3rB,OAAO,CAAC,WAAW,CAAC,CAAC8H,IAAI,CAAC,OAAO,CAAC,CAAC,CAC7CuN,CAAE,CAAC5R,MAAM,CAAC,cAAc,CAAEmoB,CAAK,CAACzzB,MAAM,CAClCyzB,CAAK,CAACztB,IAAI,CAAC,OAAO,CAAC,CAACO,GAAG,EAAE,CACzBe,CAAC,yCAAuC,CAACf,GAAG,EAAE,CAAC,CACnDwY,IAAI,CAAC+D,WAAW,CAAC5F,CAAE,CAAE,SAAAvN,CAAI,CAAI,CAE3B,GADAoH,CAAK,CAACrP,WAAW,CAAC,aAAa,CAAC,EAC5B,CAACiI,CAAI,EACT,GAAIkM,EAAM,CAAGlM,CAAI,CAAC,CAAC,CAAC,CACpB,GAAG,CAACkM,CAAM,CAACoG,OAAO,EAAIuR,CAAK,CAAChG,EAAE,CAAC,UAAU,CAAC,CAAE,CAC1C,GAAI1xB,CAAK,CAAE,OACN23B,CAAK,CAACzzB,MAAM,EACfwjB,CAAK,CAACZ,OAAO,uCAA8BC,QAAQ,CAAC,UAAU,CAAC,yCAC7Cja,YAAY,CAAC,cAAc,CAAC,0EAA2D/J,EAAE,CAACX,QAAQ,sDAAiD,CAEnK2d,CAAM,CAAC8X,aAAa,EAA4B,eAAe,EAAvC9X,CAAM,CAAC8X,aAAgC,CACjEpQ,gBAAgB,CAACC,CAAK,CAAC,CAGvBA,CAAK,CAACxd,IAAI,CAAC,sBAAsB,CAAC,CAACwX,MAAM,EAAE,CAC1CiG,OAAO,CAAC,SAAAzY,CAAE,CAAI,CACC,OAAO,EAAjBA,CAAE,CAACuU,GAAc,GACnBvU,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CAExB,CAAC,CAEL,CAAC,IACQ4e,EAAM,EACb9rB,CAAC,CAAC,YAAY,CAAC,CAAC0G,IAAI,EAAE,CAC1B,CAAC,CACH,CAAC,CAAC,CACDqP,EAAE,CAAC,OAAO,CAAE,cAAc,CAAE,UAAW,CACtC,GAAItG,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACjBirB,CAAS,CAAGxb,CAAK,CAAClP,OAAO,CAAC,WAAW,CAAC,CACxCkP,CAAK,CAACjP,QAAQ,CAAC,aAAa,CAAC,CAC7B,GAAIoV,EAAE,CAAG,GAAIgD,SAAU,CACvBhD,CAAE,CAAC5R,MAAM,CAAC,QAAQ,CAAEinB,CAAS,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CAAC,CACzCuN,CAAE,CAAC5R,MAAM,CAAC,OAAO,CAAEinB,CAAS,CAAC5iB,IAAI,CAAC,OAAO,CAAC,CAAC,CAC3CoP,IAAI,CAAC4C,UAAU,CAACzE,CAAE,CAAE,SAAAvN,CAAI,CAAI,CAC1BoH,CAAK,CAACrP,WAAW,CAAC,aAAa,CACjC,CAAC,CACH,CAAC,CAAC,CACD2V,EAAE,CAAC,OAAO,CAAE,YAAY,CAAE,UAAW,CACpC,GAAIkV,EAAS,CAAGjrB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,WAAW,CAAC,CAC5C2F,WAAW,CAACzQ,QAAQ,CAACw1B,CAAS,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC4iB,CAAS,CAAC5iB,IAAI,CAAC,OAAO,CAAC,CAAC,CACtE4iB,CAAS,CAACzqB,QAAQ,CAAC,aAAa,CAAC,CAChC9B,IAAI,CAAC,YAAY,CAAC,CAACgI,IAAI,EAC1B,CAAC,CAAC,CACDqP,EAAE,CAAC,OAAO,CAAE,cAAc,CAAE,UAAW,CACtC,GAAIkV,EAAS,CAAGjrB,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,WAAW,CAAC,CAC5C2F,WAAW,CAACxQ,UAAU,CAACu1B,CAAS,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC4iB,CAAS,CAAC5iB,IAAI,CAAC,OAAO,CAAC,CAAC,CACxE4iB,CAAS,CAAC7qB,WAAW,CAAC,aAAa,CACrC,CAAC,CAAC,CACD2V,EAAE,CAAC,OAAO,CAAE,oBAAoB,CAAE,UAAW,CAC5C,GAAItG,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACjBkc,CAAK,CAAGzM,CAAK,CAAClP,OAAO,CAAC,YAAY,CAAC,CACnC0rB,CAAI,CAAG/P,CAAK,CAAC,CAAC,CAAC,CACfiQ,CAAK,CAAGjQ,CAAK,CAACxd,IAAI,CAAC,gBAAgB,CAAC,CACpCusB,CAAS,CAAGxb,CAAK,CAAClP,OAAO,CAAC,WAAW,CAAC,CACxCkP,CAAK,CAACjP,QAAQ,CAAC,aAAa,CAAC,CAC7B,GAAIoV,EAAE,CAAG,GAAIgD,SAAU,CACvB,GAAIsD,CAAK,CAACxd,IAAI,CAAC,eAAe,CAAC,CAAChG,MAAM,CAAE,CACtC,GAAI0zB,EAAE,CAAGlQ,CAAK,CAACxd,IAAI,CAAC,qBAAqB,CAAC,CAC1C,GAAI,CAAC0tB,CAAE,CAACntB,GAAG,EAAE,CAIX,MAHAmtB,EAAE,CAAChuB,KAAK,EAAE,CACVqH,IAAI,CAAC4L,IAAI,CAAC9Z,EAAE,CAAC7G,YAAY,CAAC,KAC1B+e,EAAK,CAACrP,WAAW,CAAC,aAAa,CAAC,CAGlCwV,CAAE,CAAC5R,MAAM,CAAC,SAAS,CAAEooB,CAAE,CAACntB,GAAG,EAAE,CAC/B,CACA2W,CAAE,CAAC5R,MAAM,CAAC,QAAQ,CAAEinB,CAAS,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CAAC,CACzCuN,CAAE,CAAC5R,MAAM,CAAC,OAAO,CAAEinB,CAAS,CAAC5iB,IAAI,CAAC,OAAO,CAAC,CAAC,CAC3CuN,CAAE,CAAC5R,MAAM,CAAC,SAAS,CAAEyL,CAAK,CAACiG,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CACvDE,CAAE,CAAC5R,MAAM,CAAC,QAAQ,CAAEyL,CAAK,CAACiG,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CACrDE,CAAE,CAAC5R,MAAM,CAAC,cAAc,CAAEmoB,CAAK,CAACzzB,MAAM,CAClCyzB,CAAK,CAACztB,IAAI,CAAC,OAAO,CAAC,CAACO,GAAG,EAAE,CACzBe,CAAC,yCAAuC,CAACf,GAAG,EAAE,CAAC,CACnDwY,IAAI,CAAChhB,WAAW,CAACmf,CAAE,CAAE,SAAA0W,CAAM,CAAI,CAE7B,GADA7c,CAAK,CAACrP,WAAW,CAAC,aAAa,CAAC,CAC5BksB,CAAM,CAAC5zB,MAAM,CAAE,CACjB,GAAI6b,EAAM,CAAG+X,CAAM,CAAC,CAAC,CAAC,CACjBH,CAAK,CAACzzB,MAAM,EACfwjB,CAAK,CAACZ,OAAO,uCAA8BC,QAAQ,CAAC,UAAU,CAAC,yCAC7Cja,YAAY,CAAC,cAAc,CAAC,0EAA2D/J,EAAE,CAACX,QAAQ,sDAAiD,CAEnK2d,CAAM,CAAC8X,aAAa,EAA4B,eAAe,EAAvC9X,CAAM,CAAC8X,aAAgC,CACjEpQ,gBAAgB,CAACC,CAAK,CAAC,CAGvBA,CAAK,CAACxd,IAAI,CAAC,sBAAsB,CAAC,CAACwX,MAAM,EAAE,CAC1CiG,OAAO,CAAC,SAAAzY,CAAE,CAAI,CACC,OAAO,EAAjBA,CAAE,CAACuU,GAAc,GACnBvU,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CAExB,CAAC,CAEL,CAAC,IAECgP,EAAK,CAACxd,IAAI,CAAC,+BAA+B,CAAC,CAAC9C,MAAM,EAEtD,CAAC,CACH,CAAC,CAAC,CACDma,EAAE,CAAC,OAAO,CAAE,UAAU,CAAE,SAASrS,CAAE,CAAE,CACpCA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAI4oB,EAAO,CAAGvsB,CAAC,CAAC,IAAI,CAAC,CAACgI,IAAI,CAAC,MAAM,CAAC,CAChCwkB,CAAS,CAAGxsB,CAAC,CAAC,IAAI,CAAC,CAAC6D,MAAM,EAAE,CAACnF,IAAI,CAAC,cAAc,CAAC,CAACpB,IAAI,EAAE,CAC1D2E,MAAM,CAACuD,SAAS,CAAC+mB,CAAO,CAAEC,CAAS,CACrC,CAAC,CAAC,CACDzW,EAAE,CAAC,MAAM,CAAE,sBAAoB,CAAE,UAAW,CAC3C,GAAI0W,EAAM,CAAG,CAAC,IAAI,CAACpyB,KAAK,CAACjC,OAAO,CAAC,GAAG,CAAC,CACrC,IAAI,CAACiH,IAAI,CAAGotB,CAAM,CAAG,UAAU,CAAG,MACpC,CAAC,CAAC,CACD1W,EAAE,CAAC,OAAO,CAAE,sBAAoB,CAAE,UAAW,CAC5C,IAAI,CAAC1W,IAAI,CAAE,MACb,CAAC,CAAC,CAEF0pB,QAAQ,CAAChxB,IAAI,CAAC,SAAA2L,CAAE,CAAI,CAClB1D,CAAC,CAAC,YAAY,CAAC,CAAC0G,IAAI,EACtB,CAAC,CAAC,CAEF1G,CAAC,CAAC7E,MAAM,CAAC,CAACuxB,MAAM,CAAC,UAAM,CACrB,GAAIC,EAAS,CAAG3sB,CAAC,CAAC,YAAY,CAAC,CAC/B,GAAM2sB,CAAS,CAACzG,EAAE,CAAC,UAAU,CAAC,EAC9B,GAAI4E,EAAI,CAAG6B,CAAS,CAAC,CAAC,CAAC,CAACtB,QAAQ,CAC9BC,CAAG,CAAGR,CAAI,CAAChuB,MAAM,EAAE,CACnByuB,CAAS,CAAGT,CAAI,CAACpV,QAAQ,CAAC,YAAY,CAAC,CAAG,EAAE,CAAGoV,CAAI,CAACU,WAAW,EAAE,CACnEmB,CAAS,CAAC5kB,GAAG,CAAC,CACZ,eAAWujB,CAAG,CAACzf,IAAI,MAAI,CACvB,cAAUyf,CAAG,CAACtqB,GAAG,CAAGuqB,CAAS,MAAI,CACjC,sBAAgBT,CAAI,CAACW,UAAU,EAAE,MACnC,CAAC,CAAC,CACJ,CAAC,CAAC,CAEFzrB,CAAC,CAAC,aAAa,CAAC,CAACQ,QAAQ,CAAC,mCAAmC,CAAC,CAC7D9B,IAAI,CAAC,OAAO,CAAC,CAACsF,MAAM,qDAA2CzM,EAAE,CAACtG,GAAG,cAAKsG,EAAE,CAACL,IAAI,wEAAiE,CAEnJ8I,CAAC,CAAC,UAAU,CAAC,CAAC+V,EAAE,CAAC,QAAQ,CAAE,SAAS9I,CAAC,CAAE,CAGrC,MAFAA,EAAC,CAACtJ,cAAc,EAAE,CAClB8T,IAAI,CAAC+D,WAAW,CAAC,GAAI5C,SAAQ,CAAC,IAAI,CAAC,CAAC,GAEtC,CAAC,CAAC,CAEF5Y,CAAC,CAAC,gCAAgC,CAAC,CAACyD,KAAK,CAAC,SAASwJ,CAAC,CAAE,CACpDA,CAAC,CAACtJ,cAAc,EAAE,CAClBsJ,CAAC,CAACC,eAAe,EAAE,CACnB,GAAI0I,EAAE,CAAG,GAAIgD,SAAQ,CAAC5Y,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAChC,YAAY,EAAzB,IAAI,CAAC3G,IAAoB,EAAiB,WAAW,EAAxB,IAAI,CAACA,IAAmB,GACvD6d,IAAI,CAAC+D,WAAW,CAAC5F,CAAE,CAAE,IAAI,CAAe,WAAW,EAAxB,IAAI,CAAChc,IAAmB,CAAC,CAErC,cAAc,EAA3B,IAAI,CAACA,IAAsB,EAC7B6d,IAAI,CAAChhB,WAAW,CAACmf,CAAE,CAAC,CAEL,YAAY,EAAzB,IAAI,CAAChc,IAAoB,EAC3B6d,IAAI,CAAC4C,UAAU,CAACzE,CAAE,CAEtB,CAAC,CAAC,CAMG/F,YAAY,EACf7P,CAAC,CAAC,UAAU,CAAC,CAAC4oB,KAAK,CAAC,wFAAkF,EAAE55B,MAAM,CAAGuI,EAAE,CAAC7H,SAAS,CAAG6H,EAAE,CAAC1F,KAAK,CAAC,CAAC,mBAAmB,CAAC,CAEhKyxB,QAAQ,CAACgF,OAAO,IAAO,CACnBziB,YAAY,CACd,IAAI,GAAIuM,EAAC,GAAIkR,SAAQ,CACK,GAAG,EAAvBlR,CAAC,CAACvT,SAAS,CAAC,CAAC,CAAC,CAAC,CAAQ,GAC3BmB,CAAC,CAAC,cAAc,CAAC,CAACgE,MAAM,CAAC,iEAA8D,CAACoO,CAAC,CAAC,2BAAyB,CAACA,CAAC,CAAC,mBAAiB,CAACA,CAAC,CAAC,qBAAkB,CAAC7a,EAAE,CAAC,WAAW,CAAC6a,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAChMkR,QAAQ,CAAClR,CAAC,CAAC,IAAO,EACnB,IAEDpS,EAAC,CAAC,cAAc,CAAC,CAACgE,MAAM,CAAC,6BAA6B,CAACzM,EAAE,CAAClI,cAAc,CAAC,sSAA2I,CAAC,CAGvN,GAAIu9B,EAAO,CAAG3yB,QAAQ,CAACgpB,cAAc,CAAC,SAAS,CAAC,CAC7C2J,CAAO,GACRA,CAAO,CAACC,OAAO,CAAC,UAAU,CAAC39B,WAAW,GAAQ,CAAC,CAC/C09B,CAAO,CAACE,MAAM,CAAC,UAAU,CAAC59B,WAAW,GAAS,CAAC,EAIjD8Q,CAAC,CAAC,MAAM,CAAC,CAACgE,MAAM,gJAGgBuX,QAAQ,CAAC,GAAG,CAAC,kBAAShkB,EAAE,CAACtG,GAAG,qEACnBsqB,QAAQ,CAAC,iBAAiB,CAAC,kBAAShkB,EAAE,CAACvC,cAAc,kCACtF/F,SAAS,iEACiCssB,QAAQ,CAAC,GAAG,CAAC,kBAAShkB,EAAE,CAACtG,GAAG,aAAIsG,EAAE,CAAC/C,KAAK,8CACvEglB,UAAU,oFACb+B,QAAQ,CAAC,KAAK,CAAC,kBAAShkB,EAAE,CAACpG,GAAG,aAAIoG,EAAE,CAAClD,IAAI,CAACwN,WAAW,EAAE,oCAE/D,EAAE,kCAGR,CAGF7B,CAAC,CAAC/F,QAAQ,CAAC,CAAC8b,EAAE,CAAC,sEAAsE,CAAE,SAASiR,CAAK,CAAE,CACrG,GAAI1oB,EAAO,CAAG0B,CAAC,CAACgnB,CAAK,CAACtU,MAAM,CAAC,CAEY,cAAc,EAAnDsU,CAAK,CAAC1Q,aAAa,CAACyW,aAA+B,EAAKzuB,CAAO,CAACoX,QAAQ,CAAC,YAAY,CAAC,EACxF8T,oBAAoB,CAAClrB,CAAO,CAAC,CAEU,aAAa,EAAlD0oB,CAAK,CAAC1Q,aAAa,CAACyW,aAA8B,EACpD9yB,QAAQ,CAACwB,gBAAgB,CAAC,mBAAmB,CAAC,CAACxD,OAAO,CAAC,SAAA4U,CAAC,CAAI,CAC1DnF,kBAAkB,CAACmF,CAAC,IAAQ,CAC5BW,kBAAkB,CAACX,CAAC,IACtB,CAAC,CAEL,CAAC,CAAC,CAEFoB,OAAO,CAAC7L,IAAI,CAACyN,YAAY,CAAC,CAE1Bd,QAAQ,CAAC9U,QAAQ,CAACkC,aAAa,CAAC,WAAW,CAAC,CAAC,CAEpB,WAAW,EAAjC,MAAOksB,WAA0B,EAAIA,UAAU,EAAE2E,OAAO,CAAC5qB,IAAI,EAAE,CAElEpC,CAAC,CAAC,6BAA2B,CAAC,CAACQ,QAAQ,CAAC,8CAA8C,CAAC,CAACkG,IAAI,EAAE,CAACumB,QAAQ,CAAC,MAAM,CAAC,CAE/GjtB,CAAC,CAAC,UAAU,CAAC,CAAC+V,EAAE,CAAC,OAAO,CAAE,aAAa,CAAE,SAASrS,CAAE,CAAE,CACpDA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpB,GAAIggB,EAAI,CAAGltB,CAAC,CAAC,IAAI,CAAC,CAAC1C,IAAI,EAAE,CAAC4B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACrCpC,CAAM,CAAGkD,CAAC,CAAC,IAAI,CAAC,CAAClD,MAAM,EAAE,CAAEP,CAAM,CAAGyD,CAAC,CAAC,IAAI,CAAC,CAACzD,MAAM,EAAE,CACtDyD,CAAC,CAACmtB,OAAO,CAAC,eAAe,CAAE,CAAED,IAAI,CAAEA,CAAK,CAAC,CAAC,CACzCzlB,IAAI,CAAC,SAASY,CAAI,CAAE,CACnB,GAAI7U,EAAS,CAAG,EAAE,CAClB6O,CAAC,CAACC,IAAI,CAAC+F,CAAI,CAAC7U,SAAS,CAAE,SAAS2U,CAAK,CAAE,CACrC3U,CAAS,CAACuE,IAAI,CAAC,8BAA2B,CAAC+a,aAAa,CAAC,GAAG,CAAC3K,CAAK,QAAM,CAAKA,CAAK,CAAC,OAAO,CAC5F,CAAC,CAAC,CACFnI,CAAC,CAAC,WAAW,CAAC,CACb4B,IAAI,CACH,gCAA8B,CAACsrB,CAAI,oDAAS,CAA8CA,CAAI,yRAAiC,CAEhG31B,EAAE,CAACnE,OAAO,CAAC,IAAI,CAACiV,CAAI,CAACjV,OAAO,CAAC,IAAI,CAACmE,EAAE,CAAClE,QAAQ,CAAC,IAAI,CAACgV,CAAI,CAAChV,QAAQ,uCAAS,CACzEkE,EAAE,CAACjE,YAAY,CAAC,IAAI,CAAC05B,OAAO,CAACI,UAAU,CAAC/kB,CAAI,CAAC/U,YAAY,IAAO,uCAAS,CACzEiE,EAAE,CAAChE,WAAW,CAAC,IAAI,CAACy5B,OAAO,CAACI,UAAU,CAAC/kB,CAAI,CAAC9U,WAAW,IAAO,CAAC,QAAQ,EACrGC,CAAS,CAACkF,MAAM,CAAG,gCAA8B,CAACnB,EAAE,CAAC/D,SAAS,CAAC,IAAI,CAACA,CAAS,CAACmR,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAG,EAAE,CAAC,CACzG,CACAoD,GAAG,CAAC,CACF/G,GAAG,CAAElE,CAAM,CAACkE,GAAG,CAAGzE,CAAM,CACxBsP,IAAI,CAAE/O,CAAM,CAAC+O,IACf,CAAC,CAAC,CACFwhB,MAAM,CAAC,MAAM,CAChB,CAAC,CAAC,CACDC,IAAI,CAAC,SAASnV,CAAK,CAAE,CACpB/G,OAAO,CAAC+G,KAAK,CAACA,CAAK,CACrB,CAAC,CACH,CAAC,CAAC,CAEFhO,aAAa,CAACta,MAAM,EAAE,CAEnB09B,WAAW,EAAkB,WAAW,EAAzB,MAAOC,GAAkB,EACzCC,OAAO,CAACrrB,IAAI,EAAE,CAEhB1K,OAAO,CAACM,KAAK,EACf,CASA,CAAC,SAASgI,CAAC,CAAC,CACVA,CAAC,CAACgnB,KAAK,CAACC,OAAO,CAACyG,SAAS,CAAG,CAC1BC,QAAQ,CAAE,UAAU,CACpBC,YAAY,CAAE,UAAU,CAExB9W,MAAM,CAAE,gBAASkQ,CAAK,CAAE,CACtB,GAAI6G,EAAS,CAAK7G,CAAK,CAAC6G,SAAS,CAC7BC,CAAU,CAAIpG,MAAM,CAACrf,IAAI,CAAC2e,CAAK,CAACtU,MAAM,CAAC,CACvCqb,CAAG,CAAW,GAAItzB,KAAI,EAAE,CAACE,OAAO,EAAE,CAClCqzB,CAAK,CAASF,CAAU,CAACG,SAAS,CAAGF,CAAG,CAAGD,CAAU,CAACG,SAAS,CAAG,CAAC,CACnE9c,CAAK,CAAkB,IAAI,EAAbA,CAAa,CAAG,GAAG,CAAGA,CAAK,CACzClE,CAAC,CAAa+Z,CAAK,CAAC1Q,aAAa,CAEjC0X,CAAK,CAAG7c,CAAK,EAAY,EAAE,CAAV6c,CAAU,EAAI,EAAE/gB,CAAC,CAACihB,OAAO,EAAuB,CAAC,CAApBjhB,CAAC,CAACihB,OAAO,CAACx1B,MAAU,CAAC,EACrEo1B,CAAU,CAACG,SAAS,CAAG,IAAI,CAC3BjH,CAAK,CAAC3nB,IAAI,CAAGwuB,CAAS,CAACM,QAAQ,CAC/B,CAAC,SAAS,CAAE,SAAS,CAAE,OAAO,CAAE,OAAO,CAAC,CAACl2B,OAAO,CAAC,SAASm2B,CAAQ,CAAE,CAClEpH,CAAK,CAACoH,CAAQ,CAAC,CAAGpH,CAAK,CAAC1Q,aAAa,CAAC+X,cAAc,CAAC,CAAC,CAAC,CAACD,CAAQ,CAClE,CAAC,CAAC,CAGFP,CAAS,CAACtG,OAAO,CAACC,KAAK,CAAC,IAAI,CAAE5uB,SAAS,CAAC,EAExCk1B,CAAU,CAACG,SAAS,CAAGF,CAE3B,CACF,CACF,CAAC,EAAErG,MAAM,CAAC,CAEV,GAAM4G,IAAG,CAAG,CACVC,IAAI,CAAE,cAACC,CAAE,CAAEC,CAAE,CAAEC,CAAE,CAAEC,CAAE,QAAK,CAAEF,CAAE,CAAGD,CAAE,EAAKE,CAAE,CAAGC,CAAE,CAAC,EAAI,CAAC,EACrDC,IAAI,CAAE,cAASC,CAAK,CAAE,CACpB,IAAI,CAACC,OAAO,GAAO,CACnB,GAAIhZ,EAAK,CAAG,IAAI,CACd0Y,CAAE,CAAI,GAAI/zB,KAAI,EAAE,CAAEs0B,OAAO,EAAE,CAC7B/uB,CAAC,CAACgvB,IAAI,CAAC,CACL1rB,GAAG,CAAE,UAAU,CACfqX,OAAO,CAAE,iBAASsU,CAAU,CAAE,CAC5B,GAAIR,EAAE,CAAGQ,CAAU,CACfP,CAAE,CAAGO,CAAU,CACfN,CAAE,CAAI,GAAIl0B,KAAI,EAAE,CAAEs0B,OAAO,EAAE,CAE/BjZ,CAAK,CAAChZ,MAAM,CAAGgZ,CAAK,CAACyY,IAAI,CAACC,CAAE,CAAEC,CAAE,CAAEC,CAAE,CAAEC,CAAE,CAC1C,CAAC,CACDxW,KAAK,CAAE,gBAAW,CAChB1S,IAAI,CAACkD,GAAG,CAAC,4CAA4C,CACvD,CAAC,CACD0e,QAAQ,CAAE,mBAAW,KACnBvR,CAAK,CAACoZ,MAAM,GAAO,CAEZpZ,CAAK,CAACxL,KAAK,CAAC5R,MAAM,EACvBod,CAAK,CAACxL,KAAK,CAACC,KAAK,EAAE,CAACY,OAAO,CAAC2K,CAAK,CAACqZ,cAAc,CAEpD,CACF,CAAC,CACH,CAAC,CACDryB,MAAM,CAAE,CAAC,CACTwN,KAAK,CAAE,EAAE,CACT,GAAI6kB,eAAc,EAAG,CACnB,MAAO,IAAI10B,KAAI,CAAC,GAAIA,KAAI,EAAE,CAACE,OAAO,EAAE,CAAG,IAAI,CAACmC,MAAM,CAAC,CAACnC,OAAO,EAC7D,CAAC,CACDy0B,aAAa,CAAE,wBAAW,CACxB,GAAI,IAAI,CAACF,MAAM,CACb,MAAOhkB,QAAO,CAACC,OAAO,CAAC,IAAI,CAACgkB,cAAc,CAAC,CAE7C,GAAI3nB,EAAO,CAAG6nB,0BAA0B,EAAE,CAI1C,MAHM,KAAI,CAACP,OAAO,EAChB,IAAI,CAACF,IAAI,EAAE,CACb,IAAI,CAACtkB,KAAK,CAACvS,IAAI,CAACyP,CAAO,CAAC,CACjBA,CAAO,CAACA,OACjB,CACF,CAAC,CAED,QAAS6nB,2BAA0B,EAAG,CACpC,GAAIC,EAAc,CAAEC,CAAa,CAC/B/nB,CAAO,CAAG,GAAI0D,QAAO,CAAC,SAACC,CAAO,CAAEqkB,CAAM,CAAK,CAC3CF,CAAc,CAAGnkB,CAAO,CACxBokB,CAAa,CAAGC,CAClB,CAAC,CAAC,CAEF,MAAO,CACLhoB,OAAO,CAAEA,CAAO,CAChB2D,OAAO,CAAEmkB,CAAc,CACvBE,MAAM,CAAED,CACV,CACF,CAGA,QAAS/F,qBAAoB,CAACiG,CAAK,CAAE,CACf,WAAW,EAA5B,MAAOA,EAAqB,CAC7BA,CAAK,CAAGzvB,CAAC,CAAC,MAAM,CAAC,EAEjByvB,CAAK,CAACjvB,QAAQ,CAAC,YAAY,CAAC,CAC5BivB,CAAK,CAAGA,CAAK,CAAClvB,OAAO,CAAC,QAAQ,CAAC,EAE9BkvB,CAAK,CAAC/wB,IAAI,CAAC,cAAc,CAAC,CAAChG,MAAM,EAClCg3B,WAAW,CAAClI,KAAK,CAACrsB,MAAM,CAAC,CAC3BiuB,OAAO,CAACuG,MAAM,CAACF,CAAK,CAAC,CAGrBA,CAAK,CAAC/wB,IAAI,CAAC,4BAA4B,CAAC,CAAC4D,IAAI,CAAC,UAAW,CACvD,GAAImN,EAAK,CAAGzP,CAAC,CAAC,IAAI,CAAC,CACnByP,CAAK,CAACjP,QAAQ,CAAC,YAAY,CAAC,CAC5B,GAAIovB,EAAE,CACJC,CAAS,CAAG,QAAZA,UAAS,EAAS,CACdpgB,CAAK,CAAC/W,MAAM,CACd41B,GAAG,CAACc,aAAa,EAAE,CAACtiB,IAAI,CAAC,SAAAgjB,CAAO,CAAI,CAClC,GAAIC,EAAO,CAAmC,GAAI,CAApCtgB,CAAK,CAACpH,IAAI,CAAC,mBAAmB,CAAM,CAAGynB,CAAO,CAC5D,GAAe,CAAC,EAAZC,CAAY,CAAE,CAChB,GAAIC,EAAQ,CAAG13B,IAAI,CAAC8a,KAAK,CAAC2c,CAAO,CAAG,GAAK,CAAC,CACxCE,CAAM,CAAG33B,IAAI,CAACC,KAAK,CAACy3B,CAAQ,CAAG,EAAE,CAAC,CACpCA,CAAQ,EAAa,EAAE,CAAXC,CAAW,CACvBxgB,CAAK,CAACnS,IAAI,WAAI+E,CAAC,CAAC6tB,OAAO,CAACD,CAAM,CAAE,CAAC,CAAE,GAAG,CAAC,aAAI5tB,CAAC,CAAC6tB,OAAO,CAACF,CAAQ,CAAE,CAAC,CAAE,GAAG,CAAC,EACxE,CAAC,IAEChwB,EAAC,CAAC5E,GAAG,CAACnB,QAAQ,CAACsgB,KAAK,CAACC,OAAO,CAACvB,MAAM,CAAC,CACpCuC,YAAW,CAAC,CAAC,CAACvC,MAAM,CAAE,aAAa,CAAE/Y,EAAE,CAAEuP,CAAK,CAAClP,OAAO,CAAC,WAAW,CAAC,CAAC8H,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAASolB,OAAO,CAAC0C,QAAQ,CAAC,CAC1GC,aAAa,CAACR,CAAE,CAEpB,CAAC,CAAC,CAGFQ,aAAa,CAACR,CAAE,CACpB,CAAC,CACDA,CAAE,CAAGS,WAAW,CAACR,CAAS,OAAY,CACtCA,CAAS,EACX,CAAC,CACH,CAAC,GAEK1G,MAAK,CAAG,CACZ/mB,IAAI,CAAE,eAAyB,IAAhBkuB,EAAM,6DACnBr2B,QAAQ,CAAC4kB,IAAI,CAAC3U,kBAAkB,CAAC,WAAW,kFAC3B4I,aAAa,sDACbA,aAAa,uCACpB,CACV,IAAI,CAAC9P,SAAS,GAAO,CACrB,IAAI,CAACutB,KAAK,CAAGt2B,QAAQ,CAACkC,aAAa,CAAC,cAAc,CACpD,CAAC,CACDq0B,IAAI,CAAE,eAAW,CACT,IAAI,CAACxtB,SAAS,EAClB,IAAI,CAACZ,IAAI,EAAE,CAEb,IAAI,CAACmuB,KAAK,CAACC,IAAI,EAAE,SAAM,CAAC,SAAAvjB,CAAC,QAAI5K,EAAC,CAACouB,IAAI,EACrC,CACF,CAAC,CAEKhD,OAAO,CAAG,CACdiD,UAAU,CAAE,EAAE,CACdtuB,IAAI,CAAE,eAAY,CAChB,IAAI,CAACuuB,MAAM,CAAGnD,EAAE,CAACoD,OAAO,CAACC,WAAW,CAAC,CACrC,GAAIC,EAAW,CACZ9hC,MAAM,EACP8hC,CAAW,CAAG,CAACC,gBAAgB,CAAC1wB,cAAc,CAAC,UAAU,CAAC,CAC1DpG,QAAQ,CAACwB,gBAAgB,CAAC,cAAc,CAAC,CAACxD,OAAO,CAAC,SAAA+4B,CAAG,QAAIF,EAAW,CAAC/4B,IAAI,CAACg5B,gBAAgB,CAACC,CAAG,CAAChlB,OAAO,CAAC7D,KAAK,CAAC,GAAG,CAAC6oB,CAAG,CAAChlB,OAAO,CAAC9L,EAAE,CAAC,EAAC,GAGjI4wB,CAAW,CAAG,CAACC,gBAAgB,CAAC1wB,cAAc,CAAC,GAAG,CAACL,CAAC,CAAC,yBAAyB,CAAC,CAACf,GAAG,EAAE,CAAC,CACtF1H,EAAE,CAACvH,UAAU,EAAK,MAAM,CAAGuH,EAAE,CAACxG,2BAA4B,EAE5D,IAAI,CAAC4/B,MAAM,CACV5a,EAAE,CAAC,QAAQ,CAAE,IAAI,CAACkb,QAAQ,CAACtf,IAAI,CAAC,IAAI,CAAC,CAAC,CACtCuf,IAAI,CAAC,WAAW,CAAEJ,CAAW,CAAC,CAC/B71B,MAAM,CAACC,cAAc,CAAC,IAAI,CAAE,UAAU,CAAE,CACtCb,KAAK,GAAM,CACX82B,QAAQ,GAAO,CACfC,YAAY,GACd,CAAC,CACH,CAAC,CACDH,QAAQ,CAAE,kBAAS5oB,CAAI,CAAE,CACvB,GAAI,CAAEA,CAAI,CAAC4Q,MAAM,CAGf,MAFAxT,KAAI,CAAC4L,IAAI,CAAC,4CAA4C,CAAC,KACvDD,QAAO,CAACC,IAAI,CAAChJ,CAAI,CAAC,CAGpB,GAAmB,YAAY,EAA3BA,CAAI,CAAC4Q,MAAsB,CAAE,CAE/B,GAAI5Q,CAAI,CAACgpB,KAAK,EAAI5Z,IAAI,CAACsB,SAAS,EAAI1Q,CAAI,CAACgpB,KAAK,EAAE5Z,IAAI,CAACsB,SAAS,CAAE,OAChE,IAAI,CAACuY,qBAAqB,CAACjpB,CAAI,CACjC,CACA,GAAmB,WAAW,EAA1BA,CAAI,CAAC4Q,MAAqB,CAAE,CAE9B,GAAI5Q,CAAI,CAACgpB,KAAK,EAAI5Z,IAAI,CAACsB,SAAS,EAAI1Q,CAAI,CAACgpB,KAAK,EAAE5Z,IAAI,CAACsB,SAAS,CAAE,OAC5D/pB,MAAM,CACR,IAAI,CAACuiC,gCAAgC,CAAClpB,CAAI,CAAC,CAG3C,IAAI,CAACmpB,cAAc,CAACnpB,CAAI,CAE5B,CACA,GAAmB,QAAQ,EAAvBA,CAAI,CAAC4Q,MAAkB,CAAE,CAE3B,GAAI5Q,CAAI,CAACgpB,KAAK,EAAI5Z,IAAI,CAACiE,QAAQ,EAAIrT,CAAI,CAACgpB,KAAK,EAAE5Z,IAAI,CAACiE,QAAQ,CAAE,OAC9DF,YAAW,CAACnT,CAAI,CAAC+N,KAAK,IAAS,IAAI,CAAC+Z,QAAQ,CAC9C,CACA,GAAmB,cAAc,EAA7B9nB,CAAI,CAAC4Q,MAAwB,CAAE,CAEjC,GAAI5Q,CAAI,CAACgpB,KAAK,EAAI5Z,IAAI,CAACqD,UAAU,EAAIzS,CAAI,CAACgpB,KAAK,EAAE5Z,IAAI,CAACqD,UAAU,CAAE,OAClE,GAAIC,EAAU,CAAG,EAAE,CAAEH,CAAG,CAAG,EAAE,CAC7BvS,CAAI,CAAC+N,KAAK,CAACne,OAAO,CAAC,SAAAke,CAAI,CAAI,CACzBnW,CAAC,6BAAsBmW,CAAI,CAACjW,EAAE,gBAAc,CAACtE,MAAM,EAAE,CACrDmf,CAAU,CAAChjB,IAAI,CAACoe,CAAI,CAACjW,EAAE,CACzB,CAAC,CAAC,CACC6a,CAAU,CAACriB,MAAM,GAClBkiB,CAAG,CAAuB,CAAC,CAArBG,CAAU,CAACriB,MAAU,WACtBnB,EAAE,CAACzD,KAAK,cAAKinB,CAAU,CAACpW,IAAI,CAAC,KAAK,CAAC,aAAIpN,EAAE,CAACZ,UAAU,gBACpDY,EAAE,CAAC1D,IAAI,cAAKknB,CAAU,CAAC,CAAC,CAAC,aAAIxjB,EAAE,CAACb,KAAK,KAAG,CAC7C+O,IAAI,CAAC4E,IAAI,CAACuQ,CAAG,CAAE,CAACjV,IAAI,CAAE,CAAC,CAAGoV,CAAU,CAACriB,MAAM,CAAC,CAAC,CAEjD,CACF,CAAC,CACD84B,cAAc,CAAE,wBAASnpB,CAAI,CAAE,CAC7BU,QAAQ,CAAC3N,GAAG,CAAC,CACXgO,MAAM,GAAM,CACZG,SAAS,CAAElB,CAAI,CAACkB,SAAS,CACzBD,SAAS,CAAE,oBAAM,CACTrP,QAAQ,CAACw3B,QAAQ,EAAE,EACvBtI,KAAK,CAACqH,IAAI,EACd,CACF,CAAC,CACH,CAAC,CACDc,qBAAqB,CAAE,+BAASjpB,CAAI,CAAE,CACpC,IAAI,CAACqoB,UAAU,CAAC34B,IAAI,CAAC,CACnBoQ,KAAK,CAAEE,CAAI,CAACF,KAAK,CACjBupB,UAAU,CAAErpB,CAAI,CAACqpB,UAAU,IAAS,CACpC99B,MAAM,CAAEyU,CAAI,CAACspB,aACf,CAAC,CAAC,CACI13B,QAAQ,CAACw3B,QAAQ,EAAE,CAKjB,CAACzxB,CAAC,CAAC,uBAAuB,CAAC,CAACtH,MAAM,EACxCsH,CAAC,CAAC,UAAU,CAAC,CAACulB,MAAM,CAAC,2HAAmH,CAAChuB,EAAE,CAACrF,mBAAmB,CAAC,mBAAmB,CAAC,EALpL0S,YAAY,CAACC,IAAI,CAAC,UAAU,CAAE,WAAW,CAAC,CAC1C,IAAI,CAAC+sB,cAAc,CAAC,iBAAMhtB,aAAY,CAACM,OAAO,CAAC,UAAU,CAAC,EAAC,CAC3DikB,KAAK,CAACqH,IAAI,EAAE,CAKhB,CAAC,CACDe,gCAAgC,CAAE,0CAASlpB,CAAI,CAAE,CAC/C,GAAIwpB,EAAI,CAAGxpB,CAAI,CAACwpB,IAAI,CAAG,GAAG,CAAGxpB,CAAI,CAACF,KAAK,CACjC,IAAI,CAAC2pB,kBAAkB,CAACD,CAAI,CAAC,CAGjC,IAAI,CAACC,kBAAkB,CAACD,CAAI,CAAC,CAAC95B,IAAI,CAACsQ,CAAI,CAAC0pB,QAAQ,CAAC,CAFjD,IAAI,CAACD,kBAAkB,CAACD,CAAI,CAAC,CAAG,CAACxpB,CAAI,CAAC0pB,QAAQ,CAAC,CAGjD,IAAI,CAACC,sBAAsB,CAAC3pB,CAAI,CAACF,KAAK,CAAEE,CAAI,CAACwpB,IAAI,CAAExpB,CAAI,CAACkB,SAAS,CACnE,CAAC,CACDyoB,sBAAsB,iCAAC7pB,CAAK,CAAEuH,CAAQ,CAAkB,YAAhBnG,CAAS,wDAAC,IAAI,CAChD3V,CAAM,CAAG8b,CAAQ,CAAG,GAAG,CAAGvH,CAAK,CACjCoN,CAAK,CAAG,CAAC,IAAI,CAACuc,kBAAkB,CAACl+B,CAAM,CAAC,EAAI,EAAE,EAAE8E,MAAM,CACtD4F,CAAO,CAAG0B,CAAC,CAAC,cAAc,CAACpM,CAAM,CAAC,GAAG,CAAC,CACtCq+B,CAAQ,CAAG3zB,CAAO,CAACI,IAAI,CAAC,gBAAgB,CAAC,CACvCwzB,CAAY,CAAG,QAAfA,aAAY,SAAS,EAAI,CAACJ,kBAAkB,CAACl+B,CAAM,CAAC,CAAG,EAAE,EAC7D,GAAI2hB,CAAK,CAAE,CACT,GAAI,CAAE0c,CAAQ,CAACv5B,MAAM,CAAE,IACZy5B,EAAc,CAAvB,QAASA,eAAc,CAAC7X,CAAQ,CAAE,CAChCvR,QAAQ,CAAC3N,GAAG,CAAC,CACX8M,QAAQ,CAAEtU,CAAM,CAChB0V,SAAS,CAAE,oBAAM,CACf4oB,CAAY,EAAE,CACV5X,CAAQ,EACVA,CAAQ,EACZ,CAAC,CACDjR,OAAO,CAAE,iBAAC4D,CAAC,CAAK,CACdmE,OAAO,CAAC+G,KAAK,CAAClL,CAAC,CAAC,CAChBxH,IAAI,CAACkD,GAAG,CAACpR,EAAE,CAACjI,IAAI,CAClB,CAAC,CACD8Z,MAAM,GAAM,CACZG,SAAS,CAAEA,CACb,CAAC,CACH,CAAC,CACD,GAAI,CAAEtP,QAAQ,CAACw3B,QAAQ,EAAE,CACvB7sB,YAAY,CAACC,IAAI,CAAC,UAAU,CAAE,WAAW,CAAC,CAC1CstB,CAAc,CAAC,iBAAMvtB,aAAY,CAACM,OAAO,CAAC,UAAU,CAAC,EAAC,CACtDikB,KAAK,CAACqH,IAAI,EAAE,KAET,CACH,GAAI4B,EAAa,CAAG9zB,CAAO,CAAC0F,MAAM,CAAC,iDAA8C,CAAEmE,CAAK,CAAE,OAAO,CAACuH,CAAQ,CAAC,0CAAuC,CAACnY,EAAE,CAACtF,UAAU,CAAC,oDAAkD,CAAC,CACnNyM,IAAI,CAAC,gBAAgB,CAAC,CACrB2zB,CAAY,CAAGD,CAAa,CAAC,CAAC,CAAC,CACjCA,CAAa,CAAC3uB,KAAK,CAAC,SAASwJ,CAAC,CAAE,CAC9BA,CAAC,CAACtJ,cAAc,EAAE,CACdyuB,CAAa,CAACE,gBAAgB,GAElCD,CAAY,CAACC,gBAAgB,GAAO,CACpCD,CAAY,CAACnoB,kBAAkB,CAAC,YAAY,CAAE,+BAA6B,CAAC,CAC5EioB,CAAc,CAAC,iBAAMnyB,EAAC,CAACqyB,CAAY,CAAC,CAACz2B,MAAM,EAAE,EAAC,CAChD,CAAC,CACH,CACF,CACA0C,CAAO,CAACI,IAAI,CAAC,uBAAuB,CAAC,CAACpB,IAAI,CAACiY,CAAK,CAClD,CAAC,IACO0c,EAAQ,CAACv5B,MAAM,GACrBu5B,CAAQ,CAACr2B,MAAM,EAAE,CACjBs2B,CAAY,EAAE,CAElB,CAAC,CACDJ,kBAAkB,CAAE,CAAC,CAAC,CACtBF,cAAc,CAAE,wBAAStX,CAAQ,CAAE,YAC7BiY,CAAI,CAAGvyB,CAAC,CAAC,uBAAuB,CAAC,CACjCuyB,CAAI,CAAC75B,MAAM,EACf65B,CAAI,CAAC7zB,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACwL,kBAAkB,CAAC,YAAY,CAAE,+BAA6B,CAAC,CACpF,IAAI,CAACwmB,UAAU,CAACz4B,OAAO,CAAC,SAAA+4B,CAAG,CAAI,CAC7BvoB,SAAS,CAACC,SAAS,CAACsoB,CAAG,CAAC7oB,KAAK,CAAE6oB,CAAG,CAACp9B,MAAM,CAAE,IAAI,CAAE,SAAC+U,CAAG,CAAE7U,CAAK,CAAK,OAC3D6U,EAAG,CACElD,IAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC5C,YAAY,CAAC,MAClC49B,CAAI,CAAC32B,MAAM,EAAE,CACb3B,QAAQ,CAACkC,aAAa,CAAC,UAAU,CAAC,CAAC+N,kBAAkB,CAAC,YAAY,yBAC5DpW,CAAK,2CACWk9B,CAAG,CAACp9B,MAAM,aAAIo9B,CAAG,CAAC7oB,KAAK,mGAGrC,CACJ0H,YAAY,EAAImhB,CAAG,CAACU,UAAU,EAChCz3B,QAAQ,CAACkC,aAAa,CAAC,oBAAoB,CAAC,CAAC+N,kBAAkB,CAAC,YAAY,sBAC7D8mB,CAAG,CAAC7oB,KAAK,4DAA8C6oB,CAAG,CAAC7oB,KAAK,qBAAO6oB,CAAG,CAACU,UAAU,SAAO,CAE7G,CAAI,CAACf,MAAM,CAACO,IAAI,CAAC,WAAW,CAAEH,gBAAgB,CAACC,CAAG,CAAC7oB,KAAK,CAAC,GAAG,CAAC6oB,CAAG,CAACp9B,MAAM,CAAC,CACpE0mB,CAAQ,EACVA,CAAQ,EAAE,CACd,CAAC,CACH,CAAC,CAAC,CACF,IAAI,CAACoW,UAAU,CAAG,EACpB,CACF,CAAC,CAED,QAASlV,aAAW,CAACpF,CAAK,CAA+B,IAGrDoc,EAAmB,CAHKC,CAAM,4DAAOtC,CAAQ,6DAC3CuC,CAAY,CAAG,EAAE,CACnBhY,CAAU,CAAG,EAAE,CAEfiY,CAAY,CAAG,EAAE,CACjBC,CAAU,CAAG,EAAE,CA6EjB,GA3EAxc,CAAK,CAACne,OAAO,CAAC,SAAAke,CAAI,CAAI,CACpB,GAAI0c,EAAc,CAAG,SAAS,EACzB1c,CAAI,CAAC2c,KAAK,CAAG,aAAa,CAAG,EAAE,CAAC,EAChC3c,CAAI,CAAC4c,MAAM,CAAG,cAAc,CAAG,EAAE,CAAC,CAEvC,GAAmB,aAAa,EAA5B5c,CAAI,CAAC8C,MAAuB,EAAqB,MAAM,EAAvB9C,CAAI,CAAC6c,QAAkB,CAAE,CAC3D,GAAIP,CAAM,EAAI,CAACtc,CAAI,CAACwE,OAAO,CAEzB,WADAD,EAAU,CAAC3iB,IAAI,CAACoe,CAAI,CAAC,CAGvBqc,CAAmB,GAAQ,CAC3B,GAAIlrB,EAAO,CAAGtH,CAAC,+BAAwBmW,CAAI,CAACjW,EAAE,MAAI,CAChD8a,CAAM,CAAGhb,CAAC,8BAAuBmW,CAAI,CAACjW,EAAE,MAAI,CAC9C,GAAIoH,CAAO,CAAC5O,MAAM,CACZy3B,CAAQ,EAAI,CAACnhC,MAAM,EACrBsY,CAAO,CAAC9G,QAAQ,CAAC,SAAS,CAAC,CAC1B9B,IAAI,CAAC,gBAAgB,CAAC,CAAC8B,QAAQ,CAACqyB,CAAc,CAAC,CAC5C,CAAC7jC,MAAM,GACTwjC,CAAmB,GAAO,CAC1BxyB,CAAC,CAAC,sCAAsC,CAAC,CAACpE,MAAM,EAAE,CAClD6J,IAAI,CAAC4L,IAAI,WAAI9Z,EAAE,CAAC3D,MAAM,aAAI2D,EAAE,CAACxD,OAAO,MAAK,CAAC4R,IAAI,CAAE,CAAC,CAAC,CAAC,IAIrD2B,CAAO,CAAC2rB,IAAI,EAAE,CAACr3B,MAAM,EAAE,CACvB0L,CAAO,CAACoC,IAAI,EAAE,CAAC9N,MAAM,EAAE,CACvB0L,CAAO,CAACoC,IAAI,EAAE,CAAC9N,MAAM,EAAE,CACvB0L,CAAO,CAAC1L,MAAM,EAAE,MAGf,KAAIof,CAAM,CAACtiB,MAAM,CAWhB+0B,OAAO,CAACqE,kBAAkB,CAAC3b,CAAI,CAAC+c,SAAS,CAAC,GAC5CzF,OAAO,CAACqE,kBAAkB,CAAC3b,CAAI,CAAC+c,SAAS,CAAC,CAAGzF,OAAO,CAACqE,kBAAkB,CAAC3b,CAAI,CAAC+c,SAAS,CAAC,CAACj2B,MAAM,CAAC,SAAAzD,CAAC,QAAIA,EAAC,EAAE2c,CAAI,CAACjW,EAAE,EAAC,EACjHutB,OAAO,CAACuE,sBAAsB,CAAC7b,CAAI,CAAC+c,SAAS,CAAC,KAZ9C,IAAI/C,CAAQ,CACVnV,CAAM,CAACxa,QAAQ,CAACqyB,CAAc,CAAC,KAC5B,CACH,GAAI7X,EAAM,CAAGhb,CAAC,8BAAuBmW,CAAI,CAACjW,EAAE,MAAI,CAC5C8a,CAAM,CAACtiB,MAAM,EACfsiB,CAAM,CAACza,OAAO,CAAC,WAAW,CAAC,CAAC3E,MAAM,EAEtC,CAOG42B,CAAmB,EACtBE,CAAY,CAAC36B,IAAI,CAAC,GAAG,CAACoe,CAAI,CAACjW,EAAE,CACjC,CAEA,GAAmB,aAAa,EAA5BiW,CAAI,CAAC8C,MAAuB,EAAsB,MAAM,EAAvB9C,CAAI,CAAC6c,QAAkB,CAAE,CAC5D,GAAIP,CAAM,EAAI,CAACtc,CAAI,CAACwE,OAAO,CAEzB,WADAiY,EAAU,CAAC76B,IAAI,CAACoe,CAAI,CAAC,CAGvB,GAAI0U,EAAI,CAAG7qB,CAAC,8BAAuBmW,CAAI,CAACjW,EAAE,MAAI,CAC1CiwB,CAAQ,CACVtF,CAAI,CAACrqB,QAAQ,CAACqyB,CAAc,CAAC,CAE7BhI,CAAI,CAACjiB,WAAW,kCAAyBrR,EAAE,CAACnD,WAAW,WAAS,CAClEu+B,CAAY,CAAC56B,IAAI,CAAC,GAAG,CAACoe,CAAI,CAACjW,EAAE,CAC/B,CAEmB,eAAe,EAA9BiW,CAAI,CAAC8C,MAAyB,GAChCwU,OAAO,CAACiD,UAAU,CAAGjD,OAAO,CAACiD,UAAU,CAACzzB,MAAM,CAAC,SAAAzD,CAAC,QAAIA,EAAC,EAAE2c,CAAI,CAACjW,EAAE,EAAC,CAC3D,CAAEutB,OAAO,CAACiD,UAAU,CAACh4B,MAAM,EAC7BsH,CAAC,CAAC,uBAAuB,CAAC,CAACpE,MAAM,EAAE,CACrC6J,IAAI,CAAC4E,IAAI,WAAI9S,EAAE,CAAC3D,MAAM,aAAIuiB,CAAI,CAACjW,EAAE,aAAI3I,EAAE,CAACxD,OAAO,MAAI,CAEvD,CAAC,CAAC,CAEIiM,CAAC,CAAC,WAAW,CAAC,CAACkmB,EAAE,CAAC,UAAU,CAAC,EAAMlmB,CAAC,CAAC,uBAAuB,CAAC,CAACkmB,EAAE,CAAC,UAAU,CAAC,GAChFlmB,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CACzCJ,CAAC,CAAC,MAAM,CAAC,CAACI,WAAW,CAAC,iBAAiB,CAAC,EAGtCsyB,CAAY,CAACh6B,MAAM,CAAE,CACvB,GAAIkiB,EAAG,CAAyB,CAAC,CAAvB8X,CAAY,CAACh6B,MAAU,WAC1BnB,EAAE,CAACzD,KAAK,aAAI4+B,CAAY,CAAC/tB,IAAI,CAAC,IAAI,CAAC,aAAIpN,EAAE,CAACvD,YAAY,gBACtDuD,EAAE,CAAC1D,IAAI,aAAI6+B,CAAY,CAAC,CAAC,CAAC,aAAIn7B,EAAE,CAACxD,OAAO,KAAG,CAClD0R,IAAI,CAACgtB,CAAM,CAAG,MAAM,CAAG,MAAM,CAAC,CAAC7X,CAAG,CAAE,CAACjV,IAAI,CAAE,CAAC,CAAG+sB,CAAY,CAACh6B,MAAM,CAAC,CACrE,CACA,GAAIi6B,CAAY,CAACj6B,MAAM,CAAE,CACvB,GAAIkiB,EAAG,CAAyB,CAAC,CAAvB+X,CAAY,CAACj6B,MAAU,WAC1BnB,EAAE,CAACjD,KAAK,aAAIq+B,CAAY,CAAChuB,IAAI,CAAC,IAAI,CAAC,aAAIpN,EAAE,CAACvD,YAAY,gBACtDuD,EAAE,CAAClD,IAAI,aAAIs+B,CAAY,CAAC,CAAC,CAAC,aAAIp7B,EAAE,CAACxD,OAAO,KAAG,CAClD0R,IAAI,CAACgtB,CAAM,CAAG,MAAM,CAAG,MAAM,CAAC,CAAC7X,CAAG,CAAE,CAACjV,IAAI,CAAE,CAAC,CAAGgtB,CAAY,CAACj6B,MAAM,CAAC,CACrE,CACIgiB,CAAU,CAAChiB,MAAM,EACnB+M,IAAI,CAACkD,GAAG,CAAC+R,CAAU,CAAC/d,GAAG,CAAC,SAAAgM,CAAG,kBAAOpR,EAAE,CAAC1D,IAAI,cAAK8U,CAAG,CAACzI,EAAE,cAAKyI,CAAG,CAACkS,OAAO,EAAE,CAAC,CAAClW,IAAI,CAAC,MAAM,CAAC,CAClF,CAACgB,IAAI,CAAE,CAAC,CAAG+U,CAAU,CAAChiB,MAAM,CAAC,CAAC,CAC9Bk6B,CAAU,CAACl6B,MAAM,EACnB+M,IAAI,CAACkD,GAAG,CAACiqB,CAAU,CAACj2B,GAAG,CAAC,SAAAgM,CAAG,kBAAOpR,EAAE,CAAClD,IAAI,cAAKsU,CAAG,CAACzI,EAAE,cAAKyI,CAAG,CAACkS,OAAO,EAAE,CAAC,CAAClW,IAAI,CAAC,MAAM,CAAC,CAClF,CAACgB,IAAI,CAAE,CAAC,CAAGitB,CAAU,CAACl6B,MAAM,CAAC,CAEnC,CAEA,GAAI,CAACmN,YAAY,SAAY,CAC3B5W,SAAS,GAAO,KAEb,CACH,GAAIkkC,MAAK,CAAG3xB,SAAS,CAAC,OAAO,CAAC,CAChB,EAAE,GAAZ2xB,KAAY,GACA,WAAW,GAArBA,KAAqB,CACvBlkC,SAAS,GAAO,CAEhBA,SAAS,CAAG8T,QAAQ,CAAC1C,cAAc,CAAE8yB,KAAK,CAACj0B,KAAK,CAAC,GAAG,CAAC,CAAC,CAE5D,CAEA,QAASk0B,gBAAe,CAACC,CAAI,CAAuB,OAuCN/6B,IAAI,CAAC8a,KAAK,CAvCzBkgB,CAAQ,wDAAC,UAAU,CAE5CtY,CAAM,CAAGqY,CAAI,CAAC9yB,OAAO,CAAC,QAAQ,CAAC,CACnC,GAA6B,GAAG,GAA7B8yB,CAAI,CAAChrB,IAAI,CAAC,UAAU,CAAS,CAAE,IAC5BkrB,EAAQ,CAAGF,CAAI,CAACrrB,IAAI,CAAC,MAAM,CAAC,CAAE0U,CAAI,CAAG2W,CAAI,CAAChrB,IAAI,CAAC,QAAQ,CAAC,CAAEoU,CAAI,CAAG4W,CAAI,CAAChrB,IAAI,CAAC,OAAO,CAAC,CAAEmrB,CAAE,CAAGH,CAAI,CAAChrB,IAAI,CAAC,OAAO,CAAC,CAAEiU,CAAO,CAAG+W,CAAI,CAAChrB,IAAI,CAAC,IAAI,CAAC,CACvIorB,CAAG,CAAG,UAAU,CAAChyB,YAAY,CAAC,CAAC,CAAC,CAAE,GAAIhH,KAAI,EAAE,CAACE,OAAO,EAAG,CAC3D04B,CAAI,CAACzqB,WAAW,CAAC,UAAW,CAC1B,MAAO,aAAY,CAAC6qB,CAAG,CAAC,kBAAgB,CAACD,CAAE,CAAC,kBAAgB,CAAC/W,CAAI,CAAC,qBAAkB,CAACC,CAAI,CAAC,iBAAe,CAAC6W,CAAQ,CAAC,KAAI,CAAC,IAAI,CAAC/d,SAAS,CAAG,SAC3I,CAAC,CAAC,CACF6d,CAAI,CAAGrzB,CAAC,CAAC,GAAG,CAACyzB,CAAG,CAAC,CACjBJ,CAAI,CAAC30B,IAAI,CAAC,KAAK,CAAC,CAACgI,IAAI,EAAE,CACvB,GAAIgtB,EAAK,CAAGL,CAAI,CAAC30B,IAAI,CAAC,OAAO,CAAC,CAACqD,IAAI,EAAE,CAAEgiB,CAAM,CAAG,EAAE,CAclD,GAbI2P,CAAK,CAACh7B,MAAM,CAUV,CAAC46B,CAAQ,EACXI,CAAK,CAACt4B,GAAG,CAAC,CAAC,CAAC,CAAC2vB,KAAK,EAAE,EAVtBsI,CAAI,CAAC30B,IAAI,CAAC,iBAAiB,CAAC,CAACsF,MAAM,wCAA8BuvB,CAAQ,6BAAmBD,CAAQ,mCAAuB5W,CAAI,uBAAYD,CAAI,gBAAa,CAACjV,OAAO,EAAE,CAACC,IAAI,CAAC,UAAW,CACrLisB,CAAK,CAAGL,CAAI,CAAC30B,IAAI,CAAC,OAAO,CAC3B,CAAC,CAAC,CACFg1B,CAAK,CAAC,CAAC,CAAC,CAAC3R,MAAM,CAAGlc,YAAY,YAAe,EAAI,CAAC,CAClD6tB,CAAK,CAAC,CAAC,CAAC,CAAC1R,cAAc,CAAG,UAAW,CACnCnc,YAAY,YAAe,CAAG,IAAI,CAACoc,KAAK,CAAG,CAAC,CAAG,IAAI,CAACF,MACtD,CAAC,EAMA,CAACuB,QAAQ,CAACC,aAAa,EAAE,CAAE,QACxBzmB,EAAM,CAAG,EAAE,CAAE2mB,CAAS,CAAGiQ,CAAK,CAAC,CAAC,CAAC,CACjClQ,CAAK,CAAGvpB,QAAQ,CAAC4G,eAAe,CAAC5G,QAAQ,CAAC4G,eAAe,CAAC4c,WAAW,CAAGxjB,QAAQ,CAAC4kB,IAAI,CAACpB,WAAW,CACjF,IAAI,EAAjBgG,CAAiB,EACtB3mB,CAAM,EAAI2mB,CAAS,CAACC,UAAU,CAC9BD,CAAS,CAAGA,CAAS,CAACE,YAAY,CAEpC,GAAIC,EAAK,CAAGJ,CAAK,CAAG1mB,CAAM,CAC1B,GAAG2f,CAAI,CAAGmH,CAAK,CAAE,IACXC,EAAK,CAAGpH,CAAI,CAAGC,CAAI,CACnBoH,CAAI,CAAG,CAAC,CAAGF,CAAK,CAAGnH,CAAI,CACvBkX,CAAK,CAAG/P,CAAK,CAAGC,CAAK,CACzB6P,CAAK,CAAC7oB,KAAK,CAAC+Y,CAAK,CAAC,CAClB8P,CAAK,CAACn3B,MAAM,CAACo3B,CAAK,CAAC,CACnB5P,CAAM,CAAGxsB,EAAE,CAACxF,iBAAiB,CAAG,GAAG,CAAG,EAAgB,GAAG,CAAR+xB,CAAQ,CAAC,CAAG,IAAI,CAACvsB,EAAE,CAACvF,KACvE,CACF,CACA,GAAI64B,EAAI,CAAGwI,CAAI,CAAC9yB,OAAO,CAAC,QAAQ,CAAC,CAC3BsqB,CAAI,CAACnV,QAAQ,CAAC,WAAW,CAAC,EAC9BmV,CAAI,CAACrqB,QAAQ,CAAC,WAAW,CAAC,CAE5B,GAAIsqB,EAAI,CAAGuI,CAAI,CAACxvB,MAAM,EAAE,CAACnF,IAAI,CAAC,WAAW,CAAC,CACpCosB,CAAI,CAACpsB,IAAI,CAAC,eAAe,CAAC,CAAChG,MAAM,GACrCoyB,CAAI,CAAC9mB,MAAM,qCACQzM,EAAE,CAAChD,QAAQ,+DACxBgnB,QAAQ,CAAC,QAAQ,CAAE,QAAQ,CAAC,wBACrB,CACb8X,CAAI,CAACxvB,MAAM,EAAE,CAACnF,IAAI,CAAC,iBAAiB,CAAC,CAAC+E,KAAK,CAAC,UAAW,CACrDonB,CAAI,CAACzqB,WAAW,CAAC,WAAW,CAAC,CAC7B,GAAIqzB,EAAG,CAAG,UAAU,CAAChyB,YAAY,CAAC,CAAC,CAAC,CAAE,GAAIhH,KAAI,EAAE,CAACE,OAAO,EAAG,CAS3D,MARA04B,EAAI,CAACzqB,WAAW,CAAC,UAAW,CAC1B,MAAO,0BAAuB,CAAC6qB,CAAG,CAAC,kBAAgB,CAACD,CAAE,CAAC,kBAAgB,CAAC/W,CAAI,CAAC,qBAAkB,CAACC,CAAI,CAAC,YAAU,CAAC6W,CAAQ,CAAC,KAAI,CAAC,IAAI,CAAC/d,SAAS,CAAG,MACjJ,CAAC,CAAC,CAACnN,IAAI,CAAC,UAAU,CAAE,GAAG,CAAC,CACxBgrB,CAAI,CAAGrzB,CAAC,CAAC,GAAG,CAACyzB,CAAG,CAAC,CACjBJ,CAAI,CAAC30B,IAAI,CAAC,OAAO,CAAC,CAACgI,IAAI,EAAE,CAAC,CAAC,CAAC,CAACqkB,KAAK,EAAE,CACpCsI,CAAI,CAAC30B,IAAI,CAAC,KAAK,CAAC,CAACqD,IAAI,EAAE,CACvB/B,CAAC,CAAC,IAAI,CAAC,CAACpE,MAAM,EAAE,CAChBy3B,CAAI,CAAC9yB,OAAO,CAAC,QAAQ,CAAC,CAACH,WAAW,CAAC,gBAAgB,CAAC,GAEtD,CAAC,CAAC,EAEJizB,CAAI,CAAC9yB,OAAO,CAAC,QAAQ,CAAC,CAACC,QAAQ,CAAC,gBAAgB,CAClD,CACF,CAEA,QAASwpB,YAAW,CAACqJ,CAAI,CAAE3vB,CAAE,CAAE,CAE7B,GADAA,CAAE,CAACC,cAAc,EAAE,CACf2f,QAAQ,CAACkB,cAAc,EAAE,CAAE,CAC7B,GAAIC,EAAE,YAAOrI,WAAW,oBAAIA,WAAW,CAACsF,UAAU,CAAC2R,CAAI,CAAC,CAAC,CAAC,CAAC,eAAO,CAClE5O,CAAE,CAAC/B,UAAU,CAAG,iBAAM+B,EAAE,CAAG,IAAI,CACjC,CAAC,IAEC2O,gBAAe,CAACC,CAAI,CAAC,CAEvB,QACF,CAEA,QAAS/J,cAAa,EAAG,CACvB,GAAIsK,EAAM,CAIRA,CAAM,CAHgB,EAAE,EAAvBpyB,SAAS,CAAC,MAAM,CAAO,CAK1B,GAAIqyB,EAAG,CAAG55B,QAAQ,CAACgpB,cAAc,CAAC,MAAM,CAAC,CAC9B,IAAI,EAAX4Q,CAAW,GAAEA,CAAG,CAACtnB,OAAO,CAAGqnB,CAAM,CACvC,CACA,QAASvK,gBAAe,EAAG,CACzB,GAAIuK,EAAM,CAERA,CAAM,CADoB,KAAK,EAA9BpyB,SAAS,CAAC,UAAU,CAAU,CAKjCxB,CAAC,CAAC,aAAa,CAAC,CAACgI,IAAI,CAAC,SAAS,CAAE4rB,CAAM,CACzC,CAEA,QAASE,cAAa,CAAE9M,CAAK,CAAE,CAC7B,GAAK/sB,QAAQ,CAACgpB,cAAc,GACtB/zB,WAAW,CAEjB,GADIiM,MAAM,CAAC6rB,KAAK,GAAEA,CAAK,CAAG7rB,MAAM,CAAC6rB,KAAK,EAClCA,CAAK,CAACxU,OAAO,CAAE,IACbhQ,EAAI,CAAG,IAAI,CACXoV,CAAI,CAAG,IAAI,CACXmc,CAAM,CAAG95B,QAAQ,CAAC6F,QAAQ,CAACC,QAAQ,EAAE,CACzC,GAA+B,CAAC,CAAC,EAA7Bg0B,CAAM,CAAC37B,OAAO,CAAC,OAAO,CAAO,CACjB,OAAO,EAAlB4uB,CAAK,CAAC/O,GAAY,EACnBV,eAAe,CAACyP,CAAK,CAAC,KAGrB,CACH,GAA+B,CAAC,CAAC,EAA7B+M,CAAM,CAAC37B,OAAO,CAAC,OAAO,CAAO,EAAoC,CAAC,CAAC,EAAlC27B,CAAM,CAAC37B,OAAO,CAAC,YAAY,CAAO,IACjE47B,EAAI,CAAG,CAAC,CACRC,CAAc,CAAGF,CAAM,CAACh2B,MAAM,CAAC,CAAC,CAAEg2B,CAAM,CAACG,WAAW,CAAC,GAAG,CAAC,CAAG,CAAC,CAAC,KAC7D,CACL,GAAIF,EAAI,CAAGD,CAAM,CAACh2B,MAAM,CAAEg2B,CAAM,CAACG,WAAW,CAAC,GAAG,CAAC,CAAG,CAAC,CAAE,CACvDF,CAAI,CAAI,CAACA,CAAI,CAACj2B,MAAM,CAAC,CAAC,CAAEi2B,CAAI,CAAC57B,OAAO,CAAC,OAAO,CAAC,CAAE,CAC/C,GAAI67B,EAAc,CAAGF,CAAM,CAACh2B,MAAM,CAAC,CAAC,CAAEg2B,CAAM,CAACG,WAAW,CAAC,GAAG,CAAC,CAAG,CAAC,CACnE,CACA,GAAY,CAAC,EAATF,CAAS,CACX,GAAIG,EAAY,CAAGF,CAAc,CAAC,IAElC,IAAIE,EAAY,CAAIF,CAAc,CAAGD,CAAI,CAAG,OAAO,CAErD,GAAIn0B,EAAK,CACT,GAAGA,CAAK,CAAC,YAAY,CAAC7F,IAAI,CAAC+5B,CAAM,CAAC,CAChC,GAAIK,EAAY,CAAI,CAACv0B,CAAK,CAAC,CAAC,CAAE,CAAC,IAE/B,IAAIu0B,EAAY,CAAG,CAAC,CAAC,CACtB,IACD,GAAIC,EAAU,CAAG,CAAE,CACyC,CAAC,CAAvDp6B,QAAQ,CAACq6B,iBAAiB,CAAC,GAAG,CAAE,GAAED,CAAW,CAAC,CAAC37B,MAAQ,GAC7D,OAAQsuB,CAAK,CAAC/O,GAAG,EAEf,IAAK,OAAO,CACVV,eAAe,CAACyP,CAAK,CAAC,CACtB,MAEF,IAAK,WAAW,CACdxkB,CAAI,CAAGvI,QAAQ,CAACgpB,cAAc,CAAC,UAAU,CAAC,CAC1C,MACF,IAAK,YAAY,CACfzgB,CAAI,CAAGvI,QAAQ,CAACgpB,cAAc,CAAC,UAAU,CAAC,CAC1C,MAEF,IAAK,WAAW,CACd,GAAImR,CAAY,EAAIC,CAAU,CAAG,CAAC,CAChC,MAAM,IAEN,IAAIE,EAAe,CAAGH,CAAY,CAAG,CAAC,CAExCxc,CAAI,CAAGuc,CAAY,CAAG,IAAI,CAAGI,CAAe,CAC5C,MAEF,IAAK,SAAS,CACZ,GAAoB,CAAC,CAAC,EAAlBH,CAAkB,EAAoB,CAAC,EAAjBA,CAAiB,CACzC,MAAM,IAEN,IAAIG,EAAe,CAAGH,CAAY,CAAG,CAAC,CAExCxc,CAAI,CAAGuc,CAAY,CAAG,IAAI,CAAGI,CAAe,CAC5C,MAEF,IAAK,MAAM,CACTt6B,QAAQ,CAAC6F,QAAQ,CAAGm0B,CAAc,CAC5B,CAGNzxB,CAAI,EAAIA,CAAI,CAACyW,MAAM,GAAEhf,QAAQ,CAAC6F,QAAQ,CAAG0C,CAAI,CAACyW,MAAM,EACpDrB,CAAI,EAAED,UAAU,CAACC,CAAI,CAC3B,CACF,CAAC,IACI,CACH,GAAI6M,EAAE,CAAGxqB,QAAQ,CAACkC,aAAa,CAAC,oCAAoC,CAAC,CACjEsoB,CAAE,GACa,WAAW,EAAxBuC,CAAK,CAAC/O,GAAkB,EAC1BwM,CAAE,CAACtoB,aAAa,CAAC,UAAU,CAAC,CAACsH,KAAK,EAAE,CACrB,YAAY,EAAzBujB,CAAK,CAAC/O,GAAmB,EAC3BwM,CAAE,CAACtoB,aAAa,CAAC,UAAU,CAAC,CAACsH,KAAK,EAAE,CACrB,QAAQ,EAArBujB,CAAK,CAAC/O,GAAe,EACvBwM,CAAE,CAACtoB,aAAa,CAAC,WAAW,CAAC,CAACsH,KAAK,EAAE,CAE3C,CACF,CACItI,MAAM,CAAClB,QAAQ,CAAC4X,gBAAgB,CACjC1W,MAAM,CAAClB,QAAQ,CAAC4X,gBAAgB,CAAC,SAAS,CAAEiiB,aAAa,IAAQ,CAEjE34B,MAAM,CAAClB,QAAQ,CAACu6B,WAAW,CAAC,WAAW,CAAEV,aAAa,CAAC,CAG1DW,QAAQ,CAACt8B,SAAS,CAACF,OAAO,CAAGC,KAAK,CAACC,SAAS,CAACF,OAAO,CACpDw8B,QAAQ,CAACt8B,SAAS,CAACwE,GAAG,CAAGzE,KAAK,CAACC,SAAS,CAACwE,GAAG,CAG5CimB,OAAO,CAACzqB,SAAS,CAAC2D,WAAW,CAAG,SAASQ,CAAQ,CAAE,KACjD,GAAIsK,EAAI,CAAG,IAAI,CACTA,CAAI,EAAI,CAACA,CAAI,CAACsI,OAAO,CAAC5S,CAAQ,CAAC,EAEnC,GADAsK,CAAI,CAAGA,CAAI,CAAC8tB,UAAU,CAClB,CAAE9tB,CAAI,CAACsI,OAAO,CAAE,MAAO,KAAI,CAEjC,MAAOtI,EACT,CAAC,CACDgc,OAAO,CAACzqB,SAAS,CAAC6X,SAAS,CAAG,SAAS1T,CAAQ,CAAE,KAC/C,GAAIsK,EAAI,CAAG,IAAI,CAACmc,kBAAkB,CAC5Bnc,CAAI,EAAI,CAACA,CAAI,CAACsI,OAAO,CAAC5S,CAAQ,CAAC,EAEnC,GADAsK,CAAI,CAAGA,CAAI,CAACmc,kBAAkB,CAC1B,CAAEnc,CAAI,CAAE,MAAO,KAAI,CAEzB,MAAOA,EACT,CAAC,CACDgc,OAAO,CAACzqB,SAAS,CAAC8W,aAAa,CAAG,SAAS3S,CAAQ,CAAE,KACnD,GAAIsK,EAAI,CAAG,IAAI,CAACqQ,sBAAsB,CAChCrQ,CAAI,EAAI,CAACA,CAAI,CAACsI,OAAO,CAAC5S,CAAQ,CAAC,EAEnC,GADAsK,CAAI,CAAGA,CAAI,CAACqQ,sBAAsB,CAC9B,CAAErQ,CAAI,CAAE,MAAO,KAAI,CAEzB,MAAOA,EACT,CAAC,CACD+tB,IAAI,CAACx8B,SAAS,CAAC6Y,UAAU,CAAG,SAASnN,CAAM,CAAE,KAC3C,GAAI+C,EAAI,CAAG,IAAI,CAAC8tB,UAAU,CACnB9tB,CAAI,EAAE,CACX,GAAIA,CAAI,EAAI/C,CAAM,CAChB,SAEF+C,CAAI,CAAGA,CAAI,CAAC8tB,UACd,CACA,QACF,CAAC,IAEG7rB,SAAQ,CAAG,CACbC,WAAW,CAAE,sBAAwB,YAAf8rB,CAAI,wDAAC36B,QAAQ,CACjC26B,CAAI,CAACn5B,gBAAgB,CAAC,WAAW,CAAC,CAACxD,OAAO,CAAC,SAAApE,CAAI,CAAI,CACjD,GAAIghC,EAAO,CAAGhhC,CAAI,CAACmY,OAAO,CAAC9L,EAAE,CAC3BiI,CAAK,CAAGtU,CAAI,CAACmY,OAAO,CAAC7D,KAAK,CAC1BvU,CAAM,CAAGC,CAAI,CAACiI,WAAW,CAAC,iBAAiB,CAAC,CAC5C4T,CAAQ,CAAG9b,CAAM,EAAIA,CAAM,CAACoY,OAAO,SAAY,CAC/C4O,CAAG,CAAG/mB,CAAI,CAACsI,aAAa,CAAC,cAAc,CAAC,CACxC24B,CAAgB,CAAGjhC,CAAI,CAACsI,aAAa,CAAC,cAAc,CAAC,CAClD,CAAI,CAACrI,KAAK,CAACqU,CAAK,CAAC,GACpB,CAAI,CAACrU,KAAK,CAACqU,CAAK,CAAC,CAAG,CAAC,CAAC,EACpB,CAAI,CAACrU,KAAK,CAACqU,CAAK,CAAC,CAAC0sB,CAAO,CAAC,CAC5B,CAAI,CAAC/gC,KAAK,CAACqU,CAAK,CAAC,CAAC0sB,CAAO,CAAC,CAAC9V,SAAS,CAAG+V,CAAgB,CAGvD,CAAI,CAAChhC,KAAK,CAACqU,CAAK,CAAC,CAAC0sB,CAAO,CAAC,CAAG,CAC3B9V,SAAS,CAAE+V,CAAgB,CAC3B7kC,OAAO,CAAE,EACX,CAAC,CAEH,GAAI8E,EAAK,CAAG6lB,CAAG,CAACnf,gBAAgB,oBAAoB,CAChD1G,CAAK,CAAC2D,MAAM,EAAE3D,CAAK,CAACkD,OAAO,CAAC,SAAAuK,CAAI,CAAI,CACtC,GAAIuyB,EAAQ,CAAGvyB,CAAI,CAACwyB,SAAS,CAAC91B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CACpD+1B,CAAa,CAAGF,CAAQ,CAAC,CAAC,CAAC,CAC3BG,CAAW,CAAGH,CAAQ,CAAC,CAAC,CAAC,CACzBnd,CAAI,YAAOzP,CAAK,iBAAQuH,CAAQ,kBAASmlB,CAAO,CAAE,CAClD1K,CAAG,yCAAiCvS,CAAI,uBAAazP,CAAK,EAAI8sB,CAAa,CAAG,EAAE,YAAO9sB,CAAK,KAAG,SAAG0sB,CAAO,QAAM,CAC7G,CAAI,CAAC/gC,KAAK,CAACmhC,CAAa,CAAC,EAAI,CAAI,CAACnhC,KAAK,CAACmhC,CAAa,CAAC,CAACC,CAAW,CAAC,CACjE,CAAE7yB,CAAC,CAAC8yB,QAAQ,CAAC,CAAI,CAACrhC,KAAK,CAACmhC,CAAa,CAAC,CAACC,CAAW,CAAC,CAACjlC,OAAO,CAAEk6B,CAAG,CAAC,EACnE,CAAI,CAACr2B,KAAK,CAACmhC,CAAa,CAAC,CAACC,CAAW,CAAC,CAACjlC,OAAO,CAAC8H,IAAI,CAACoyB,CAAG,CAAC,EAItD,CAAC,CAAI,CAACr2B,KAAK,CAACmhC,CAAa,CAAC,GAC5B,CAAI,CAACnhC,KAAK,CAACmhC,CAAa,CAAC,CAAG,CAAC,CAAC,EAChC,CAAI,CAACnhC,KAAK,CAACmhC,CAAa,CAAC,CAACC,CAAW,CAAC,CAAG,CACvCjlC,OAAO,CAAE,CAACk6B,CAAG,CACf,CAAC,EAEH,CAAI,CAACr2B,KAAK,CAACmhC,CAAa,CAAC,CAACC,CAAW,CAAC,CAAC/lB,IAAI,GAC7C,CAAC,CACH,CAAC,CAAC,CACF9M,CAAC,CAACC,IAAI,CAAC,IAAI,CAACxO,KAAK,CAAE,SAAAqU,CAAK,QAAI9F,EAAC,CAACC,IAAI,CAAC6F,CAAK,CAAE,SAAAtU,CAAI,CAAI,CAC5C,CAACA,CAAI,CAACsb,IAAI,EAAItb,CAAI,CAAC5D,OAAO,CAACyI,MAAM,EAAI7E,CAAI,CAACkrB,SAAS,GACrDlrB,CAAI,CAACkrB,SAAS,CAACvJ,SAAS,WAAMje,EAAE,CAACtH,OAAO,cAAK4D,CAAI,CAAC5D,OAAO,CAAC0U,IAAI,CAAC,IAAI,CAAC,CAAE,CACtE9Q,CAAI,CAACsb,IAAI,GAAO,CAEpB,CAAC,CAAC,EACJ,CAAC,CACDrb,KAAK,CAAE,CAAC,CACV,CAAC,CAEG8Q,YAAY,CAAG,CACjBC,IAAI,CAAE,cAAS3E,CAAE,CAAEk1B,CAAQ,CAAiC,OAwCjD98B,IAAI,CAACyE,GAAG,CAxCU8G,CAAM,wDAAC1I,MAAM,CAAEk6B,CAAU,wDAAC,GAAG,CACxD,GAAI,CAACl6B,MAAM,CAACm6B,OAAO,CAEjB,YADA,IAAI,CAAC5+B,KAAK,CAACwJ,CAAE,CAAC,CAAG,CAACq1B,IAAI,GAAM,CAAC,EAG/B,GAAIC,EAAG,CAAG,CAACr6B,MAAM,CAACsQ,UAAU,CAAG,CAAC,CAAEtQ,MAAM,CAACqB,WAAW,CAAG,CAAC,CAAC,CACvDi5B,CAAK,CAAG,EAAE,CACVC,CAAS,CAAI7xB,CAAM,EAAI1I,MAAM,CAE3B,CACA0Q,IAAI,CAAE,CAAC,CACP7K,GAAG,CAAE,CAAC,CACNwK,KAAK,CAAErQ,MAAM,CAACsQ,UAAU,CACxB1K,MAAM,CAAE5F,MAAM,CAACqB,WACjB,CAAC,CANCqH,CAAM,CAAClD,qBAAqB,EAM7B,CAEDkD,CAAM,EAAI1I,MAAM,GAGK,CAAC,EAAnBu6B,CAAS,CAAC7pB,IAAS,EAAuB,CAAC,EAApB6pB,CAAS,CAAClqB,KAAU,EAE1B,CAAC,EAAlBkqB,CAAS,CAAC10B,GAAQ,EAAwB,CAAC,EAArB00B,CAAS,CAAC30B,MAAY,EAE7C20B,CAAS,CAAC7pB,IAAI,EAAI1Q,MAAM,CAACsQ,UAAU,EAEnCiqB,CAAS,CAAC10B,GAAG,EAAI7F,MAAM,CAACqB,WAAW,CACpC,GAEDg5B,CAAG,CAAG,CAACE,CAAS,CAAC7pB,IAAI,CAAG6pB,CAAS,CAAC7qB,KAAK,CAAC,CAAC,CAAE6qB,CAAS,CAAC10B,GAAG,CAAG00B,CAAS,CAACn5B,MAAM,CAAC,CAAC,CAAC,EAEhF,GAAIo5B,EAAK,CAAGP,CAAQ,WAAYT,KAAI,CAChC,CAACS,CAAQ,CAAC,CACVA,CAAQ,WAAYX,SAAQ,CAC1BW,CAAQ,CACP,CAACvxB,CAAM,EAAI1I,MAAM,CAAGlB,QAAQ,CAAG4J,CAAM,EAAEpI,gBAAgB,CAAC25B,CAAQ,CAAE,CACzE,GAAMO,CAAK,CAACj9B,MAAM,EAClBi9B,CAAK,CAAC19B,OAAO,CAAC,SAAUuD,CAAE,CAAE,OAEqBlD,IAAI,CAACs9B,GAAG,CADnDl1B,CAAG,CAAGlF,CAAE,CAACmF,qBAAqB,EAAE,CAClCk1B,CAAoB,CAAG,EAASn1B,CAAG,CAACmK,KAAK,EAAI,EAAS6qB,CAAS,CAAC7pB,IAAI,CAAGnL,CAAG,CAACmL,IAAI,CAAC,CAAG,EAASnL,CAAG,CAAC8K,KAAK,CAAGkqB,CAAS,CAAClqB,KAAK,CAAC,CAAC,CAAC,CAAG9K,CAAG,CAACmK,KAAK,CACtIirB,CAAqB,CAAG,EAASp1B,CAAG,CAACnE,MAAM,EAAI,EAASm5B,CAAS,CAAC10B,GAAG,CAAGN,CAAG,CAACM,GAAG,CAAC,CAAG,EAASN,CAAG,CAACK,MAAM,CAAG20B,CAAS,CAAC30B,MAAM,CAAC,CAAC,CAAC,CAAGL,CAAG,CAACnE,MAAM,CACzI+kB,CAAE,CAAG,EAASkU,CAAG,CAAC,CAAC,CAAC,EAAI90B,CAAG,CAACmL,IAAI,CAAGnL,CAAG,CAACmK,KAAK,CAAC,CAAC,CAAC,CAAC,CAChD0W,CAAE,CAAG,EAASiU,CAAG,CAAC,CAAC,CAAC,EAAI90B,CAAG,CAACM,GAAG,CAAGN,CAAG,CAACnE,MAAM,CAAC,CAAC,CAAC,CAAC,CAClDk5B,CAAK,CAAC19B,IAAI,CAAC,CACTyD,EAAE,CAAEA,CAAE,CACNu6B,iBAAiB,CAAmB,GAAG,EAApBV,CAAU,CAAC,CAAC,CAAQ,CAAGQ,CAAoB,CAAGC,CAAqB,CACtFE,mBAAmB,CAAmB,GAAG,EAApBX,CAAU,CAAC,CAAC,CAAQ,CAAGQ,CAAoB,CAAGC,CAAqB,CACxFG,aAAa,CAAmB,GAAG,EAApBZ,CAAU,CAAC,CAAC,CAAQ,CAAG/T,CAAE,CAAGC,CAAE,CAC7C2U,eAAe,CAAmB,GAAG,EAApBb,CAAU,CAAC,CAAC,CAAQ,CAAG/T,CAAE,CAAGC,CAC/C,CAAC,CACH,CAAC,CAAC,CACFkU,CAAK,CAACv4B,IAAI,CAAC,SAACxB,CAAC,CAAE+D,CAAC,CAAK,OACfA,EAAC,CAACs2B,iBAAiB,GAAKr6B,CAAC,CAACq6B,iBAAiB,CAGlB,CAAC,CAArBV,CAAU,CAAC38B,MAAU,EAAI+G,CAAC,CAACu2B,mBAAmB,GAAKt6B,CAAC,CAACs6B,mBAAmB,CACxEv2B,CAAC,CAACu2B,mBAAmB,CAAGt6B,CAAC,CAACs6B,mBAAmB,CAE7Ct6B,CAAC,CAACu6B,aAAa,GAAKx2B,CAAC,CAACw2B,aAAa,CAGf,CAAC,CAArBZ,CAAU,CAAC38B,MAAU,CACrBgD,CAAC,CAACw6B,eAAe,CAAGz2B,CAAC,CAACy2B,eAAe,QAHrCx6B,CAAC,CAACu6B,aAAa,CAAGx2B,CAAC,CAACw2B,aAAa,CANjCx2B,CAAC,CAACs2B,iBAAiB,CAAGr6B,CAAC,CAACq6B,iBAWnC,CAAC,CAAC,CACF,GAAI3mB,EAAM,CAAGqmB,CAAK,CAAC,CAAC,CAAC,CAACj6B,EAAE,CACtB26B,CAAS,CAAG/mB,CAAM,CAACzO,qBAAqB,EAAE,CAC5C,IAAI,CAACjK,KAAK,CAACwJ,CAAE,CAAC,CAAG,CACfkP,MAAM,CAAEA,CAAM,CACdvD,IAAI,CAAEsqB,CAAS,CAACtqB,IAAI,CACpB7K,GAAG,CAAEm1B,CAAS,CAACn1B,GAAG,CAClB6C,MAAM,CAAEA,CAAM,CACdwxB,UAAU,CAAEA,CACd,CAAC,CACH,CAAC,CACDnwB,OAAO,CAAE,iBAAShF,CAAE,CAAE,YACpB,MAAO,IAAIgL,QAAO,CAAC,SAACC,CAAO,CAAEqkB,CAAM,CAAK,CACtC,GAAI4G,EAAM,CAAG,CAAI,CAAC1/B,KAAK,CAACwJ,CAAE,CAAC,CACvBk2B,CAAM,CAAEj7B,MAAM,CAAC8J,qBAAqB,CAAC,UAAM,CAC7C,GAAImxB,CAAM,CAACb,IAAI,CAGb,MAFAp6B,OAAM,CAACiG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,KACpB+J,EAAO,EAAE,CAGX,GAAIkrB,EAAQ,CAAGD,CAAM,CAAChnB,MAAM,CAACzO,qBAAqB,EAAE,CACpDy1B,CAAM,CAACvyB,MAAM,CAACyyB,QAAQ,CACgB,CAAC,CAAC,GAAtCF,CAAM,CAACf,UAAU,CAACj9B,OAAO,CAAC,GAAG,CAAU,CAEnC,CAAC,CADDi+B,CAAQ,CAACxqB,IAAI,CAAGuqB,CAAM,CAACvqB,IACtB,CAC+B,CAAC,CAAC,GAAtCuqB,CAAM,CAACf,UAAU,CAACj9B,OAAO,CAAC,GAAG,CAAU,CAEnC,CAAC,CADDi+B,CAAQ,CAACr1B,GAAG,CAAGo1B,CAAM,CAACp1B,GACrB,CACN,CACDmK,CAAO,EACT,CAAC,CAAC,CACGqkB,CAAM,EACb,CAAC,CACH,CAAC,CACD94B,KAAK,CAAE,CAAC,CACV,CAAC,CACD4B,IAAI,CAACs9B,GAAG,CAAG,SAAAhrB,CAAC,QAAS,EAAC,EAANA,CAAM,CAAGA,CAAC,CAAG,CAAC,EAG7B,UAAW,CAGV,OAFI2rB,EAAQ,CAAG,CAAC,CACZC,CAAO,CAAG,CAAC,IAAI,CAAE,KAAK,CAAE,QAAQ,CAAE,GAAG,CAAC,CAClC5rB,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG4rB,CAAO,CAAC99B,MAAM,EAAI,CAACyC,MAAM,CAAC8J,qBAAqB,CAAE,EAAE2F,CAAC,CACrEzP,MAAM,CAAC8J,qBAAqB,CAAG9J,MAAM,CAACq7B,CAAO,CAAC5rB,CAAC,CAAC,CAAC,uBAAuB,CAAC,CACzEzP,MAAM,CAACs7B,oBAAoB,CAAGt7B,MAAM,CAACq7B,CAAO,CAAC5rB,CAAC,CAAC,CAAC,sBAAsB,CAAC,EAAIzP,MAAM,CAACq7B,CAAO,CAAC5rB,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAGxHzP,MAAM,CAAC8J,qBAAqB,GAC/B9J,MAAM,CAAC8J,qBAAqB,CAAG,SAASqV,CAAQ,CAAE7b,CAAO,CAAE,OAExCnG,IAAI,CAACo+B,GAAG,CADrBC,CAAQ,CAAG,GAAIl8B,KAAI,EAAE,CAACE,OAAO,EAAE,CAC/Bi8B,CAAU,CAAG,EAAS,CAAC,CAAE,EAAE,EAAID,CAAQ,CAAGJ,CAAQ,CAAC,CAAC,CACpDr2B,CAAE,CAAG/E,MAAM,CAACsF,UAAU,CAAC,UAAW,CAAE6Z,CAAQ,CAACqc,CAAQ,CAAGC,CAAU,CAAG,CAAC,CAAEA,CAAU,CAAC,CAEvF,MADAL,EAAQ,CAAGI,CAAQ,CAAGC,CAAU,CACzB12B,CACT,CAAC,EAEE/E,MAAM,CAACs7B,oBAAoB,GAC9Bt7B,MAAM,CAACs7B,oBAAoB,CAAG,SAASv2B,CAAE,CAAE,CACzCgiB,YAAY,CAAChiB,CAAE,CACjB,CAAC,CACL,CAAC,EAAE,IAGC22B,aAAY,CAAG,EAAE,CACjBC,SAAS,CAAG,EAAE,CAClB,QAASpN,UAAS,CAACxpB,CAAE,CACrB,CACE,GAAmB,EAAE,EAAlB22B,YAAkB,CACrB,CACE,GAAIE,EAAE,CAAU,OAAO,EAAb72B,CAAa,CAAI,GAAG,CAAG,CAAC,CAClCF,CAAC,CAAC,GAAG,CAAC62B,YAAY,CAAC,CAAC1lB,KAAK,CAAC4lB,CAAE,CAAC,CAACjzB,OAAO,CAAC,GAAG,CAAC,CAC1CgzB,SAAS,CAAGD,YACd,CACU,EAAE,EAAR32B,CAAQ,GACN42B,SAAS,EAAI52B,CAAE,EAAmC,WAAW,EAA1C,MAAOF,EAAC,CAAC,GAAG,CAAGE,CAAE,CAAC,CAAC82B,KAAK,EAAkB,EAAiC,CAAC,CAA9Bh3B,CAAC,CAAC,GAAG,CAAGE,CAAE,CAAC,CAAC82B,KAAK,EAAE,CAACt+B,MAAU,CACjGsH,CAAC,CAAC,GAAG,CAAGE,CAAE,CAAC,CAAC+2B,UAAU,EAAE,CAExBj3B,CAAC,CAAC,GAAG,CAAGE,CAAE,CAAC,CAACmH,SAAS,CAAC,GAAG,CAAC,EAG9BwvB,YAAY,CAAG32B,CACjB,CACA,QAASg3B,SAAQ,EAAG,CAC2C,UAAU,EAApEj9B,QAAQ,CAACgpB,cAAc,CAAC,cAAc,CAAC,CAACjY,KAAK,CAAC4O,QAAsB,EACrE3f,QAAQ,CAACgpB,cAAc,CAAC,cAAc,CAAC,CAACjY,KAAK,CAAC4O,QAAQ,CAAG,OAAO,CAChEjgB,MAAM,CAAC,aAAa,CAAE,OAAO,CAAE,GAAG,CAAC,GAEnCM,QAAQ,CAACgpB,cAAc,CAAC,cAAc,CAAC,CAACjY,KAAK,CAAC4O,QAAQ,CAAG,UAAU,CACnEjgB,MAAM,CAAC,aAAa,CAAE,UAAU,CAAE,GAAG,CAAC,CAE1C,CAEA,QAASw9B,eAAc,EAAU,IAATphB,EAAE,wDAAC,IAAI,CACpB,IAAI,GAATA,CAAS,GACXA,CAAE,CAA8B,KAAK,EAAhCvU,SAAS,CAAC,YAAY,CAAU,EACvCsF,QAAQ,CAACC,MAAM,CAAC,SAAS,YAAMgP,CAAE,CAAG,cAAc,CAAG,cAAc,uBAAqB,CACpFA,CAAE,EAAI,CAAC9b,QAAQ,CAACgpB,cAAc,CAAC,cAAc,CAAC,EAChDhpB,QAAQ,CAACgpB,cAAc,CAAC,kBAAkB,CAAC,CAAC/Y,kBAAkB,CAAC,YAAY,gEACvEjQ,QAAQ,CAACgpB,cAAc,CAAC,YAAY,CAAC,CAAC3U,SAAS,iIAE3C,CAEV3U,MAAM,CAAC,YAAY,CAAEoc,CAAE,CAAG,KAAK,CAAG,IAAI,CAAE,EAAE,CAC5C,CAEA,GAAIqT,QAAO,CAAG,CACZgO,IAAI,CAAG,KAAK,CACZh1B,IAAI,CAAG,eAAW,CACfnI,QAAQ,CAACo9B,cAAc,CAACC,UAAU,CAAC,mDAAmD,CAAE,KAAK,CAAC,GAC/F,IAAI,CAACF,IAAI,CAAC,KAAK,CACjB,CAAC,CACD9/B,GAAG,CAAE,0CAA0C,CAC/C1G,IAAI,CAAE,6BAA6B,CAEnCkN,GAAG,CAAG,aAASy5B,GAAG,CAAE,CAClB,GAAIC,IAAG,CAACD,GAAG,CAAC/hB,SAAS,CACrB,GAAK,CAACgiB,GAAG,CAAC33B,KAAK,CAAC,WAAW,CAAC,EAAI,CAAC23B,GAAG,CAAC33B,KAAK,CAAC,cAAc,CAAC,CAC1D,CAEE23B,GAAG,CAACA,GAAG,CAACt+B,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAACA,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,CAACA,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAC3E,GAAIu+B,KAAI,CAAG,OAAO,CAACD,GAAG,CAAC,QAAQ,CAC/BA,GAAG,CAAClyB,MAAM,CAACkyB,GAAG,CAACt+B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAEhCC,EAAC,CAAGwG,IAAI,CAAC,mBAAmB,CAACK,CAAC,CAACu3B,GAAG,CAAC,CAAC1zB,MAAM,EAAE,CAACkE,GAAG,CAAC,OAAO,CAAC,CAAC,CAC1D2vB,KAAK,CAAG,gBAAgB,CAACv+B,CAAC,CAACw+B,CAAC,CAAC,GAAG,CAACx+B,CAAC,CAACy+B,CAAC,CAAC,GAAG,CAACz+B,CAAC,CAACsG,CAAC,CAAC,GAAG,CAAC+3B,GAAG,CAAC,GAAG,CAC5DA,GAAG,CAAG,wCAAwC,CAAC,IAAI,CAACJ,IAAI,CAAC,SAAS,CAAEM,KAAK,CAAE,aAAa,CAAC,IAAI,CAAC9mC,IAAI,CAAC,WAAW,CAAC6mC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAACngC,GAAG,CAAC,qCAClJ,CACA,MAAOkgC,IACT,CAAC,CAEDK,cAAc,CAAE,wBAASN,CAAG,CAAE,CAC5B,GAAIC,EAAG,CAAGx3B,CAAC,CAACu3B,CAAG,CAAC,CAACvvB,IAAI,CAAC,KAAK,CAAC,CAC5BhI,CAAC,CAACu3B,CAAG,CAAC,CAAC1zB,MAAM,EAAE,CAACjC,IAAI,CAAC41B,CAAG,CAC1B,CAAC,CAED7H,MAAM,CAAG,gBAASmI,CAAM,CAAE,CAGxB,OAFIC,EAAK,CAAsB,WAAW,EAA7B,MAAOD,EAAsB,CAAI38B,MAAM,CAAClB,QAAQ,CAAG69B,CAAM,CAAC,CAAC,CAAC,CACrEP,CAAG,CAAGQ,CAAK,CAACx1B,oBAAoB,CAAC,GAAG,CAAC,CAChC/I,CAAC,CAAC,CAAC,CAAEA,CAAC,CAAC+9B,CAAG,CAAC7+B,MAAM,CAAEc,CAAC,EAAE,EACK,OAAO,EAAtC+9B,CAAG,CAAC/9B,CAAC,CAAC,CAACiJ,YAAY,CAAC,MAAM,CAAY,EAAuC,OAAO,EAA1C80B,CAAG,CAAC/9B,CAAC,CAAC,CAACiJ,YAAY,CAAC,UAAU,CAAY,IACvF80B,CAAG,CAAC/9B,CAAC,CAAC,CAACgc,SAAS,CAAG,IAAI,CAAC1X,GAAG,CAACy5B,CAAG,CAAC/9B,CAAC,CAAC,CAAC,CAEvC,CAAC,CAEDw+B,YAAY,CAAG,sBAASL,CAAC,CAAEC,CAAC,CAAEn4B,CAAC,CAAE,CAC/B,MAAO,CAACk4B,CAAC,CAAE,CAACA,CAAC,CAAC,GAAG,EAAEM,OAAO,CAAC,CAAC,CAAC,CAAEL,CAAC,CAAE,CAACA,CAAC,CAAC,GAAG,EAAEK,OAAO,CAAC,CAAC,CAAC,CAAEx4B,CAAC,CAAE,CAACA,CAAC,CAAC,GAAG,EAAEw4B,OAAO,CAAC,CAAC,CAAE,CAC9E,CAAC,CACDC,aAAa,CAAG,uBAASP,CAAC,CAAEC,CAAC,CAAEn4B,CAAC,CAAE/D,CAAC,CAAE,CACnC,MAAO,KAAI,CAACs8B,YAAY,CAACL,CAAC,CAAEC,CAAC,CAAEn4B,CAAC,CAClC,CACF,CAAC,CAED,QAASsD,SAAQ,CAACo1B,CAAM,CAAEC,CAAQ,CAAE,CAClC,MAA4B,QAAQ,WAArBA,CAAQ,CAAa,CAA4B/1B,CAAC,CAAC8yB,QAAQ,CAACiD,CAAQ,CAAED,CAAM,CAAC,CAAnDA,CAAM,GAAKC,CACtD,CAEA,CAAC,SAASp4B,CAAC,CAAE,CACXA,CAAC,CAACpI,EAAE,CAACmV,KAAK,CAAG,SAASsrB,CAAG,CAAE,CAGzB,GAFAA,CAAG,CAAGr4B,CAAC,CAACs4B,MAAM,CAAC,CAACxhB,MAAM,CAAC,EAAE,CAACiP,MAAM,CAAC,MAAM,CAAC,CAAEsS,CAAG,CAAC,CAE5B,EAAE,GAAjBA,CAAG,CAACvhB,MAAa,CAClB,GAAIrB,EAAG,CAAG,IAAI,CAAC,IAEf,IAAIA,EAAG,CAAG,IAAI,CAAC/W,IAAI,CAAC25B,CAAG,CAACvhB,MAAM,CAAC,CAGjC,MAAOrB,EAAG,CAAC1N,GAAG,CAAC,QAAQ,CAAEswB,CAAG,CAACtS,MAAM,CAAC,CAAChQ,EAAE,CAAC,WAAW,CAAE,SAAS9I,CAAC,CAAE,CAC/D,GAAkB,EAAE,GAAjBorB,CAAG,CAACvhB,MAAa,CAClB,GAAIyhB,EAAK,CAAGv4B,CAAC,CAAC,IAAI,CAAC,CAACQ,QAAQ,CAAC,WAAW,CAAC,CAAC,IAE1C,IAAI+3B,EAAK,CAAGv4B,CAAC,CAAC,IAAI,CAAC,CAACQ,QAAQ,CAAC,eAAe,CAAC,CAACqD,MAAM,EAAE,CAACrD,QAAQ,CAAC,WAAW,CAAC,CAE9E,GAAIg4B,EAAK,CAAGD,CAAK,CAACxwB,GAAG,CAAC,SAAS,CAAC,CAC9B0wB,CAAK,CAAGF,CAAK,CAAC/M,WAAW,EAAE,CAC3BkN,CAAK,CAAGH,CAAK,CAAC9M,UAAU,EAAE,CAC1BkN,CAAK,CAAGJ,CAAK,CAACz7B,MAAM,EAAE,CAACkE,GAAG,CAAGy3B,CAAK,CAAGxrB,CAAC,CAAC2Y,KAAK,CAC5CgT,CAAK,CAAGL,CAAK,CAACz7B,MAAM,EAAE,CAAC+O,IAAI,CAAG6sB,CAAK,CAAGzrB,CAAC,CAAC4Y,KAAK,CAC/C0S,CAAK,CAACxwB,GAAG,CAAC,SAAS,CAAE,GAAI,CAAC,CAACxH,OAAO,EAAE,CAACwV,EAAE,CAAC,WAAW,CAAE,SAAS9I,CAAC,CAAE,CAC3DorB,CAAG,CAACQ,MAAM,EACZR,CAAG,CAACQ,MAAM,EAAE,CACd74B,CAAC,CAAC,YAAY,CAAC,CAAClD,MAAM,CAAC,CACrBkE,GAAG,CAACiM,CAAC,CAAC2Y,KAAK,CAAG+S,CAAK,CAAGF,CAAK,CAC3B5sB,IAAI,CAACoB,CAAC,CAAC4Y,KAAK,CAAG+S,CAAK,CAAGF,CACzB,CAAC,CAAC,CAAC3iB,EAAE,CAAC,SAAS,CAAE,UAAW,CAC1B/V,CAAC,CAAC,IAAI,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CAAC2H,GAAG,CAAC,SAAS,CAAEywB,CAAK,CACvD,CAAC,CACH,CAAC,CAAC,CACFvrB,CAAC,CAACtJ,cAAc,EAClB,CAAC,CAAC,CAACoS,EAAE,CAAC,SAAS,CAAE,UAAW,CACR,EAAE,GAAjBsiB,CAAG,CAACvhB,MAAa,CAClB9W,CAAC,CAAC,IAAI,CAAC,CAACI,WAAW,CAAC,WAAW,CAAC,CAEhCJ,CAAC,CAAC,IAAI,CAAC,CAACI,WAAW,CAAC,eAAe,CAAC,CAACyD,MAAM,EAAE,CAACzD,WAAW,CAAC,WAAW,CAEzE,CAAC,CACH,CAAC,CACDJ,CAAC,CAACpI,EAAE,CAACuV,QAAQ,CAAG,SAASkrB,CAAG,CAAE,CAG5B,GAFAA,CAAG,CAAGr4B,CAAC,CAACs4B,MAAM,CAAC,CAACxhB,MAAM,CAAC,EAAE,CAACiP,MAAM,CAAC,SAAS,CAAC,CAAEsS,CAAG,CAAC,CAE/B,EAAE,GAAjBA,CAAG,CAACvhB,MAAa,CAAE,CACrB,GAAIrB,EAAG,CAAG,IAAI,CACdzV,CAAC,CAAC,IAAI,CAAC,CAACI,WAAW,CAAC,WAAW,CAChC,CAAC,IAAM,CACN,GAAIqV,EAAG,CAAG,IAAI,CAAC/W,IAAI,CAAC25B,CAAG,CAACvhB,MAAM,CAAC,CAC/B9W,CAAC,CAAC,IAAI,CAAC,CAACI,WAAW,CAAC,eAAe,CAAC,CAChCyD,MAAM,EAAE,CACRzD,WAAW,CAAC,WAAW,CAC5B,CACA,MAAOqV,EAAG,CAAC1N,GAAG,CAAC,QAAQ,CAAE,SAAS,CAAC,CAChCqgB,GAAG,CAAC,WAAW,CAAC,CAChBA,GAAG,CAAC,SAAS,CAAC,CACdA,GAAG,CAAC,WAAW,CACpB,CA6BF,CAAC,EAAEV,MAAM,CAAC,CAEV,QAASgD,YAAW,CAACG,CAAI,CAAE,CACzBA,CAAI,CAACrqB,QAAQ,CAAC,WAAW,CAAC,CAC1B,GAAIs4B,EAAG,CAAGjO,CAAI,CAACnsB,IAAI,CAAC,qBAAqB,CAAC,CACtCo6B,CAAG,CAACzwB,IAAI,CAAC,GAAG,CAAC,CAAGywB,CAAG,CAACzwB,IAAI,CAAC,GAAG,CAAC,EAC/BywB,CAAG,CAACt4B,QAAQ,CAAC,gBAAgB,CAAC,CACR,YAAY,EAAhCs4B,CAAG,CAACzwB,IAAI,CAAC,MAAM,CAAiB,EAClCywB,CAAG,CAACt4B,QAAQ,CAAC,kBAAkB,CAAC,CAClCs4B,CAAG,CAAC/wB,GAAG,CAAC,CACNgxB,aAAa,WAAmC,GAAG,EAAhCD,CAAG,CAACzwB,IAAI,CAAC,GAAG,CAAC,CAACywB,CAAG,CAACzwB,IAAI,CAAC,GAAG,CAAC,CAAK,KACrD,CAAC,CAAC,CACF,GAAI2wB,EAAI,CAAGF,CAAG,CAACzwB,IAAI,CAAC,MAAM,CAAC,CACzB4wB,CAAa,6GAAqG,CACpH,GAAI,CAACH,CAAG,CAACzwB,IAAI,CAAC,MAAM,CAAC,CAACjQ,OAAO,CAAC,SAAS,CAAC,CAAE,CACxC,GAAIsF,EAAK,CAAGo7B,CAAG,CAACzwB,IAAI,CAAC,UAAU,CAAC,CAChCywB,CAAG,CAAC90B,MAAM,gEAAwDg1B,CAAI,uBAAct7B,CAAK,kBAAaA,CAAK,EAAK,EAAE,0IACpH,CACA,GAAwB,OAAO,EAA3Bo7B,CAAG,CAACzwB,IAAI,CAAC,MAAM,CAAY,CAAE,CAC/B,GAAI3K,EAAK,CAAGo7B,CAAG,CAACzwB,IAAI,CAAC,OAAO,CAAC,CAC7BywB,CAAG,CAAC90B,MAAM,kDAA0Cg1B,CAAI,+BAAsBt7B,CAAK,cAASA,CAAK,EAAK,EAAE,0IAC1G,CACA,GAAwB,YAAY,EAAhCo7B,CAAG,CAACzwB,IAAI,CAAC,MAAM,CAAiB,CAAE,IAChC6wB,EAAO,CAAGC,SAAS,CAACH,CAAI,CAAC,CACzBt7B,CAAK,CAAGo7B,CAAG,CAACzwB,IAAI,CAAC,OAAO,CAAC,CAC7BywB,CAAG,CAAC90B,MAAM,0GAAkGk1B,CAAO,0IACrH,CACwB,MAAM,EAA1BJ,CAAG,CAACzwB,IAAI,CAAC,MAAM,CAAW,EAC5BywB,CAAG,CAAC90B,MAAM,+CAAuCg1B,CAAI,+OAAoI,CAC3L,GAAII,EAAG,CAAGvO,CAAI,CAACnsB,IAAI,CAAC,aAAa,CAAC,CAC5B06B,CAAG,CAAC16B,IAAI,CAAC,iBAAiB,CAAC,CAAChG,MAAM,EACtCmyB,CAAI,CAACnsB,IAAI,CAAC,aAAa,CAAC,CAACsF,MAAM,mCACZzM,EAAE,CAAChD,QAAQ,6DACxBgnB,QAAQ,CAAC,QAAQ,CAAC,sBAE5B,CAEA,QAASoP,UAAS,CAACE,CAAI,CAAE,CACvBA,CAAI,CAACzqB,WAAW,CAAC,WAAW,CAAC,CAC7ByqB,CAAI,CAACnsB,IAAI,CAAC,qBAAqB,CAAC,CAAC26B,KAAK,EACxC,CAEA,QAASxqB,UAAS,CAAChT,CAAI,CAAiB,IAAfy9B,EAAO,6DAC1BC,CAAM,CAAG19B,CAAI,CAACJ,gBAAgB,CAAC,+DAA+D,CAAC,CACnG89B,CAAM,CAACthC,OAAO,CAAC,SAAAuhC,CAAK,QAAIA,EAAK,CAACn/B,KAAK,CAAG,IAAI,EAAC,CAC3CwB,CAAI,CAACJ,gBAAgB,CAAC,iBAAiB,CAAC,CAACxD,OAAO,CAAC,SAAAuB,CAAC,QAAIA,EAAC,CAACoC,MAAM,EAAE,EAAC,CACjEkT,aAAa,CAACwD,KAAK,CAACzW,CAAI,CAAE,CAACy9B,CAAO,CAAC,CAEnCz9B,CAAI,CAACJ,gBAAgB,CAAC,qEAAqE,CAAC,CAACxD,OAAO,CAAC,SAAAuB,CAAC,CAAI,CACxGA,CAAC,CAAC+S,OAAO,GAAQ,CACH,YAAY,EAAtB/S,CAAC,CAACI,IAAoB,EAAIJ,CAAC,CAACigC,QAAQ,EACtCjgC,CAAC,CAACigC,QAAQ,EACd,CAAC,CACH,CAEA,QAAS1qB,SAAQ,CAAClT,CAAI,CAAE,CACtB,GAAKA,CAAI,EAET,GAAI0L,EAAK,CAAGvH,CAAC,CAACnE,CAAI,CAAC,CACnBA,CAAI,CAACJ,gBAAgB,CAAC,oBAAoB,CAAC,CAACxD,OAAO,CAAC,SAAAuB,CAAC,CAAI,CACvDA,CAAC,CAACqY,gBAAgB,CAAC,OAAO,CAAE,UAAW,CACrC,GAAI6nB,EAAS,CAAG,IAAI,CAACppB,aAAa,CAACnU,aAAa,CAAC,iBAAiB,CAAC,CAC/Du9B,CAAS,EACXA,CAAS,CAAC99B,MAAM,EAAE,CACpB,GAAIiE,EAAK,CAAG85B,UAAU,CAACC,OAAO,CAAC,IAAI,CAACv/B,KAAK,CAAC,CACvCwF,CAAK,EACN,IAAI,CAACqK,kBAAkB,CAAC,UAAU,sBAAe4I,aAAa,+BAAsBjT,CAAK,CAACg6B,IAAI,qCAClG,CAAC,CACH,CAAC,CAAC,CACFh+B,CAAI,CAACJ,gBAAgB,CAAC,wBAAwB,CAAC,CAACxD,OAAO,CAAC,SAAAuB,CAAC,CAAI,CAC3DA,CAAC,CAACqY,gBAAgB,CAAC,QAAQ,CAAE,UAAW,CACtC,GAAI,IAAI,CAACxX,KAAK,CAAE,CACd,GAAIy/B,EAAY,CAAG,IAAI,CAACxpB,aAAa,CAACyS,kBAAkB,CACpD+W,CAAY,GACdA,CAAY,CAACvtB,OAAO,GAAO,CAC/B,CACF,CAAC,CACH,CAAC,CAAC,CAEF1Q,CAAI,CAACJ,gBAAgB,CAAC,UAAU,CAAC,CAACxD,OAAO,CAAC,SAAA8hC,CAAG,CAAI,CAC/CA,CAAG,CAACvrB,OAAO,CAAG,SAAS9K,CAAE,CAAE,CACzBA,CAAE,CAACC,cAAc,EAAE,CACnB,IAAI,CAACxH,aAAa,CAAC,WAAW,CAAC,CAACR,SAAS,CAAC+P,MAAM,CAAC,UAAU,CAC7D,CAAC,CACDquB,CAAG,CAACC,YAAY,CAAG,SAASt2B,CAAE,CAAE,YAC9B,IAAI,CAACu2B,WAAW,CAAGx5B,UAAU,CAAC,iBAAM,EAAI,CAACtE,aAAa,CAAC,WAAW,CAAC,CAACR,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC,EAAE,GAAG,CACvG,CAAC,CACDm+B,CAAG,CAACG,YAAY,CAAG,UAAW,CAC5BhY,YAAY,CAAC,IAAI,CAAC+X,WAAW,CAC/B,CACF,CAAC,CAAC,CACF,GAAIE,EAAG,CAAGt+B,CAAI,CAACM,aAAa,CAAC,qBAAqB,CAAC,CAC/Cg+B,CAAG,GACLA,CAAG,CAACV,QAAQ,CAAG,UAAW,CACxBp7B,MAAM,CAACkJ,CAAK,iBAAW,IAAI,CAAClN,KAAK,MAAK,SAAS,CACjD,CAAC,EAEHwB,CAAI,CAACM,aAAa,CAAC,eAAe,CAAC,CAACs9B,QAAQ,CAAG,UAAW,CACxDr6B,MAAM,CAACmI,CAAK,CAAE,IAAI,CAAClN,KAAK,CAC1B,CAAC,CAED,GAAI+/B,EAAM,CAAGv+B,CAAI,CAACqE,EAAE,CAAG,WAAW,CAClCrE,CAAI,CAACM,aAAa,CAAC,UAAU,CAAC,CAAC+D,EAAE,CAAGk6B,CAAM,CAC1Cv+B,CAAI,CAACM,aAAa,CAAC,SAAS,CAAC,CAAC6P,OAAO,CAAC0G,MAAM,CAAG0nB,CAAM,CAEjDnsB,OAAO,CAACC,OAAO,EAAsB,aAAa,GAA/BD,OAAO,CAACC,OAAuB,EACpDD,OAAO,CAACc,QAAQ,CAAClT,CAAI,CAAC,CAExBA,CAAI,CAACJ,gBAAgB,CAAC,mBAAmB,CAAC,CAACxD,OAAO,CAAC,SAAAoiC,CAAE,CAAI,CACvDA,CAAE,CAACC,QAAQ,GAAO,CAClBD,CAAE,CAACxoB,gBAAgB,CAAC,OAAO,CAAE,iBAAMwoB,EAAE,CAACC,QAAQ,GAAQ,EACxD,CAAC,CAAC,CAEF,GAAI1gC,EAAI,CAAGiC,CAAI,CAACM,aAAa,CAAC,0BAA0B,CAAC,CACrDvC,CAAI,GACNA,CAAI,CAAC6/B,QAAQ,CAAG,UAAW,CACzB,GAAIrR,EAAG,CAAG,IAAI,CAAC7b,OAAO,CACtB1Q,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,CAAC4I,QAAQ,CAAGqjB,CAAG,CACrDviB,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAE,CAACsiB,CAAG,CAC/C,CAAC,CACDxuB,CAAI,CAAC2S,OAAO,CAAG,CAAC,CAAC,CAAC1G,YAAY,iBAAoB,CAClDjM,CAAI,CAAC6/B,QAAQ,EAAE,EAGjB59B,CAAI,CAACgW,gBAAgB,CAAC,QAAQ,CAAE,SAASnO,CAAE,CAAE,CAC3CA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpBuK,IAAI,CAACC,UAAU,CAAC,IAAI,CACtB,CAAC,CAAC,CACF7b,CAAI,CAACJ,gBAAgB,CAAC,8CAA4C,CAAC,CAACxD,OAAO,CAAC,SAAAsiC,CAAG,CAAI,CACjFA,CAAG,CAAC/rB,OAAO,CAAG,SAAS9K,CAAE,CAAE,CACzBA,CAAE,CAACC,cAAc,EAAE,CACnBD,CAAE,CAACwJ,eAAe,EAAE,CACpB,GAAI2K,EAAI,CAAG,EAAe,SAAS,EAAtB,IAAI,CAACje,IAAiB,CAAC,CACpC6d,IAAI,CAACC,UAAU,CAAC7b,CAAI,CAAEgc,CAAI,CAC5B,CACF,CAAC,CAAC,CAEF,GAAI2iB,EAAG,CAAG3+B,CAAI,CAACM,aAAa,CAAC,4BAA0B,CAAC,CACpDq+B,CAAG,GACLA,CAAG,CAACf,QAAQ,CAAG,UAAW,CACxB,GAAI1jB,EAAE,CAAG,IAAI,CAACxJ,OAAO,CACnBqC,CAAK,CAAG/S,CAAI,CAAC2+B,GAAG,CAClB5rB,CAAK,CAAC7J,QAAQ,CAAG,CAACgR,CAAE,CACpBnH,CAAK,CAACyN,GAAG,CAAGtG,CAAE,CAAG,CAAC,CAAG,CAAC,CAClBA,CAAE,EAAmB,CAAC,EAAhBnH,CAAK,CAACvU,KAAU,GACxBuU,CAAK,CAACvU,KAAK,CAAG,CAAC,CAEnB,CAAC,CACDmgC,CAAG,CAACf,QAAQ,EAAE,EAGhB59B,CAAI,CAACJ,gBAAgB,CAAC,4BAA4B,CAAC,CAACxD,OAAO,CAAC,SAAAuD,CAAE,CAAI,CAChEA,CAAE,CAACqxB,OAAO,CAAG,UAAM,CACjBzwB,cAAc,CAAGP,CACnB,CACF,CAAC,CAAC,CAEF,GAAI4+B,EAAU,CAAG5+B,CAAI,CAACM,aAAa,CAAC,SAAS,CAAC,CAC1Cs+B,CAAU,GACZA,CAAU,CAACjsB,OAAO,CAAG,SAAA9K,CAAE,CAAI,CACzBA,CAAE,CAACC,cAAc,EAAE,CACnB9H,CAAI,CAACM,aAAa,CAAC,kBAAkB,CAAC,CAACsH,KAAK,EAC9C,CAAC,EAEL,CAEA,GAAIqD,SAAQ,CAAG,CACbC,MAAM,CAAE,gBAAS2zB,CAAK,CAAE3yB,CAAG,CAAE,IACvB7H,EAAE,oBAAew6B,CAAK,CAAE,CACxBC,CAAQ,CAAG1gC,QAAQ,CAACgpB,cAAc,CAAC/iB,CAAE,CAAC,CAC1C,GAAIy6B,CAAQ,CAEV,YADAA,CAAQ,CAACnlB,SAAS,CAAGzN,CAAG,EAG1B,GAAI8hB,EAAI,CAAG5vB,QAAQ,CAAC4vB,IAAI,EAAI5vB,QAAQ,CAACsI,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAClEyI,CAAK,CAAG/Q,QAAQ,CAAC+pB,aAAa,CAAC,OAAO,CAAC,CACzChZ,CAAK,CAAC3L,IAAI,CAAG,UAAU,CACvB2L,CAAK,CAAC9K,EAAE,CAAGA,CAAE,CACT8K,CAAK,CAAC4vB,UAAU,CAClB5vB,CAAK,CAAC4vB,UAAU,CAACC,OAAO,CAAG9yB,CAAG,CAE9BiD,CAAK,CAACoZ,WAAW,CAACnqB,QAAQ,CAACkqB,cAAc,CAACpc,CAAG,CAAC,CAAC,CAEjD8hB,CAAI,CAACzF,WAAW,CAACpZ,CAAK,CACxB,CAAC,CACDpP,MAAM,CAAE,gBAAS8+B,CAAK,CAAE,IAClBx6B,EAAE,oBAAew6B,CAAK,CAAE,CACxB1vB,CAAK,CAAG/Q,QAAQ,CAACgpB,cAAc,CAAC/iB,CAAE,CAAC,CACvC,GAAI8K,CAAK,CAAE,CACT,GAAI6e,EAAI,CAAG5vB,QAAQ,CAAC4vB,IAAI,EAAI5vB,QAAQ,CAACsI,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAChEsnB,CAAI,EACNA,CAAI,CAACiR,WAAW,CAAC7gC,QAAQ,CAACgpB,cAAc,CAAC/iB,CAAE,CAAC,CAChD,CACF,CACF,CAAC,CAED,QAASuB,aAAY,EAAoF,CAEvG,OAFoB/I,EAAM,wDAAC,EAAE,CAAEqiC,CAAK,wDAAC,gEAAgE,CACjGxmB,CAAM,CAAG,EAAE,CACN/a,CAAC,CAAGd,CAAM,CAAM,CAAC,CAALc,CAAK,CAAE,EAAEA,CAAC,CAC7B+a,CAAM,EAAIwmB,CAAK,CAACziC,IAAI,CAAC8a,KAAK,CAAC9a,IAAI,CAACya,MAAM,EAAE,EAAIgoB,CAAK,CAACriC,MAAM,CAAG,CAAC,CAAC,CAAC,CAAC,CACjE,MAAO6b,EACT,CAEA,QAASkV,aAAY,EAAG,OAkDRnxB,IAAI,CAACE,IAAI,CAjDnBm/B,CAAC,CAAG,EAAE,CACR/B,CAAG,CAAG,EAAE,CACRzkB,CAAK,CAAG,GAAG,CACbnR,CAAC,CAAC,eAAe,CAAC,CAAC0G,IAAI,EAAE,CACzBzM,QAAQ,CAAC4kB,IAAI,CAAC3U,kBAAkB,CAAC,YAAY,yEAAsE,CACnH,GAAI8wB,EAAE,CAAG/gC,QAAQ,CAACkC,aAAa,CAAC,uBAAuB,CAAC,CACtD8+B,CAAI,CAAGj7B,CAAC,CAAC,cAAc,CAAC,CACxBmqB,CAAG,CAAG,EAAE,CACN+Q,aAAa,GACf/Q,CAAG,uBAAiB+Q,aAAa,wCAA4BC,cAAc,QAAM,EAEnFn7B,CAAC,CAAC,yDAAqD,CAAC,CAACgE,MAAM,CAAChE,CAAC,CAAC,cAAc,CAAC,CAAC,CAACitB,QAAQ,CAACjtB,CAAC,CAACg7B,CAAE,CAAC,CAAC,CAClGC,CAAI,CAACj3B,MAAM,yGAGH,CACR,GAAIo3B,EAAI,CAAGC,QAAQ,CAAC5+B,IAAI,CACxBktB,OAAO,CAAC2R,SAAS,EAAE,CAACxuB,IAAI,CAAC,SAAAyuB,CAAG,CAAI,CAC9BH,CAAI,CAACl+B,IAAI,CAAC,SAACxB,CAAC,CAAC+D,CAAC,QAAK,CAAC/D,CAAC,CAAC8/B,KAAK,CAAG,CAAC/7B,CAAC,CAAC+7B,KAAK,EAAC,CACtCzjC,IAAI,CAAC,CACJmI,EAAE,CAAE,IAAI,CACRtG,IAAI,CAAE,KAAK,CACX6hC,MAAM,CAAEF,CACV,CAAC,CAAC,CACFH,CAAI,CAACnjC,OAAO,CAAC,SAACyjC,CAAG,CAAEC,CAAE,CAAK,CACpBD,CAAG,CAACD,MAAM,GACZtR,CAAG,+DAAqDwR,CAAE,eAAKD,CAAG,CAAC9hC,IAAI,+DACnC+hC,CAAE,OAAI,CAC1CD,CAAG,CAACD,MAAM,CAACxjC,OAAO,CAAC,SAAAwH,CAAC,CAAI,CACtBA,CAAC,CAACihB,GAAG,CAAGjhB,CAAC,CAACihB,GAAG,EAAIjhB,CAAC,CAAC7F,IAAI,CACvBuwB,CAAG,gDAAwC1qB,CAAC,CAACihB,GAAG,gBAAMjhB,CAAC,CAACihB,GAAG,qBAAOjhB,CAAC,CAACm8B,IAAI,QAC1E,CAAC,CAAC,CACFzR,CAAG,EAAI,SAAS,CAEpB,CAAC,CAAC,CACFA,CAAG,oPAKW,CACd6Q,CAAE,CAAC9wB,kBAAkB,CAAC,YAAY,WAAKigB,CAAG,EAAG,CAC7CnqB,CAAC,CAAC,YAAY,CAAC,CAACyD,KAAK,CAAC,UAAW,OAMzBnL,IAAI,CAACujC,IAAI,CALf,IAAIZ,CAAI,CAACvlB,QAAQ,CAAC,aAAa,CAAC,EAChCulB,CAAI,CAACz6B,QAAQ,CAAC,aAAa,CAAC,CAC5B,GAAIE,EAAG,CAAGu6B,CAAI,CAAC,CAAC,CAAC,CAACt6B,qBAAqB,EAAE,CACvCiK,CAAC,CAAGlK,CAAG,CAACmK,KAAK,GAAI,GAAM,CACvB7N,CAAC,CAAG0D,CAAG,CAACnE,MAAM,GAAI,GAAM,CACxBu/B,CAAC,CAAG,EAAUlxB,CAAC,CAACA,CAAC,CAAG5N,CAAC,CAACA,CAAC,CAAC,CACxBqjB,CAAK,CAAG,EAAUyb,CAAC,GAAI,CAAC,CAC1B97B,CAAC,CAAC,YAAY,CAAC,CAAC+H,GAAG,CAAC,CAAC,0BAAsBsY,CAAK,KAAG,CAAC,CAAC,CACrDrgB,CAAC,CAACg7B,CAAE,CAAC,CAACjzB,GAAG,CAAC,CACR,WAAc,SAAS,CACvB,QAAW,CACb,CAAC,CAAC,CACFkzB,CAAI,CAACz6B,QAAQ,CAAC,WAAW,CAAC,CAC1BC,UAAU,CAAC,UAAM,CACfw6B,CAAI,CAACz6B,QAAQ,CAAC,kBAAkB,CAClC,CAAC,KAAQ,CACX,CAAC,CAAC,CAEFuoB,QAAQ,CAAChxB,IAAI,CAAC,UAAM,CACZkjC,CAAI,CAACvlB,QAAQ,CAAC,kBAAkB,CAAC,GACvCulB,CAAI,CAAC76B,WAAW,CAAC,4BAA4B,CAAC,CAC9CK,UAAU,CAAC,UAAM,CACfT,CAAC,CAACg7B,CAAE,CAAC,CAACjzB,GAAG,CAAC,CAAC,WAAc,QAAQ,CAAC,CAAC,CACnCkzB,CAAI,CAAC76B,WAAW,CAAC,aAAa,CAChC,CAAC,KAAQ,CACTJ,CAAC,CAACg7B,CAAE,CAAC,CAACjzB,GAAG,CAAC,CACR,WAAc,SAAS,CACvB,QAAW,CACb,CAAC,CAAC,CACF/H,CAAC,CAAC,YAAY,CAAC,CAAC+H,GAAG,CAAC,CAAC,oBAAuB,CAAC,CAAC,CAChD,CAAC,CACH,CAAC,CAAC,CACFkzB,CAAI,CAACx3B,KAAK,CAAC,SAASC,CAAE,CAAE,CACtBA,CAAE,CAACwJ,eAAe,EACpB,CAAC,CAAC,CACD6I,EAAE,CAAC,OAAO,CAAE,oBAAoB,CAAE,UAAW,CAC5C,GAAIzX,EAAO,CAAG0B,CAAC,gBAASA,CAAC,CAAC,IAAI,CAAC,CAACqI,IAAI,CAAC,MAAM,CAAC,EAAG,CAY/C,MAXI/J,EAAO,CAAC4nB,EAAE,CAAC,UAAU,CAAC,EACxB5nB,CAAO,CAACoN,MAAM,IAAO,CACrB1L,CAAC,CAAC,IAAI,CAAC,CAACI,WAAW,CAAC,cAAc,CAAC,GAGnCJ,CAAC,CAAC,YAAY,CAAC,CAAC0L,MAAM,IAAO,CAC7B1L,CAAC,CAAC,eAAe,CAAC,CAAC8D,OAAO,CAAC,MAAM,CAAC,CAClCxF,CAAO,CAACoN,MAAM,IAAM,CACpB1L,CAAC,CAAC,eAAe,CAAC,CAACI,WAAW,CAAC,cAAc,CAAC,CAC9CJ,CAAC,CAAC,IAAI,CAAC,CAACQ,QAAQ,CAAC,cAAc,CAAC,IAGpC,CAAC,CACH,CAAC,GAEG66B,SAAQ,CAAG,CACb,GAAI5+B,KAAI,EAAG,YA0BT,MAzBK,KAAI,CAACs/B,SAAS,GACjB,IAAI,CAACA,SAAS,CAAG,EAAE,CACnB9hC,QAAQ,CAACwB,gBAAgB,CAAC,WAAW,CAAC,CAACxD,OAAO,CAAC,SAAAyuB,CAAC,CAAI,CAElD,GADAA,CAAC,CAAGA,CAAC,CAACvqB,aAAa,CAAC,GAAG,CAAC,EACpB,CAACuqB,CAAC,EACN,GAAItU,EAAC,CAAGsU,CAAC,CAAC1a,OAAO,CAACgwB,QAAQ,CACxBC,CAAE,CAAGvV,CAAC,CAACpY,SAAS,CAChB4tB,CAAI,CAAGjiC,QAAQ,CAACkC,aAAa,eAAQiW,CAAC,EAAG,CAC3C,GAAKA,CAAC,EAAO,IAAI,EAAPA,CAAO,EAAO,UAAU,EAAbA,CAAa,EAClC,GAAI+pB,EAAO,CAAG,CACZj8B,EAAE,CAAEkS,CAAC,CACLxY,IAAI,CAAEqiC,CAAE,CACRR,MAAM,CAAE,EACV,CAAC,CACDS,CAAI,CAACzgC,gBAAgB,CAAC,GAAG,CAAC,CAACxD,OAAO,CAAC,SAAAyD,CAAC,CAAI,CACtC,GAAI0J,EAAC,CAAG1J,CAAC,CAAC4S,SAAS,CAACzO,KAAK,CAAC,kBAAkB,CAAC,CACzCuF,CAAC,EACH+2B,CAAO,CAACV,MAAM,CAAC1jC,IAAI,CAAC,CAClB2oB,GAAG,CAAEtb,CAAC,CAAC,CAAC,CAAC,CACTw2B,IAAI,CAAEx2B,CAAC,CAAC,CAAC,CACX,CAAC,CACL,CAAC,CAAC,CACF,CAAI,CAAC22B,SAAS,CAAChkC,IAAI,CAACokC,CAAO,CAAC,CAde,CAe7C,CAAC,CAAC,EAEG,IAAI,CAACJ,SACd,CACF,CAAC,CAEGpS,OAAO,CAAG,CACZvnB,IAAI,CAAE,eAAW,YACf,IAAI,CAACk5B,SAAS,EAAE,CAACxuB,IAAI,CAAC,iBAAM,EAAI,CAAC7P,MAAM,CAAC,EAAE,CAAC,EAAC,SAAM,CAACoF,CAAC,CAACouB,IAAI,CAAC,CAC1DzwB,CAAC,CAAC,cAAc,CAAC,CAAC+V,EAAE,CAAC,OAAO,CAAE,UAAW,CACvC4T,OAAO,CAAC1sB,MAAM,CAAC+C,CAAC,CAAC,IAAI,CAAC,CAACf,GAAG,EAAE,CAC9B,CAAC,CACH,CAAC,CACDq8B,SAAS,CAAE,oBAAW,YACpB,MAAO,IAAIpwB,QAAO,CAAC,SAACkxB,CAAE,CAAEC,CAAE,CAAK,CACzB,CAAI,CAACN,SAAS,CAChBK,CAAE,CAAC,CAAI,CAACL,SAAS,CAAC,CAElB/7B,CAAC,CAACmtB,OAAO,CAAC3T,UAAU,CAAG,gBAAgB,CAAE,SAAAnR,CAAI,CAAI,CAC/C,CAAI,CAAC0zB,SAAS,CAAG1zB,CAAI,CACrB+zB,CAAE,CAAC/zB,CAAI,CACT,CAAC,CAAC,CACDilB,IAAI,CAAC,SAAArgB,CAAC,CAAI,CACTxH,IAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC3C,cAAc,CAAC,CAC3BynC,CAAE,CAACpvB,CAAC,CACN,CAAC,CAEL,CAAC,CACH,CAAC,CACDhQ,MAAM,CAAE,gBAASq/B,CAAK,CAAE,CACtB,GAAInjB,EAAG,CAAG,EAAE,CACiB,WAAW,EAArC,MAAO,KAAI,CAAC4iB,SAAyB,GAC5B,EAAE,EAAXO,CAAW,CAAEnjB,CAAG,CAAG,IAAI,CAAC4iB,SAAS,EAElCO,CAAK,CAAGA,CAAK,CAACz6B,WAAW,EAAE,CAC3BQ,CAAC,CAACC,IAAI,CAAC,IAAI,CAACy5B,SAAS,CAAE,SAAS5zB,CAAK,CAAE,EACS,CAAC,CAAC,GAA7CA,CAAK,CAACvO,IAAI,CAACiI,WAAW,EAAE,CAAC/O,MAAM,CAACwpC,CAAK,CAAQ,EAA+C,CAAC,CAAC,GAA7Cn0B,CAAK,CAACyzB,IAAI,CAAC/5B,WAAW,EAAE,CAAC/O,MAAM,CAACwpC,CAAK,CAAQ,GAC/FnjB,CAAG,CAACphB,IAAI,CAACoQ,CAAK,CAClB,CAAC,CAAC,EAEJ,IAAI,CAACo0B,OAAO,CAACpjB,CAAG,CAAC,CACnB,CAAC,CACDojB,OAAO,CAAE,iBAAS9/B,CAAI,CAAE,CACtB,GAAIqF,EAAO,CAAG,EAAE,CAAE06B,CAAI,CAAG,EAAE,CAC3Bn6B,CAAC,CAACC,IAAI,CAAC7F,CAAI,CAAE,SAAS0Z,CAAI,CAAE,CAC1BrU,CAAO,EAAI,iCAA8B,CAAEqU,CAAI,CAACylB,IAAI,CAAE,YAAU,CAACa,eAAe,CAACtmB,CAAI,CAACvc,IAAI,CAAC,OAAM,CAACuc,CAAI,CAACvc,IAAI,CAAC,MAAM,CAAEuc,CAAI,CAACylB,IAAI,CAAE,MAAM,CACrIY,CAAI,EAAI,kBAAiB,CAACrmB,CAAI,CAACvc,IAAI,CAAC,MAAK,CAACuc,CAAI,CAACvc,IAAI,CAAC,MAAM,CAAEuc,CAAI,CAACylB,IAAI,CAAE,WACzE,CAAC,CAAC,CACF57B,CAAC,CAAC,WAAW,CAAC,CAAC4B,IAAI,CAACE,CAAO,CAAC,CAC5B9B,CAAC,CAAC,aAAa,CAAC,CAACgE,MAAM,CAACw4B,CAAI,CAC9B,CACF,CAAC,CAEG5R,SAAS,CAAG,CACd,GAAM,iBAAiB,CACvB,GAAM,oBAAoB,CAC1B,GAAM,eAAe,CACrB,GAAM,SAAS,CACf,GAAM,sBAAsB,CAC5B,GAAM,aAAa,CACnB,GAAM,qBAAqB,CAC3B,GAAM,UAAU,CAChB,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,qBAAqB,CAC3B,GAAM,YAAY,CAClB,GAAM,WAAW,CACjB,GAAM,gBAAgB,CACtB,GAAM,SAAS,CACf,GAAM,WAAW,CACjB,GAAM,OAAO,CACb,GAAM,eAAe,CACrB,GAAM,YAAY,CAClB,GAAM,wBAAwB,CAC9B,GAAM,UAAU,CAChB,GAAM,YAAY,CAClB,GAAM,SAAS,CACf,GAAM,cAAc,CACpB,GAAM,UAAU,CAChB,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,OAAO,CACb,GAAM,kBAAkB,CACxB,GAAM,SAAS,CACf,GAAM,mBAAmB,CACzB,GAAM,SAAS,CACf,GAAM,mCAAmC,CACzC,GAAM,QAAQ,CACd,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,eAAe,CACrB,GAAM,UAAU,CAChB,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,QAAQ,CACd,GAAM,yBAAyB,CAC/B,GAAM,uCAAuC,CAC7C,GAAM,0BAA0B,CAChC,GAAM,OAAO,CACb,GAAM,aAAa,CACnB,GAAM,eAAe,CACrB,GAAM,cAAc,CACpB,GAAM,OAAO,CACb,GAAM,UAAU,CAChB,GAAM,OAAO,CACb,GAAM,UAAU,CAChB,GAAM,YAAY,CAClB,GAAM,MAAM,CACZ,GAAM,YAAY,CAClB,GAAM,SAAS,CACf,GAAM,kBAAkB,CACxB,GAAM,QAAQ,CACd,GAAM,gBAAgB,CACtB,GAAM,SAAS,CACf,GAAM,UAAU,CAChB,GAAM,SAAS,CACf,GAAM,UAAU,CAChB,GAAM,oBAAoB,CAC1B,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,OAAO,CACb,GAAM,gBAAgB,CACtB,GAAM,SAAS,CACf,GAAM,OAAO,CACb,GAAM,UAAU,CAChB,GAAM,QAAQ,CACd,GAAM,SAAS,CACf,GAAM,MAAM,CACZ,GAAM,6BAA6B,CACnC,GAAM,iCAAiC,CACvC,GAAM,eAAe,CACrB,GAAM,QAAQ,CACd,GAAM,OAAO,CACb,GAAM,gBAAgB,CACtB,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,eAAe,CACrB,GAAM,UAAU,CAChB,GAAM,OAAO,CACb,GAAM,WAAW,CACjB,GAAM,WAAW,CACjB,GAAM,QAAQ,CACd,GAAM,QAAQ,CACd,GAAM,YAAY,CAClB,GAAM,mBAAmB,CACzB,GAAM,QAAQ,CACd,GAAM,8CAA8C,CACpD,GAAM,WAAW,CACjB,GAAM,MAAM,CACZ,GAAM,eAAe,CACrB,GAAM,QAAQ,CACd,GAAM,WAAW,CACjB,GAAM,mCAAmC,CACzC,GAAM,UAAU,CAChB,GAAM,SAAS,CACf,GAAM,OAAO,CACb,GAAM,SAAS,CACf,GAAM,WAAW,CACjB,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,aAAa,CACnB,GAAM,OAAO,CACb,GAAM,gCAAgC,CACtC,GAAM,MAAM,CACZ,GAAM,2BAA2B,CACjC,GAAM,SAAS,CACf,GAAM,OAAO,CACb,GAAM,QAAQ,CACd,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,OAAO,CACb,GAAM,OAAO,CACb,GAAM,YAAY,CAClB,GAAM,UAAU,CAChB,GAAM,UAAU,CAChB,GAAM,SAAS,CACf,GAAM,uBAAuB,CAC7B,GAAM,wCAAwC,CAC9C,GAAM,oBAAoB,CAC1B,GAAM,QAAQ,CACd,GAAM,gBAAgB,CACtB,GAAM,YAAY,CAClB,GAAM,kCAAkC,CACxC,GAAM,SAAS,CACf,GAAM,aAAa,CACnB,GAAM,eAAe,CACrB,GAAM,WAAW,CACjB,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,WAAW,CACjB,GAAM,YAAY,CAClB,GAAM,QAAQ,CACd,GAAM,wBAAwB,CAC9B,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,sBAAsB,CAC5B,GAAM,YAAY,CAClB,GAAM,cAAc,CACpB,GAAM,YAAY,CAClB,GAAM,kBAAkB,CACxB,GAAM,WAAW,CACjB,GAAM,MAAM,CACZ,GAAM,SAAS,CACf,GAAM,UAAU,CAChB,GAAM,OAAO,CACb,GAAM,0BAA0B,CAChC,GAAM,YAAY,CAClB,GAAM,YAAY,CAClB,GAAM,YAAY,CAClB,GAAM,OAAO,CACb,GAAM,WAAW,CACjB,GAAM,UAAU,CAChB,GAAM,QAAQ,CACd,GAAM,QAAQ,CACd,GAAM,UAAU,CAChB,GAAM,YAAY,CAClB,GAAM,SAAS,CACf,GAAM,eAAe,CACrB,GAAM,OAAO,CACb,GAAM,gBAAgB,CACtB,GAAM,SAAS,CACf,GAAM,WAAW,CACjB,GAAM,aAAa,CACnB,GAAM,QAAQ,CACd,GAAM,OAAO,CACb,GAAM,OAAO,CACb,GAAM,MAAM,CACZ,GAAM,aAAa,CACnB,GAAM,MAAM,CACZ,GAAM,QAAQ,CACd,GAAM,MAAM,CACZ,GAAM,kBAAkB,CACxB,GAAM,kBAAkB,CACxB,GAAM,aAAa,CACnB,GAAM,UAAU,CAChB,GAAM,QAAQ,CACd,GAAM,2BAA2B,CACjC,GAAM,UAAU,CAChB,GAAM,aAAa,CACnB,GAAM,uBAAuB,CAC7B,GAAM,UAAU,CAChB,GAAM,OAAO,CACb,GAAM,UAAU,CAChB,GAAM,OAAO,CACb,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,oBAAoB,CAC1B,GAAM,QAAQ,CACd,GAAM,cAAc,CACpB,GAAM,iBAAiB,CACvB,GAAM,YAAY,CAClB,GAAM,OAAO,CACb,GAAM,QAAQ,CACd,GAAM,WAAW,CACjB,GAAM,cAAc,CACpB,GAAM,UAAU,CAChB,GAAM,wBAAwB,CAC9B,GAAM,UAAU,CAChB,GAAM,cAAc,CACpB,GAAM,YAAY,CAClB,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,UAAU,CAChB,GAAM,aAAa,CACnB,GAAM,uBAAuB,CAC7B,GAAM,aAAa,CACnB,GAAM,cAAc,CACpB,GAAM,sBAAsB,CAC5B,GAAM,WAAW,CACjB,GAAM,0BAA0B,CAChC,GAAM,MAAM,CACZ,GAAM,6BAA6B,CACnC,GAAM,MAAM,CACZ,GAAM,UAAU,CAChB,GAAM,YAAY,CAClB,GAAM,SAAS,CACf,GAAM,aAAa,CACnB,GAAM,cAAc,CACpB,GAAM,SAAS,CACf,GAAM,OAAO,CACb,GAAM,QAAQ,CACd,GAAM,qBAAqB,CAC3B,GAAM,QAAQ,CACd,GAAM,QAAQ,CACd,GAAM,8BAA8B,CACpC,GAAM,SAAS,CACf,GAAM,QAAQ,CACd,GAAM,sCAAsC,CAC5C,GAAM,eAAe,CACrB,GAAM,SAAS,CACf,GAAM,YAAY,CAClB,GAAM,+BAA+B,CACrC,GAAM,kCAAkC,CACxC,GAAM,WAAW,CACjB,GAAM,yBAAyB,CAC/B,GAAM,sBAAsB,CAC5B,GAAM,SAAS,CACf,GAAM,SAAS,CACf,GAAM,mBAAmB,CACzB,GAAM,OAAO,CACb,GAAM,OAAO,CACb,GAAM,SAAS,CACf,GAAM,cAAc,CACpB,GAAM,QAAQ,CACd,GAAM,UAAU,CAChB,GAAM,MAAM,CACZ,GAAM,KACR,CAAC,CAEGrB,IAAI,CAAG,CACTvmB,SAAS,GAAO,CAChBZ,IAAI,CAAE,eAAW,CACfpC,CAAC,CAACmtB,OAAO,CAACra,aAAa,CAAC,YAAY,CAAE,SAASzK,CAAI,CAAE,CACnD,GAAIq0B,EAAO,CAAG,EAAE,CACC,CAAC,CAAfr0B,CAAI,CAAC3P,MAAU,CAChB2J,CAAC,CAACC,IAAI,CAAC+F,CAAI,CAAE,SAASs0B,CAAG,CAAE,CACtBA,CAAG,CAACn6B,IAAI,GAAKnC,cAAc,EAAEq8B,CAAO,CAAC3kC,IAAI,CAAC4kC,CAAG,CAClD,CAAC,CAAC,CAECD,CAAO,CAAGr0B,CAAI,CACnBkhB,IAAI,CAAClhB,IAAI,CAAGq0B,CAAO,CACnBnT,IAAI,CAACvmB,SAAS,GAAO,CACrBumB,IAAI,CAACgT,OAAO,EACd,CAAC,CACH,CAAC,CACDA,OAAO,CAAE,kBAAW,CAClB,GAAI,IAAI,CAACv5B,SAAS,EACd,IAAI,CAACqF,IAAI,CAAC3P,MAAM,EACpB,GAAIgkC,EAAO,CAAG,EAAE,CACW,WAAW,EAAnC,MAAO,KAAI,CAAC75B,OAAuB,CAKjC65B,CAAO,CAAG,IAAI,CAACr0B,IAAI,CAJtBhG,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC+F,IAAI,CAAE,SAAS8N,CAAI,CAAE,CAC5BA,CAAI,CAACymB,IAAI,GAAKrT,IAAI,CAAC1mB,OAAO,EAAE65B,CAAO,CAAC3kC,IAAI,CAACoe,CAAI,CAClD,CAAC,CAAC,CAGJ,GAAI0mB,EAAS,CAAGC,UAAU,CAACJ,CAAO,CAAC,CACnC,IAAI,CAAC75B,OAAO,CAAGg6B,CAAS,CAACD,IAAI,IACzBp6B,EAAI,CAAwC,CAAC,CAAC,GAAtCq6B,CAAS,CAACr6B,IAAI,CAACpK,OAAO,CAAC,MAAM,CAAU,CAAI0a,aAAa,CAAC,GAAG,CAAC+pB,CAAS,CAACr6B,IAAI,CAAGq6B,CAAS,CAACr6B,IAAI,CACpGV,CAAO,CAAG,uGAAgG,CAACU,CAAI,CAAC,gBAAc,CAACsQ,aAAa,CAAC,eAAe,CAAC+pB,CAAS,CAACD,IAAI,CAAC,WAAU,CACvL58B,CAAC,CAAC,MAAM,CAAC,CAACtH,MAAM,CACjBsH,CAAC,CAAC,MAAM,CAAC,CAAC4B,IAAI,CAACE,CAAO,CAAC,CAEpB9B,CAAC,CAAC,OAAO,CAAC,CAACulB,MAAM,CAAC,6CAAyC,CAACzjB,CAAO,CAAC,cAAc,CAAC,CAC1F,CACF,CAAC,CAED,QAASi7B,aAAY,CAAE1gB,CAAG,CAAEqa,CAAG,CAAE,CAC/B,MAAOp+B,KAAI,CAACC,KAAK,CAACD,IAAI,CAACya,MAAM,EAAE,EAAI2jB,CAAG,CAAGra,CAAG,CAAG,CAAC,CAAC,CAAC,CAAGA,CACvD,CAEA,QAASygB,WAAU,CAACE,CAAK,CAAE,CACzB,MAAOA,EAAK,CAACD,YAAY,CAAC,CAAC,CAAEC,CAAK,CAACtkC,MAAM,CAAC,CAAC,CAAC,CAC9C,CAAC,GAEGihC,WAAU,CAAG,CACfsD,KAAK,CAAE,CACL,CAAC/8B,EAAE,CAAE,SAAS,CAAEg9B,EAAE,CAAE,gEAAiE,CAAC,CACtF,CAACh9B,EAAE,CAAE,OAAO,CAAEg9B,EAAE,CAAE,2CAA4C,CAAC,CAC/D,CAACh9B,EAAE,CAAE,MAAM,CAAEg9B,EAAE,CAAE,0CAA2C,CAAC,CAC7D,CAACh9B,EAAE,CAAE,YAAY,CAAEg9B,EAAE,CAAE,0CAA2C,CAAC,CACpE,CACDtD,OAAO,CAAE,iBAAS36B,CAAG,CAAE,CACrB,GAAIsV,EAAM,CAAG,IAAI,CAUjB,MATAlS,EAAC,CAAC3D,IAAI,CAAC,IAAI,CAACu+B,KAAK,CAAE,SAASpD,CAAI,CAAE,CAChC,GAAIsD,EAAK,CAAGtD,CAAI,CAACqD,EAAE,CAACljC,IAAI,CAACiF,CAAG,CAAC,CACjB,IAAI,EAAbk+B,CAAa,GACd5oB,CAAM,CAAG,CACPslB,IAAI,CAAEA,CAAI,CAAC35B,EAAE,CACb84B,IAAI,CAAEmE,CAAK,CAAC,CAAC,CACf,CAAC,CAEL,CAAC,CAAC,CACK5oB,CACT,CACF,CAAC,CAEGyY,OAAO,CAAG,CACZoQ,IAAI,CAAE,CACJ/qC,MAAM,CAAE,QAAQ,CAChBgrC,MAAM,CAAE,MAAM,CACdC,eAAe,GAAM,CACrB3qC,UAAU,GAAM,CAChB4qC,aAAa,GACf,CAAC,CACDC,UAAU,CAAE,qBAAW,CACrB33B,YAAY,gBAAmB,CAAGE,IAAI,CAACC,SAAS,CAAC,IAAI,CAACo3B,IAAI,CAC5D,CAAC,CACDh7B,IAAI,CAAE,eAAW,CAGf,GAFAnI,QAAQ,CAAC4kB,IAAI,CAACljB,SAAS,CAACI,GAAG,CAAC,YAAY,CAAC,CAEtC8J,YAAY,gBAAmB,CAChC,GAAI,CACF,GAAI43B,EAAM,CAAG13B,IAAI,CAACqT,KAAK,CAACvT,YAAY,gBAAmB,CAAC,CACxDxD,CAAC,CAACC,IAAI,CAACm7B,CAAM,CAAE,SAASx+B,CAAG,CAAEgZ,CAAG,CAAE,CAChC,IAAI,CAACmlB,IAAI,CAACnlB,CAAG,CAAC,CAAGhZ,CACnB,CAAC,CAAE,IAAI,CACT,CACA,MAAMgO,CAAC,CAAE,CACPmE,OAAO,CAAC+G,KAAK,CAAC,wBAAwB,CAAC,CACvCtS,YAAY,CAACI,UAAU,CAAC,iBAAiB,CAC3C,CACD,GAEGy3B,EAAU,kDAA0CnmC,EAAE,CAACf,cAAc,qFAA8E,CAEnJmnC,CAAQ,CAAG,qDAAiD,CAChEt7B,CAAC,CAACC,IAAI,CAAC,CACL,CAAC,QAAQ,CAAE,WAAW,CAAE,MAAM,CAAE,MAAM,CAAC,CACvC,CAAC,WAAW,CAAE,cAAc,CAAE,UAAU,CAAE,MAAM,CAAC,CACjD,CAAC,SAAS,CAAE,WAAW,CAAE,OAAO,CAAE,UAAU,CAAC,CAC7C,CAAC,aAAa,CAAE,YAAY,CAAE,SAAS,CAAE,MAAM,CAAC,CACjD,CAAG,SAASs7B,CAAK,CAAE,CAClBD,CAAQ,EAAI,wBAAuB,EAAEC,CAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAACR,IAAI,CAAC/qC,MAAM,CAAG,eAAe,CAAG,EAAE,CAAC,CACvF,gBAAc,CAACurC,CAAK,CAAC,CAAC,CAAC,CAAC,aAAW,CAACrmC,EAAE,CAAClF,MAAM,CAAC,GAAG,CAACkF,EAAE,CAACqmC,CAAK,CAAC,CAAC,CAAC,CAAC,CAAC,6BAC7C,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,0BAAwB,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,uBAChE,CAAC,CAAEjsB,IAAI,CAAC,IAAI,CAAC,CAAC,CACdgsB,CAAQ,EAAI,QAAQ,CACpB,GAAIE,EAAO,CAAG,2BAA0B,EAAuB,QAAQ,GAA7B,IAAI,CAACT,IAAI,CAAC/qC,MAAmB,CAAiB,EAAE,CAAhB,WAAgB,CAAC,CAAC,uDAAkD,CAC9IgQ,CAAC,CAACC,IAAI,CAAC,CACL,CAAC,CAAC,CAAE,SAAS,CAAE,KAAK,CAAE,UAAU,CAAC,CACjC,CAAC,CAAC,CAAE,YAAY,CAAE,OAAO,CAAE,UAAU,CAAC,CACvC,CAAG,SAASs7B,CAAK,CAAE,CAClBC,CAAO,EAAI,wBAAuB,EAAED,CAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAACR,IAAI,CAACE,eAAe,CAAG,eAAe,CAAG,EAAE,CAAC,CAC/F,gBAAc,CAACM,CAAK,CAAC,CAAC,CAAC,CAAC,aAAW,CAACrmC,EAAE,CAACqmC,CAAK,CAAC,CAAC,CAAC,CAAC,CAAC,6BAC/B,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,0BAAwB,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,uBAChE,CAAC,CAAEjsB,IAAI,CAAC,IAAI,CAAC,CAAC,CACdksB,CAAO,EAAI,QAAQ,CACnB,GAAIC,EAAQ,CAAG,yDAAqD,CACpEz7B,CAAC,CAACC,IAAI,CAAC,CACL,CAAC,CAAC,CAAE,YAAY,CAAE,MAAM,CAAE,UAAU,CAAC,CACrC,CAAC,CAAC,CAAE,YAAY,CAAE,QAAQ,CAAE,UAAU,CAAC,CACxC,CAAG,SAASs7B,CAAK,CAAE,CAClBE,CAAQ,EAAI,wBAAuB,EAAEF,CAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAACR,IAAI,CAACzqC,UAAU,CAAG,eAAe,CAAG,EAAE,CAAC,CAC3F,gBAAc,CAACirC,CAAK,CAAC,CAAC,CAAC,CAAC,aAAW,CAACrmC,EAAE,CAACqmC,CAAK,CAAC,CAAC,CAAC,CAAC,CAAC,6BAC/B,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,0BAAwB,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,uBAChE,CAAC,CAAEjsB,IAAI,CAAC,IAAI,CAAC,CAAC,CACdmsB,CAAQ,EAAI,QAAQ,CACpB,GAAIC,EAAU,CAAG,qDAAiD,CAClE17B,CAAC,CAACC,IAAI,CAAC,CACL,CAAC,MAAM,CAAE,WAAW,CAAE,YAAY,CAAE,MAAM,CAAC,CAC3C,CAAC,SAAS,CAAE,WAAW,CAAE,cAAc,CAAE,MAAM,CAAC,CAEjD,CAAG,SAASs7B,CAAK,CAAE,CAClBG,CAAU,EAAI,wBAAuB,EAAEH,CAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAACR,IAAI,CAACC,MAAM,CAAG,eAAe,CAAG,EAAE,CAAC,CACzF,gBAAc,CAACO,CAAK,CAAC,CAAC,CAAC,CAAC,aAAW,CAACrmC,EAAE,CAACqmC,CAAK,CAAC,CAAC,CAAC,CAAC,CAAC,6BAC/B,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,0BAAwB,CAACA,CAAK,CAAC,CAAC,CAAC,CAAC,uBAChE,CAAC,CAAEjsB,IAAI,CAAC,IAAI,CAAC,CAAC,CACdosB,CAAU,EAAI,QAAQ,CAEtB,GAAIC,EAAW,CAAG,sHAA2G,CAACzmC,EAAE,CAACzE,MAAM,CAAC,sFAA+E,CAEvNkN,CAAC,CAAC,mBAAmB,CAAC,CAAC4B,IAAI,CACzB87B,CAAU,CAACC,CAAQ,CAACE,CAAO,CAACG,CAAW,CAACF,CAAQ,CAACC,CAAU,CAC5D,CACD,IAAI,CAAC7W,IAAI,EAAE,CACR,IAAI,CAACkW,IAAI,CAACG,aAAa,EACxBv9B,CAAC,CAAC,mBAAmB,CAAC,CAACQ,QAAQ,CAAC,yBAAyB,CAAC,CAE5DR,CAAC,CAAC,mBAAmB,CAAC,CACrB+V,EAAE,CAAC,OAAO,CAAE,mBAAmB,CAAE,UAAW,CAC3C/V,CAAC,CAAC,IAAI,CAAC,CAACiW,WAAW,CAAC,iBAAiB,CACvC,CAAC,CAAC,CACDF,EAAE,CAAC,OAAO,CAAE,oBAAoB,CAAE,SAASrS,CAAE,CAAE,CAC9CA,CAAE,CAACwJ,eAAe,EAAE,CAAExJ,CAAE,CAACC,cAAc,EAAE,CACzC,GAAIs6B,EAAK,CAAGj+B,CAAC,CAAC,IAAI,CAAC,CAACO,OAAO,CAAC,YAAY,CAAC,CACzC09B,CAAK,CAAChoB,WAAW,CAAC,eAAe,CACnC,CAAC,CAAC,CACDF,EAAE,CAAC,OAAO,CAAE,kCAAkC,CAAE,SAASrS,CAAE,CAAE,CAC5DA,CAAE,CAACwJ,eAAe,EACpB,CAAC,CAAC,CACD6I,EAAE,CAAC,sEAAsE,CAAG,SAASiR,CAAK,CAAE,CAC3F,GAAI1oB,EAAO,CAAG0B,CAAC,CAACgnB,CAAK,CAACtU,MAAM,CAAC,CACY,oBAAoB,EAAzDsU,CAAK,CAAC1Q,aAAa,CAACyW,aAAqC,EAAKzuB,CAAO,CAACoX,QAAQ,CAAC,YAAY,CAAC,EAC9F,IAAI,CAACwoB,aAAa,CAAC5/B,CAAO,CAC9B,CAAC,CAAEqT,IAAI,CAAC,IAAI,CAAC,CAAC,CACboE,EAAE,CAAC,WAAW,CAAE,UAAU,CAAE,SAASrS,CAAE,CAAE,CACxCA,CAAE,CAACC,cAAc,EAAE,CACnBqZ,YAAY,CAAC+H,UAAU,CAACpT,IAAI,CAAC,IAAI,CAAC,CAACjO,CAAE,CACvC,CAAC,CAAC,CACDqS,EAAE,CAAC,OAAO,CAAE,UAAU,CAAE,SAASrS,CAAE,CAAE,CACpCA,CAAE,CAACwJ,eAAe,EAAE,CACpBxJ,CAAE,CAACC,cAAc,EACnB,CAAC,CAAC,CACDoS,EAAE,CAAC,YAAY,CAAE,UAAU,CAAE,SAASrS,CAAE,CAAE,CACzCsZ,YAAY,CAACyI,SAAS,CAAC9T,IAAI,CAAC,IAAI,CAAC,EACnC,CAAC,CAAC,CACDoE,EAAE,CAAC,OAAO,CAAE,SAAS,CAAG,SAASrS,CAAE,CAAE,CACpC,GAAIpF,EAAO,CAAG0B,CAAC,CAAC0D,CAAE,CAACy6B,aAAa,CAAC,CAC/BF,CAAK,CAAG3/B,CAAO,CAACiC,OAAO,CAAC,YAAY,CAAC,CACrCmP,CAAQ,CAAGuuB,CAAK,CAAC51B,IAAI,CAAC,IAAI,CAAC,CAC3B+1B,CAAQ,CAAG/7B,CAAC,CAAC4c,SAAS,CAAC,IAAI,CAACof,KAAK,CAAE,CAAC,GAAM3uB,CAAQ,CAAC,CAAC,CACpD9b,CAAM,CAAG,IAAI,CAACyqC,KAAK,CAACD,CAAQ,CAAC,CAC/BxqC,CAAM,CAAC0qC,MAAM,CAAG,CAAC1qC,CAAM,CAAC0qC,MAAM,CAE3B1qC,CAAM,CAAC0qC,MAAM,EACdhgC,CAAO,CAAC,CAAC,CAAC,CAAC3C,SAAS,CAACI,GAAG,CAAC,SAAS,CAAC,CACnCuC,CAAO,CAACsD,IAAI,CAAC2Z,QAAQ,CAAC,QAAQ,CAAE,EAAE,IAAO,CAAC,CAC1CrV,WAAW,CAACe,QAAQ,CAAC,QAAQ,CAAEyI,CAAQ,CAAC,CACxCuuB,CAAK,CAACz9B,QAAQ,CAAC,eAAe,CAAC,GAG/BlC,CAAO,CAAC,CAAC,CAAC,CAAC3C,SAAS,CAACC,MAAM,CAAC,SAAS,CAAC,CACtC0C,CAAO,CAACsD,IAAI,CAAC2Z,QAAQ,CAAC,MAAM,CAAE,EAAE,IAAO,CAAC,CACxCrV,WAAW,CAACiB,UAAU,CAAC,QAAQ,CAAEuI,CAAQ,CAAC,CAC1CuuB,CAAK,CAAC79B,WAAW,CAAC,eAAe,CAAC,EAGpC,IAAI,CAACi+B,KAAK,CAACD,CAAQ,CAAC,CAAGxqC,CAAM,CAC7B,MAAO,KAAI,CAAC2qC,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACC,MAAM,CAAC,CAAC3tB,CAAQ,CACjD,CAAC,CAAEiC,IAAI,CAAC,IAAI,CAAC,CAAC,CAEd3R,CAAC,CAAC,YAAY,CAAC,CAACyD,KAAK,CAAE,SAASC,CAAE,CAAE,CAClC,GAAIpF,EAAO,CAAG0B,CAAC,CAAC0D,CAAE,CAACy6B,aAAa,CAAC,CACjC,IAAG7/B,CAAO,CAACoX,QAAQ,CAAC,cAAc,CAAC,EACnC,GAAI8oB,EAAM,CAAGlgC,CAAO,CAACuF,MAAM,EAAE,CAC3B5E,CAAG,CAAGX,CAAO,CAAC+J,IAAI,CAAC,KAAK,CAAC,CACzB4P,CAAG,CAAGumB,CAAM,CAACn2B,IAAI,CAAC,QAAQ,CAAC,CAC7Bm2B,CAAM,CAAC9/B,IAAI,CAAC,YAAY,CAAC,CAAC0B,WAAW,CAAC,cAAc,CAAC,CACrD9B,CAAO,CAACkC,QAAQ,CAAC,cAAc,CAAC,CACrB,QAAQ,GAAhByX,CAAgB,EAAY,QAAQ,GAAhBA,CAAgB,CAAEhZ,CAAG,CAAG,CAAC,CAACA,CAAG,CAExC,QAAQ,EAAfA,CAAe,CAAEe,CAAC,CAAC,aAAa,CAAC,CAACI,WAAW,CAAC,UAAU,CAAC,CACvDJ,CAAC,CAAC,aAAa,CAAC,CAACQ,QAAQ,CAAC,UAAU,CAAC,CAE5C,IAAI,CAAC48B,IAAI,CAACnlB,CAAG,CAAC,CAAGhZ,CAAG,CACpB,IAAI,CAACu+B,UAAU,EAAE,CACN,YAAY,GAApBvlB,CAAoB,CAElBhZ,CAAG,CAAEe,CAAC,CAAC,mBAAmB,CAAC,CAACI,WAAW,CAAC,YAAY,CAAC,CACnDJ,CAAC,CAAC,mBAAmB,CAAC,CAACQ,QAAQ,CAAC,YAAY,CAAC,CAH3B,IAAI,CAACi+B,KAAK,EAAE,CAKvC,CAAC,CAAE9sB,IAAI,CAAC,IAAI,CAAC,CAAC,CACd3R,CAAC,CAAC,kBAAkB,CAAC,CAACyD,KAAK,CAAE,SAASC,CAAE,CAAE,CACxCA,CAAE,CAACC,cAAc,EAAE,CACnB,IAAI,CAACujB,IAAI,EACX,CAAC,CAAEvV,IAAI,CAAC,IAAI,CAAC,CAAC,CAEd3R,CAAC,CAAC,aAAa,CAAC,CAAC+V,EAAE,CAAC,OAAO,CAAE,UAAW,CACtC,GAAIumB,EAAK,CAAGt8B,CAAC,CAAC,IAAI,CAAC,CAACf,GAAG,EAAE,CAAC4C,WAAW,EAAE,CAAC3I,OAAO,CAAC,IAAI,CAAE,MAAK,CAAC,CAC5D,GAAI,CACF4N,QAAQ,CAAClL,MAAM,CAAC,YAAY,CAC9B,CAAE,MAAMqR,CAAC,CAAE,CAAC,CACTqvB,CAAK,CAAC5jC,MAAM,CACboO,QAAQ,CAACC,MAAM,CAAC,YAAY,CAAE,qDAAoD,CAACu1B,CAAK,CAAC,wBAAuB,CAAC,CAC9Gx1B,QAAQ,CAAClL,MAAM,CAAC,YAAY,CACnC,CAAC,CAAC,CAAC6rB,OAAO,CAAC,OAAO,CACpB,CAAC,CACDP,IAAI,CAAE,eAAW,CACflnB,CAAC,CAAC,mBAAmB,CAAC,CAAC4B,IAAI,mEAAwDrK,EAAE,CAACpF,OAAO,cAAY,CAEzG,IAAI,CAACosC,QAAQ,CAAG,CAACjhC,IAAI,CAAE,CAAC,CAAC,CAAEohC,OAAO,CAAE,CAAC,CAAC,CAAC,CACvC,IAAI,CAACL,KAAK,CAAG,IAAI,CAEjBr+B,CAAC,CAACmtB,OAAO,CAAC,iBAAiB,CAAE,GAAI1yB,KAAI,EAAE,CAACE,OAAO,EAAG,CAAC,CAClD8M,IAAI,CAAC,IAAI,CAACg3B,KAAK,CAAC9sB,IAAI,CAAC,IAAI,CAAC,CAAC,CAC3B2b,IAAI,CAAC,SAAS3kB,CAAG,CAAE,CAClB,KAAMA,EACR,CAAC,CACH,CAAC,CACDg2B,SAAS,CAAE,CACTC,KAAK,CAAE,CAAC,KAAK,CAAE,KAAK,CAAE,KAAK,CAAC,CAC5BC,QAAQ,CAAE,CAAC,MAAM,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAC,CACrDC,cAAc,CAAE,CAAC,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAC,CACnDvO,KAAK,CAAE,CAAC,KAAK,CAAE,KAAK,CAAC,CACrBwO,KAAK,CAAE,CAAC,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CACpC,CAAC,CACDC,WAAW,CAAE,CAAC,EAAE,CAAE,OAAO,CAAE,KAAK,CAAE,GAAG,CAAE,KAAK,CAAC,CAC7C5R,UAAU,CAAE,oBAAS7jB,CAAS,CAAE01B,CAAK,CAAE,CACjB,WAAW,EAA5B,MAAOA,EAAqB,GAAEA,CAAK,GAAQ,EAC9C,GAAIzkC,EAAI,CAAG,GAAIC,KAAI,CAAa,GAAI,CAAhB8O,CAAgB,CAAC,CACnC21B,CAAG,CAAG,IAAI,CAACC,SAAS,CAACC,IAAI,CAAC3nC,cAAc,CAACD,MAAM,CAAC,CAAG,IAAI,CAAC2nC,SAAS,CAACC,IAAI,CAAC5nC,MAAM,CAAC,CAACgD,CAAI,CAAC6kC,MAAM,EAAE,CAAC,CAAG,IAAI,CAACF,SAAS,CAACC,IAAI,CAAChwC,EAAE,CAACoL,CAAI,CAAC6kC,MAAM,EAAE,CAAC,CACrIC,CAAE,CAAGj9B,CAAC,CAAC6tB,OAAO,CAAC11B,CAAI,CAAC+kC,WAAW,EAAE,CAAG,GAAG,CAAE,CAAC,CAAE,CAAC,CAAC,CAC9CC,CAAE,CAAGn9B,CAAC,CAAC6tB,OAAO,CAAC11B,CAAI,CAACilC,QAAQ,EAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CACvCC,CAAG,CAAe,IAAI,GAAfloC,MAAe,CAAI,IAAI,CAAC2nC,SAAS,CAACQ,IAAI,CAACtoC,EAAE,CAACmD,CAAI,CAACilC,QAAQ,EAAE,CAAC,CAAGjlC,CAAI,CAACilC,QAAQ,EAAE,CAAC,CAAC,CACrFG,CAAE,CAAGv9B,CAAC,CAAC6tB,OAAO,CAAC11B,CAAI,CAACqlC,OAAO,EAAE,CAAE,CAAC,CAAE,CAAC,CAAC,CACpCC,CAAE,CAAGz9B,CAAC,CAAC6tB,OAAO,CAAC11B,CAAI,CAACulC,QAAQ,EAAE,CAAE,CAAC,CAAE,CAAC,CAAC,CACrC/E,CAAE,CAAG34B,CAAC,CAAC6tB,OAAO,CAAC11B,CAAI,CAACwlC,UAAU,EAAE,CAAE,CAAC,CAAE,CAAC,CAAC,CACvCC,CAAE,CAAG59B,CAAC,CAAC6tB,OAAO,CAAC11B,CAAI,CAAC0lC,UAAU,EAAE,CAAE,CAAC,CAAE,CAAC,CAAC,CACzC,MAAO,CAACjB,CAAK,CACK,IAAI,GAAfznC,MAAe,CACfooC,CAAE,CAAC,GAAG,CAACJ,CAAE,CAAC,GAAG,CAACF,CAAE,CAAC,UAAK,CACtBE,CAAE,CAAC,GAAG,CAACI,CAAE,CAAC,GAAG,CAACN,CAAE,CAAC,KAAM,CACZ,IAAI,GAAf9nC,MAAe,CACf0nC,CAAG,CAAC,GAAG,CAACU,CAAE,CAAC,GAAG,CAACF,CAAG,CAAC,QAAG,CAACJ,CAAE,CAAC,UAAK,CAC/BE,CAAE,CAAC,GAAG,CAACI,CAAE,CAAC,GAAG,CAACN,CAAE,CAAC,IAAI,CAACJ,CAAG,CAAC,MAAS,EACtCY,CAAE,CAAC,GAAG,CAAC9E,CAAE,CAAC,GAAG,CAACiF,CACpB,CAAC,CACDd,SAAS,CAAE,CACTC,IAAI,CAAE,CACJ/nC,EAAE,CAAE,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,CAC/CjI,EAAE,CAAE,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAChD,CAAC,CACDuwC,IAAI,CAAE,CACJtoC,EAAE,CAAE,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAAC,oBAAK,CAC9E,CACF,CAAC,CACDonC,KAAK,CAAE,eAASp2B,CAAI,CAAE,CAEpB,GADmB,WAAW,EAA3B,MAAOA,EAAoB,GAAEA,CAAI,CAAG,IAAI,CAACg2B,KAAK,GAC9C,CAACh2B,CAAI,EASR,GAPAhG,CAAC,CAACC,IAAI,CAAC+F,CAAI,CAAE,SAAS83B,CAAK,CAAE3mC,CAAC,CAAE,CAC9B6I,CAAC,CAACC,IAAI,CAAC,CAAC,IAAI,CAAE,aAAa,CAAE,QAAQ,CAAE,SAAS,CAAE,aAAa,CAAE,WAAW,CAAE,MAAM,CAAE,QAAQ,CAAE,UAAU,CAAE,mBAAmB,CAAC,CAAE,SAAS8K,CAAI,CAAE,CAC/I+yB,CAAK,CAAC/yB,CAAI,CAAC,CAAG,CAAC,CAAC+yB,CAAK,CAAC/yB,CAAI,CAC5B,CAAC,CAAC,CACF/E,CAAI,CAAC7O,CAAC,CAAC,CAAG2mC,CACZ,CAAC,CAAC,CAEsB,QAAQ,GAA7B,IAAI,CAAC/C,IAAI,CAAC/qC,MAAmB,EAAI,IAAI,CAAC+qC,IAAI,CAACE,eAAe,CAC3D,IAAI,CAACe,KAAK,CAAGh8B,CAAC,CAAC+9B,WAAW,CAAC/3B,CAAI,CAAE,CAAC,UAAU,CAAE,QAAQ,CAAC,CAAE,CAAC,MAAM,CAAE,MAAM,CAAC,CAAC,CAAC,IACxE,CACH,GAAIg4B,EAAG,CAAG,CAAC,IAAI,CAACjD,IAAI,CAAC/qC,MAAM,CAAC,CACJ,QAAQ,GAA7B,IAAI,CAAC+qC,IAAI,CAAC/qC,MAAmB,EAC9BguC,CAAG,CAACtoC,IAAI,CAAC,QAAQ,CAAC,CACpB,IAAI,CAACsmC,KAAK,CAAGh8B,CAAC,CAAC+9B,WAAW,CAAC/3B,CAAI,CAAEg4B,CAAG,CAAEh+B,CAAC,CAACi+B,MAAM,CAAC,MAAM,CAAED,CAAG,CAAC3nC,MAAM,CAAC,CACpE,CAEA,GAAIkJ,EAAI,CAAG,EAAE,CAEbS,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC+7B,KAAK,CAAE,SAASzqC,CAAM,CAAE,CAClCgO,CAAI,EAAI,IAAI,CAAC2+B,UAAU,CAAC3sC,CAAM,CAChC,CAAC,CAAE,IAAI,CAAC,CAERoM,CAAC,CAAC,mBAAmB,CAAC,CAAC4B,IAAI,CAACA,CAAI,CAAC,CACnC,CAAC,CACDs8B,aAAa,CAAE,uBAASzoB,CAAG,CAAE,CAC3B,GAAkDzC,EAAG,CAAjD6mB,CAAI,CAAGpkB,CAAG,CAACpN,IAAI,CAAC,MAAM,CAAC,CAAEnI,CAAE,CAAGuV,CAAG,CAACpN,IAAI,CAAC,IAAI,CAAC,CAC9Cf,CAAO,CAAGmO,CAAG,CAAClV,OAAO,CAAC,YAAY,CAAC,CACnCmP,CAAQ,CAAGpI,CAAO,CAACe,IAAI,CAAC,IAAI,CAAC,CACpB,KAAK,EAAbwxB,CAAa,EACd75B,CAAC,CAAC5E,GAAG,CAAC0X,aAAa,CAAC,mBAAmB,CAAC5S,CAAE,CAAG,SAASiZ,CAAG,CAAE,CACzD1D,CAAG,CAAC7M,WAAW,CAAC,aAAY,CAACuQ,CAAG,CAACqnB,aAAa,CAAC,KAAI,CAAC,CACpD,IAAI,CAACjC,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACC,MAAM,CAAC,CAAC3tB,CAAQ,CAAC,CAAGpI,CAAO,CAAC,CAAC,CAAC,CAACm5B,SACzD,CAAC,CAAE9uB,IAAI,CAAC,IAAI,CAAC,CAAC,CACL,KAAK,EAAbkoB,CAAa,EACd75B,CAAC,CAAC5E,GAAG,CAAC,gCAAgC,CAAC8E,CAAE,CAAC,OAAO,CAAG,SAASiZ,CAAG,CAAE,CAChE1D,CAAG,CAAC7M,WAAW,CAAC,aAAY,CAACuQ,CAAG,CAAC,CAAC,CAAC,CAACunB,gBAAgB,CAAC,KAAI,CAAC,CAC1D,IAAI,CAACnC,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACC,MAAM,CAAC,CAAC3tB,CAAQ,CAAC,CAAGpI,CAAO,CAAC,CAAC,CAAC,CAACm5B,SACzD,CAAC,CAAE9uB,IAAI,CAAC,IAAI,CAAC,CACjB,CAAC,CAED4uB,UAAU,CAAE,oBAAS3sC,CAAM,CAAE,CAC3B,GAAG,IAAI,CAAC2qC,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACC,MAAM,CAAC,CAAC5lC,cAAc,CAAC7D,CAAM,CAACsM,EAAE,CAAC,CAC1D,MAAO,KAAI,CAACq+B,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACC,MAAM,CAAC,CAACzpC,CAAM,CAACsM,EAAE,CAAC,CAEnD,GAAG,CAACtM,CAAM,CAAC+sC,SAAS,CAAE,CACpB/sC,CAAM,CAAC0P,GAAG,CAAG,GAAG,CAACjD,cAAc,CAAC,OAAO,CAACzM,CAAM,CAACsM,EAAE,CAAC,OAAO,IAGrD0gC,EAAW,CAAG,uFAAmF,CACrGC,CAAS,CAAG,qFAAiF,CAEzF9B,CAAK,CAAGnrC,CAAM,CAACktC,MAAM,CAAIltC,CAAM,CAACktC,MAAM,CAACpiC,IAAI,CAAC,SAAAuO,CAAC,QAAc,SAAS,EAAnBA,CAAC,CAAC5Y,IAAiB,EAAC,EAAI,SAAS,CAAI,IAAI,CAE9F,GAAG,CAAC0qC,CAAK,EAAc,SAAS,GAAnBA,CAAmB,CAC9BnrC,CAAM,CAACmtC,UAAU,CACjB,YAAW,CAACntC,CAAM,CAAC0P,GAAG,CAAC,sEACY,EAAY,SAAS,GAAnBy7B,CAAmB,CAAG,sCAAQ,CAAG,SAAS,CAAC,aACzE,KAEJ,CACH,GACE18B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACC,KAAK,CAAEG,CAAK,CAACiC,SAAS,CAAC,EAEjD3+B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACE,QAAQ,CAAEE,CAAK,CAACiC,SAAS,CAAC,EAGlD3+B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACpO,KAAK,CAAEwO,CAAK,CAACiC,SAAS,CAAC,EAE9B,CAAC,CAAnB,CAACjC,CAAK,CAAC1hB,OAAY,EAED,CAAC,CAAnB,CAAC0hB,CAAK,CAACzhB,OACT,CACD,CACA,GAAI2jB,EAAK,CAAG5+B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACC,KAAK,CAAEG,CAAK,CAACiC,SAAS,CAAC,CACzDjC,CAAK,CAACiC,SAAS,CACf,KAAK,CACPE,CAAQ,CAAG7+B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACI,KAAK,CAAEA,CAAK,CAACiC,SAAS,CAAC,WACvDjC,CAAK,CAACiC,SAAS,aAAIjC,CAAK,CAAC1qC,IAAI,MAChC0qC,CAAK,CAAC1qC,IAAI,CACZ8sC,CAAO,CAAsB,KAAK,EAAxBpC,CAAK,CAACiC,SAAkB,CAAG,0DAAsD,CAAG,EAAE,CAClGptC,CAAM,CAACmtC,UAAU,CACjB,YAAW,CAACntC,CAAM,CAAC0P,GAAG,CAAC,uDACJ,CAAC49B,CAAQ,CAAC,IAAI,CAACD,CAAK,CAAC,IAAG,CAACE,CAAO,QAC5C,CACPvtC,CAAM,CAACwtC,QAAQ,CACf,mBAAkB,CAACF,CAAQ,CAAC,IAAI,CAACD,CAAK,CAAC,IAAG,CAACE,CAAO,CAAC,GACrD,CAAC,IAWI,CACH,GAAIE,EAAS,CAAG,CAACh/B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACG,cAAc,CAAEC,CAAK,CAACiC,SAAS,CAAC,CACzEpkB,CAAK,CAAGykB,CAAS,CACfxsB,mBAAmB,CAACkqB,CAAK,CAACiC,SAAS,CAAC,sBACtB3+B,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACI,KAAK,CAAEA,CAAK,CAACiC,SAAS,CAAC,6DAE3CjC,CAAK,CAACiC,SAAS,QAAM,OAAK,CAElDptC,CAAM,CAACmtC,UAAU,uCACWntC,CAAM,CAAC0P,GAAG,oCAAwBsZ,CAAK,QAAM,CAEtEva,CAAC,CAAC8yB,QAAQ,CAAC,IAAI,CAACwJ,SAAS,CAACpO,KAAK,CAAEwO,CAAK,CAACiC,SAAS,CAAC,GAClDptC,CAAM,CAACwtC,QAAQ,CACf,mBAAkB,CAACrC,CAAK,CAAC1qC,IAAI,CAAC,GAAG,CAAC0qC,CAAK,CAACiC,SAAS,CAAC,sBAAqB,CAE3E,CAYIptC,CAAM,CAACwtC,QAAQ,GACjBxtC,CAAM,CAACwtC,QAAQ,CAAG,8BAA2B,CAACxtC,CAAM,CAAC0P,GAAG,CAAC,wBAAqB,CAAC1P,CAAM,CAACwtC,QAAQ,CAAC,MAAM,CACzG,CAKAxtC,CAAM,CAAC0tC,EAAE,CAAG,+BAA4B,CAAC/pC,EAAE,CAACvE,UAAU,CAAC,8BAA0B,CAACY,CAAM,CAAC0P,GAAG,CAAC,8BAA2B,CAAC1P,CAAM,CAACsM,EAAE,CAAC,MAAM,CAGzItM,CAAM,CAACia,OAAO,CACd,YAAW,CAACja,CAAM,CAAC0P,GAAG,CAAC,GAAG,CAAC1P,CAAM,CAACsM,EAAE,CAAC,0GAEhC,CAGL,GAAIqhC,EAAY,CAChB,qGAC+B,CAAC3tC,CAAM,CAAC4tC,WAAW,CAAC,SAAS,CACzD5tC,CAAM,CAAC6tC,UAAU,GAClBF,CAAY,CAAG,YAAW,CAAC3tC,CAAM,CAAC0P,GAAG,CAAC,GAAG,CAAC1P,CAAM,CAAC6tC,UAAU,CAAC,6BAA0B,CAACF,CAAY,CAAC,MAAM,EAC5G,GAAItxC,EAAO,CACX,2BAAyB,CAACsxC,CAAY,CAAC,QAAQ,CAC/CG,CAAM,CACN,0IAEiC,CAAC9tC,CAAM,CAAC8tC,MAAM,CAAC,qBACzC,CACP1N,CAAI,CACJ,sDACa,CAACz8B,EAAE,CAACxE,YAAY,CAAC,GAAG,CAACa,CAAM,CAACogC,IAAI,CAAC,+BAA2B,CAAC3zB,cAAc,CAAC,GAAG,EAAmB,CAAC,CAAfzM,CAAM,CAACogC,IAAQ,CAAIpgC,CAAM,CAACogC,IAAI,CAAC,OAAO,CAAG,EAAE,CAAC,CAAC,GAAG,CAACpgC,CAAM,CAACsM,EAAE,CAAC,qIAEzH,CAACtM,CAAM,CAACogC,IAAI,CAAC,iCAEzC,CACPpgC,CAAM,CAAC+tC,gBAAgB,CAAG1xC,CAAO,CAACyxC,CAAM,CAAC1N,CAAI,CAG7CpgC,CAAM,CAACguC,eAAe,CAAG,CAAChuC,CAAM,CAACguC,eAAe,CAChDhuC,CAAM,CAACiuC,gBAAgB,CAAG,MAAM,EACW,MAAM,EAA9Ch8B,YAAY,qBAAkC,EACJ,MAAM,EAA9CA,YAAY,qBAAkC,GAC5CjS,CAAM,CAACgG,IAAI,EAAIhG,CAAM,CAACkuC,QAAQ,EAAIluC,CAAM,CAACguC,eAAe,CAC1D,IACDhuC,CAAM,CAACiuC,gBAAgB,CAAG,MAAM,EAGpC,GAAIE,EAAM,CACV,CAACnuC,CAAM,CAACgG,IAAI,CAAG,iCAA+B,CAAChG,CAAM,CAACgG,IAAI,CAAC,SAAS,CAAG,EAAE,GACxEhG,CAAM,CAACkuC,QAAQ,CAAG,kCAAgC,CAACluC,CAAM,CAACkuC,QAAQ,CAAC,SAAS,CAAG,EAAE,CAAC,EAClFluC,CAAM,CAACguC,eAAe,CAAG,oCAAkC,CAAC,IAAI,CAAC5C,WAAW,CAACprC,CAAM,CAACguC,eAAe,CAAC,CAAC,WAAW,CAAG,EAAE,CAAC,CACvHhuC,CAAM,CAACmuC,MAAM,CAAG,+DAA2D,EAAGA,CAAM,EAAI,mCAAiC,EAAEC,sBAAsB,EAAIzqC,EAAE,CAACnF,SAAS,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,CAGtL,GAAI6vC,EAAE,CAAG,yBAAuB,CAChCruC,CAAM,CAAC4G,IAAI,CAAG,4CAA0C,CAAC,IAAI,CAAC4yB,UAAU,CAACx5B,CAAM,CAAC2V,SAAS,CAAC,CAAC,QAAQ,CACnG3V,CAAM,CAACsuC,WAAW,CAAG,6CAA2C,CAAC,IAAI,CAAC9U,UAAU,CAACx5B,CAAM,CAAC2V,SAAS,CAAE,CAAC,CAAC,CAAC,QAAQ,CAG9G3V,CAAM,CAACuuC,UAAU,CAAG9/B,CAAC,CAACiD,MAAM,CAAC8kB,SAAS,CAACx2B,CAAM,CAACwuC,OAAO,CAAG,GAAG,CAAGxuC,CAAM,CAACinB,OAAO,CAAC,CAAChZ,WAAW,EAAE,CAAC,CAE5FjO,CAAM,CAACinB,OAAO,CAAGjnB,CAAM,CAACinB,OAAO,CAAC3hB,OAAO,CAAC,OAAO,CAAE,IAAG,CAAC,CAErDtF,CAAM,CAAC+sC,SAAS,GAAO,CACvB,IAAI,CAACtC,KAAK,CAACh8B,CAAC,CAAC4c,SAAS,CAAC,IAAI,CAACof,KAAK,CAAE,CAACn+B,EAAE,CAAEtM,CAAM,CAACsM,EAAE,CAAC,CAAC,CAAC,CAAGtM,CACzD,CAEAA,CAAM,CAAG,IAAI,CAACyuC,eAAe,CAACzuC,CAAM,CAAC,CAErC,GAAIgO,EAAI,CAAG,IAAI,CAAC0gC,OAAO,CAAC,IAAI,CAAClF,IAAI,CAACC,MAAM,CAAC,CAAC1rB,IAAI,CAAC,IAAI,CAAC,CAAC/d,CAAM,CAAC,CAE5D,MADA,KAAI,CAAC2qC,QAAQ,CAAC,IAAI,CAACnB,IAAI,CAACC,MAAM,CAAC,CAACzpC,CAAM,CAACsM,EAAE,CAAC,CAAG0B,CAAI,CAC1CA,CACT,CAAC,CACDygC,eAAe,CAAE,yBAASzuC,CAAM,CAAE,CAChCA,CAAM,CAAC0qC,MAAM,CAAIp4B,WAAW,CAACc,QAAQ,CAAC,QAAQ,CAAEpT,CAAM,CAACsM,EAAE,CAAC,CAC1D,GAAIsmB,EAAG,CAAG5yB,CAAM,CAAC2uC,QAAQ,CAAG,0FAAsF,CAAG,EAAE,CACvHC,CAAI,CAAG5uC,CAAM,CAAC6uC,MAAM,CAAG,4FAAwF,CAAG,EAAE,CACpHC,CAAS,CAAG9uC,CAAM,CAAC+uC,iBAAiB,CAAG,kGAA8F,CAAG,EAAE,CAC1Ij8B,CAAI,CAAG,0CAAyC,EAAE9S,CAAM,CAAC0qC,MAAM,CAAG,UAAU,CAAG,EAAE,CAAC,CAAC,0BAAwB,EAAE1qC,CAAM,CAAC0qC,MAAM,CAAG,QAAQ,CAAG,MAAM,CAAC,CAAC,iBAAgB,CAChKsE,CAAM,CAAG,6FAAyF,CAClG3xC,CAAG,CAAG,kGAA8F,CACpG4xC,CAAG,CAAG,iGAA6F,CACnG1xC,CAAG,CAAG,iGAA6F,CAEnG,MADAyC,EAAM,CAACkvC,kBAAkB,CAAG,kJAA6DJ,CAAS,CAAClc,CAAG,CAACgc,CAAI,CAAC97B,CAAI,+UAA8D,CACvK9S,CACT,CAAC,CACD0uC,OAAO,CAAE,CACPhlC,IAAI,CAAE,cAAS1J,CAAM,CAAE,CACrB,MAAO,kBACUA,CAAM,CAACsM,EAAE,CAAC,8BAA4B,EAAEtM,CAAM,CAAC0qC,MAAM,CAAG,gBAAgB,CAAG,EAAE,CAAC,CAAC,mBAAiB,CAAC1qC,CAAM,CAACuuC,UAAU,CAAC,sEAE1G,CACnBvuC,CAAM,CAACmtC,UAAU,CAClB,yCAAuC,CACpCntC,CAAM,CAAC0tC,EAAE,CACT1tC,CAAM,CAACkvC,kBAAkB,CAC5B,+DAC2C,CAAClvC,CAAM,CAACiuC,gBAAgB,CAAC,QAAO,CACxEjuC,CAAM,CAACmuC,MAAM,CACbnuC,CAAM,CAAC4G,IAAI,CACb,gDAC0B,CACxB5G,CAAM,CAACia,OAAO,CACdja,CAAM,CAAC+tC,gBAAgB,CAC1B,kFAGK,CAAC/tC,CAAM,CAACwuC,OAAO,CAAC,OAAO,CAC5BxuC,CAAM,CAACinB,OAAO,CAChB,sBACK,CACNjnB,CAAM,CAACwtC,QAAQ,CAClB,QACF,CAAC,CACD1C,OAAO,CAAE,iBAAS9qC,CAAM,CAAE,CACxB,MAAO,kBACUA,CAAM,CAACsM,EAAE,CAAC,iCAA+B,EAAEtM,CAAM,CAAC0qC,MAAM,CAAG,gBAAgB,CAAG,EAAE,CAAC,CAAC,mBAAiB,CAAC1qC,CAAM,CAACuuC,UAAU,CAAC,qCAC9G,CACrBvuC,CAAM,CAACwtC,QAAQ,CACf,oEAC2B,CAACxtC,CAAM,CAAC0tC,EAAE,CAAC,4CACb,CAAC1tC,CAAM,CAAC+tC,gBAAgB,CAAC,8DAEvB,CACxB/tC,CAAM,CAACia,OAAO,CACf,gCAA+B,CAACja,CAAM,CAACiuC,gBAAgB,CAAC,QAAO,CAC5DjuC,CAAM,CAACmuC,MAAM,CACbnuC,CAAM,CAACsuC,WAAW,CACpB,QAAQ,CACRtuC,CAAM,CAACkvC,kBAAkB,CAC5B,kEAEO,CAAClvC,CAAM,CAACwuC,OAAO,CAAC,OAAO,CAC5BxuC,CAAM,CAACinB,OAAO,CAChB,kCAGN,CACF,CACF,CAAC,CAED,QAASuP,UAAS,CAACxoB,CAAI,CAAE,CACvB,GAAImhC,EAAG,CAAG9oC,QAAQ,CAACo9B,cAAc,CAAC2L,kBAAkB,CAAC,KAAK,CAAC,CAACnkB,IAAI,CAEhE,MADAkkB,EAAG,CAACvtB,SAAS,CAAG5T,CAAI,CACbmhC,CAAG,CAACE,WAAW,EAAIF,CAAG,CAACz0B,SAAS,EAAI,EAC7C,CAAC,GAEG40B,UAAS,CAAG,CACd,GAAIzH,OAAM,EAAG,OACN5rB,aAAY,EAEZ,IAAI,CAACszB,OAAO,GACf,IAAI,CAACA,OAAO,CAAG9gC,CAAC,CAAC+gC,MAAM,CAAC,EAAE,CAACzmC,GAAG,CAACC,IAAI,CAAC3C,QAAQ,CAACwB,gBAAgB,CAAC,iBAAiB,CAAC,CAAE,SAAAwR,CAAC,QAAIA,EAAC,CAACjB,OAAO,CAACq3B,OAAO,EAAC,CAAC,EACrG,IAAI,CAACF,OAAO,EAHV,CAACE,OAAO,CAInB,CAAC,CACDC,UAAU,CAAE,oBAAA1pC,CAAI,QAAW,KAAI,GAAXA,CAAW,EAAIoG,CAAC,4BAAoBpG,CAAI,QAAK,CAAC2G,OAAO,CAAC,iBAAiB,CAAC,CAAC8H,IAAI,CAAC,SAAS,CAAC,CAC9G,CAAC,CAEG8B,aAAa,CAAG,CAClB/H,IAAI,CAAE,cAASmhC,CAAK,CAAE,YACfA,CAAK,GACRA,CAAK,CAAG,CAAEtpC,QAAQ,CAACkC,aAAa,CAAC,iCAA+B,CAAC,CAAC+U,OAAO,EAE3E,IAAI,CAACsyB,UAAU,CAAG39B,YAAY,WAAc,CAAIE,IAAI,CAACqT,KAAK,CAACvT,YAAY,WAAc,CAAC,EAAI,CAAE,CAAC,CAAI,CAAE,CAAC,CACpGq9B,SAAS,CAACzH,MAAM,CAACxjC,OAAO,CAAC,SAAAorC,CAAO,CAAI,CAClC,GAAII,EAAO,CAAG,CAAI,CAACD,UAAU,CAAC/rC,cAAc,CAAC4rC,CAAO,CAAC,CAAGK,QAAQ,CAAC,CAAI,CAACF,UAAU,CAACH,CAAO,CAAC,CAAC,CAAG,CAAC,CAC3FI,CAAO,CAAGF,CAAK,GAChB,CAAI,CAACC,UAAU,CAACH,CAAO,CAAC,CAAGE,CAAK,CAChC19B,YAAY,CAACC,OAAO,CAAC,YAAY,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAI,CAACw9B,UAAU,CAAC,CAAC,CAEvE,CAAC,CACH,CAAC,CACDp5B,gBAAgB,CAAE,0BAASb,CAAS,CAAkB,IAAhBuE,EAAS,wDAAC,IAAI,CAC7C,IAAI,CAAC01B,UAAU,EAClB,IAAI,CAACphC,IAAI,EAAE,CACb,GAAIlC,EAAE,CAAI2P,YAAY,CAAaqzB,SAAS,CAACI,UAAU,CAACx1B,CAAS,CAAC,CAAzCu1B,OAAyC,CAC9DnjC,CAAE,IACY,IAAI,GAAhBqJ,CAAgB,EAAyB,WAAW,EAAhC,MAAOA,EAAyB,IACtDA,CAAS,CAAGjR,IAAI,CAAC8a,KAAK,CAAC,GAAI3Y,KAAI,EAAE,CAACE,OAAO,EAAE,CAAG,GAAI,CAAC,EACrD,IAAI,CAAC6oC,UAAU,CAACtjC,CAAE,CAAC,CAAGqJ,CAAS,CAC/B1D,YAAY,CAACC,OAAO,CAAC,YAAY,CAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACw9B,UAAU,CAAC,CAAC,CAEvE,CAAC,CACD3zC,MAAM,CAAE,iBAAW,CACZ,IAAI,CAAC2zC,UAAU,EAClB,IAAI,CAACphC,IAAI,EAAE,CACbpC,CAAC,CAACgvB,IAAI,CAAC,CACL1rB,GAAG,CAAE,oBAAoB,CACzB+E,IAAI,CAAE,IAAI,CAACm7B,UAAU,CACrBG,QAAQ,CAAE,MAAM,CAChBhpB,OAAO,CAAE,iBAAStS,CAAI,CAAE,CACtBrI,CAAC,CAAC,mBAAmB,CAAC,CAACpE,MAAM,EAAE,CAC/BoE,CAAC,CAAC,cAAc,CAAC,CAACI,WAAW,CAAC,aAAa,CAAC,CAC5CiC,CAAC,CAACC,IAAI,CAAC+F,CAAI,CAAE,SAASpJ,CAAG,CAAEyF,CAAG,CAAE,CAC9B,GAAa,CAAC,CAAT,CAACzF,CAAQ,CAAE,CACd,GAAI2kC,EAAM,iDAAuC3kC,CAAG,YAAU,CAC5D4kC,CAAI,CAAG7jC,CAAC,8BAAsB0E,CAAG,SAAM,CACrCm/B,CAAI,CAACnrC,MAAM,GACbmrC,CAAI,CAAC7/B,MAAM,CAAC4/B,CAAM,CAAC,CACnB5jC,CAAC,qCAA6B6jC,CAAI,CAACtjC,OAAO,CAAC,YAAY,CAAC,CAACyH,IAAI,CAAC,IAAI,CAAC,CAAC9I,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAK,CAAC2E,MAAM,EAAE,CAACrD,QAAQ,CAAC,aAAa,CAAC,EAE3HR,CAAC,sCAA8B0E,CAAG,QAAK,CAACV,MAAM,CAAC4/B,CAAM,CACvD,CACF,CAAC,CACH,CACF,CAAC,CACH,CACF,CAAC,CAEGn7B,SAAS,CAAG,CACdq7B,UAAU,CAAE,oBAASC,CAAO,CAAEr0B,CAAQ,CAAEjI,CAAI,CAAEkI,CAAM,CAAE,YACpD3P,CAAC,CAAC5E,GAAG,CAAc,GAAG,GAAhBsU,CAAgB,WACfoD,aAAa,gCAAuBixB,CAAO,eAAMp0B,CAAM,YACvDmD,aAAa,aAAIixB,CAAO,iBAAQr0B,CAAQ,kBAASs0B,kBAAkB,CAAG1rC,IAAI,CAACya,MAAM,EAAE,CAAG,EAAE,CAAE,CAAC,CACjGjG,IAAI,CAAC,SAAAzE,CAAI,CAAI,CACZ,GAAIvU,EAAK,CAAGuU,CAAI,CAACxI,KAAK,CAAC,iKAAiK,CAAC,CACxLlD,GAAG,CAAC,SAAAkD,CAAK,CAAI,CACZ,GAAIsZ,EAAG,CAAGtZ,CAAK,CAACA,KAAK,CAAC,oKAAoK,CAAC,CAC3L,MAAO,CACLK,EAAE,CAAE,CAACiZ,CAAG,CAAC,CAAC,CAAC,CACX0F,IAAI,CAAE1F,CAAG,CAAC,CAAC,CACb,CACF,CAAC,CAAC,CACF,GAAiB,GAAG,GAAhBzJ,CAAgB,CAAE,CACpB,GAAIu0B,EAAK,CAAG57B,CAAI,CAACxI,KAAK,CAAC,0BAA0B,CAAC,CAC9CokC,CAAK,GACPv0B,CAAQ,CAAGu0B,CAAK,CAAC,CAAC,CAAC,CACvB,CACA,GAAInwC,CAAK,CAAC4E,MAAM,CAAE,CAChB,GAAIwrC,EAAO,CAAGpwC,CAAK,CAAC6I,GAAG,CAAC,SAAA9I,CAAI,CAAI,CAE9B,MADA,EAAI,CAACswC,MAAM,WAAIJ,CAAO,aAAIlwC,CAAI,CAACqM,EAAE,EAAG,CAAGrM,CAAI,CAACgrB,IAAI,CACzChrB,CAAI,CAACqM,EACd,CAAC,CAAC,CACe,GAAG,GAAhBwP,CAAgB,GAClB,CAAI,CAAC00B,UAAU,WAAIL,CAAO,aAAIr0B,CAAQ,EAAG,CAAGw0B,CAAO,CAEvD,CACAz8B,CAAI,EACN,CAAC,CAAC,CACD6lB,IAAI,CAAC,SAAA3kB,CAAG,CAAI,CACXlB,CAAI,CAACkB,CAAG,CAACuQ,MAAM,EAAI,MAAM,CAC3B,CAAC,CACH,CAAC,CACDmrB,QAAQ,CAAE,kBAASrQ,CAAI,CAAE1Z,CAAQ,CAA0B,YAAxBypB,CAAO,wDAAC1jC,cAAc,CACvDL,CAAC,CAAC5E,GAAG,WAAI0X,aAAa,aAAIixB,CAAO,aAAU,CAAC,EAAP/P,CAAO,CAAG,EAAE,WAAMA,CAAI,SAAO,EAAG,CACpElnB,IAAI,CAAC,SAAAzE,CAAI,CAAI,OACRi8B,CAAK,WAAGj8B,CAAI,CAACxI,KAAK,CAAC,2KAA2K,CAAC,qBAAvL,EAA0L,CAAC,CAAC,CACpMykC,CAAK,GACPrqC,QAAQ,CAACkC,aAAa,CAAC,0BAA0B,CAAC,CAAC+N,kBAAkB,CAAC,UAAU,CAAEo6B,CAAK,CAAC,CACxF,CAAI,CAACC,WAAW,EAAE,EAEpBjqB,CAAQ,EACV,CAAC,CACH,CAAC,CACDiqB,WAAW,uBAAG,CACZ,GAAIC,EAAW,CAAG,EAAE,CACpBvqC,QAAQ,CAACwB,gBAAgB,CAAC,iBAAiB,CAAC,CAACxD,OAAO,CAAC,SAAA+4B,CAAG,CAAI,CACtDwT,CAAW,CAACrP,QAAQ,CAACnE,CAAG,CAAC9wB,EAAE,CAAC,GAC9B8wB,CAAG,CAAC/Z,sBAAsB,CAACrb,MAAM,EAAE,CACnCo1B,CAAG,CAACjO,kBAAkB,CAACnnB,MAAM,EAAE,CAC/Bo1B,CAAG,CAACjO,kBAAkB,CAACnnB,MAAM,EAAE,CAC/Bo1B,CAAG,CAACp1B,MAAM,EAAE,EAEd4oC,CAAW,CAACzsC,IAAI,CAACi5B,CAAG,CAAC9wB,EAAE,CACzB,CAAC,CACH,CAAC,CACD8lB,OAAO,CAAE,iBAAS+d,CAAO,CAAEr0B,CAAQ,CAAEC,CAAM,CAAE2K,CAAQ,CAAEmqB,CAAS,CAAE,YAC5DC,CAAU,CAAG,IAAI,CAACP,MAAM,WAAIJ,CAAO,aAAIp0B,CAAM,EAAG,CACpD,GAAI+0B,CAAU,CAEZ,WADApqB,EAAQ,IAAQoqB,CAAU,CAAC,CAI3B,GAAI,CAACD,CAAS,CAAE,CACd,GAAI3vC,EAAK,GAAQ,CACjB,GAAIivC,CAAO,GAAK1jC,cAAc,CAAE,CAC9B,GAAIC,EAAK,CAAGN,CAAC,kBAAW2P,CAAM,MAAI,CAClC,GAAIrP,CAAK,CAAC5H,MAAM,CAAE,CAChB,GAAI7E,EAAI,CAAGyM,CAAK,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAACkgC,SAAS,CAClD,IAAI,CAAC0D,MAAM,WAAIJ,CAAO,aAAIp0B,CAAM,EAAG,CAAG9b,CAAI,CAC1CiB,CAAK,GAAO,CACZwlB,CAAQ,IAAQzmB,CAAI,CACtB,CACF,CACKiB,CAAK,EACR,IAAI,CAACgvC,UAAU,CAACC,CAAO,CAAEr0B,CAAQ,CAAE,SAAA/G,CAAG,CAAI,CACpCA,CAAG,CACL2R,CAAQ,CAAC3R,CAAG,CAAC,CAGb,CAAI,CAACqd,OAAO,CAAC+d,CAAO,CAAEr0B,CAAQ,CAAEC,CAAM,CAAE2K,CAAQ,IAEpD,CAAC,CAAE3K,CAAM,CAEb,CAAC,IAEC2K,EAAQ,CAAC,IAAI,CAGnB,CAAC,CACD5R,SAAS,CAAE,mBAASq7B,CAAO,CAAEr0B,CAAQ,CAAEi1B,CAAK,CAAErqB,CAAQ,CAAEmqB,CAAS,CAAE5V,CAAK,CAAE,YACpE+V,CAAS,EAAG/V,CAAK,EAAW,IAAI,CAACuV,UAAU,WAAIL,CAAO,aAAIr0B,CAAQ,EAAG,CACrEk1B,CAAS,EACPD,CAAK,GACPC,CAAS,CAAGA,CAAS,CAAC3nC,MAAM,CAAC,SAAA5D,CAAC,QAAIA,EAAC,CAAGsrC,CAAK,CAAC,CAAC,CAAC,EAAItrC,CAAC,CAAGsrC,CAAK,CAAC,CAAC,CAAC,EAAC,EAEjErqB,CAAQ,IAAQsqB,CAAS,CAACC,MAAM,CAAC,SAAC1a,CAAG,CAAExa,CAAM,QAAKwa,EAAG,CAAG,CAAI,CAACga,MAAM,WAAIJ,CAAO,aAAIp0B,CAAM,EAAG,EAAE,EAAE,CAAC,CAAC,EAG5F80B,CAAS,CAWZnqB,CAAQ,CAAC,IAAI,CAAC,CAVd,IAAI,CAACwpB,UAAU,CAACC,CAAO,CAAEr0B,CAAQ,CAAE,SAAA/G,CAAG,CAAI,CACpCA,CAAG,CACL2R,CAAQ,CAAC3R,CAAG,CAAC,CAGb,CAAI,CAACD,SAAS,CAACq7B,CAAO,CAAEr0B,CAAQ,CAAEi1B,CAAK,CAAErqB,CAAQ,IAErD,CAAC,CAMP,CAAC,CACD6pB,MAAM,CAAE,CAAC,CAAC,CACVC,UAAU,CAAE,CAAC,CAAC,CACdU,eAAe,CAAE,CAAC,CAAC,CACnB/2B,UAAU,CAAE,oBAASg2B,CAAO,CAAE,YAC5B,MAAO,IAAI74B,QAAO,CAAC,SAACC,CAAO,CAAEqkB,CAAM,CAAK,OAClC,KAAAuU,CAAe,CACV54B,CAAO,CAAClR,QAAQ,CAACkC,aAAa,CAAC,WAAW,CAAC,CAAC,CACjD,CAAI,CAAC2oC,eAAe,CAACf,CAAO,CAAC,CACxB54B,CAAO,CAAC,CAAI,CAAC25B,eAAe,CAACf,CAAO,CAAC,CAAC,KAC/C/jC,EAAC,CAAC5E,GAAG,WAAI0X,aAAa,aAAIixB,CAAO,MAAI,CACpCj3B,IAAI,CAAC,SAAAzE,CAAI,CAAI,CACZ,GAAI08B,EAAE,CAAG18B,CAAI,CAACxI,KAAK,CAAC,2JAA2J,CAAC,CAC3KklC,CAAE,EACLvV,CAAM,CAAC,GAAG,CAAC,CACb,GAAIr2B,EAAC,CAAGc,QAAQ,CAAC+pB,aAAa,CAAC,KAAK,CAAC,CACrC7qB,CAAC,CAACqc,SAAS,CAAGuvB,CAAE,CAAC,CAAC,CAAC,CACnB,GAAIC,EAAc,CACM,WAAW,EAA/B,MAAOltB,SAAwB,GAAKktB,CAAc,CAAGD,CAAE,CAAC,CAAC,CAAC,CAACllC,KAAK,CAAC,yCAAyC,CAAC,CAAC,EAC9GgqB,IAAI,CAACC,EAAE,CAACkb,CAAc,CAAC,CAAC,CAAC,CAAE,iBAAM5zB,QAAO,CAAC0I,GAAG,CAAC,iBAAiB,CAAC,EAAC,CAElE,CAAI,CAACgrB,eAAe,CAACf,CAAO,CAAC,CAAG5qC,CAAC,CAAC8rC,UAAU,CAC5C95B,CAAO,CAAC,CAAI,CAAC25B,eAAe,CAACf,CAAO,CAAC,CACvC,CAAC,CAAC,CACDzW,IAAI,CAAC,SAAA3kB,CAAG,CAAI,CACX6mB,CAAM,CAAC7mB,CAAG,CAACuQ,MAAM,EAAI,MAAM,CAC7B,CAAC,CACH,CAAC,CACH,CACF,CAAC,CAEGuP,cAAa,CAAG,CAClB/c,MAAM,CAAE,iBAAiC,IAAxBwC,EAAO,wDAAG,IAAI,CAACA,OAAO,CACjCA,CAAO,EACL,CAAC,IAAI,CAACg3B,KAAK,GACb,IAAI,CAACA,KAAK,CAAG,IAAI,CAACC,QAAQ,CAACxzB,IAAI,CAAC,IAAI,CAAC,EACvCxW,MAAM,CAAC0W,gBAAgB,CAAC,QAAQ,CAAE,IAAI,CAACqzB,KAAK,CAAC,CAC7C,IAAI,CAACC,QAAQ,EAAE,EAGfhqC,MAAM,CAACiqC,mBAAmB,CAAC,QAAQ,CAAE,IAAI,CAACF,KAAK,CAAC,CAClD,IAAI,CAACh3B,OAAO,CAAGA,CACjB,CAAC,CACDA,OAAO,GAAO,CACdi3B,QAAQ,CAAE,mBAAW,YACnB,KAAI,IAAI,CAACn8B,IAAI,EAAI7N,MAAM,CAACm6B,OAAO,CAAGn6B,MAAM,CAACqB,WAAW,CAAGvC,QAAQ,CAAC4kB,IAAI,CAACwmB,YAAY,GACjF,IAAI,CAACr8B,IAAI,GAAO,CAEhB,GAAIU,EAAI,CAAGzP,QAAQ,CAACkC,aAAa,CAAC,eAAe,CAAC,CAClD,GAAIuN,CAAI,CAAE,IACJ47B,EAAM,CAAGrrC,QAAQ,CAACkC,aAAa,CAAC,0BAA0B,CAAC,CAAC8hB,IAAI,CAAC,UAAU,4DAA2D,CACtI+V,CAAI,CAAG,CAACtqB,CAAI,CAAC4E,SAAS,CAC1B7F,SAAS,CAAC47B,QAAQ,CAACrQ,CAAI,CAAE,UAAM,CAC7BtqB,CAAI,CAACQ,kBAAkB,CAAC,UAAU,iBAAW8pB,CAAI,YAAU,CAC3DtqB,CAAI,CAAC9N,MAAM,EAAE,CACb0pC,CAAM,CAAC1pC,MAAM,EAAE,CACf,CAAI,CAACoN,IAAI,GACX,CAAC,CACH,CAAC,CACH,CACF,CAAC,CAED,QAASu8B,eAAc,CAAC/pC,CAAE,CAAE,CAC1B,GAAIu+B,EAAG,CAAG,wBAAwB,CAChCl6B,CAAK,CAAGrE,CAAE,CAACyX,GAAG,CAACpT,KAAK,CAACk6B,CAAG,CAAC,CAC3B,GAAKl6B,CAAK,EACV,GAAI2lC,EAAI,CAAGhqC,CAAE,CAACiH,YAAY,CAAC,QAAQ,CAAC,CAACZ,WAAW,EAAE,CAAC3C,KAAK,CAAC,GAAG,CAAC,CAC7D,GAAKsmC,CAAI,CAAC9sC,MAAM,EAChB,GAAIc,EAAC,CAAGgsC,CAAI,CAACptC,OAAO,CAACyH,CAAK,CAAC,CAAC,CAAC,CAACgC,WAAW,EAAE,CAAC,CACnC,CAAC,CAAC,EAAPrI,CAAO,EAAIA,CAAC,EAAKgsC,CAAI,CAAC9sC,MAAM,CAAC,CAAE,GACnC8C,CAAE,CAACyX,GAAG,CAAGzX,CAAE,CAACyX,GAAG,CAAC/Z,OAAO,CAAC6gC,CAAG,YAAMyL,CAAI,CAAChsC,CAAC,CAAC,CAAC,CAAC,EAAG,EAHpB,CAI3B,CAEA,QAAS2J,YAAW,CAAC8U,CAAG,CAAE,CACxB,GAAIhZ,EAAG,CAAG,IAAI,CAAEoJ,CAAI,CAAGxC,YAAY,CAACoS,CAAG,CAAC,CACxC,GAAoB,WAAW,EAA3B,MAAO5P,EAAoB,CAC7B,GAAI,CACFpJ,CAAG,CAAG8G,IAAI,CAACqT,KAAK,CAAC/Q,CAAI,CACvB,CACA,MAAM4E,CAAC,CAAE,CACPmE,OAAO,CAAC+G,KAAK,CAAClL,CAAC,CAAC,CAChBpH,YAAY,CAACI,UAAU,CAACgS,CAAG,CAC7B,CAEF,MAAOhZ,EACT,CAGA,GAAIwG,KAAI,CAAG,CACT1N,IAAI,CAAE,cAAS2D,CAAC,CAAE,YA8ChB,MA5CAA,EAAC,CAACwE,EAAE,CAAG,CAAC,CAACmC,CAAC,CAACoM,QAAQ,CAACpM,CAAC,CAAC0rB,GAAG,EAAE,CAAC,EAAEhuB,QAAQ,CAAC,EAAE,CAAC,CAC1C,IAAI,CAACgf,SAAS,CAAC7U,kBAAkB,CAAC,YAAY,CAAE,IAAI,CAACu7B,UAAU,CAAC/pC,CAAC,CAAC,CAAC,CACnEA,CAAC,CAACF,EAAE,CAAGvB,QAAQ,CAACgpB,cAAc,eAAQvnB,CAAC,CAACwE,EAAE,EAAG,CAE7CxE,CAAC,CAACF,EAAE,CAACwP,KAAK,CAAC06B,SAAS,CAAG,CAAChqC,CAAC,CAACF,EAAE,CAACmF,qBAAqB,EAAE,CAACpE,MAAM,CAAG,IAAI,CAClEb,CAAC,CAACF,EAAE,CAACmF,qBAAqB,EAAE,CAE5BjF,CAAC,CAACF,EAAE,CAACgT,OAAO,CAAG,UAAM,CACnB,MAAO9S,EAAC,CAACiqC,OAAO,CAChBjqC,CAAC,CAACkqC,MAAM,GAAQ,CAChBlqC,CAAC,CAACmqC,GAAG,GAAO,CACZnqC,CAAC,CAACF,EAAE,CAACG,SAAS,CAACI,GAAG,CAAC,UAAU,CAAC,CAC9BL,CAAC,CAACF,EAAE,CAACwP,KAAK,CAAC06B,SAAS,CAAG,CAAChqC,CAAC,CAACF,EAAE,CAACmF,qBAAqB,EAAE,CAACpE,MAAM,CAAG,IAChE,CAAC,CAEDb,CAAC,CAACF,EAAE,CAAC0+B,YAAY,CAAG,UAAM,CAExB,CAAI,CAAC5vB,KAAK,CAACuI,KAAK,CAAC,CAAC,CAAC,CAACuE,OAAO,EAAE,CAAC1Y,IAAI,CAAC,SAAAonC,CAAE,CAAI,CAEvC,MADAA,EAAE,CAACF,MAAM,GAAO,CACRE,CAAE,CAAC5lC,EAAE,EAAIxE,CAAC,CAACwE,EACrB,CAAC,CACH,CAAC,CAEDxE,CAAC,CAACF,EAAE,CAACw+B,YAAY,CAAG,UAAM,CACxB,CAAI,CAAC1vB,KAAK,CAACrS,OAAO,CAAC,SAAA8tC,CAAE,CAAI,CACvBA,CAAE,CAACH,MAAM,GACX,CAAC,CAAC,CACF,CAAI,CAACI,cAAc,CAAGvlC,UAAU,CAAC,UAAM,CACrC,CAAI,CAAC6J,KAAK,CAACrS,OAAO,CAAC,SAAA8tC,CAAE,CAAI,CACnB,CAACA,CAAE,CAACH,MAAM,EAAIG,CAAE,CAACF,GAAG,EAAIE,CAAE,CAACvqC,EAAE,GAC/BuqC,CAAE,CAACvqC,EAAE,CAACG,SAAS,CAACI,GAAG,CAAC,UAAU,CAAC,CAC/BgqC,CAAE,CAACvqC,EAAE,CAACwP,KAAK,CAAC06B,SAAS,CAAG,CAAChqC,CAAC,CAACF,EAAE,CAACmF,qBAAqB,EAAE,CAACpE,MAAM,CAAG,IAAI,CAEvE,CAAC,CACH,CAAC,CAAE,GAAG,CACR,CAAC,CACD,IAAI,CAACy6B,KAAK,CAACj7B,GAAG,CAAC,UAAM,CACnB,CAAI,CAACkqC,aAAa,CAACvqC,CAAC,CAAC,CACrBA,CAAC,CAACF,EAAE,CAACG,SAAS,CAACC,MAAM,CAAC,SAAS,CAAC,CAChCF,CAAC,CAACF,EAAE,CAACwP,KAAK,CAAC06B,SAAS,CAAG,IAAI,CAC3BhqC,CAAC,CAACF,EAAE,CAACG,SAAS,CAACC,MAAM,CAAC,cAAc,CACtC,CAAC,CAAC,CACF,IAAI,CAAC0O,KAAK,CAACvS,IAAI,CAAC2D,CAAC,CAAC,CAClB,IAAI,CAACmJ,IAAI,EAAE,CACJnJ,CAAC,CAACwE,EACX,CAAC,CACDsY,SAAS,CAAE,mBAAS0tB,CAAG,CAAE,CACvB,GAAIxqC,EAAC,CAAG,IAAI,CAACyqC,IAAI,CAACD,CAAG,CAAC,CAClBxqC,CAAC,EACHA,CAAC,CAACF,EAAE,CAACgT,OAAO,EAChB,CAAC,CACDwoB,KAAK,CAAE,CACL1sB,KAAK,CAAE,EAAE,CACTtB,IAAI,GAAO,CACXjN,GAAG,CAAE,aAASnE,CAAE,CAAE,YAChB,MAAO,IAAIsT,QAAO,CAAC,SAACC,CAAO,CAAEqkB,CAAM,CAAK,CAChC,CAAI,CAACxmB,IAAI,CAMb,CAAI,CAACsB,KAAK,CAACvS,IAAI,CAAC,iBAAMoT,EAAO,CAACvT,CAAE,EAAE,CAAC,EAAC,EALpC,CAAI,CAAC+tC,OAAO,CAAGllC,UAAU,CAAC,CAAI,CAACiJ,IAAI,CAACiI,IAAI,CAAC,CAAI,CAAC,CAAkB,GAAI,CAApB,CAAI,CAACy0B,QAAe,CAAC,CACrE,CAAI,CAACp9B,IAAI,GAAO,CAChBmC,CAAO,CAACvT,CAAE,EAAE,CAAC,CAKjB,CAAC,CACH,CAAC,CACD8R,IAAI,CAAE,eAAW,CACf,GAAIA,EAAI,CAAG,IAAI,CAACY,KAAK,CAACC,KAAK,EAAE,CACvBb,CAAI,EAGRA,CAAI,EAAE,CACN,IAAI,CAACi8B,OAAO,CAAGllC,UAAU,CAAC,IAAI,CAACiJ,IAAI,CAACiI,IAAI,CAAC,IAAI,CAAC,CAAkB,GAAI,CAApB,IAAI,CAACy0B,QAAe,CAAC,EAHrE,IAAI,CAACp9B,IAAI,GAKb,CAAC,CACDo9B,QAAQ,CAAE,EACZ,CAAC,CACDD,IAAI,CAAE,cAASD,CAAG,CAAE,CAClB,MAAO,KAAI,CAAC57B,KAAK,CAAC5L,IAAI,CAAC,SAAAhD,CAAC,QAAIA,EAAC,CAACwE,EAAE,EAAIgmC,CAAG,EACzC,CAAC,CACDr2C,MAAM,CAAE,gBAASq2C,CAAG,CAAEG,CAAG,CAAE,CACzB,GAAI3qC,EAAC,CAAG,IAAI,CAACyqC,IAAI,CAACD,CAAG,CAAC,CACH,QAAQ,WAAhBG,CAAG,CAAa,GACzB3qC,CAAC,CAAG,CAACkf,GAAG,CAAEyrB,CAAG,CAAC,EAChBhkC,CAAC,CAACi2B,MAAM,CAAC58B,CAAC,CAAE2qC,CAAG,CAAC,CAEhB,IAAI,CAACJ,aAAa,CAACvqC,CAAC,CAAC,CACrBA,CAAC,CAACF,EAAE,CAACwJ,YAAY,CAAC,UAAU,CAAEtJ,CAAC,CAAC4qC,GAAG,CAAC,CACpC5qC,CAAC,CAACF,EAAE,CAACW,aAAa,CAAC,cAAc,CAAC,CAACqZ,SAAS,CAAG,IAAI,CAACiwB,UAAU,CAAC/pC,CAAC,CAAE,CAAC,CAAC,CACpE,IAAI,CAACmJ,IAAI,EACX,CAAC,CACD4gC,UAAU,CAAE,oBAAS/pC,CAAC,CAAsB,IAApB6qC,EAAY,6DAC9BC,CAAQ,gGAEgC,IAAI,CAACC,OAAO,CAAC/qC,CAAC,CAAC4qC,GAAG,CAAC,0EAEpC5qC,CAAC,CAACkf,GAAG,UAAQ,OACpC2rB,EAAY,CACPC,CAAQ,4BACS9qC,CAAC,CAACmqC,GAAG,CAAG,wBAAwB,CAAG,sBAAsB,0BAAenqC,CAAC,CAAC4qC,GAAG,wBAAa5qC,CAAC,CAACwE,EAAE,4DAElHsmC,CAAQ,8BAGhB,CAAC,CACDC,OAAO,CAAE,CACP/gC,IAAI,CAAE,SAAS,CACfiD,GAAG,CAAE,OAAO,CACZ0B,IAAI,CAAE,MAAM,CACZgH,IAAI,CAAE,SACR,CAAC,CACDq1B,aAAa,CAAE,wBAAW,YACxB,GAAI,CAAC,IAAI,CAACp8B,KAAK,CAAC5R,MAAM,CAEpB,WADA,KAAI,CAACX,IAAI,CAAC,CAACuuC,GAAG,CAAE,MAAM,CAAE1rB,GAAG,CAAErjB,EAAE,CAAC7C,YAAY,CAAEiyC,OAAO,GAAM,CAAC,CAAC,CAG/D,GAAI5wB,EAAE,CAAG,IAAI,CAACgJ,SAAS,CAACpjB,SAAS,CAAC+P,MAAM,CAAC,cAAc,CAAC,CACxDjL,UAAU,CAAC,iBAAM,EAAI,CAACse,SAAS,CAAC/T,KAAK,CAAC8T,QAAQ,CAAI/I,CAAE,CAAG,MAAM,CAAG,IAAK,EAAEA,CAAE,CAAG,GAAG,CAAG,CAAC,CACrF,CAAC,CACDkwB,aAAa,CAAE,uBAASvqC,CAAC,CAAE,CACrBA,CAAC,CAACiqC,OAAO,EACXzjB,YAAY,CAACxmB,CAAC,CAACiqC,OAAO,CAAC,CACrBjqC,CAAC,CAACkqC,MAAM,GACVlqC,CAAC,CAACkqC,MAAM,GAAQ,EAClB,GAAIjgC,EAAI,CAAIjK,CAAC,CAACiK,IAAI,EAAe,CAAC,GAAZjK,CAAC,CAACiK,IAAU,CAAIjK,CAAC,CAACiK,IAAI,CAAG,IAAI,CAACihC,cAAc,CAC9DjhC,CAAI,GACNjK,CAAC,CAACiqC,OAAO,CAAGllC,UAAU,CAAC,UAAM,CAC3B/E,CAAC,CAACmqC,GAAG,GAAO,CACNnqC,CAAC,CAACkqC,MAAM,GACZlqC,CAAC,CAACF,EAAE,CAACG,SAAS,CAACI,GAAG,CAAC,UAAU,CAAC,CAC9BL,CAAC,CAACF,EAAE,CAACwP,KAAK,CAAC06B,SAAS,CAAG,CAAChqC,CAAC,CAACF,EAAE,CAACmF,qBAAqB,EAAE,CAACpE,MAAM,CAAG,IAAI,CAEtE,CAAC,CAAS,GAAI,CAAXoJ,CAAW,CAAC,CACnB,CAAC,CACDihC,cAAc,CAAE,GAAG,CACnBxkC,IAAI,CAAE,eAAwC,YAA/BykC,CAAY,wDAAC,gBAAgB,CAG1C,GAFA5sC,QAAQ,CAAC4kB,IAAI,CAAC3U,kBAAkB,CAAC,WAAW,qBAAc28B,CAAY,sDAAiD,CACvH,IAAI,CAAC9nB,SAAS,CAAG9kB,QAAQ,CAACgpB,cAAc,CAAC4jB,CAAY,CAAC,CAClD,CAAE,IAAI,CAAC9nB,SAAS,CAElB,WADA3N,QAAO,CAAC+G,KAAK,CAAC,0BAA0B,CAAC,CAG3C,IAAI,CAAC4G,SAAS,CAACvQ,OAAO,CAAG,UAAM,CAC7B,GAAI,CAAI,CAACuQ,SAAS,CAACpjB,SAAS,CAACK,QAAQ,CAAC,cAAc,CAAC,CACnD,MAAO,EAAI,CAAC0qC,aAAa,EAE7B,CAAC,CAED,CAAC,KAAK,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAC,CAACzuC,OAAO,CAAC,SAAA6uC,CAAQ,CAAI,CAC1D,CAAI,CAACA,CAAQ,CAAC,CAAG,SAASprC,CAAC,CAAc,IAAZuN,EAAO,wDAAC,CAAC,CAAC,CAKrC,MAJiB,QAAQ,WAAdvN,CAAC,CAAa,GACvBA,CAAC,CAAG,CAACkf,GAAG,CAAElf,CAAC,CAAC,EACdA,CAAC,CAAC4qC,GAAG,CAAGQ,CAAQ,CAChBzkC,CAAC,CAACi2B,MAAM,CAAC58B,CAAC,CAAEuN,CAAO,CAAC,CACb,IAAI,CAAClR,IAAI,CAAC2D,CAAC,CACpB,CACF,CAAC,CAAC,CAEF,GAAIoe,EAAG,CAAG3W,WAAW,CAAC,cAAc,CAAC,EAAI,EAAE,CAC3C2W,CAAG,CAAC7hB,OAAO,CAAC,SAAAyD,CAAC,CAAI,CACfA,CAAC,CAACmqC,GAAG,GAAO,CACZ,CAAI,CAAC9mB,SAAS,CAAC7U,kBAAkB,CAAC,YAAY,CAAE,CAAI,CAACu7B,UAAU,CAAC/pC,CAAC,CAAC,CAAC,CACnE,CAAI,CAAC4O,KAAK,CAACvS,IAAI,CAAC2D,CAAC,CACnB,CAAC,CACH,CAAC,CACDqrC,WAAW,CAAE,EAAE,CACfliC,IAAI,CAAE,eAAW,CACf,GAAIo7B,EAAE,CAAG,EAAE,KACX59B,CAAC,CAAC2kC,SAAS,CAAC,IAAI,CAAC18B,KAAK,CAAC,CAACrS,OAAO,CAAC,SAAAyD,CAAC,CAAI,CAC/BA,CAAC,CAACmJ,IAAI,GAER,CAAC,KAAK,CAAE,QAAQ,CAAE,SAAS,CAAE,IAAI,CAAE,MAAM,CAAC,CAAC5M,OAAO,CAAC,SAAAgvC,CAAY,QAAI,OAAOvrC,EAAC,CAACurC,CAAY,CAAC,EAAC,CAC1FhH,CAAE,CAACloC,IAAI,CAAC2D,CAAC,CAAC,CAEd,CAAC,CAAC,CACKukC,CAAE,CAACvnC,MAAM,CAAG,IAAI,CAACquC,WAAW,EACjC9G,CAAE,CAAC11B,KAAK,EAAE,CAEZ1E,YAAY,aAAgB,CAAGE,IAAI,CAACC,SAAS,CAACi6B,CAAE,CAClD,CAAC,CACD31B,KAAK,CAAE,EACT,CAAC,CAED,QAAS+O,qBAAoB,CAAC6tB,CAAM,CAAE,CACpCzhC,IAAI,CAACkD,GAAG,CAACpR,EAAE,CAAC7D,QAAQ,CAAC,CACrB0d,OAAO,CAAC+G,KAAK,CAAC,uCAAuC,CAAE+uB,CAAM,CAAChuC,OAAO,CAAC,aAAa,CAAE,IAAI,CAAC,CAC5F"}